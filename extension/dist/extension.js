"use strict";var AL=Object.create;var Wf=Object.defineProperty;var SL=Object.getOwnPropertyDescriptor;var _L=Object.getOwnPropertyNames;var wL=Object.getPrototypeOf,TL=Object.prototype.hasOwnProperty;var Kt=(t,e)=>()=>(t&&(e=t(t=0)),e);var R=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),aE=(t,e)=>{for(var r in e)Wf(t,r,{get:e[r],enumerable:!0})},H9=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of _L(e))!TL.call(t,o)&&o!==r&&Wf(t,o,{get:()=>e[o],enumerable:!(n=SL(e,o))||n.enumerable});return t};var Xe=(t,e,r)=>(r=t!=null?AL(wL(t)):{},H9(e||!t||!t.__esModule?Wf(r,"default",{value:t,enumerable:!0}):r,t)),bL=t=>H9(Wf({},"__esModule",{value:!0}),t);var gE=R((kfe,ib)=>{"use strict";var Xf=Object.prototype.hasOwnProperty,ob=Object.prototype.toString,Q9=Object.defineProperty,Z9=Object.getOwnPropertyDescriptor,eb=function(e){return typeof Array.isArray=="function"?Array.isArray(e):ob.call(e)==="[object Array]"},tb=function(e){if(!e||ob.call(e)!=="[object Object]")return!1;var r=Xf.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&Xf.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var o;for(o in e);return typeof o>"u"||Xf.call(e,o)},rb=function(e,r){Q9&&r.name==="__proto__"?Q9(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},nb=function(e,r){if(r==="__proto__")if(Xf.call(e,r)){if(Z9)return Z9(e,r).value}else return;return e[r]};ib.exports=function t(){var e,r,n,o,i,s,u=arguments[0],a=1,c=arguments.length,d=!1;for(typeof u=="boolean"&&(d=u,u=arguments[1]||{},a=2),(u==null||typeof u!="object"&&typeof u!="function")&&(u={});a<c;++a)if(e=arguments[a],e!=null)for(r in e)n=nb(u,r),o=nb(e,r),u!==o&&(d&&o&&(tb(o)||(i=eb(o)))?(i?(i=!1,s=n&&eb(n)?n:[]):s=n&&tb(n)?n:{},rb(u,{name:r,newValue:t(d,s,o)})):typeof o<"u"&&rb(u,{name:r,newValue:o}));return u}});var sb=R((Lfe,WL)=>{WL.exports={name:"gaxios",version:"7.1.3",description:"A simple common HTTP client specifically for Google APIs and services.",main:"build/cjs/src/index.js",types:"build/cjs/src/index.d.ts",files:["build/"],exports:{".":{import:{types:"./build/esm/src/index.d.ts",default:"./build/esm/src/index.js"},require:{types:"./build/cjs/src/index.d.ts",default:"./build/cjs/src/index.js"}}},scripts:{lint:"gts check --no-inline-config",test:"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000",compile:"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs",fix:"gts fix",prepare:"npm run compile",pretest:"npm run compile",webpack:"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js",docs:"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../",prelint:"cd samples; npm link ../; npm install",clean:"gts clean"},repository:{type:"git",directory:"packages/gaxios",url:"https://github.com/googleapis/google-cloud-node-core.git"},keywords:["google"],engines:{node:">=18"},author:"Google, LLC",license:"Apache-2.0",devDependencies:{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6",assert:"^2.0.0",browserify:"^17.0.0",c8:"^10.0.0",cors:"^2.8.5",express:"^5.0.0",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",linkinator:"^6.1.2",mocha:"^11.1.0",multiparty:"^4.2.1",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","stream-browserify":"^3.0.0",tmp:"0.2.5","ts-loader":"^9.5.2",typescript:"^5.8.3",webpack:"^5.35.0","webpack-cli":"^6.0.1"},dependencies:{extend:"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2",rimraf:"^5.0.1"},homepage:"https://github.com/googleapis/google-cloud-node-core/tree/main/packages/gaxios"}});var ab=R((Ufe,ub)=>{"use strict";var zL=sb();ub.exports={pkg:zL}});var CE=R(xn=>{"use strict";var lb=xn&&xn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xn,"__esModule",{value:!0});xn.GaxiosError=xn.GAXIOS_ERROR_SYMBOL=void 0;xn.defaultErrorRedactor=db;var cb=lb(gE()),jL=lb(ab()),EE=jL.default.pkg;xn.GAXIOS_ERROR_SYMBOL=Symbol.for(`${EE.name}-gaxios-error`);var yE=class t extends Error{config;response;code;status;error;[xn.GAXIOS_ERROR_SYMBOL]=EE.version;static[Symbol.hasInstance](e){return e&&typeof e=="object"&&xn.GAXIOS_ERROR_SYMBOL in e&&e[xn.GAXIOS_ERROR_SYMBOL]===EE.version?!0:Function.prototype[Symbol.hasInstance].call(t,e)}constructor(e,r,n,o){if(super(e,{cause:o}),this.config=r,this.response=n,this.error=o instanceof Error?o:void 0,this.config=(0,cb.default)(!0,{},r),this.response&&(this.response.config=(0,cb.default)(!0,{},this.response.config)),this.response){try{this.response.data=KL(this.config.responseType,this.response?.bodyUsed?this.response?.data:void 0)}catch{}this.status=this.response.status}o instanceof DOMException?this.code=o.name:o&&typeof o=="object"&&"code"in o&&(typeof o.code=="string"||typeof o.code=="number")&&(this.code=o.code)}static extractAPIErrorFromResponse(e,r="The request failed"){let n=r;if(typeof e.data=="string"&&(n=e.data),e.data&&typeof e.data=="object"&&"error"in e.data&&e.data.error&&!e.ok){if(typeof e.data.error=="string")return{message:e.data.error,code:e.status,status:e.statusText};if(typeof e.data.error=="object"){n="message"in e.data.error&&typeof e.data.error.message=="string"?e.data.error.message:n;let o="status"in e.data.error&&typeof e.data.error.status=="string"?e.data.error.status:e.statusText,i="code"in e.data.error&&typeof e.data.error.code=="number"?e.data.error.code:e.status;if("errors"in e.data.error&&Array.isArray(e.data.error.errors)){let s=[];for(let u of e.data.error.errors)typeof u=="object"&&"message"in u&&typeof u.message=="string"&&s.push(u.message);return Object.assign({message:s.join(`
`)||n,code:i,status:o},e.data.error)}return Object.assign({message:n,code:i,status:o},e.data.error)}}return{message:n,code:e.status,status:e.statusText}}};xn.GaxiosError=yE;function KL(t,e){switch(t){case"stream":return e;case"json":return JSON.parse(JSON.stringify(e));case"arraybuffer":return JSON.parse(Buffer.from(e).toString("utf8"));case"blob":return JSON.parse(e.text());default:return e}}function db(t){let e="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function r(i){i&&i.forEach((s,u)=>{(/^authentication$/i.test(u)||/^authorization$/i.test(u)||/secret/i.test(u))&&i.set(u,e)})}function n(i,s){if(typeof i=="object"&&i!==null&&typeof i[s]=="string"){let u=i[s];(/grant_type=/i.test(u)||/assertion=/i.test(u)||/secret/i.test(u))&&(i[s]=e)}}function o(i){!i||typeof i!="object"||(i instanceof FormData||i instanceof URLSearchParams||"forEach"in i&&"set"in i?i.forEach((s,u)=>{(["grant_type","assertion"].includes(u)||/secret/.test(u))&&i.set(u,e)}):("grant_type"in i&&(i.grant_type=e),"assertion"in i&&(i.assertion=e),"client_secret"in i&&(i.client_secret=e)))}return t.config&&(r(t.config.headers),n(t.config,"data"),o(t.config.data),n(t.config,"body"),o(t.config.body),t.config.url.searchParams.has("token")&&t.config.url.searchParams.set("token",e),t.config.url.searchParams.has("client_secret")&&t.config.url.searchParams.set("client_secret",e)),t.response&&(db({config:t.response.config}),r(t.response.headers),t.response.bodyUsed&&(n(t.response,"data"),o(t.response.data))),t}});var hb=R(AE=>{"use strict";Object.defineProperty(AE,"__esModule",{value:!0});AE.getRetryConfig=YL;async function YL(t){let e=fb(t);if(!t||!t.config||!e&&!t.config.retry)return{shouldRetry:!1};e=e||{},e.currentRetryAttempt=e.currentRetryAttempt||0,e.retry=e.retry===void 0||e.retry===null?3:e.retry,e.httpMethodsToRetry=e.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],e.noResponseRetries=e.noResponseRetries===void 0||e.noResponseRetries===null?2:e.noResponseRetries,e.retryDelayMultiplier=e.retryDelayMultiplier?e.retryDelayMultiplier:2,e.timeOfFirstRequest=e.timeOfFirstRequest?e.timeOfFirstRequest:Date.now(),e.totalTimeout=e.totalTimeout?e.totalTimeout:Number.MAX_SAFE_INTEGER,e.maxRetryDelay=e.maxRetryDelay?e.maxRetryDelay:Number.MAX_SAFE_INTEGER;let r=[[100,199],[408,408],[429,429],[500,599]];if(e.statusCodesToRetry=e.statusCodesToRetry||r,t.config.retryConfig=e,!await(e.shouldRetry||JL)(t))return{shouldRetry:!1,config:t.config};let o=XL(e);t.config.retryConfig.currentRetryAttempt+=1;let i=e.retryBackoff?e.retryBackoff(t,o):new Promise(s=>{setTimeout(s,o)});return e.onRetryAttempt&&await e.onRetryAttempt(t),await i,{shouldRetry:!0,config:t.config}}function JL(t){let e=fb(t);if(t.config.signal?.aborted&&t.code!=="TimeoutError"||t.code==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!e.httpMethodsToRetry||!e.httpMethodsToRetry.includes(t.config.method?.toUpperCase()||"GET"))return!1;if(t.response&&t.response.status){let r=!1;for(let[n,o]of e.statusCodesToRetry){let i=t.response.status;if(i>=n&&i<=o){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function fb(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}function XL(t){let r=(t.currentRetryAttempt?0:t.retryDelay??100)+(Math.pow(t.retryDelayMultiplier,t.currentRetryAttempt)-1)/2*1e3,n=t.totalTimeout-(Date.now()-t.timeOfFirstRequest);return Math.min(r,n,t.maxRetryDelay)}});var _E=R(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.GaxiosInterceptorManager=void 0;var SE=class extends Set{};Qf.GaxiosInterceptorManager=SE});var mb=R(($fe,pb)=>{var qa=1e3,Ga=qa*60,Va=Ga*60,Su=Va*24,QL=Su*7,ZL=Su*365.25;pb.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return eU(t);if(r==="number"&&isFinite(t))return e.long?rU(t):tU(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function eU(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ZL;case"weeks":case"week":case"w":return r*QL;case"days":case"day":case"d":return r*Su;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Va;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ga;case"seconds":case"second":case"secs":case"sec":case"s":return r*qa;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function tU(t){var e=Math.abs(t);return e>=Su?Math.round(t/Su)+"d":e>=Va?Math.round(t/Va)+"h":e>=Ga?Math.round(t/Ga)+"m":e>=qa?Math.round(t/qa)+"s":t+"ms"}function rU(t){var e=Math.abs(t);return e>=Su?Zf(t,e,Su,"day"):e>=Va?Zf(t,e,Va,"hour"):e>=Ga?Zf(t,e,Ga,"minute"):e>=qa?Zf(t,e,qa,"second"):t+" ms"}function Zf(t,e,r,n){var o=e>=r*1.5;return Math.round(t/r)+" "+n+(o?"s":"")}});var wE=R((Hfe,gb)=>{function nU(t){r.debug=r,r.default=r,r.coerce=a,r.disable=s,r.enable=o,r.enabled=u,r.humanize=mb(),r.destroy=c,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let p=0;for(let m=0;m<d.length;m++)p=(p<<5)-p+d.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=e;function r(d){let p,m=null,E,y;function A(...S){if(!A.enabled)return;let b=A,P=Number(new Date),B=P-(p||P);b.diff=B,b.prev=p,b.curr=P,p=P,S[0]=r.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let v=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(O,z)=>{if(O==="%%")return"%";v++;let Z=r.formatters[z];if(typeof Z=="function"){let M=S[v];O=Z.call(b,M),S.splice(v,1),v--}return O}),r.formatArgs.call(b,S),(b.log||r.log).apply(b,S)}return A.namespace=d,A.useColors=r.useColors(),A.color=r.selectColor(d),A.extend=n,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(E!==r.namespaces&&(E=r.namespaces,y=r.enabled(d)),y),set:S=>{m=S}}),typeof r.init=="function"&&r.init(A),A}function n(d,p){let m=r(this.namespace+(typeof p>"u"?":":p)+d);return m.log=this.log,m}function o(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let p=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let m of p)m[0]==="-"?r.skips.push(m.slice(1)):r.names.push(m)}function i(d,p){let m=0,E=0,y=-1,A=0;for(;m<d.length;)if(E<p.length&&(p[E]===d[m]||p[E]==="*"))p[E]==="*"?(y=E,A=m,E++):(m++,E++);else if(y!==-1)E=y+1,A++,m=A;else return!1;for(;E<p.length&&p[E]==="*";)E++;return E===p.length}function s(){let d=[...r.names,...r.skips.map(p=>"-"+p)].join(",");return r.enable(""),d}function u(d){for(let p of r.skips)if(i(d,p))return!1;for(let p of r.names)if(i(d,p))return!0;return!1}function a(d){return d instanceof Error?d.stack||d.message:d}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}gb.exports=nU});var Eb=R((Hr,eh)=>{Hr.formatArgs=iU;Hr.save=sU;Hr.load=uU;Hr.useColors=oU;Hr.storage=aU();Hr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Hr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function oU(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function iU(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+eh.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),t.splice(n,0,e)}Hr.log=console.debug||console.log||(()=>{});function sU(t){try{t?Hr.storage.setItem("debug",t):Hr.storage.removeItem("debug")}catch{}}function uU(){let t;try{t=Hr.storage.getItem("debug")||Hr.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function aU(){try{return localStorage}catch{}}eh.exports=wE()(Hr);var{formatters:cU}=eh.exports;cU.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Cb=R((Wfe,yb)=>{"use strict";yb.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),o=e.indexOf("--");return n!==-1&&(o===-1||n<o)}});var _b=R((zfe,Sb)=>{"use strict";var lU=require("os"),Ab=require("tty"),kn=Cb(),{env:Jt}=process,ys;kn("no-color")||kn("no-colors")||kn("color=false")||kn("color=never")?ys=0:(kn("color")||kn("colors")||kn("color=true")||kn("color=always"))&&(ys=1);"FORCE_COLOR"in Jt&&(Jt.FORCE_COLOR==="true"?ys=1:Jt.FORCE_COLOR==="false"?ys=0:ys=Jt.FORCE_COLOR.length===0?1:Math.min(parseInt(Jt.FORCE_COLOR,10),3));function TE(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function bE(t,e){if(ys===0)return 0;if(kn("color=16m")||kn("color=full")||kn("color=truecolor"))return 3;if(kn("color=256"))return 2;if(t&&!e&&ys===void 0)return 0;let r=ys||0;if(Jt.TERM==="dumb")return r;if(process.platform==="win32"){let n=lU.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Jt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Jt)||Jt.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Jt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Jt.TEAMCITY_VERSION)?1:0;if(Jt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Jt){let n=parseInt((Jt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Jt.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Jt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Jt.TERM)||"COLORTERM"in Jt?1:r}function dU(t){let e=bE(t,t&&t.isTTY);return TE(e)}Sb.exports={supportsColor:dU,stdout:TE(bE(!0,Ab.isatty(1))),stderr:TE(bE(!0,Ab.isatty(2)))}});var Tb=R((Xt,rh)=>{var fU=require("tty"),th=require("util");Xt.init=CU;Xt.log=gU;Xt.formatArgs=pU;Xt.save=EU;Xt.load=yU;Xt.useColors=hU;Xt.destroy=th.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Xt.colors=[6,2,3,4,5,1];try{let t=_b();t&&(t.stderr||t).level>=2&&(Xt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Xt.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,i)=>i.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function hU(){return"colors"in Xt.inspectOpts?!!Xt.inspectOpts.colors:fU.isatty(process.stderr.fd)}function pU(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,o="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${o};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(o+"m+"+rh.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=mU()+e+" "+t[0]}function mU(){return Xt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function gU(...t){return process.stderr.write(th.formatWithOptions(Xt.inspectOpts,...t)+`
`)}function EU(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function yU(){return process.env.DEBUG}function CU(t){t.inspectOpts={};let e=Object.keys(Xt.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Xt.inspectOpts[e[r]]}rh.exports=wE()(Xt);var{formatters:wb}=rh.exports;wb.o=function(t){return this.inspectOpts.colors=this.useColors,th.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};wb.O=function(t){return this.inspectOpts.colors=this.useColors,th.inspect(t,this.inspectOpts)}});var OE=R((jfe,vE)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?vE.exports=Eb():vE.exports=Tb()});var Ob=R(Wr=>{"use strict";var AU=Wr&&Wr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),SU=Wr&&Wr.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),bb=Wr&&Wr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&AU(e,t,r);return SU(e,t),e};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.req=Wr.json=Wr.toBuffer=void 0;var _U=bb(require("http")),wU=bb(require("https"));async function vb(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}Wr.toBuffer=vb;async function TU(t){let r=(await vb(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let o=n;throw o.message+=` (input: ${r})`,o}}Wr.json=TU;function bU(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?wU:_U).request(t,e),o=new Promise((i,s)=>{n.once("response",i).once("error",s).end()});return n.then=o.then.bind(o),n}Wr.req=bU});var Mb=R(dn=>{"use strict";var Db=dn&&dn.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),vU=dn&&dn.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Ib=dn&&dn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Db(e,t,r);return vU(e,t),e},OU=dn&&dn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Db(e,t,r)};Object.defineProperty(dn,"__esModule",{value:!0});dn.Agent=void 0;var RU=Ib(require("net")),Rb=Ib(require("http")),DU=require("https");OU(Ob(),dn);var Jo=Symbol("AgentBaseInternalState"),RE=class extends Rb.Agent{constructor(e){super(e),this[Jo]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new RU.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],o=n.indexOf(r);o!==-1&&(n.splice(o,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return this.isSecureEndpoint(e)?DU.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let o={...r,secureEndpoint:this.isSecureEndpoint(r)},i=this.getName(o),s=this.incrementSockets(i);Promise.resolve().then(()=>this.connect(e,o)).then(u=>{if(this.decrementSockets(i,s),u instanceof Rb.Agent)try{return u.addRequest(e,o)}catch(a){return n(a)}this[Jo].currentSocket=u,super.createSocket(e,r,n)},u=>{this.decrementSockets(i,s),n(u)})}createConnection(){let e=this[Jo].currentSocket;if(this[Jo].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[Jo].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[Jo]&&(this[Jo].defaultPort=e)}get protocol(){return this[Jo].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[Jo]&&(this[Jo].protocol=e)}};dn.Agent=RE});var Nb=R($a=>{"use strict";var IU=$a&&$a.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($a,"__esModule",{value:!0});$a.parseProxyResponse=void 0;var MU=IU(OE()),nh=(0,MU.default)("https-proxy-agent:parse-proxy-response");function NU(t){return new Promise((e,r)=>{let n=0,o=[];function i(){let d=t.read();d?c(d):t.once("readable",i)}function s(){t.removeListener("end",u),t.removeListener("error",a),t.removeListener("readable",i)}function u(){s(),nh("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}function a(d){s(),nh("onerror %o",d),r(d)}function c(d){o.push(d),n+=d.length;let p=Buffer.concat(o,n),m=p.indexOf(`\r
\r
`);if(m===-1){nh("have not received end of HTTP headers yet..."),i();return}let E=p.slice(0,m).toString("ascii").split(`\r
`),y=E.shift();if(!y)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let A=y.split(" "),S=+A[1],b=A.slice(2).join(" "),P={};for(let B of E){if(!B)continue;let v=B.indexOf(":");if(v===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${B}"`));let I=B.slice(0,v).toLowerCase(),O=B.slice(v+1).trimStart(),z=P[I];typeof z=="string"?P[I]=[z,O]:Array.isArray(z)?z.push(O):P[I]=O}nh("got proxy server response: %o %o",y,P),s(),e({connect:{statusCode:S,statusText:b,headers:P},buffered:p})}t.on("error",a),t.on("end",u),i()})}$a.parseProxyResponse=NU});var Lb=R(Ln=>{"use strict";var BU=Ln&&Ln.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),PU=Ln&&Ln.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),xb=Ln&&Ln.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&BU(e,t,r);return PU(e,t),e},kb=Ln&&Ln.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.HttpsProxyAgent=void 0;var oh=xb(require("net")),Bb=xb(require("tls")),FU=kb(require("assert")),xU=kb(OE()),kU=Mb(),LU=require("url"),UU=Nb(),t1=(0,xU.default)("https-proxy-agent"),Pb=t=>t.servername===void 0&&t.host&&!oh.isIP(t.host)?{...t,servername:t.host}:t,ih=class extends kU.Agent{constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new LU.URL(e):e,this.proxyHeaders=r?.headers??{},t1("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),o=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?Fb(r,"headers"):null,host:n,port:o}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let o;n.protocol==="https:"?(t1("Creating `tls.Socket`: %o",this.connectOpts),o=Bb.connect(Pb(this.connectOpts))):(t1("Creating `net.Socket`: %o",this.connectOpts),o=oh.connect(this.connectOpts));let i=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},s=oh.isIPv6(r.host)?`[${r.host}]`:r.host,u=`CONNECT ${s}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let m=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;i["Proxy-Authorization"]=`Basic ${Buffer.from(m).toString("base64")}`}i.Host=`${s}:${r.port}`,i["Proxy-Connection"]||(i["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let m of Object.keys(i))u+=`${m}: ${i[m]}\r
`;let a=(0,UU.parseProxyResponse)(o);o.write(`${u}\r
`);let{connect:c,buffered:d}=await a;if(e.emit("proxyConnect",c),this.emit("proxyConnect",c,e),c.statusCode===200)return e.once("socket",qU),r.secureEndpoint?(t1("Upgrading socket connection to TLS"),Bb.connect({...Fb(Pb(r),"host","path","port"),socket:o})):o;o.destroy();let p=new oh.Socket({writable:!1});return p.readable=!0,e.once("socket",m=>{t1("Replaying proxy buffer for failed request"),(0,FU.default)(m.listenerCount("data")>0),m.push(d),m.push(null)}),p}};ih.protocols=["http","https"];Ln.HttpsProxyAgent=ih;function qU(t){t.resume()}function Fb(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});function GU(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),n="",o=!1,i=r[0]||"text/plain",s=i;for(let d=1;d<r.length;d++)r[d]==="base64"?o=!0:r[d]&&(s+=`;${r[d]}`,r[d].indexOf("charset=")===0&&(n=r[d].substring(8)));!r[0]&&!n.length&&(s+=";charset=US-ASCII",n="US-ASCII");let u=o?"base64":"ascii",a=unescape(t.substring(e+1)),c=Buffer.from(a,u);return c.type=i,c.typeFull=s,c.charset=n,c}var Ub,qb=Kt(()=>{Ub=GU});var Vb=R((sh,Gb)=>{(function(t,e){typeof sh=="object"&&typeof Gb<"u"?e(sh):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.WebStreamsPolyfill={}))})(sh,(function(t){"use strict";function e(){}function r(h){return typeof h=="object"&&h!==null||typeof h=="function"}let n=e;function o(h,g){try{Object.defineProperty(h,"name",{value:g,configurable:!0})}catch{}}let i=Promise,s=Promise.prototype.then,u=Promise.reject.bind(i);function a(h){return new i(h)}function c(h){return a(g=>g(h))}function d(h){return u(h)}function p(h,g,C){return s.call(h,g,C)}function m(h,g,C){p(p(h,g,C),void 0,n)}function E(h,g){m(h,g)}function y(h,g){m(h,void 0,g)}function A(h,g,C){return p(h,g,C)}function S(h){p(h,void 0,n)}let b=h=>{if(typeof queueMicrotask=="function")b=queueMicrotask;else{let g=c(void 0);b=C=>p(g,C)}return b(h)};function P(h,g,C){if(typeof h!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(h,g,C)}function B(h,g,C){try{return c(P(h,g,C))}catch(w){return d(w)}}let v=16384;class I{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(g){let C=this._back,w=C;C._elements.length===v-1&&(w={_elements:[],_next:void 0}),C._elements.push(g),w!==C&&(this._back=w,C._next=w),++this._size}shift(){let g=this._front,C=g,w=this._cursor,F=w+1,j=g._elements,Q=j[w];return F===v&&(C=g._next,F=0),--this._size,this._cursor=F,g!==C&&(this._front=C),j[w]=void 0,Q}forEach(g){let C=this._cursor,w=this._front,F=w._elements;for(;(C!==F.length||w._next!==void 0)&&!(C===F.length&&(w=w._next,F=w._elements,C=0,F.length===0));)g(F[C]),++C}peek(){let g=this._front,C=this._cursor;return g._elements[C]}}let O=Symbol("[[AbortSteps]]"),z=Symbol("[[ErrorSteps]]"),Z=Symbol("[[CancelSteps]]"),M=Symbol("[[PullSteps]]"),V=Symbol("[[ReleaseSteps]]");function Y(h,g){h._ownerReadableStream=g,g._reader=h,g._state==="readable"?Be(h):g._state==="closed"?dt(h):tt(h,g._storedError)}function te(h,g){let C=h._ownerReadableStream;return co(C,g)}function le(h){let g=h._ownerReadableStream;g._state==="readable"?_t(h,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Ut(h,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),g._readableStreamController[V](),g._reader=void 0,h._ownerReadableStream=void 0}function ue(h){return new TypeError("Cannot "+h+" a stream using a released reader")}function Be(h){h._closedPromise=a((g,C)=>{h._closedPromise_resolve=g,h._closedPromise_reject=C})}function tt(h,g){Be(h),_t(h,g)}function dt(h){Be(h),wa(h)}function _t(h,g){h._closedPromise_reject!==void 0&&(S(h._closedPromise),h._closedPromise_reject(g),h._closedPromise_resolve=void 0,h._closedPromise_reject=void 0)}function Ut(h,g){tt(h,g)}function wa(h){h._closedPromise_resolve!==void 0&&(h._closedPromise_resolve(void 0),h._closedPromise_resolve=void 0,h._closedPromise_reject=void 0)}let Ko=Number.isFinite||function(h){return typeof h=="number"&&isFinite(h)},$l=Math.trunc||function(h){return h<0?Math.ceil(h):Math.floor(h)};function oe(h){return typeof h=="object"||typeof h=="function"}function Vr(h,g){if(h!==void 0&&!oe(h))throw new TypeError(`${g} is not an object.`)}function Or(h,g){if(typeof h!="function")throw new TypeError(`${g} is not a function.`)}function Hl(h){return typeof h=="object"&&h!==null||typeof h=="function"}function Rr(h,g){if(!Hl(h))throw new TypeError(`${g} is not an object.`)}function qt(h,g,C){if(h===void 0)throw new TypeError(`Parameter ${g} is required in '${C}'.`)}function _(h,g,C){if(h===void 0)throw new TypeError(`${g} is required in '${C}'.`)}function D(h){return Number(h)}function N(h){return h===0?0:h}function H(h){return N($l(h))}function k(h,g){let w=Number.MAX_SAFE_INTEGER,F=Number(h);if(F=N(F),!Ko(F))throw new TypeError(`${g} is not a finite number`);if(F=H(F),F<0||F>w)throw new TypeError(`${g} is outside the accepted range of 0 to ${w}, inclusive`);return!Ko(F)||F===0?0:F}function q(h,g){if(!ps(h))throw new TypeError(`${g} is not a ReadableStream.`)}function K(h){return new ee(h)}function x(h,g){h._reader._readRequests.push(g)}function L(h,g,C){let F=h._reader._readRequests.shift();C?F._closeSteps():F._chunkSteps(g)}function W(h){return h._reader._readRequests.length}function $(h){let g=h._reader;return!(g===void 0||!fe(g))}class ee{constructor(g){if(qt(g,1,"ReadableStreamDefaultReader"),q(g,"First parameter"),ms(g))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Y(this,g),this._readRequests=new I}get closed(){return fe(this)?this._closedPromise:d(yt("closed"))}cancel(g=void 0){return fe(this)?this._ownerReadableStream===void 0?d(ue("cancel")):te(this,g):d(yt("cancel"))}read(){if(!fe(this))return d(yt("read"));if(this._ownerReadableStream===void 0)return d(ue("read from"));let g,C,w=a((j,Q)=>{g=j,C=Q});return me(this,{_chunkSteps:j=>g({value:j,done:!1}),_closeSteps:()=>g({value:void 0,done:!0}),_errorSteps:j=>C(j)}),w}releaseLock(){if(!fe(this))throw yt("releaseLock");this._ownerReadableStream!==void 0&&Ve(this)}}Object.defineProperties(ee.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),o(ee.prototype.cancel,"cancel"),o(ee.prototype.read,"read"),o(ee.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ee.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function fe(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_readRequests")?!1:h instanceof ee}function me(h,g){let C=h._ownerReadableStream;C._disturbed=!0,C._state==="closed"?g._closeSteps():C._state==="errored"?g._errorSteps(C._storedError):C._readableStreamController[M](g)}function Ve(h){le(h);let g=new TypeError("Reader was released");Et(h,g)}function Et(h,g){let C=h._readRequests;h._readRequests=new I,C.forEach(w=>{w._errorSteps(g)})}function yt(h){return new TypeError(`ReadableStreamDefaultReader.prototype.${h} can only be used on a ReadableStreamDefaultReader`)}let Ue=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Je{constructor(g,C){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=g,this._preventCancel=C}next(){let g=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?A(this._ongoingPromise,g,g):g(),this._ongoingPromise}return(g){let C=()=>this._returnSteps(g);return this._ongoingPromise?A(this._ongoingPromise,C,C):C()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let g=this._reader,C,w,F=a((Q,ce)=>{C=Q,w=ce});return me(g,{_chunkSteps:Q=>{this._ongoingPromise=void 0,b(()=>C({value:Q,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,le(g),C({value:void 0,done:!0})},_errorSteps:Q=>{this._ongoingPromise=void 0,this._isFinished=!0,le(g),w(Q)}}),F}_returnSteps(g){if(this._isFinished)return Promise.resolve({value:g,done:!0});this._isFinished=!0;let C=this._reader;if(!this._preventCancel){let w=te(C,g);return le(C),A(w,()=>({value:g,done:!0}))}return le(C),c({value:g,done:!0})}}let Gt={next(){return ba(this)?this._asyncIteratorImpl.next():d(va("next"))},return(h){return ba(this)?this._asyncIteratorImpl.return(h):d(va("return"))}};Object.setPrototypeOf(Gt,Ue);function Ta(h,g){let C=K(h),w=new Je(C,g),F=Object.create(Gt);return F._asyncIteratorImpl=w,F}function ba(h){if(!r(h)||!Object.prototype.hasOwnProperty.call(h,"_asyncIteratorImpl"))return!1;try{return h._asyncIteratorImpl instanceof Je}catch{return!1}}function va(h){return new TypeError(`ReadableStreamAsyncIterator.${h} can only be used on a ReadableSteamAsyncIterator`)}let cn=Number.isNaN||function(h){return h!==h};var Ai,gr,Vt;function rt(h){return h.slice()}function VT(h,g,C,w,F){new Uint8Array(h).set(new Uint8Array(C,w,F),g)}let Si=h=>(typeof h.transfer=="function"?Si=g=>g.transfer():typeof structuredClone=="function"?Si=g=>structuredClone(g,{transfer:[g]}):Si=g=>g,Si(h)),ls=h=>(typeof h.detached=="boolean"?ls=g=>g.detached:ls=g=>g.byteLength===0,ls(h));function $T(h,g,C){if(h.slice)return h.slice(g,C);let w=C-g,F=new ArrayBuffer(w);return VT(F,0,h,g,w),F}function yf(h,g){let C=h[g];if(C!=null){if(typeof C!="function")throw new TypeError(`${String(g)} is not a function`);return C}}function Ux(h){let g={[Symbol.iterator]:()=>h.iterator},C=(async function*(){return yield*g})(),w=C.next;return{iterator:C,nextMethod:w,done:!1}}let F2=(Vt=(Ai=Symbol.asyncIterator)!==null&&Ai!==void 0?Ai:(gr=Symbol.for)===null||gr===void 0?void 0:gr.call(Symbol,"Symbol.asyncIterator"))!==null&&Vt!==void 0?Vt:"@@asyncIterator";function HT(h,g="sync",C){if(C===void 0)if(g==="async"){if(C=yf(h,F2),C===void 0){let j=yf(h,Symbol.iterator),Q=HT(h,"sync",j);return Ux(Q)}}else C=yf(h,Symbol.iterator);if(C===void 0)throw new TypeError("The object is not iterable");let w=P(C,h,[]);if(!r(w))throw new TypeError("The iterator method must return an object");let F=w.next;return{iterator:w,nextMethod:F,done:!1}}function qx(h){let g=P(h.nextMethod,h.iterator,[]);if(!r(g))throw new TypeError("The iterator.next() method must return an object");return g}function Gx(h){return!!h.done}function Vx(h){return h.value}function $x(h){return!(typeof h!="number"||cn(h)||h<0)}function WT(h){let g=$T(h.buffer,h.byteOffset,h.byteOffset+h.byteLength);return new Uint8Array(g)}function x2(h){let g=h._queue.shift();return h._queueTotalSize-=g.size,h._queueTotalSize<0&&(h._queueTotalSize=0),g.value}function k2(h,g,C){if(!$x(C)||C===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");h._queue.push({value:g,size:C}),h._queueTotalSize+=C}function Hx(h){return h._queue.peek().value}function ds(h){h._queue=new I,h._queueTotalSize=0}function zT(h){return h===DataView}function Wx(h){return zT(h.constructor)}function zx(h){return zT(h)?1:h.BYTES_PER_ELEMENT}class hu{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!L2(this))throw $2("view");return this._view}respond(g){if(!L2(this))throw $2("respond");if(qt(g,1,"respond"),g=k(g,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(ls(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");_f(this._associatedReadableByteStreamController,g)}respondWithNewView(g){if(!L2(this))throw $2("respondWithNewView");if(qt(g,1,"respondWithNewView"),!ArrayBuffer.isView(g))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(ls(g.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");wf(this._associatedReadableByteStreamController,g)}}Object.defineProperties(hu.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),o(hu.prototype.respond,"respond"),o(hu.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(hu.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class _i{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!pu(this))throw zl("byobRequest");return V2(this)}get desiredSize(){if(!pu(this))throw zl("desiredSize");return r9(this)}close(){if(!pu(this))throw zl("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let g=this._controlledReadableByteStream._state;if(g!=="readable")throw new TypeError(`The stream (in ${g} state) is not in the readable state and cannot be closed`);Wl(this)}enqueue(g){if(!pu(this))throw zl("enqueue");if(qt(g,1,"enqueue"),!ArrayBuffer.isView(g))throw new TypeError("chunk must be an array buffer view");if(g.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(g.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let C=this._controlledReadableByteStream._state;if(C!=="readable")throw new TypeError(`The stream (in ${C} state) is not in the readable state and cannot be enqueued to`);Sf(this,g)}error(g=void 0){if(!pu(this))throw zl("error");Pn(this,g)}[Z](g){jT(this),ds(this);let C=this._cancelAlgorithm(g);return Af(this),C}[M](g){let C=this._controlledReadableByteStream;if(this._queueTotalSize>0){t9(this,g);return}let w=this._autoAllocateChunkSize;if(w!==void 0){let F;try{F=new ArrayBuffer(w)}catch(Q){g._errorSteps(Q);return}let j={buffer:F,bufferByteLength:w,byteOffset:0,byteLength:w,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(j)}x(C,g),mu(this)}[V](){if(this._pendingPullIntos.length>0){let g=this._pendingPullIntos.peek();g.readerType="none",this._pendingPullIntos=new I,this._pendingPullIntos.push(g)}}}Object.defineProperties(_i.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),o(_i.prototype.close,"close"),o(_i.prototype.enqueue,"enqueue"),o(_i.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(_i.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function pu(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_controlledReadableByteStream")?!1:h instanceof _i}function L2(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_associatedReadableByteStreamController")?!1:h instanceof hu}function mu(h){if(!Xx(h))return;if(h._pulling){h._pullAgain=!0;return}h._pulling=!0;let C=h._pullAlgorithm();m(C,()=>(h._pulling=!1,h._pullAgain&&(h._pullAgain=!1,mu(h)),null),w=>(Pn(h,w),null))}function jT(h){q2(h),h._pendingPullIntos=new I}function U2(h,g){let C=!1;h._state==="closed"&&(C=!0);let w=KT(g);g.readerType==="default"?L(h,w,C):nk(h,w,C)}function KT(h){let g=h.bytesFilled,C=h.elementSize;return new h.viewConstructor(h.buffer,h.byteOffset,g/C)}function Cf(h,g,C,w){h._queue.push({buffer:g,byteOffset:C,byteLength:w}),h._queueTotalSize+=w}function YT(h,g,C,w){let F;try{F=$T(g,C,C+w)}catch(j){throw Pn(h,j),j}Cf(h,F,0,w)}function JT(h,g){g.bytesFilled>0&&YT(h,g.buffer,g.byteOffset,g.bytesFilled),Oa(h)}function XT(h,g){let C=Math.min(h._queueTotalSize,g.byteLength-g.bytesFilled),w=g.bytesFilled+C,F=C,j=!1,Q=w%g.elementSize,ce=w-Q;ce>=g.minimumFill&&(F=ce-g.bytesFilled,j=!0);let Se=h._queue;for(;F>0;){let Ee=Se.peek(),Te=Math.min(F,Ee.byteLength),Ie=g.byteOffset+g.bytesFilled;VT(g.buffer,Ie,Ee.buffer,Ee.byteOffset,Te),Ee.byteLength===Te?Se.shift():(Ee.byteOffset+=Te,Ee.byteLength-=Te),h._queueTotalSize-=Te,QT(h,Te,g),F-=Te}return j}function QT(h,g,C){C.bytesFilled+=g}function ZT(h){h._queueTotalSize===0&&h._closeRequested?(Af(h),Ql(h._controlledReadableByteStream)):mu(h)}function q2(h){h._byobRequest!==null&&(h._byobRequest._associatedReadableByteStreamController=void 0,h._byobRequest._view=null,h._byobRequest=null)}function G2(h){for(;h._pendingPullIntos.length>0;){if(h._queueTotalSize===0)return;let g=h._pendingPullIntos.peek();XT(h,g)&&(Oa(h),U2(h._controlledReadableByteStream,g))}}function jx(h){let g=h._controlledReadableByteStream._reader;for(;g._readRequests.length>0;){if(h._queueTotalSize===0)return;let C=g._readRequests.shift();t9(h,C)}}function Kx(h,g,C,w){let F=h._controlledReadableByteStream,j=g.constructor,Q=zx(j),{byteOffset:ce,byteLength:Se}=g,Ee=C*Q,Te;try{Te=Si(g.buffer)}catch(at){w._errorSteps(at);return}let Ie={buffer:Te,bufferByteLength:Te.byteLength,byteOffset:ce,byteLength:Se,bytesFilled:0,minimumFill:Ee,elementSize:Q,viewConstructor:j,readerType:"byob"};if(h._pendingPullIntos.length>0){h._pendingPullIntos.push(Ie),i9(F,w);return}if(F._state==="closed"){let at=new j(Ie.buffer,Ie.byteOffset,0);w._closeSteps(at);return}if(h._queueTotalSize>0){if(XT(h,Ie)){let at=KT(Ie);ZT(h),w._chunkSteps(at);return}if(h._closeRequested){let at=new TypeError("Insufficient bytes to fill elements in the given buffer");Pn(h,at),w._errorSteps(at);return}}h._pendingPullIntos.push(Ie),i9(F,w),mu(h)}function Yx(h,g){g.readerType==="none"&&Oa(h);let C=h._controlledReadableByteStream;if(H2(C))for(;s9(C)>0;){let w=Oa(h);U2(C,w)}}function Jx(h,g,C){if(QT(h,g,C),C.readerType==="none"){JT(h,C),G2(h);return}if(C.bytesFilled<C.minimumFill)return;Oa(h);let w=C.bytesFilled%C.elementSize;if(w>0){let F=C.byteOffset+C.bytesFilled;YT(h,C.buffer,F-w,w)}C.bytesFilled-=w,U2(h._controlledReadableByteStream,C),G2(h)}function e9(h,g){let C=h._pendingPullIntos.peek();q2(h),h._controlledReadableByteStream._state==="closed"?Yx(h,C):Jx(h,g,C),mu(h)}function Oa(h){return h._pendingPullIntos.shift()}function Xx(h){let g=h._controlledReadableByteStream;return g._state!=="readable"||h._closeRequested||!h._started?!1:!!($(g)&&W(g)>0||H2(g)&&s9(g)>0||r9(h)>0)}function Af(h){h._pullAlgorithm=void 0,h._cancelAlgorithm=void 0}function Wl(h){let g=h._controlledReadableByteStream;if(!(h._closeRequested||g._state!=="readable")){if(h._queueTotalSize>0){h._closeRequested=!0;return}if(h._pendingPullIntos.length>0){let C=h._pendingPullIntos.peek();if(C.bytesFilled%C.elementSize!==0){let w=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Pn(h,w),w}}Af(h),Ql(g)}}function Sf(h,g){let C=h._controlledReadableByteStream;if(h._closeRequested||C._state!=="readable")return;let{buffer:w,byteOffset:F,byteLength:j}=g;if(ls(w))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let Q=Si(w);if(h._pendingPullIntos.length>0){let ce=h._pendingPullIntos.peek();if(ls(ce.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");q2(h),ce.buffer=Si(ce.buffer),ce.readerType==="none"&&JT(h,ce)}if($(C))if(jx(h),W(C)===0)Cf(h,Q,F,j);else{h._pendingPullIntos.length>0&&Oa(h);let ce=new Uint8Array(Q,F,j);L(C,ce,!1)}else H2(C)?(Cf(h,Q,F,j),G2(h)):Cf(h,Q,F,j);mu(h)}function Pn(h,g){let C=h._controlledReadableByteStream;C._state==="readable"&&(jT(h),ds(h),Af(h),I9(C,g))}function t9(h,g){let C=h._queue.shift();h._queueTotalSize-=C.byteLength,ZT(h);let w=new Uint8Array(C.buffer,C.byteOffset,C.byteLength);g._chunkSteps(w)}function V2(h){if(h._byobRequest===null&&h._pendingPullIntos.length>0){let g=h._pendingPullIntos.peek(),C=new Uint8Array(g.buffer,g.byteOffset+g.bytesFilled,g.byteLength-g.bytesFilled),w=Object.create(hu.prototype);Zx(w,h,C),h._byobRequest=w}return h._byobRequest}function r9(h){let g=h._controlledReadableByteStream._state;return g==="errored"?null:g==="closed"?0:h._strategyHWM-h._queueTotalSize}function _f(h,g){let C=h._pendingPullIntos.peek();if(h._controlledReadableByteStream._state==="closed"){if(g!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(g===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(C.bytesFilled+g>C.byteLength)throw new RangeError("bytesWritten out of range")}C.buffer=Si(C.buffer),e9(h,g)}function wf(h,g){let C=h._pendingPullIntos.peek();if(h._controlledReadableByteStream._state==="closed"){if(g.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(g.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(C.byteOffset+C.bytesFilled!==g.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(C.bufferByteLength!==g.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(C.bytesFilled+g.byteLength>C.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let F=g.byteLength;C.buffer=Si(g.buffer),e9(h,F)}function n9(h,g,C,w,F,j,Q){g._controlledReadableByteStream=h,g._pullAgain=!1,g._pulling=!1,g._byobRequest=null,g._queue=g._queueTotalSize=void 0,ds(g),g._closeRequested=!1,g._started=!1,g._strategyHWM=j,g._pullAlgorithm=w,g._cancelAlgorithm=F,g._autoAllocateChunkSize=Q,g._pendingPullIntos=new I,h._readableStreamController=g;let ce=C();m(c(ce),()=>(g._started=!0,mu(g),null),Se=>(Pn(g,Se),null))}function Qx(h,g,C){let w=Object.create(_i.prototype),F,j,Q;g.start!==void 0?F=()=>g.start(w):F=()=>{},g.pull!==void 0?j=()=>g.pull(w):j=()=>c(void 0),g.cancel!==void 0?Q=Se=>g.cancel(Se):Q=()=>c(void 0);let ce=g.autoAllocateChunkSize;if(ce===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");n9(h,w,F,j,Q,C,ce)}function Zx(h,g,C){h._associatedReadableByteStreamController=g,h._view=C}function $2(h){return new TypeError(`ReadableStreamBYOBRequest.prototype.${h} can only be used on a ReadableStreamBYOBRequest`)}function zl(h){return new TypeError(`ReadableByteStreamController.prototype.${h} can only be used on a ReadableByteStreamController`)}function ek(h,g){Vr(h,g);let C=h?.mode;return{mode:C===void 0?void 0:tk(C,`${g} has member 'mode' that`)}}function tk(h,g){if(h=`${h}`,h!=="byob")throw new TypeError(`${g} '${h}' is not a valid enumeration value for ReadableStreamReaderMode`);return h}function rk(h,g){var C;Vr(h,g);let w=(C=h?.min)!==null&&C!==void 0?C:1;return{min:k(w,`${g} has member 'min' that`)}}function o9(h){return new fs(h)}function i9(h,g){h._reader._readIntoRequests.push(g)}function nk(h,g,C){let F=h._reader._readIntoRequests.shift();C?F._closeSteps(g):F._chunkSteps(g)}function s9(h){return h._reader._readIntoRequests.length}function H2(h){let g=h._reader;return!(g===void 0||!gu(g))}class fs{constructor(g){if(qt(g,1,"ReadableStreamBYOBReader"),q(g,"First parameter"),ms(g))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!pu(g._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Y(this,g),this._readIntoRequests=new I}get closed(){return gu(this)?this._closedPromise:d(Tf("closed"))}cancel(g=void 0){return gu(this)?this._ownerReadableStream===void 0?d(ue("cancel")):te(this,g):d(Tf("cancel"))}read(g,C={}){if(!gu(this))return d(Tf("read"));if(!ArrayBuffer.isView(g))return d(new TypeError("view must be an array buffer view"));if(g.byteLength===0)return d(new TypeError("view must have non-zero byteLength"));if(g.buffer.byteLength===0)return d(new TypeError("view's buffer must have non-zero byteLength"));if(ls(g.buffer))return d(new TypeError("view's buffer has been detached"));let w;try{w=rk(C,"options")}catch(Ee){return d(Ee)}let F=w.min;if(F===0)return d(new TypeError("options.min must be greater than 0"));if(Wx(g)){if(F>g.byteLength)return d(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(F>g.length)return d(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return d(ue("read from"));let j,Q,ce=a((Ee,Te)=>{j=Ee,Q=Te});return u9(this,g,F,{_chunkSteps:Ee=>j({value:Ee,done:!1}),_closeSteps:Ee=>j({value:Ee,done:!0}),_errorSteps:Ee=>Q(Ee)}),ce}releaseLock(){if(!gu(this))throw Tf("releaseLock");this._ownerReadableStream!==void 0&&ok(this)}}Object.defineProperties(fs.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),o(fs.prototype.cancel,"cancel"),o(fs.prototype.read,"read"),o(fs.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(fs.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function gu(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_readIntoRequests")?!1:h instanceof fs}function u9(h,g,C,w){let F=h._ownerReadableStream;F._disturbed=!0,F._state==="errored"?w._errorSteps(F._storedError):Kx(F._readableStreamController,g,C,w)}function ok(h){le(h);let g=new TypeError("Reader was released");a9(h,g)}function a9(h,g){let C=h._readIntoRequests;h._readIntoRequests=new I,C.forEach(w=>{w._errorSteps(g)})}function Tf(h){return new TypeError(`ReadableStreamBYOBReader.prototype.${h} can only be used on a ReadableStreamBYOBReader`)}function jl(h,g){let{highWaterMark:C}=h;if(C===void 0)return g;if(cn(C)||C<0)throw new RangeError("Invalid highWaterMark");return C}function bf(h){let{size:g}=h;return g||(()=>1)}function vf(h,g){Vr(h,g);let C=h?.highWaterMark,w=h?.size;return{highWaterMark:C===void 0?void 0:D(C),size:w===void 0?void 0:ik(w,`${g} has member 'size' that`)}}function ik(h,g){return Or(h,g),C=>D(h(C))}function sk(h,g){Vr(h,g);let C=h?.abort,w=h?.close,F=h?.start,j=h?.type,Q=h?.write;return{abort:C===void 0?void 0:uk(C,h,`${g} has member 'abort' that`),close:w===void 0?void 0:ak(w,h,`${g} has member 'close' that`),start:F===void 0?void 0:ck(F,h,`${g} has member 'start' that`),write:Q===void 0?void 0:lk(Q,h,`${g} has member 'write' that`),type:j}}function uk(h,g,C){return Or(h,C),w=>B(h,g,[w])}function ak(h,g,C){return Or(h,C),()=>B(h,g,[])}function ck(h,g,C){return Or(h,C),w=>P(h,g,[w])}function lk(h,g,C){return Or(h,C),(w,F)=>B(h,g,[w,F])}function c9(h,g){if(!Ra(h))throw new TypeError(`${g} is not a WritableStream.`)}function dk(h){if(typeof h!="object"||h===null)return!1;try{return typeof h.aborted=="boolean"}catch{return!1}}let fk=typeof AbortController=="function";function hk(){if(fk)return new AbortController}class hs{constructor(g={},C={}){g===void 0?g=null:Rr(g,"First parameter");let w=vf(C,"Second parameter"),F=sk(g,"First parameter");if(d9(this),F.type!==void 0)throw new RangeError("Invalid type is specified");let Q=bf(w),ce=jl(w,1);Ok(this,F,ce,Q)}get locked(){if(!Ra(this))throw Mf("locked");return Da(this)}abort(g=void 0){return Ra(this)?Da(this)?d(new TypeError("Cannot abort a stream that already has a writer")):Of(this,g):d(Mf("abort"))}close(){return Ra(this)?Da(this)?d(new TypeError("Cannot close a stream that already has a writer")):Yo(this)?d(new TypeError("Cannot close an already-closing stream")):f9(this):d(Mf("close"))}getWriter(){if(!Ra(this))throw Mf("getWriter");return l9(this)}}Object.defineProperties(hs.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),o(hs.prototype.abort,"abort"),o(hs.prototype.close,"close"),o(hs.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(hs.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function l9(h){return new wi(h)}function pk(h,g,C,w,F=1,j=()=>1){let Q=Object.create(hs.prototype);d9(Q);let ce=Object.create(Ia.prototype);return y9(Q,ce,h,g,C,w,F,j),Q}function d9(h){h._state="writable",h._storedError=void 0,h._writer=void 0,h._writableStreamController=void 0,h._writeRequests=new I,h._inFlightWriteRequest=void 0,h._closeRequest=void 0,h._inFlightCloseRequest=void 0,h._pendingAbortRequest=void 0,h._backpressure=!1}function Ra(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_writableStreamController")?!1:h instanceof hs}function Da(h){return h._writer!==void 0}function Of(h,g){var C;if(h._state==="closed"||h._state==="errored")return c(void 0);h._writableStreamController._abortReason=g,(C=h._writableStreamController._abortController)===null||C===void 0||C.abort(g);let w=h._state;if(w==="closed"||w==="errored")return c(void 0);if(h._pendingAbortRequest!==void 0)return h._pendingAbortRequest._promise;let F=!1;w==="erroring"&&(F=!0,g=void 0);let j=a((Q,ce)=>{h._pendingAbortRequest={_promise:void 0,_resolve:Q,_reject:ce,_reason:g,_wasAlreadyErroring:F}});return h._pendingAbortRequest._promise=j,F||z2(h,g),j}function f9(h){let g=h._state;if(g==="closed"||g==="errored")return d(new TypeError(`The stream (in ${g} state) is not in the writable state and cannot be closed`));let C=a((F,j)=>{let Q={_resolve:F,_reject:j};h._closeRequest=Q}),w=h._writer;return w!==void 0&&h._backpressure&&g==="writable"&&eE(w),Rk(h._writableStreamController),C}function mk(h){return a((C,w)=>{let F={_resolve:C,_reject:w};h._writeRequests.push(F)})}function W2(h,g){if(h._state==="writable"){z2(h,g);return}j2(h)}function z2(h,g){let C=h._writableStreamController;h._state="erroring",h._storedError=g;let w=h._writer;w!==void 0&&p9(w,g),!Ak(h)&&C._started&&j2(h)}function j2(h){h._state="errored",h._writableStreamController[z]();let g=h._storedError;if(h._writeRequests.forEach(F=>{F._reject(g)}),h._writeRequests=new I,h._pendingAbortRequest===void 0){Rf(h);return}let C=h._pendingAbortRequest;if(h._pendingAbortRequest=void 0,C._wasAlreadyErroring){C._reject(g),Rf(h);return}let w=h._writableStreamController[O](C._reason);m(w,()=>(C._resolve(),Rf(h),null),F=>(C._reject(F),Rf(h),null))}function gk(h){h._inFlightWriteRequest._resolve(void 0),h._inFlightWriteRequest=void 0}function Ek(h,g){h._inFlightWriteRequest._reject(g),h._inFlightWriteRequest=void 0,W2(h,g)}function yk(h){h._inFlightCloseRequest._resolve(void 0),h._inFlightCloseRequest=void 0,h._state==="erroring"&&(h._storedError=void 0,h._pendingAbortRequest!==void 0&&(h._pendingAbortRequest._resolve(),h._pendingAbortRequest=void 0)),h._state="closed";let C=h._writer;C!==void 0&&_9(C)}function Ck(h,g){h._inFlightCloseRequest._reject(g),h._inFlightCloseRequest=void 0,h._pendingAbortRequest!==void 0&&(h._pendingAbortRequest._reject(g),h._pendingAbortRequest=void 0),W2(h,g)}function Yo(h){return!(h._closeRequest===void 0&&h._inFlightCloseRequest===void 0)}function Ak(h){return!(h._inFlightWriteRequest===void 0&&h._inFlightCloseRequest===void 0)}function Sk(h){h._inFlightCloseRequest=h._closeRequest,h._closeRequest=void 0}function _k(h){h._inFlightWriteRequest=h._writeRequests.shift()}function Rf(h){h._closeRequest!==void 0&&(h._closeRequest._reject(h._storedError),h._closeRequest=void 0);let g=h._writer;g!==void 0&&Q2(g,h._storedError)}function K2(h,g){let C=h._writer;C!==void 0&&g!==h._backpressure&&(g?Fk(C):eE(C)),h._backpressure=g}class wi{constructor(g){if(qt(g,1,"WritableStreamDefaultWriter"),c9(g,"First parameter"),Da(g))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=g,g._writer=this;let C=g._state;if(C==="writable")!Yo(g)&&g._backpressure?Bf(this):w9(this),Nf(this);else if(C==="erroring")Z2(this,g._storedError),Nf(this);else if(C==="closed")w9(this),Bk(this);else{let w=g._storedError;Z2(this,w),S9(this,w)}}get closed(){return Eu(this)?this._closedPromise:d(yu("closed"))}get desiredSize(){if(!Eu(this))throw yu("desiredSize");if(this._ownerWritableStream===void 0)throw Yl("desiredSize");return vk(this)}get ready(){return Eu(this)?this._readyPromise:d(yu("ready"))}abort(g=void 0){return Eu(this)?this._ownerWritableStream===void 0?d(Yl("abort")):wk(this,g):d(yu("abort"))}close(){if(!Eu(this))return d(yu("close"));let g=this._ownerWritableStream;return g===void 0?d(Yl("close")):Yo(g)?d(new TypeError("Cannot close an already-closing stream")):h9(this)}releaseLock(){if(!Eu(this))throw yu("releaseLock");this._ownerWritableStream!==void 0&&m9(this)}write(g=void 0){return Eu(this)?this._ownerWritableStream===void 0?d(Yl("write to")):g9(this,g):d(yu("write"))}}Object.defineProperties(wi.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),o(wi.prototype.abort,"abort"),o(wi.prototype.close,"close"),o(wi.prototype.releaseLock,"releaseLock"),o(wi.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(wi.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Eu(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_ownerWritableStream")?!1:h instanceof wi}function wk(h,g){let C=h._ownerWritableStream;return Of(C,g)}function h9(h){let g=h._ownerWritableStream;return f9(g)}function Tk(h){let g=h._ownerWritableStream,C=g._state;return Yo(g)||C==="closed"?c(void 0):C==="errored"?d(g._storedError):h9(h)}function bk(h,g){h._closedPromiseState==="pending"?Q2(h,g):Pk(h,g)}function p9(h,g){h._readyPromiseState==="pending"?T9(h,g):xk(h,g)}function vk(h){let g=h._ownerWritableStream,C=g._state;return C==="errored"||C==="erroring"?null:C==="closed"?0:C9(g._writableStreamController)}function m9(h){let g=h._ownerWritableStream,C=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");p9(h,C),bk(h,C),g._writer=void 0,h._ownerWritableStream=void 0}function g9(h,g){let C=h._ownerWritableStream,w=C._writableStreamController,F=Dk(w,g);if(C!==h._ownerWritableStream)return d(Yl("write to"));let j=C._state;if(j==="errored")return d(C._storedError);if(Yo(C)||j==="closed")return d(new TypeError("The stream is closing or closed and cannot be written to"));if(j==="erroring")return d(C._storedError);let Q=mk(C);return Ik(w,g,F),Q}let E9={};class Ia{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Y2(this))throw X2("abortReason");return this._abortReason}get signal(){if(!Y2(this))throw X2("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(g=void 0){if(!Y2(this))throw X2("error");this._controlledWritableStream._state==="writable"&&A9(this,g)}[O](g){let C=this._abortAlgorithm(g);return Df(this),C}[z](){ds(this)}}Object.defineProperties(Ia.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ia.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Y2(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_controlledWritableStream")?!1:h instanceof Ia}function y9(h,g,C,w,F,j,Q,ce){g._controlledWritableStream=h,h._writableStreamController=g,g._queue=void 0,g._queueTotalSize=void 0,ds(g),g._abortReason=void 0,g._abortController=hk(),g._started=!1,g._strategySizeAlgorithm=ce,g._strategyHWM=Q,g._writeAlgorithm=w,g._closeAlgorithm=F,g._abortAlgorithm=j;let Se=J2(g);K2(h,Se);let Ee=C(),Te=c(Ee);m(Te,()=>(g._started=!0,If(g),null),Ie=>(g._started=!0,W2(h,Ie),null))}function Ok(h,g,C,w){let F=Object.create(Ia.prototype),j,Q,ce,Se;g.start!==void 0?j=()=>g.start(F):j=()=>{},g.write!==void 0?Q=Ee=>g.write(Ee,F):Q=()=>c(void 0),g.close!==void 0?ce=()=>g.close():ce=()=>c(void 0),g.abort!==void 0?Se=Ee=>g.abort(Ee):Se=()=>c(void 0),y9(h,F,j,Q,ce,Se,C,w)}function Df(h){h._writeAlgorithm=void 0,h._closeAlgorithm=void 0,h._abortAlgorithm=void 0,h._strategySizeAlgorithm=void 0}function Rk(h){k2(h,E9,0),If(h)}function Dk(h,g){try{return h._strategySizeAlgorithm(g)}catch(C){return Kl(h,C),1}}function C9(h){return h._strategyHWM-h._queueTotalSize}function Ik(h,g,C){try{k2(h,g,C)}catch(F){Kl(h,F);return}let w=h._controlledWritableStream;if(!Yo(w)&&w._state==="writable"){let F=J2(h);K2(w,F)}If(h)}function If(h){let g=h._controlledWritableStream;if(!h._started||g._inFlightWriteRequest!==void 0)return;if(g._state==="erroring"){j2(g);return}if(h._queue.length===0)return;let w=Hx(h);w===E9?Mk(h):Nk(h,w)}function Kl(h,g){h._controlledWritableStream._state==="writable"&&A9(h,g)}function Mk(h){let g=h._controlledWritableStream;Sk(g),x2(h);let C=h._closeAlgorithm();Df(h),m(C,()=>(yk(g),null),w=>(Ck(g,w),null))}function Nk(h,g){let C=h._controlledWritableStream;_k(C);let w=h._writeAlgorithm(g);m(w,()=>{gk(C);let F=C._state;if(x2(h),!Yo(C)&&F==="writable"){let j=J2(h);K2(C,j)}return If(h),null},F=>(C._state==="writable"&&Df(h),Ek(C,F),null))}function J2(h){return C9(h)<=0}function A9(h,g){let C=h._controlledWritableStream;Df(h),z2(C,g)}function Mf(h){return new TypeError(`WritableStream.prototype.${h} can only be used on a WritableStream`)}function X2(h){return new TypeError(`WritableStreamDefaultController.prototype.${h} can only be used on a WritableStreamDefaultController`)}function yu(h){return new TypeError(`WritableStreamDefaultWriter.prototype.${h} can only be used on a WritableStreamDefaultWriter`)}function Yl(h){return new TypeError("Cannot "+h+" a stream using a released writer")}function Nf(h){h._closedPromise=a((g,C)=>{h._closedPromise_resolve=g,h._closedPromise_reject=C,h._closedPromiseState="pending"})}function S9(h,g){Nf(h),Q2(h,g)}function Bk(h){Nf(h),_9(h)}function Q2(h,g){h._closedPromise_reject!==void 0&&(S(h._closedPromise),h._closedPromise_reject(g),h._closedPromise_resolve=void 0,h._closedPromise_reject=void 0,h._closedPromiseState="rejected")}function Pk(h,g){S9(h,g)}function _9(h){h._closedPromise_resolve!==void 0&&(h._closedPromise_resolve(void 0),h._closedPromise_resolve=void 0,h._closedPromise_reject=void 0,h._closedPromiseState="resolved")}function Bf(h){h._readyPromise=a((g,C)=>{h._readyPromise_resolve=g,h._readyPromise_reject=C}),h._readyPromiseState="pending"}function Z2(h,g){Bf(h),T9(h,g)}function w9(h){Bf(h),eE(h)}function T9(h,g){h._readyPromise_reject!==void 0&&(S(h._readyPromise),h._readyPromise_reject(g),h._readyPromise_resolve=void 0,h._readyPromise_reject=void 0,h._readyPromiseState="rejected")}function Fk(h){Bf(h)}function xk(h,g){Z2(h,g)}function eE(h){h._readyPromise_resolve!==void 0&&(h._readyPromise_resolve(void 0),h._readyPromise_resolve=void 0,h._readyPromise_reject=void 0,h._readyPromiseState="fulfilled")}function kk(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global}let tE=kk();function Lk(h){if(!(typeof h=="function"||typeof h=="object")||h.name!=="DOMException")return!1;try{return new h,!0}catch{return!1}}function Uk(){let h=tE?.DOMException;return Lk(h)?h:void 0}function qk(){let h=function(C,w){this.message=C||"",this.name=w||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return o(h,"DOMException"),h.prototype=Object.create(Error.prototype),Object.defineProperty(h.prototype,"constructor",{value:h,writable:!0,configurable:!0}),h}let Gk=Uk()||qk();function b9(h,g,C,w,F,j){let Q=K(h),ce=l9(g);h._disturbed=!0;let Se=!1,Ee=c(void 0);return a((Te,Ie)=>{let at;if(j!==void 0){if(at=()=>{let ye=j.reason!==void 0?j.reason:new Gk("Aborted","AbortError"),Pe=[];w||Pe.push(()=>g._state==="writable"?Of(g,ye):c(void 0)),F||Pe.push(()=>h._state==="readable"?co(h,ye):c(void 0)),$r(()=>Promise.all(Pe.map(ft=>ft())),!0,ye)},j.aborted){at();return}j.addEventListener("abort",at)}function lo(){return a((ye,Pe)=>{function ft(ln){ln?ye():p(Pa(),ft,Pe)}ft(!1)})}function Pa(){return Se?c(!0):p(ce._readyPromise,()=>a((ye,Pe)=>{me(Q,{_chunkSteps:ft=>{Ee=p(g9(ce,ft),void 0,e),ye(!1)},_closeSteps:()=>ye(!0),_errorSteps:Pe})}))}if(bi(h,Q._closedPromise,ye=>(w?Fn(!0,ye):$r(()=>Of(g,ye),!0,ye),null)),bi(g,ce._closedPromise,ye=>(F?Fn(!0,ye):$r(()=>co(h,ye),!0,ye),null)),Dr(h,Q._closedPromise,()=>(C?Fn():$r(()=>Tk(ce)),null)),Yo(g)||g._state==="closed"){let ye=new TypeError("the destination writable stream closed before all data could be piped to it");F?Fn(!0,ye):$r(()=>co(h,ye),!0,ye)}S(lo());function Es(){let ye=Ee;return p(Ee,()=>ye!==Ee?Es():void 0)}function bi(ye,Pe,ft){ye._state==="errored"?ft(ye._storedError):y(Pe,ft)}function Dr(ye,Pe,ft){ye._state==="closed"?ft():E(Pe,ft)}function $r(ye,Pe,ft){if(Se)return;Se=!0,g._state==="writable"&&!Yo(g)?E(Es(),ln):ln();function ln(){return m(ye(),()=>vi(Pe,ft),Fa=>vi(!0,Fa)),null}}function Fn(ye,Pe){Se||(Se=!0,g._state==="writable"&&!Yo(g)?E(Es(),()=>vi(ye,Pe)):vi(ye,Pe))}function vi(ye,Pe){return m9(ce),le(Q),j!==void 0&&j.removeEventListener("abort",at),ye?Ie(Pe):Te(void 0),null}})}class Ti{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Pf(this))throw xf("desiredSize");return rE(this)}close(){if(!Pf(this))throw xf("close");if(!Na(this))throw new TypeError("The stream is not in a state that permits close");Cu(this)}enqueue(g=void 0){if(!Pf(this))throw xf("enqueue");if(!Na(this))throw new TypeError("The stream is not in a state that permits enqueue");return Ma(this,g)}error(g=void 0){if(!Pf(this))throw xf("error");ao(this,g)}[Z](g){ds(this);let C=this._cancelAlgorithm(g);return Ff(this),C}[M](g){let C=this._controlledReadableStream;if(this._queue.length>0){let w=x2(this);this._closeRequested&&this._queue.length===0?(Ff(this),Ql(C)):Jl(this),g._chunkSteps(w)}else x(C,g),Jl(this)}[V](){}}Object.defineProperties(Ti.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),o(Ti.prototype.close,"close"),o(Ti.prototype.enqueue,"enqueue"),o(Ti.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ti.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Pf(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_controlledReadableStream")?!1:h instanceof Ti}function Jl(h){if(!v9(h))return;if(h._pulling){h._pullAgain=!0;return}h._pulling=!0;let C=h._pullAlgorithm();m(C,()=>(h._pulling=!1,h._pullAgain&&(h._pullAgain=!1,Jl(h)),null),w=>(ao(h,w),null))}function v9(h){let g=h._controlledReadableStream;return!Na(h)||!h._started?!1:!!(ms(g)&&W(g)>0||rE(h)>0)}function Ff(h){h._pullAlgorithm=void 0,h._cancelAlgorithm=void 0,h._strategySizeAlgorithm=void 0}function Cu(h){if(!Na(h))return;let g=h._controlledReadableStream;h._closeRequested=!0,h._queue.length===0&&(Ff(h),Ql(g))}function Ma(h,g){if(!Na(h))return;let C=h._controlledReadableStream;if(ms(C)&&W(C)>0)L(C,g,!1);else{let w;try{w=h._strategySizeAlgorithm(g)}catch(F){throw ao(h,F),F}try{k2(h,g,w)}catch(F){throw ao(h,F),F}}Jl(h)}function ao(h,g){let C=h._controlledReadableStream;C._state==="readable"&&(ds(h),Ff(h),I9(C,g))}function rE(h){let g=h._controlledReadableStream._state;return g==="errored"?null:g==="closed"?0:h._strategyHWM-h._queueTotalSize}function Vk(h){return!v9(h)}function Na(h){let g=h._controlledReadableStream._state;return!h._closeRequested&&g==="readable"}function O9(h,g,C,w,F,j,Q){g._controlledReadableStream=h,g._queue=void 0,g._queueTotalSize=void 0,ds(g),g._started=!1,g._closeRequested=!1,g._pullAgain=!1,g._pulling=!1,g._strategySizeAlgorithm=Q,g._strategyHWM=j,g._pullAlgorithm=w,g._cancelAlgorithm=F,h._readableStreamController=g;let ce=C();m(c(ce),()=>(g._started=!0,Jl(g),null),Se=>(ao(g,Se),null))}function $k(h,g,C,w){let F=Object.create(Ti.prototype),j,Q,ce;g.start!==void 0?j=()=>g.start(F):j=()=>{},g.pull!==void 0?Q=()=>g.pull(F):Q=()=>c(void 0),g.cancel!==void 0?ce=Se=>g.cancel(Se):ce=()=>c(void 0),O9(h,F,j,Q,ce,C,w)}function xf(h){return new TypeError(`ReadableStreamDefaultController.prototype.${h} can only be used on a ReadableStreamDefaultController`)}function Hk(h,g){return pu(h._readableStreamController)?zk(h):Wk(h)}function Wk(h,g){let C=K(h),w=!1,F=!1,j=!1,Q=!1,ce,Se,Ee,Te,Ie,at=a(Dr=>{Ie=Dr});function lo(){return w?(F=!0,c(void 0)):(w=!0,me(C,{_chunkSteps:$r=>{b(()=>{F=!1;let Fn=$r,vi=$r;j||Ma(Ee._readableStreamController,Fn),Q||Ma(Te._readableStreamController,vi),w=!1,F&&lo()})},_closeSteps:()=>{w=!1,j||Cu(Ee._readableStreamController),Q||Cu(Te._readableStreamController),(!j||!Q)&&Ie(void 0)},_errorSteps:()=>{w=!1}}),c(void 0))}function Pa(Dr){if(j=!0,ce=Dr,Q){let $r=rt([ce,Se]),Fn=co(h,$r);Ie(Fn)}return at}function Es(Dr){if(Q=!0,Se=Dr,j){let $r=rt([ce,Se]),Fn=co(h,$r);Ie(Fn)}return at}function bi(){}return Ee=Xl(bi,lo,Pa),Te=Xl(bi,lo,Es),y(C._closedPromise,Dr=>(ao(Ee._readableStreamController,Dr),ao(Te._readableStreamController,Dr),(!j||!Q)&&Ie(void 0),null)),[Ee,Te]}function zk(h){let g=K(h),C=!1,w=!1,F=!1,j=!1,Q=!1,ce,Se,Ee,Te,Ie,at=a(ye=>{Ie=ye});function lo(ye){y(ye._closedPromise,Pe=>(ye!==g||(Pn(Ee._readableStreamController,Pe),Pn(Te._readableStreamController,Pe),(!j||!Q)&&Ie(void 0)),null))}function Pa(){gu(g)&&(le(g),g=K(h),lo(g)),me(g,{_chunkSteps:Pe=>{b(()=>{w=!1,F=!1;let ft=Pe,ln=Pe;if(!j&&!Q)try{ln=WT(Pe)}catch(Fa){Pn(Ee._readableStreamController,Fa),Pn(Te._readableStreamController,Fa),Ie(co(h,Fa));return}j||Sf(Ee._readableStreamController,ft),Q||Sf(Te._readableStreamController,ln),C=!1,w?bi():F&&Dr()})},_closeSteps:()=>{C=!1,j||Wl(Ee._readableStreamController),Q||Wl(Te._readableStreamController),Ee._readableStreamController._pendingPullIntos.length>0&&_f(Ee._readableStreamController,0),Te._readableStreamController._pendingPullIntos.length>0&&_f(Te._readableStreamController,0),(!j||!Q)&&Ie(void 0)},_errorSteps:()=>{C=!1}})}function Es(ye,Pe){fe(g)&&(le(g),g=o9(h),lo(g));let ft=Pe?Te:Ee,ln=Pe?Ee:Te;u9(g,ye,1,{_chunkSteps:xa=>{b(()=>{w=!1,F=!1;let ka=Pe?Q:j;if(Pe?j:Q)ka||wf(ft._readableStreamController,xa);else{let $9;try{$9=WT(xa)}catch(uE){Pn(ft._readableStreamController,uE),Pn(ln._readableStreamController,uE),Ie(co(h,uE));return}ka||wf(ft._readableStreamController,xa),Sf(ln._readableStreamController,$9)}C=!1,w?bi():F&&Dr()})},_closeSteps:xa=>{C=!1;let ka=Pe?Q:j,Hf=Pe?j:Q;ka||Wl(ft._readableStreamController),Hf||Wl(ln._readableStreamController),xa!==void 0&&(ka||wf(ft._readableStreamController,xa),!Hf&&ln._readableStreamController._pendingPullIntos.length>0&&_f(ln._readableStreamController,0)),(!ka||!Hf)&&Ie(void 0)},_errorSteps:()=>{C=!1}})}function bi(){if(C)return w=!0,c(void 0);C=!0;let ye=V2(Ee._readableStreamController);return ye===null?Pa():Es(ye._view,!1),c(void 0)}function Dr(){if(C)return F=!0,c(void 0);C=!0;let ye=V2(Te._readableStreamController);return ye===null?Pa():Es(ye._view,!0),c(void 0)}function $r(ye){if(j=!0,ce=ye,Q){let Pe=rt([ce,Se]),ft=co(h,Pe);Ie(ft)}return at}function Fn(ye){if(Q=!0,Se=ye,j){let Pe=rt([ce,Se]),ft=co(h,Pe);Ie(ft)}return at}function vi(){}return Ee=D9(vi,bi,$r),Te=D9(vi,Dr,Fn),lo(g),[Ee,Te]}function jk(h){return r(h)&&typeof h.getReader<"u"}function Kk(h){return jk(h)?Jk(h.getReader()):Yk(h)}function Yk(h){let g,C=HT(h,"async"),w=e;function F(){let Q;try{Q=qx(C)}catch(Se){return d(Se)}let ce=c(Q);return A(ce,Se=>{if(!r(Se))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(Gx(Se))Cu(g._readableStreamController);else{let Te=Vx(Se);Ma(g._readableStreamController,Te)}})}function j(Q){let ce=C.iterator,Se;try{Se=yf(ce,"return")}catch(Ie){return d(Ie)}if(Se===void 0)return c(void 0);let Ee;try{Ee=P(Se,ce,[Q])}catch(Ie){return d(Ie)}let Te=c(Ee);return A(Te,Ie=>{if(!r(Ie))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return g=Xl(w,F,j,0),g}function Jk(h){let g,C=e;function w(){let j;try{j=h.read()}catch(Q){return d(Q)}return A(j,Q=>{if(!r(Q))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(Q.done)Cu(g._readableStreamController);else{let ce=Q.value;Ma(g._readableStreamController,ce)}})}function F(j){try{return c(h.cancel(j))}catch(Q){return d(Q)}}return g=Xl(C,w,F,0),g}function Xk(h,g){Vr(h,g);let C=h,w=C?.autoAllocateChunkSize,F=C?.cancel,j=C?.pull,Q=C?.start,ce=C?.type;return{autoAllocateChunkSize:w===void 0?void 0:k(w,`${g} has member 'autoAllocateChunkSize' that`),cancel:F===void 0?void 0:Qk(F,C,`${g} has member 'cancel' that`),pull:j===void 0?void 0:Zk(j,C,`${g} has member 'pull' that`),start:Q===void 0?void 0:eL(Q,C,`${g} has member 'start' that`),type:ce===void 0?void 0:tL(ce,`${g} has member 'type' that`)}}function Qk(h,g,C){return Or(h,C),w=>B(h,g,[w])}function Zk(h,g,C){return Or(h,C),w=>B(h,g,[w])}function eL(h,g,C){return Or(h,C),w=>P(h,g,[w])}function tL(h,g){if(h=`${h}`,h!=="bytes")throw new TypeError(`${g} '${h}' is not a valid enumeration value for ReadableStreamType`);return h}function rL(h,g){return Vr(h,g),{preventCancel:!!h?.preventCancel}}function R9(h,g){Vr(h,g);let C=h?.preventAbort,w=h?.preventCancel,F=h?.preventClose,j=h?.signal;return j!==void 0&&nL(j,`${g} has member 'signal' that`),{preventAbort:!!C,preventCancel:!!w,preventClose:!!F,signal:j}}function nL(h,g){if(!dk(h))throw new TypeError(`${g} is not an AbortSignal.`)}function oL(h,g){Vr(h,g);let C=h?.readable;_(C,"readable","ReadableWritablePair"),q(C,`${g} has member 'readable' that`);let w=h?.writable;return _(w,"writable","ReadableWritablePair"),c9(w,`${g} has member 'writable' that`),{readable:C,writable:w}}class Er{constructor(g={},C={}){g===void 0?g=null:Rr(g,"First parameter");let w=vf(C,"Second parameter"),F=Xk(g,"First parameter");if(nE(this),F.type==="bytes"){if(w.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let j=jl(w,0);Qx(this,F,j)}else{let j=bf(w),Q=jl(w,1);$k(this,F,Q,j)}}get locked(){if(!ps(this))throw Au("locked");return ms(this)}cancel(g=void 0){return ps(this)?ms(this)?d(new TypeError("Cannot cancel a stream that already has a reader")):co(this,g):d(Au("cancel"))}getReader(g=void 0){if(!ps(this))throw Au("getReader");return ek(g,"First parameter").mode===void 0?K(this):o9(this)}pipeThrough(g,C={}){if(!ps(this))throw Au("pipeThrough");qt(g,1,"pipeThrough");let w=oL(g,"First parameter"),F=R9(C,"Second parameter");if(ms(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Da(w.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let j=b9(this,w.writable,F.preventClose,F.preventAbort,F.preventCancel,F.signal);return S(j),w.readable}pipeTo(g,C={}){if(!ps(this))return d(Au("pipeTo"));if(g===void 0)return d("Parameter 1 is required in 'pipeTo'.");if(!Ra(g))return d(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let w;try{w=R9(C,"Second parameter")}catch(F){return d(F)}return ms(this)?d(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Da(g)?d(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):b9(this,g,w.preventClose,w.preventAbort,w.preventCancel,w.signal)}tee(){if(!ps(this))throw Au("tee");let g=Hk(this);return rt(g)}values(g=void 0){if(!ps(this))throw Au("values");let C=rL(g,"First parameter");return Ta(this,C.preventCancel)}[F2](g){return this.values(g)}static from(g){return Kk(g)}}Object.defineProperties(Er,{from:{enumerable:!0}}),Object.defineProperties(Er.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),o(Er.from,"from"),o(Er.prototype.cancel,"cancel"),o(Er.prototype.getReader,"getReader"),o(Er.prototype.pipeThrough,"pipeThrough"),o(Er.prototype.pipeTo,"pipeTo"),o(Er.prototype.tee,"tee"),o(Er.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Er.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(Er.prototype,F2,{value:Er.prototype.values,writable:!0,configurable:!0});function Xl(h,g,C,w=1,F=()=>1){let j=Object.create(Er.prototype);nE(j);let Q=Object.create(Ti.prototype);return O9(j,Q,h,g,C,w,F),j}function D9(h,g,C){let w=Object.create(Er.prototype);nE(w);let F=Object.create(_i.prototype);return n9(w,F,h,g,C,0,void 0),w}function nE(h){h._state="readable",h._reader=void 0,h._storedError=void 0,h._disturbed=!1}function ps(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_readableStreamController")?!1:h instanceof Er}function ms(h){return h._reader!==void 0}function co(h,g){if(h._disturbed=!0,h._state==="closed")return c(void 0);if(h._state==="errored")return d(h._storedError);Ql(h);let C=h._reader;if(C!==void 0&&gu(C)){let F=C._readIntoRequests;C._readIntoRequests=new I,F.forEach(j=>{j._closeSteps(void 0)})}let w=h._readableStreamController[Z](g);return A(w,e)}function Ql(h){h._state="closed";let g=h._reader;if(g!==void 0&&(wa(g),fe(g))){let C=g._readRequests;g._readRequests=new I,C.forEach(w=>{w._closeSteps()})}}function I9(h,g){h._state="errored",h._storedError=g;let C=h._reader;C!==void 0&&(_t(C,g),fe(C)?Et(C,g):a9(C,g))}function Au(h){return new TypeError(`ReadableStream.prototype.${h} can only be used on a ReadableStream`)}function M9(h,g){Vr(h,g);let C=h?.highWaterMark;return _(C,"highWaterMark","QueuingStrategyInit"),{highWaterMark:D(C)}}let N9=h=>h.byteLength;o(N9,"size");class kf{constructor(g){qt(g,1,"ByteLengthQueuingStrategy"),g=M9(g,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=g.highWaterMark}get highWaterMark(){if(!P9(this))throw B9("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!P9(this))throw B9("size");return N9}}Object.defineProperties(kf.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(kf.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function B9(h){return new TypeError(`ByteLengthQueuingStrategy.prototype.${h} can only be used on a ByteLengthQueuingStrategy`)}function P9(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_byteLengthQueuingStrategyHighWaterMark")?!1:h instanceof kf}let F9=()=>1;o(F9,"size");class Lf{constructor(g){qt(g,1,"CountQueuingStrategy"),g=M9(g,"First parameter"),this._countQueuingStrategyHighWaterMark=g.highWaterMark}get highWaterMark(){if(!k9(this))throw x9("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!k9(this))throw x9("size");return F9}}Object.defineProperties(Lf.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Lf.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function x9(h){return new TypeError(`CountQueuingStrategy.prototype.${h} can only be used on a CountQueuingStrategy`)}function k9(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_countQueuingStrategyHighWaterMark")?!1:h instanceof Lf}function iL(h,g){Vr(h,g);let C=h?.cancel,w=h?.flush,F=h?.readableType,j=h?.start,Q=h?.transform,ce=h?.writableType;return{cancel:C===void 0?void 0:cL(C,h,`${g} has member 'cancel' that`),flush:w===void 0?void 0:sL(w,h,`${g} has member 'flush' that`),readableType:F,start:j===void 0?void 0:uL(j,h,`${g} has member 'start' that`),transform:Q===void 0?void 0:aL(Q,h,`${g} has member 'transform' that`),writableType:ce}}function sL(h,g,C){return Or(h,C),w=>B(h,g,[w])}function uL(h,g,C){return Or(h,C),w=>P(h,g,[w])}function aL(h,g,C){return Or(h,C),(w,F)=>B(h,g,[w,F])}function cL(h,g,C){return Or(h,C),w=>B(h,g,[w])}class Uf{constructor(g={},C={},w={}){g===void 0&&(g=null);let F=vf(C,"Second parameter"),j=vf(w,"Third parameter"),Q=iL(g,"First parameter");if(Q.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(Q.writableType!==void 0)throw new RangeError("Invalid writableType specified");let ce=jl(j,0),Se=bf(j),Ee=jl(F,1),Te=bf(F),Ie,at=a(lo=>{Ie=lo});lL(this,at,Ee,Te,ce,Se),fL(this,Q),Q.start!==void 0?Ie(Q.start(this._transformStreamController)):Ie(void 0)}get readable(){if(!L9(this))throw V9("readable");return this._readable}get writable(){if(!L9(this))throw V9("writable");return this._writable}}Object.defineProperties(Uf.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Uf.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function lL(h,g,C,w,F,j){function Q(){return g}function ce(at){return mL(h,at)}function Se(at){return gL(h,at)}function Ee(){return EL(h)}h._writable=pk(Q,ce,Ee,Se,C,w);function Te(){return yL(h)}function Ie(at){return CL(h,at)}h._readable=Xl(Q,Te,Ie,F,j),h._backpressure=void 0,h._backpressureChangePromise=void 0,h._backpressureChangePromise_resolve=void 0,qf(h,!0),h._transformStreamController=void 0}function L9(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_transformStreamController")?!1:h instanceof Uf}function U9(h,g){ao(h._readable._readableStreamController,g),oE(h,g)}function oE(h,g){Vf(h._transformStreamController),Kl(h._writable._writableStreamController,g),iE(h)}function iE(h){h._backpressure&&qf(h,!1)}function qf(h,g){h._backpressureChangePromise!==void 0&&h._backpressureChangePromise_resolve(),h._backpressureChangePromise=a(C=>{h._backpressureChangePromise_resolve=C}),h._backpressure=g}class gs{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Gf(this))throw $f("desiredSize");let g=this._controlledTransformStream._readable._readableStreamController;return rE(g)}enqueue(g=void 0){if(!Gf(this))throw $f("enqueue");q9(this,g)}error(g=void 0){if(!Gf(this))throw $f("error");hL(this,g)}terminate(){if(!Gf(this))throw $f("terminate");pL(this)}}Object.defineProperties(gs.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),o(gs.prototype.enqueue,"enqueue"),o(gs.prototype.error,"error"),o(gs.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(gs.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Gf(h){return!r(h)||!Object.prototype.hasOwnProperty.call(h,"_controlledTransformStream")?!1:h instanceof gs}function dL(h,g,C,w,F){g._controlledTransformStream=h,h._transformStreamController=g,g._transformAlgorithm=C,g._flushAlgorithm=w,g._cancelAlgorithm=F,g._finishPromise=void 0,g._finishPromise_resolve=void 0,g._finishPromise_reject=void 0}function fL(h,g){let C=Object.create(gs.prototype),w,F,j;g.transform!==void 0?w=Q=>g.transform(Q,C):w=Q=>{try{return q9(C,Q),c(void 0)}catch(ce){return d(ce)}},g.flush!==void 0?F=()=>g.flush(C):F=()=>c(void 0),g.cancel!==void 0?j=Q=>g.cancel(Q):j=()=>c(void 0),dL(h,C,w,F,j)}function Vf(h){h._transformAlgorithm=void 0,h._flushAlgorithm=void 0,h._cancelAlgorithm=void 0}function q9(h,g){let C=h._controlledTransformStream,w=C._readable._readableStreamController;if(!Na(w))throw new TypeError("Readable side is not in a state that permits enqueue");try{Ma(w,g)}catch(j){throw oE(C,j),C._readable._storedError}Vk(w)!==C._backpressure&&qf(C,!0)}function hL(h,g){U9(h._controlledTransformStream,g)}function G9(h,g){let C=h._transformAlgorithm(g);return A(C,void 0,w=>{throw U9(h._controlledTransformStream,w),w})}function pL(h){let g=h._controlledTransformStream,C=g._readable._readableStreamController;Cu(C);let w=new TypeError("TransformStream terminated");oE(g,w)}function mL(h,g){let C=h._transformStreamController;if(h._backpressure){let w=h._backpressureChangePromise;return A(w,()=>{let F=h._writable;if(F._state==="erroring")throw F._storedError;return G9(C,g)})}return G9(C,g)}function gL(h,g){let C=h._transformStreamController;if(C._finishPromise!==void 0)return C._finishPromise;let w=h._readable;C._finishPromise=a((j,Q)=>{C._finishPromise_resolve=j,C._finishPromise_reject=Q});let F=C._cancelAlgorithm(g);return Vf(C),m(F,()=>(w._state==="errored"?Ba(C,w._storedError):(ao(w._readableStreamController,g),sE(C)),null),j=>(ao(w._readableStreamController,j),Ba(C,j),null)),C._finishPromise}function EL(h){let g=h._transformStreamController;if(g._finishPromise!==void 0)return g._finishPromise;let C=h._readable;g._finishPromise=a((F,j)=>{g._finishPromise_resolve=F,g._finishPromise_reject=j});let w=g._flushAlgorithm();return Vf(g),m(w,()=>(C._state==="errored"?Ba(g,C._storedError):(Cu(C._readableStreamController),sE(g)),null),F=>(ao(C._readableStreamController,F),Ba(g,F),null)),g._finishPromise}function yL(h){return qf(h,!1),h._backpressureChangePromise}function CL(h,g){let C=h._transformStreamController;if(C._finishPromise!==void 0)return C._finishPromise;let w=h._writable;C._finishPromise=a((j,Q)=>{C._finishPromise_resolve=j,C._finishPromise_reject=Q});let F=C._cancelAlgorithm(g);return Vf(C),m(F,()=>(w._state==="errored"?Ba(C,w._storedError):(Kl(w._writableStreamController,g),iE(h),sE(C)),null),j=>(Kl(w._writableStreamController,j),iE(h),Ba(C,j),null)),C._finishPromise}function $f(h){return new TypeError(`TransformStreamDefaultController.prototype.${h} can only be used on a TransformStreamDefaultController`)}function sE(h){h._finishPromise_resolve!==void 0&&(h._finishPromise_resolve(),h._finishPromise_resolve=void 0,h._finishPromise_reject=void 0)}function Ba(h,g){h._finishPromise_reject!==void 0&&(S(h._finishPromise),h._finishPromise_reject(g),h._finishPromise_resolve=void 0,h._finishPromise_reject=void 0)}function V9(h){return new TypeError(`TransformStream.prototype.${h} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=kf,t.CountQueuingStrategy=Lf,t.ReadableByteStreamController=_i,t.ReadableStream=Er,t.ReadableStreamBYOBReader=fs,t.ReadableStreamBYOBRequest=hu,t.ReadableStreamDefaultController=Ti,t.ReadableStreamDefaultReader=ee,t.TransformStream=Uf,t.TransformStreamDefaultController=gs,t.WritableStream=hs,t.WritableStreamDefaultController=Ia,t.WritableStreamDefaultWriter=wi}))});var $b=R(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:e}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=e}catch(r){throw t.emitWarning=e,r}}catch{Object.assign(globalThis,Vb())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(r){let n=0,o=this;return new ReadableStream({type:"bytes",async pull(i){let u=await o.slice(n,Math.min(o.size,n+65536)).arrayBuffer();n+=u.byteLength,i.enqueue(new Uint8Array(u)),n===o.size&&i.close()}})})}catch{}});async function*DE(t,e=!0){for(let r of t)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(e){let n=r.byteOffset,o=r.byteOffset+r.byteLength;for(;n!==o;){let i=Math.min(o-n,Hb),s=r.buffer.slice(n,n+i);n+=s.byteLength,yield new Uint8Array(s)}}else yield r;else{let n=0,o=r;for(;n!==o.size;){let s=await o.slice(n,Math.min(o.size,n+Hb)).arrayBuffer();n+=s.byteLength,yield new Uint8Array(s)}}}var the,Hb,Wb,VU,fo,r1=Kt(()=>{the=Xe($b(),1);Hb=65536;Wb=class IE{#e=[];#t="";#r=0;#n="transparent";constructor(e=[],r={}){if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&typeof r!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");r===null&&(r={});let n=new TextEncoder;for(let i of e){let s;ArrayBuffer.isView(i)?s=new Uint8Array(i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)):i instanceof ArrayBuffer?s=new Uint8Array(i.slice(0)):i instanceof IE?s=i:s=n.encode(`${i}`),this.#r+=ArrayBuffer.isView(s)?s.byteLength:s.size,this.#e.push(s)}this.#n=`${r.endings===void 0?"transparent":r.endings}`;let o=r.type===void 0?"":String(r.type);this.#t=/^[\x20-\x7E]*$/.test(o)?o:""}get size(){return this.#r}get type(){return this.#t}async text(){let e=new TextDecoder,r="";for await(let n of DE(this.#e,!1))r+=e.decode(n,{stream:!0});return r+=e.decode(),r}async arrayBuffer(){let e=new Uint8Array(this.size),r=0;for await(let n of DE(this.#e,!1))e.set(n,r),r+=n.length;return e.buffer}stream(){let e=DE(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let n=await e.next();n.done?r.close():r.enqueue(n.value)},async cancel(){await e.return()}})}slice(e=0,r=this.size,n=""){let{size:o}=this,i=e<0?Math.max(o+e,0):Math.min(e,o),s=r<0?Math.max(o+r,0):Math.min(r,o),u=Math.max(s-i,0),a=this.#e,c=[],d=0;for(let m of a){if(d>=u)break;let E=ArrayBuffer.isView(m)?m.byteLength:m.size;if(i&&E<=i)i-=E,s-=E;else{let y;ArrayBuffer.isView(m)?(y=m.subarray(i,Math.min(E,s)),d+=y.byteLength):(y=m.slice(i,Math.min(E,s)),d+=y.size),s-=E,c.push(y),i=0}}let p=new IE([],{type:String(n).toLowerCase()});return p.#r=u,p.#e=c,p}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(Wb.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});VU=Wb,fo=VU});var $U,HU,Cs,ME=Kt(()=>{r1();$U=class extends fo{#e=0;#t="";constructor(e,r,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n),n===null&&(n={});let o=n.lastModified===void 0?Date.now():Number(n.lastModified);Number.isNaN(o)||(this.#e=o),this.#t=String(r)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof fo&&/^(File)$/.test(e[Symbol.toStringTag])}},HU=$U,Cs=HU});function Kb(t,e=fo){var r=`${zb()}${zb()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],o=`--${r}\r
Content-Disposition: form-data; name="`;return t.forEach((i,s)=>typeof i=="string"?n.push(o+NE(s)+`"\r
\r
${i.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(o+NE(s)+`"; filename="${NE(i.name,1)}"\r
Content-Type: ${i.type||"application/octet-stream"}\r
\r
`,i,`\r
`)),n.push(`--${r}--`),new e(n,{type:"multipart/form-data; boundary="+r})}var n1,WU,zU,zb,jU,jb,NE,_u,As,uh=Kt(()=>{r1();ME();({toStringTag:n1,iterator:WU,hasInstance:zU}=Symbol),zb=Math.random,jU="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),jb=(t,e,r)=>(t+="",/^(Blob|File)$/.test(e&&e[n1])?[(r=r!==void 0?r+"":e[n1]=="File"?e.name:"blob",t),e.name!==r||e[n1]=="blob"?new Cs([e],r,e):e]:[t,e+""]),NE=(t,e)=>(e?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),_u=(t,e,r)=>{if(e.length<r)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${r} arguments required, but only ${e.length} present.`)},As=class{#e=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[n1](){return"FormData"}[WU](){return this.entries()}static[zU](e){return e&&typeof e=="object"&&e[n1]==="FormData"&&!jU.some(r=>typeof e[r]!="function")}append(...e){_u("append",arguments,2),this.#e.push(jb(...e))}delete(e){_u("delete",arguments,1),e+="",this.#e=this.#e.filter(([r])=>r!==e)}get(e){_u("get",arguments,1),e+="";for(var r=this.#e,n=r.length,o=0;o<n;o++)if(r[o][0]===e)return r[o][1];return null}getAll(e,r){return _u("getAll",arguments,1),r=[],e+="",this.#e.forEach(n=>n[0]===e&&r.push(n[1])),r}has(e){return _u("has",arguments,1),e+="",this.#e.some(r=>r[0]===e)}forEach(e,r){_u("forEach",arguments,1);for(var[n,o]of this)e.call(r,o,n,this)}set(...e){_u("set",arguments,2);var r=[],n=!0;e=jb(...e),this.#e.forEach(o=>{o[0]===e[0]?n&&(n=!r.push(e)):r.push(o)}),n&&r.push(e),this.#e=r}*entries(){yield*this.#e}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}}});var Ri,ah=Kt(()=>{Ri=class extends Error{constructor(e,r){super(e),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}});var Ir,BE=Kt(()=>{ah();Ir=class extends Ri{constructor(e,r,n){super(e,r),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}});var ch,PE,o1,Yb,Jb,Xb,lh=Kt(()=>{ch=Symbol.toStringTag,PE=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[ch]==="URLSearchParams",o1=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[ch]),Yb=t=>typeof t=="object"&&(t[ch]==="AbortSignal"||t[ch]==="EventTarget"),Jb=(t,e)=>{let r=new URL(e).hostname,n=new URL(t).hostname;return r===n||r.endsWith(`.${n}`)},Xb=(t,e)=>{let r=new URL(e).protocol,n=new URL(t).protocol;return r===n}});var Zb=R((phe,Qb)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),e=new t().port1,r=new ArrayBuffer;e.postMessage(r,[r,r])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}Qb.exports=globalThis.DOMException});var wu,e8,t8,FE,r8,n8,o8,i8,s8,u8,dh,xE=Kt(()=>{wu=require("node:fs"),e8=require("node:path"),t8=Xe(Zb(),1);ME();r1();({stat:FE}=wu.promises),r8=(t,e)=>s8((0,wu.statSync)(t),t,e),n8=(t,e)=>FE(t).then(r=>s8(r,t,e)),o8=(t,e)=>FE(t).then(r=>u8(r,t,e)),i8=(t,e)=>u8((0,wu.statSync)(t),t,e),s8=(t,e,r="")=>new fo([new dh({path:e,size:t.size,lastModified:t.mtimeMs,start:0})],{type:r}),u8=(t,e,r="")=>new Cs([new dh({path:e,size:t.size,lastModified:t.mtimeMs,start:0})],(0,e8.basename)(e),{type:r,lastModified:t.mtimeMs}),dh=class t{#e;#t;constructor(e){this.#e=e.path,this.#t=e.start,this.size=e.size,this.lastModified=e.lastModified}slice(e,r){return new t({path:this.#e,lastModified:this.lastModified,size:r-e,start:this.#t+e})}async*stream(){let{mtimeMs:e}=await FE(this.#e);if(e>this.lastModified)throw new t8.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,wu.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var c8={};aE(c8,{toFormData:()=>eq});function ZU(t){let e=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let r=e[2]||e[3]||"",n=r.slice(r.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(o,i)=>String.fromCharCode(i)),n}async function eq(t,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let r=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new kE(r[1]||r[2]),o,i,s,u,a,c,d=[],p=new As,m=b=>{s+=S.decode(b,{stream:!0})},E=b=>{d.push(b)},y=()=>{let b=new Cs(d,c,{type:a});p.append(u,b)},A=()=>{p.append(u,s)},S=new TextDecoder("utf-8");S.decode(),n.onPartBegin=function(){n.onPartData=m,n.onPartEnd=A,o="",i="",s="",u="",a="",c=null,d.length=0},n.onHeaderField=function(b){o+=S.decode(b,{stream:!0})},n.onHeaderValue=function(b){i+=S.decode(b,{stream:!0})},n.onHeaderEnd=function(){if(i+=S.decode(),o=o.toLowerCase(),o==="content-disposition"){let b=i.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);b&&(u=b[2]||b[3]||""),c=ZU(i),c&&(n.onPartData=E,n.onPartEnd=y)}else o==="content-type"&&(a=i);i="",o=""};for await(let b of t)n.write(b);return n.end(),p}var Xo,ht,a8,Ss,fh,hh,KU,i1,YU,JU,XU,QU,Tu,kE,l8=Kt(()=>{xE();uh();Xo=0,ht={START_BOUNDARY:Xo++,HEADER_FIELD_START:Xo++,HEADER_FIELD:Xo++,HEADER_VALUE_START:Xo++,HEADER_VALUE:Xo++,HEADER_VALUE_ALMOST_DONE:Xo++,HEADERS_ALMOST_DONE:Xo++,PART_DATA_START:Xo++,PART_DATA:Xo++,END:Xo++},a8=1,Ss={PART_BOUNDARY:a8,LAST_BOUNDARY:a8*=2},fh=10,hh=13,KU=32,i1=45,YU=58,JU=97,XU=122,QU=t=>t|32,Tu=()=>{},kE=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=Tu,this.onHeaderField=Tu,this.onHeadersEnd=Tu,this.onHeaderValue=Tu,this.onPartBegin=Tu,this.onPartData=Tu,this.onPartEnd=Tu,this.boundaryChars={},e=`\r
--`+e;let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n),this.boundaryChars[r[n]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=ht.START_BOUNDARY}write(e){let r=0,n=e.length,o=this.index,{lookbehind:i,boundary:s,boundaryChars:u,index:a,state:c,flags:d}=this,p=this.boundary.length,m=p-1,E=e.length,y,A,S=v=>{this[v+"Mark"]=r},b=v=>{delete this[v+"Mark"]},P=(v,I,O,z)=>{(I===void 0||I!==O)&&this[v](z&&z.subarray(I,O))},B=(v,I)=>{let O=v+"Mark";O in this&&(I?(P(v,this[O],r,e),delete this[O]):(P(v,this[O],e.length,e),this[O]=0))};for(r=0;r<n;r++)switch(y=e[r],c){case ht.START_BOUNDARY:if(a===s.length-2){if(y===i1)d|=Ss.LAST_BOUNDARY;else if(y!==hh)return;a++;break}else if(a-1===s.length-2){if(d&Ss.LAST_BOUNDARY&&y===i1)c=ht.END,d=0;else if(!(d&Ss.LAST_BOUNDARY)&&y===fh)a=0,P("onPartBegin"),c=ht.HEADER_FIELD_START;else return;break}y!==s[a+2]&&(a=-2),y===s[a+2]&&a++;break;case ht.HEADER_FIELD_START:c=ht.HEADER_FIELD,S("onHeaderField"),a=0;case ht.HEADER_FIELD:if(y===hh){b("onHeaderField"),c=ht.HEADERS_ALMOST_DONE;break}if(a++,y===i1)break;if(y===YU){if(a===1)return;B("onHeaderField",!0),c=ht.HEADER_VALUE_START;break}if(A=QU(y),A<JU||A>XU)return;break;case ht.HEADER_VALUE_START:if(y===KU)break;S("onHeaderValue"),c=ht.HEADER_VALUE;case ht.HEADER_VALUE:y===hh&&(B("onHeaderValue",!0),P("onHeaderEnd"),c=ht.HEADER_VALUE_ALMOST_DONE);break;case ht.HEADER_VALUE_ALMOST_DONE:if(y!==fh)return;c=ht.HEADER_FIELD_START;break;case ht.HEADERS_ALMOST_DONE:if(y!==fh)return;P("onHeadersEnd"),c=ht.PART_DATA_START;break;case ht.PART_DATA_START:c=ht.PART_DATA,S("onPartData");case ht.PART_DATA:if(o=a,a===0){for(r+=m;r<E&&!(e[r]in u);)r+=p;r-=m,y=e[r]}if(a<s.length)s[a]===y?(a===0&&B("onPartData",!0),a++):a=0;else if(a===s.length)a++,y===hh?d|=Ss.PART_BOUNDARY:y===i1?d|=Ss.LAST_BOUNDARY:a=0;else if(a-1===s.length)if(d&Ss.PART_BOUNDARY){if(a=0,y===fh){d&=~Ss.PART_BOUNDARY,P("onPartEnd"),P("onPartBegin"),c=ht.HEADER_FIELD_START;break}}else d&Ss.LAST_BOUNDARY&&y===i1?(P("onPartEnd"),c=ht.END,d=0):a=0;if(a>0)i[a-1]=y;else if(o>0){let v=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);P("onPartData",0,o,v),o=0,S("onPartData"),r--}break;case ht.END:break;default:throw new Error(`Unexpected state entered: ${c}`)}B("onHeaderField"),B("onHeaderValue"),B("onPartData"),this.index=a,this.state=c,this.flags=d}end(){if(this.state===ht.HEADER_FIELD_START&&this.index===0||this.state===ht.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==ht.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});async function LE(t){if(t[zr].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[zr].disturbed=!0,t[zr].error)throw t[zr].error;let{body:e}=t;if(e===null)return fn.Buffer.alloc(0);if(!(e instanceof Un.default))return fn.Buffer.alloc(0);let r=[],n=0;try{for await(let o of e){if(t.size>0&&n+o.length>t.size){let i=new Ir(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(i),i}n+=o.length,r.push(o)}}catch(o){throw o instanceof Ri?o:new Ir(`Invalid response body while trying to fetch ${t.url}: ${o.message}`,"system",o)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(o=>typeof o=="string")?fn.Buffer.from(r.join("")):fn.Buffer.concat(r,n)}catch(o){throw new Ir(`Could not create Buffer from response body for ${t.url}: ${o.message}`,"system",o)}else throw new Ir(`Premature close of server response while trying to fetch ${t.url}`)}var Un,Di,fn,tq,zr,Qo,Ha,rq,ph,d8,f8,mh=Kt(()=>{Un=Xe(require("node:stream"),1),Di=require("node:util"),fn=require("node:buffer");r1();uh();BE();ah();lh();tq=(0,Di.promisify)(Un.default.pipeline),zr=Symbol("Body internals"),Qo=class{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:PE(e)?e=fn.Buffer.from(e.toString()):o1(e)||fn.Buffer.isBuffer(e)||(Di.types.isAnyArrayBuffer(e)?e=fn.Buffer.from(e):ArrayBuffer.isView(e)?e=fn.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Un.default||(e instanceof As?(e=Kb(e),n=e.type.split("=")[1]):e=fn.Buffer.from(String(e))));let o=e;fn.Buffer.isBuffer(e)?o=Un.default.Readable.from(e):o1(e)&&(o=Un.default.Readable.from(e.stream())),this[zr]={body:e,stream:o,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof Un.default&&e.on("error",i=>{let s=i instanceof Ri?i:new Ir(`Invalid response body while trying to fetch ${this.url}: ${i.message}`,"system",i);this[zr].error=s})}get body(){return this[zr].stream}get bodyUsed(){return this[zr].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:r,byteLength:n}=await LE(this);return e.slice(r,r+n)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let n=new As,o=new URLSearchParams(await this.text());for(let[i,s]of o)n.append(i,s);return n}let{toFormData:r}=await Promise.resolve().then(()=>(l8(),c8));return r(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[zr].body&&this[zr].body.type||"",r=await this.arrayBuffer();return new fo([r],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await LE(this);return new TextDecoder().decode(e)}buffer(){return LE(this)}};Qo.prototype.buffer=(0,Di.deprecate)(Qo.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Qo.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Di.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});Ha=(t,e)=>{let r,n,{body:o}=t[zr];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof Un.default&&typeof o.getBoundary!="function"&&(r=new Un.PassThrough({highWaterMark:e}),n=new Un.PassThrough({highWaterMark:e}),o.pipe(r),o.pipe(n),t[zr].stream=r,o=n),o},rq=(0,Di.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),ph=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":PE(t)?"application/x-www-form-urlencoded;charset=UTF-8":o1(t)?t.type||null:fn.Buffer.isBuffer(t)||Di.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof As?`multipart/form-data; boundary=${e[zr].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${rq(t)}`:t instanceof Un.default?null:"text/plain;charset=UTF-8",d8=t=>{let{body:e}=t[zr];return e===null?0:o1(e)?e.size:fn.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},f8=async(t,{body:e})=>{e===null?t.end():await tq(e,t)}});function h8(t=[]){return new jr(t.reduce((e,r,n,o)=>(n%2===0&&e.push(o.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return gh(e),qE(e,String(r)),!0}catch{return!1}}))}var UE,s1,gh,qE,jr,Eh=Kt(()=>{UE=require("node:util"),s1=Xe(require("node:http"),1),gh=typeof s1.default.validateHeaderName=="function"?s1.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},qE=typeof s1.default.validateHeaderValue=="function"?s1.default.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},jr=class t extends URLSearchParams{constructor(e){let r=[];if(e instanceof t){let n=e.raw();for(let[o,i]of Object.entries(n))r.push(...i.map(s=>[o,s]))}else if(e!=null)if(typeof e=="object"&&!UE.types.isBoxedPrimitive(e)){let n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(o=>{if(typeof o!="object"||UE.types.isBoxedPrimitive(o))throw new TypeError("Each header pair must be an iterable object");return[...o]}).map(o=>{if(o.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...o]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,o])=>(gh(n),qE(n,String(o)),[String(n).toLowerCase(),String(o)])):void 0,super(r),new Proxy(this,{get(n,o,i){switch(o){case"append":case"set":return(s,u)=>(gh(s),qE(s,String(u)),URLSearchParams.prototype[o].call(n,String(s).toLowerCase(),String(u)));case"delete":case"has":case"getAll":return s=>(gh(s),URLSearchParams.prototype[o].call(n,String(s).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,o,i)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,r=void 0){for(let n of this.keys())Reflect.apply(e,r,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{let n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}};Object.defineProperties(jr.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}))});var nq,u1,GE=Kt(()=>{nq=new Set([301,302,303,307,308]),u1=t=>nq.has(t)});var ho,hn,p8=Kt(()=>{Eh();mh();GE();ho=Symbol("Response internals"),hn=class t extends Qo{constructor(e=null,r={}){super(e,r);let n=r.status!=null?r.status:200,o=new jr(r.headers);if(e!==null&&!o.has("Content-Type")){let i=ph(e,this);i&&o.append("Content-Type",i)}this[ho]={type:"default",url:r.url,status:n,statusText:r.statusText||"",headers:o,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[ho].type}get url(){return this[ho].url||""}get status(){return this[ho].status}get ok(){return this[ho].status>=200&&this[ho].status<300}get redirected(){return this[ho].counter>0}get statusText(){return this[ho].statusText}get headers(){return this[ho].headers}get highWaterMark(){return this[ho].highWaterMark}clone(){return new t(Ha(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,r=302){if(!u1(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(e).toString()},status:r})}static error(){let e=new t(null,{status:0,statusText:""});return e[ho].type="error",e}static json(e=void 0,r={}){let n=JSON.stringify(e);if(n===void 0)throw new TypeError("data is not JSON serializable");let o=new jr(r&&r.headers);return o.has("content-type")||o.set("content-type","application/json"),new t(n,{...r,headers:o})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(hn.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}})});var m8,g8=Kt(()=>{m8=t=>{if(t.search)return t.search;let e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""}});function E8(t,e=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}function S8(t){if(!C8.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function oq(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let e=t.host.replace(/(^\[)|(]$)/g,""),r=(0,y8.isIP)(e);return r===4&&/^127\./.test(e)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function Wa(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:oq(t)}function _8(t,{referrerURLCallback:e,referrerOriginCallback:r}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let n=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let o=t.referrer,i=E8(o),s=E8(o,!0);i.toString().length>4096&&(i=s),e&&(i=e(i)),r&&(s=r(s));let u=new URL(t.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return s;case"unsafe-url":return i;case"strict-origin":return Wa(i)&&!Wa(u)?"no-referrer":s.toString();case"strict-origin-when-cross-origin":return i.origin===u.origin?i:Wa(i)&&!Wa(u)?"no-referrer":s;case"same-origin":return i.origin===u.origin?i:"no-referrer";case"origin-when-cross-origin":return i.origin===u.origin?i:s;case"no-referrer-when-downgrade":return Wa(i)&&!Wa(u)?"no-referrer":i;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function w8(t){let e=(t.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let n of e)n&&C8.has(n)&&(r=n);return r}var y8,C8,A8,VE=Kt(()=>{y8=require("node:net");C8=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),A8="strict-origin-when-cross-origin"});var T8,b8,Qt,a1,iq,_s,v8,O8=Kt(()=>{T8=require("node:url"),b8=require("node:util");Eh();mh();lh();g8();VE();Qt=Symbol("Request internals"),a1=t=>typeof t=="object"&&typeof t[Qt]=="object",iq=(0,b8.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),_s=class t extends Qo{constructor(e,r={}){let n;if(a1(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentials.`);let o=r.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(o)&&(o=o.toUpperCase()),!a1(r)&&"data"in r&&iq(),(r.body!=null||a1(e)&&e.body!==null)&&(o==="GET"||o==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let i=r.body?r.body:a1(e)&&e.body!==null?Ha(e):null;super(i,{size:r.size||e.size||0});let s=new jr(r.headers||e.headers||{});if(i!==null&&!s.has("Content-Type")){let c=ph(i,this);c&&s.set("Content-Type",c)}let u=a1(e)?e.signal:null;if("signal"in r&&(u=r.signal),u!=null&&!Yb(u))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let a=r.referrer==null?e.referrer:r.referrer;if(a==="")a="no-referrer";else if(a){let c=new URL(a);a=/^about:(\/\/)?client$/.test(c)?"client":c}else a=void 0;this[Qt]={method:o,redirect:r.redirect||e.redirect||"follow",headers:s,parsedURL:n,signal:u,referrer:a},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||e.referrerPolicy||""}get method(){return this[Qt].method}get url(){return(0,T8.format)(this[Qt].parsedURL)}get headers(){return this[Qt].headers}get redirect(){return this[Qt].redirect}get signal(){return this[Qt].signal}get referrer(){if(this[Qt].referrer==="no-referrer")return"";if(this[Qt].referrer==="client")return"about:client";if(this[Qt].referrer)return this[Qt].referrer.toString()}get referrerPolicy(){return this[Qt].referrerPolicy}set referrerPolicy(e){this[Qt].referrerPolicy=S8(e)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(_s.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});v8=t=>{let{parsedURL:e}=t[Qt],r=new jr(t[Qt].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){let u=d8(t);typeof u=="number"&&!Number.isNaN(u)&&(n=String(u))}n&&r.set("Content-Length",n),t.referrerPolicy===""&&(t.referrerPolicy=A8),t.referrer&&t.referrer!=="no-referrer"?t[Qt].referrer=_8(t):t[Qt].referrer="no-referrer",t[Qt].referrer instanceof URL&&r.set("Referer",t.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:o}=t;typeof o=="function"&&(o=o(e));let i=m8(e),s={path:e.pathname+i,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:o};return{parsedURL:e,options:s}}});var c1,R8=Kt(()=>{ah();c1=class extends Ri{constructor(e,r="aborted"){super(e,r)}}});var M8={};aE(M8,{AbortError:()=>c1,Blob:()=>fo,FetchError:()=>Ir,File:()=>Cs,FormData:()=>As,Headers:()=>jr,Request:()=>_s,Response:()=>hn,blobFrom:()=>n8,blobFromSync:()=>r8,default:()=>$E,fileFrom:()=>o8,fileFromSync:()=>i8,isRedirect:()=>u1});async function $E(t,e){return new Promise((r,n)=>{let o=new _s(t,e),{parsedURL:i,options:s}=v8(o);if(!sq.has(i.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${i.protocol.replace(/:$/,"")}" is not supported.`);if(i.protocol==="data:"){let y=Ub(o.url),A=new hn(y,{headers:{"Content-Type":y.typeFull}});r(A);return}let u=(i.protocol==="https:"?I8.default:D8.default).request,{signal:a}=o,c=null,d=()=>{let y=new c1("The operation was aborted.");n(y),o.body&&o.body instanceof pn.default.Readable&&o.body.destroy(y),!(!c||!c.body)&&c.body.emit("error",y)};if(a&&a.aborted){d();return}let p=()=>{d(),E()},m=u(i.toString(),s);a&&a.addEventListener("abort",p);let E=()=>{m.abort(),a&&a.removeEventListener("abort",p)};m.on("error",y=>{n(new Ir(`request to ${o.url} failed, reason: ${y.message}`,"system",y)),E()}),uq(m,y=>{c&&c.body&&c.body.destroy(y)}),process.version<"v14"&&m.on("socket",y=>{let A;y.prependListener("end",()=>{A=y._eventsCount}),y.prependListener("close",S=>{if(c&&A<y._eventsCount&&!S){let b=new Error("Premature close");b.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",b)}})}),m.on("response",y=>{m.setTimeout(0);let A=h8(y.rawHeaders);if(u1(y.statusCode)){let v=A.get("Location"),I=null;try{I=v===null?null:new URL(v,o.url)}catch{if(o.redirect!=="manual"){n(new Ir(`uri requested responds with an invalid redirect URL: ${v}`,"invalid-redirect")),E();return}}switch(o.redirect){case"error":n(new Ir(`uri requested responds with a redirect, redirect mode is set to error: ${o.url}`,"no-redirect")),E();return;case"manual":break;case"follow":{if(I===null)break;if(o.counter>=o.follow){n(new Ir(`maximum redirect reached at: ${o.url}`,"max-redirect")),E();return}let O={headers:new jr(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:Ha(o),signal:o.signal,size:o.size,referrer:o.referrer,referrerPolicy:o.referrerPolicy};if(!Jb(o.url,I)||!Xb(o.url,I))for(let Z of["authorization","www-authenticate","cookie","cookie2"])O.headers.delete(Z);if(y.statusCode!==303&&o.body&&e.body instanceof pn.default.Readable){n(new Ir("Cannot follow redirect with body being a readable stream","unsupported-redirect")),E();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&o.method==="POST")&&(O.method="GET",O.body=void 0,O.headers.delete("content-length"));let z=w8(A);z&&(O.referrerPolicy=z),r($E(new _s(I,O))),E();return}default:return n(new TypeError(`Redirect option '${o.redirect}' is not a valid value of RequestRedirect`))}}a&&y.once("end",()=>{a.removeEventListener("abort",p)});let S=(0,pn.pipeline)(y,new pn.PassThrough,v=>{v&&n(v)});process.version<"v12.10"&&y.on("aborted",p);let b={url:o.url,status:y.statusCode,statusText:y.statusMessage,headers:A,size:o.size,counter:o.counter,highWaterMark:o.highWaterMark},P=A.get("Content-Encoding");if(!o.compress||o.method==="HEAD"||P===null||y.statusCode===204||y.statusCode===304){c=new hn(S,b),r(c);return}let B={flush:bu.default.Z_SYNC_FLUSH,finishFlush:bu.default.Z_SYNC_FLUSH};if(P==="gzip"||P==="x-gzip"){S=(0,pn.pipeline)(S,bu.default.createGunzip(B),v=>{v&&n(v)}),c=new hn(S,b),r(c);return}if(P==="deflate"||P==="x-deflate"){let v=(0,pn.pipeline)(y,new pn.PassThrough,I=>{I&&n(I)});v.once("data",I=>{(I[0]&15)===8?S=(0,pn.pipeline)(S,bu.default.createInflate(),O=>{O&&n(O)}):S=(0,pn.pipeline)(S,bu.default.createInflateRaw(),O=>{O&&n(O)}),c=new hn(S,b),r(c)}),v.once("end",()=>{c||(c=new hn(S,b),r(c))});return}if(P==="br"){S=(0,pn.pipeline)(S,bu.default.createBrotliDecompress(),v=>{v&&n(v)}),c=new hn(S,b),r(c);return}c=new hn(S,b),r(c)}),f8(m,o).catch(n)})}function uq(t,e){let r=l1.Buffer.from(`0\r
\r
`),n=!1,o=!1,i;t.on("response",s=>{let{headers:u}=s;n=u["transfer-encoding"]==="chunked"&&!u["content-length"]}),t.on("socket",s=>{let u=()=>{if(n&&!o){let c=new Error("Premature close");c.code="ERR_STREAM_PREMATURE_CLOSE",e(c)}},a=c=>{o=l1.Buffer.compare(c.slice(-5),r)===0,!o&&i&&(o=l1.Buffer.compare(i.slice(-3),r.slice(0,3))===0&&l1.Buffer.compare(c.slice(-2),r.slice(3))===0),i=c};s.prependListener("close",u),s.on("data",a),t.on("close",()=>{s.removeListener("close",u),s.removeListener("data",a)})})}var D8,I8,bu,pn,l1,sq,N8=Kt(()=>{D8=Xe(require("node:http"),1),I8=Xe(require("node:https"),1),bu=Xe(require("node:zlib"),1),pn=Xe(require("node:stream"),1),l1=require("node:buffer");qb();mh();p8();Eh();O8();BE();R8();GE();uh();lh();VE();xE();sq=new Set(["data:","http:","https:"])});var F8=R(ja=>{"use strict";var aq=ja&&ja.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},za;Object.defineProperty(ja,"__esModule",{value:!0});ja.Gaxios=void 0;var cq=aq(gE()),lq=require("https"),vu=CE(),dq=hb(),B8=require("stream"),P8=_E(),fq=async()=>globalThis.crypto?.randomUUID()||(await import("crypto")).randomUUID(),hq=204,yh=class{agentCache=new Map;defaults;interceptors;constructor(e){this.defaults=e||{},this.interceptors={request:new P8.GaxiosInterceptorManager,response:new P8.GaxiosInterceptorManager}}fetch(...e){let r=e[0],n=e[1],o,i=new Headers;return typeof r=="string"?o=new URL(r):r instanceof URL?o=r:r&&r.url&&(o=new URL(r.url)),r&&typeof r=="object"&&"headers"in r&&za.mergeHeaders(i,r.headers),n&&za.mergeHeaders(i,new Headers(n.headers)),typeof r=="object"&&!(r instanceof URL)?this.request({...n,...r,headers:i,url:o}):this.request({...n,headers:i,url:o})}async request(e={}){let r=await this.#n(e);return r=await this.#t(r),this.#r(this._request(r))}async _defaultAdapter(e){let r=e.fetchImplementation||this.defaults.fetchImplementation||await za.#a(),n={...e};delete n.data;let o=await r(e.url,n),i=await this.getResponseData(e,o);return Object.getOwnPropertyDescriptor(o,"data")?.configurable||Object.defineProperties(o,{data:{configurable:!0,writable:!0,enumerable:!0,value:i}}),Object.assign(o,{config:e,data:i})}async _request(e){try{let r;if(e.adapter?r=await e.adapter(e,this._defaultAdapter.bind(this)):r=await this._defaultAdapter(e),!e.validateStatus(r.status)){if(e.responseType==="stream"){let o=[];for await(let i of r.data)o.push(i);r.data=o.toString()}let n=vu.GaxiosError.extractAPIErrorFromResponse(r,`Request failed with status code ${r.status}`);throw new vu.GaxiosError(n?.message,e,r,n)}return r}catch(r){let n;r instanceof vu.GaxiosError?n=r:r instanceof Error?n=new vu.GaxiosError(r.message,e,void 0,r):n=new vu.GaxiosError("Unexpected Gaxios Error",e,void 0,r);let{shouldRetry:o,config:i}=await(0,dq.getRetryConfig)(n);if(o&&i)return n.config.retryConfig.currentRetryAttempt=i.retryConfig.currentRetryAttempt,e.retryConfig=n.config?.retryConfig,this.#o(e),this._request(e);throw e.errorRedactor&&e.errorRedactor(n),n}}async getResponseData(e,r){if(r.status===hq)return"";if(e.maxContentLength&&r.headers.has("content-length")&&e.maxContentLength<Number.parseInt(r.headers?.get("content-length")||""))throw new vu.GaxiosError("Response's `Content-Length` is over the limit.",e,Object.assign(r,{config:e}));switch(e.responseType){case"stream":return r.body;case"json":{let n=await r.text();try{return JSON.parse(n)}catch{return n}}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();case"text":return r.text();default:return this.getResponseDataFromContentType(r)}}#e(e,r=[]){let n=new URL(e),o=[...r],i=(process.env.NO_PROXY??process.env.no_proxy)?.split(",")||[];for(let s of i)o.push(s.trim());for(let s of o)if(s instanceof RegExp){if(s.test(n.toString()))return!1}else if(s instanceof URL){if(s.origin===n.origin)return!1}else if(s.startsWith("*.")||s.startsWith(".")){let u=s.replace(/^\*\./,".");if(n.hostname.endsWith(u))return!1}else if(s===n.origin||s===n.hostname||s===n.href)return!1;return!0}async#t(e){let r=Promise.resolve(e);for(let n of this.interceptors.request.values())n&&(r=r.then(n.resolved,n.rejected));return r}async#r(e){let r=Promise.resolve(e);for(let n of this.interceptors.response.values())n&&(r=r.then(n.resolved,n.rejected));return r}async#n(e){let r=new Headers(this.defaults.headers);za.mergeHeaders(r,e.headers);let n=(0,cq.default)(!0,{},this.defaults,e);if(!n.url)throw new Error("URL is required.");if(n.baseURL&&(n.url=new URL(n.url,n.baseURL)),n.url=new URL(n.url),n.params)if(n.paramsSerializer){let s=n.paramsSerializer(n.params);s.startsWith("?")&&(s=s.slice(1));let u=n.url.toString().includes("?")?"&":"?";n.url=n.url+u+s}else{let s=n.url instanceof URL?n.url:new URL(n.url);for(let[u,a]of new URLSearchParams(n.params))s.searchParams.append(u,a);n.url=s}typeof e.maxContentLength=="number"&&(n.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(n.follow=e.maxRedirects);let o=typeof n.data=="string"||n.data instanceof ArrayBuffer||n.data instanceof Blob||globalThis.File&&n.data instanceof File||n.data instanceof FormData||n.data instanceof B8.Readable||n.data instanceof ReadableStream||n.data instanceof String||n.data instanceof URLSearchParams||ArrayBuffer.isView(n.data)||["Blob","File","FormData"].includes(n.data?.constructor?.name||"");if(n.multipart?.length){let s=await fq();r.set("content-type",`multipart/related; boundary=${s}`),n.body=B8.Readable.from(this.getMultipartRequest(n.multipart,s))}else o?n.body=n.data:typeof n.data=="object"?r.get("Content-Type")==="application/x-www-form-urlencoded"?n.body=n.paramsSerializer?n.paramsSerializer(n.data):new URLSearchParams(n.data):(r.has("content-type")||r.set("content-type","application/json"),n.body=JSON.stringify(n.data)):n.data&&(n.body=n.data);n.validateStatus=n.validateStatus||this.validateStatus,n.responseType=n.responseType||"unknown",!r.has("accept")&&n.responseType==="json"&&r.set("accept","application/json");let i=n.proxy||process?.env?.HTTPS_PROXY||process?.env?.https_proxy||process?.env?.HTTP_PROXY||process?.env?.http_proxy;if(!n.agent)if(i&&this.#e(n.url,n.noProxy)){let s=await za.#u();this.agentCache.has(i)?n.agent=this.agentCache.get(i):(n.agent=new s(i,{cert:n.cert,key:n.key}),this.agentCache.set(i,n.agent))}else n.cert&&n.key&&(this.agentCache.has(n.key)?n.agent=this.agentCache.get(n.key):(n.agent=new lq.Agent({cert:n.cert,key:n.key}),this.agentCache.set(n.key,n.agent)));return typeof n.errorRedactor!="function"&&n.errorRedactor!==!1&&(n.errorRedactor=vu.defaultErrorRedactor),n.body&&!("duplex"in n)&&(n.duplex="half"),this.#o(n),Object.assign(n,{headers:r,url:n.url instanceof URL?n.url:new URL(n.url)})}#o(e){if(e.timeout){let r=AbortSignal.timeout(e.timeout);e.signal&&!e.signal.aborted?e.signal=AbortSignal.any([e.signal,r]):e.signal=r}}validateStatus(e){return e>=200&&e<300}async getResponseDataFromContentType(e){let r=e.headers.get("Content-Type");if(r===null)return e.text();if(r=r.toLowerCase(),r.includes("application/json")){let n=await e.text();try{n=JSON.parse(n)}catch{}return n}else return r.match(/^text\//)?e.text():e.blob()}async*getMultipartRequest(e,r){let n=`--${r}--`;for(let o of e){let i=o.headers.get("Content-Type")||"application/octet-stream";yield`--${r}\r
Content-Type: ${i}\r
\r
`,typeof o.content=="string"?yield o.content:yield*o.content,yield`\r
`}yield n}static#i;static#s;static async#u(){return this.#i||=(await Promise.resolve().then(()=>Xe(Lb()))).HttpsProxyAgent,this.#i}static async#a(){let e=typeof window<"u"&&!!window;return this.#s||=e?window.fetch:(await Promise.resolve().then(()=>(N8(),M8))).default,this.#s}static mergeHeaders(e,...r){e=e instanceof Headers?e:new Headers(e);for(let n of r)(n instanceof Headers?n:new Headers(n)).forEach((i,s)=>{s==="set-cookie"?e.append(s,i):e.set(s,i)});return e}};ja.Gaxios=yh;za=yh});var ir=R(Mr=>{"use strict";var pq=Mr&&Mr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),mq=Mr&&Mr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&pq(e,t,r)};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.instance=Mr.Gaxios=Mr.GaxiosError=void 0;Mr.request=Eq;var x8=F8();Object.defineProperty(Mr,"Gaxios",{enumerable:!0,get:function(){return x8.Gaxios}});var gq=CE();Object.defineProperty(Mr,"GaxiosError",{enumerable:!0,get:function(){return gq.GaxiosError}});mq(_E(),Mr);Mr.instance=new x8.Gaxios;async function Eq(t){return Mr.instance.request(t)}});var HE=R((k8,Ch)=>{(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,o=Math.floor,i="[BigNumber Error] ",s=i+"Number primitive has more than 15 significant digits: ",u=1e14,a=14,c=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,m=1e9;function E(I){var O,z,Z,M=oe.prototype={constructor:oe,toString:null,valueOf:null},V=new oe(1),Y=20,te=4,le=-7,ue=21,Be=-1e7,tt=1e7,dt=!1,_t=1,Ut=0,wa={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},Ko="0123456789abcdefghijklmnopqrstuvwxyz",$l=!0;function oe(_,D){var N,H,k,q,K,x,L,W,$=this;if(!($ instanceof oe))return new oe(_,D);if(D==null){if(_&&_._isBigNumber===!0){$.s=_.s,!_.c||_.e>tt?$.c=$.e=null:_.e<Be?$.c=[$.e=0]:($.e=_.e,$.c=_.c.slice());return}if((x=typeof _=="number")&&_*0==0){if($.s=1/_<0?(_=-_,-1):1,_===~~_){for(q=0,K=_;K>=10;K/=10,q++);q>tt?$.c=$.e=null:($.e=q,$.c=[_]);return}W=String(_)}else{if(!r.test(W=String(_)))return Z($,W,x);$.s=W.charCodeAt(0)==45?(W=W.slice(1),-1):1}(q=W.indexOf("."))>-1&&(W=W.replace(".","")),(K=W.search(/e/i))>0?(q<0&&(q=K),q+=+W.slice(K+1),W=W.substring(0,K)):q<0&&(q=W.length)}else{if(b(D,2,Ko.length,"Base"),D==10&&$l)return $=new oe(_),Rr($,Y+$.e+1,te);if(W=String(_),x=typeof _=="number"){if(_*0!=0)return Z($,W,x,D);if($.s=1/_<0?(W=W.slice(1),-1):1,oe.DEBUG&&W.replace(/^0\.0*|\./,"").length>15)throw Error(s+_)}else $.s=W.charCodeAt(0)===45?(W=W.slice(1),-1):1;for(N=Ko.slice(0,D),q=K=0,L=W.length;K<L;K++)if(N.indexOf(H=W.charAt(K))<0){if(H=="."){if(K>q){q=L;continue}}else if(!k&&(W==W.toUpperCase()&&(W=W.toLowerCase())||W==W.toLowerCase()&&(W=W.toUpperCase()))){k=!0,K=-1,q=0;continue}return Z($,String(_),x,D)}x=!1,W=z(W,D,10,$.s),(q=W.indexOf("."))>-1?W=W.replace(".",""):q=W.length}for(K=0;W.charCodeAt(K)===48;K++);for(L=W.length;W.charCodeAt(--L)===48;);if(W=W.slice(K,++L)){if(L-=K,x&&oe.DEBUG&&L>15&&(_>c||_!==o(_)))throw Error(s+$.s*_);if((q=q-K-1)>tt)$.c=$.e=null;else if(q<Be)$.c=[$.e=0];else{if($.e=q,$.c=[],K=(q+1)%a,q<0&&(K+=a),K<L){for(K&&$.c.push(+W.slice(0,K)),L-=a;K<L;)$.c.push(+W.slice(K,K+=a));K=a-(W=W.slice(K)).length}else K-=L;for(;K--;W+="0");$.c.push(+W)}}else $.c=[$.e=0]}oe.clone=E,oe.ROUND_UP=0,oe.ROUND_DOWN=1,oe.ROUND_CEIL=2,oe.ROUND_FLOOR=3,oe.ROUND_HALF_UP=4,oe.ROUND_HALF_DOWN=5,oe.ROUND_HALF_EVEN=6,oe.ROUND_HALF_CEIL=7,oe.ROUND_HALF_FLOOR=8,oe.EUCLID=9,oe.config=oe.set=function(_){var D,N;if(_!=null)if(typeof _=="object"){if(_.hasOwnProperty(D="DECIMAL_PLACES")&&(N=_[D],b(N,0,m,D),Y=N),_.hasOwnProperty(D="ROUNDING_MODE")&&(N=_[D],b(N,0,8,D),te=N),_.hasOwnProperty(D="EXPONENTIAL_AT")&&(N=_[D],N&&N.pop?(b(N[0],-m,0,D),b(N[1],0,m,D),le=N[0],ue=N[1]):(b(N,-m,m,D),le=-(ue=N<0?-N:N))),_.hasOwnProperty(D="RANGE"))if(N=_[D],N&&N.pop)b(N[0],-m,-1,D),b(N[1],1,m,D),Be=N[0],tt=N[1];else if(b(N,-m,m,D),N)Be=-(tt=N<0?-N:N);else throw Error(i+D+" cannot be zero: "+N);if(_.hasOwnProperty(D="CRYPTO"))if(N=_[D],N===!!N)if(N)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))dt=N;else throw dt=!N,Error(i+"crypto unavailable");else dt=N;else throw Error(i+D+" not true or false: "+N);if(_.hasOwnProperty(D="MODULO_MODE")&&(N=_[D],b(N,0,9,D),_t=N),_.hasOwnProperty(D="POW_PRECISION")&&(N=_[D],b(N,0,m,D),Ut=N),_.hasOwnProperty(D="FORMAT"))if(N=_[D],typeof N=="object")wa=N;else throw Error(i+D+" not an object: "+N);if(_.hasOwnProperty(D="ALPHABET"))if(N=_[D],typeof N=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(N))$l=N.slice(0,10)=="0123456789",Ko=N;else throw Error(i+D+" invalid: "+N)}else throw Error(i+"Object expected: "+_);return{DECIMAL_PLACES:Y,ROUNDING_MODE:te,EXPONENTIAL_AT:[le,ue],RANGE:[Be,tt],CRYPTO:dt,MODULO_MODE:_t,POW_PRECISION:Ut,FORMAT:wa,ALPHABET:Ko}},oe.isBigNumber=function(_){if(!_||_._isBigNumber!==!0)return!1;if(!oe.DEBUG)return!0;var D,N,H=_.c,k=_.e,q=_.s;e:if({}.toString.call(H)=="[object Array]"){if((q===1||q===-1)&&k>=-m&&k<=m&&k===o(k)){if(H[0]===0){if(k===0&&H.length===1)return!0;break e}if(D=(k+1)%a,D<1&&(D+=a),String(H[0]).length==D){for(D=0;D<H.length;D++)if(N=H[D],N<0||N>=u||N!==o(N))break e;if(N!==0)return!0}}}else if(H===null&&k===null&&(q===null||q===1||q===-1))return!0;throw Error(i+"Invalid BigNumber: "+_)},oe.maximum=oe.max=function(){return Or(arguments,-1)},oe.minimum=oe.min=function(){return Or(arguments,1)},oe.random=(function(){var _=9007199254740992,D=Math.random()*_&2097151?function(){return o(Math.random()*_)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(N){var H,k,q,K,x,L=0,W=[],$=new oe(V);if(N==null?N=Y:b(N,0,m),K=n(N/a),dt)if(crypto.getRandomValues){for(H=crypto.getRandomValues(new Uint32Array(K*=2));L<K;)x=H[L]*131072+(H[L+1]>>>11),x>=9e15?(k=crypto.getRandomValues(new Uint32Array(2)),H[L]=k[0],H[L+1]=k[1]):(W.push(x%1e14),L+=2);L=K/2}else if(crypto.randomBytes){for(H=crypto.randomBytes(K*=7);L<K;)x=(H[L]&31)*281474976710656+H[L+1]*1099511627776+H[L+2]*4294967296+H[L+3]*16777216+(H[L+4]<<16)+(H[L+5]<<8)+H[L+6],x>=9e15?crypto.randomBytes(7).copy(H,L):(W.push(x%1e14),L+=7);L=K/7}else throw dt=!1,Error(i+"crypto unavailable");if(!dt)for(;L<K;)x=D(),x<9e15&&(W[L++]=x%1e14);for(K=W[--L],N%=a,K&&N&&(x=d[a-N],W[L]=o(K/x)*x);W[L]===0;W.pop(),L--);if(L<0)W=[q=0];else{for(q=-1;W[0]===0;W.splice(0,1),q-=a);for(L=1,x=W[0];x>=10;x/=10,L++);L<a&&(q-=a-L)}return $.e=q,$.c=W,$}})(),oe.sum=function(){for(var _=1,D=arguments,N=new oe(D[0]);_<D.length;)N=N.plus(D[_++]);return N},z=(function(){var _="0123456789";function D(N,H,k,q){for(var K,x=[0],L,W=0,$=N.length;W<$;){for(L=x.length;L--;x[L]*=H);for(x[0]+=q.indexOf(N.charAt(W++)),K=0;K<x.length;K++)x[K]>k-1&&(x[K+1]==null&&(x[K+1]=0),x[K+1]+=x[K]/k|0,x[K]%=k)}return x.reverse()}return function(N,H,k,q,K){var x,L,W,$,ee,fe,me,Ve,Et=N.indexOf("."),yt=Y,Ue=te;for(Et>=0&&($=Ut,Ut=0,N=N.replace(".",""),Ve=new oe(H),fe=Ve.pow(N.length-Et),Ut=$,Ve.c=D(v(A(fe.c),fe.e,"0"),10,k,_),Ve.e=Ve.c.length),me=D(N,H,k,K?(x=Ko,_):(x=_,Ko)),W=$=me.length;me[--$]==0;me.pop());if(!me[0])return x.charAt(0);if(Et<0?--W:(fe.c=me,fe.e=W,fe.s=q,fe=O(fe,Ve,yt,Ue,k),me=fe.c,ee=fe.r,W=fe.e),L=W+yt+1,Et=me[L],$=k/2,ee=ee||L<0||me[L+1]!=null,ee=Ue<4?(Et!=null||ee)&&(Ue==0||Ue==(fe.s<0?3:2)):Et>$||Et==$&&(Ue==4||ee||Ue==6&&me[L-1]&1||Ue==(fe.s<0?8:7)),L<1||!me[0])N=ee?v(x.charAt(1),-yt,x.charAt(0)):x.charAt(0);else{if(me.length=L,ee)for(--k;++me[--L]>k;)me[L]=0,L||(++W,me=[1].concat(me));for($=me.length;!me[--$];);for(Et=0,N="";Et<=$;N+=x.charAt(me[Et++]));N=v(N,W,x.charAt(0))}return N}})(),O=(function(){function _(H,k,q){var K,x,L,W,$=0,ee=H.length,fe=k%p,me=k/p|0;for(H=H.slice();ee--;)L=H[ee]%p,W=H[ee]/p|0,K=me*L+W*fe,x=fe*L+K%p*p+$,$=(x/q|0)+(K/p|0)+me*W,H[ee]=x%q;return $&&(H=[$].concat(H)),H}function D(H,k,q,K){var x,L;if(q!=K)L=q>K?1:-1;else for(x=L=0;x<q;x++)if(H[x]!=k[x]){L=H[x]>k[x]?1:-1;break}return L}function N(H,k,q,K){for(var x=0;q--;)H[q]-=x,x=H[q]<k[q]?1:0,H[q]=x*K+H[q]-k[q];for(;!H[0]&&H.length>1;H.splice(0,1));}return function(H,k,q,K,x){var L,W,$,ee,fe,me,Ve,Et,yt,Ue,Je,Gt,Ta,ba,va,cn,Ai,gr=H.s==k.s?1:-1,Vt=H.c,rt=k.c;if(!Vt||!Vt[0]||!rt||!rt[0])return new oe(!H.s||!k.s||(Vt?rt&&Vt[0]==rt[0]:!rt)?NaN:Vt&&Vt[0]==0||!rt?gr*0:gr/0);for(Et=new oe(gr),yt=Et.c=[],W=H.e-k.e,gr=q+W+1,x||(x=u,W=y(H.e/a)-y(k.e/a),gr=gr/a|0),$=0;rt[$]==(Vt[$]||0);$++);if(rt[$]>(Vt[$]||0)&&W--,gr<0)yt.push(1),ee=!0;else{for(ba=Vt.length,cn=rt.length,$=0,gr+=2,fe=o(x/(rt[0]+1)),fe>1&&(rt=_(rt,fe,x),Vt=_(Vt,fe,x),cn=rt.length,ba=Vt.length),Ta=cn,Ue=Vt.slice(0,cn),Je=Ue.length;Je<cn;Ue[Je++]=0);Ai=rt.slice(),Ai=[0].concat(Ai),va=rt[0],rt[1]>=x/2&&va++;do{if(fe=0,L=D(rt,Ue,cn,Je),L<0){if(Gt=Ue[0],cn!=Je&&(Gt=Gt*x+(Ue[1]||0)),fe=o(Gt/va),fe>1)for(fe>=x&&(fe=x-1),me=_(rt,fe,x),Ve=me.length,Je=Ue.length;D(me,Ue,Ve,Je)==1;)fe--,N(me,cn<Ve?Ai:rt,Ve,x),Ve=me.length,L=1;else fe==0&&(L=fe=1),me=rt.slice(),Ve=me.length;if(Ve<Je&&(me=[0].concat(me)),N(Ue,me,Je,x),Je=Ue.length,L==-1)for(;D(rt,Ue,cn,Je)<1;)fe++,N(Ue,cn<Je?Ai:rt,Je,x),Je=Ue.length}else L===0&&(fe++,Ue=[0]);yt[$++]=fe,Ue[0]?Ue[Je++]=Vt[Ta]||0:(Ue=[Vt[Ta]],Je=1)}while((Ta++<ba||Ue[0]!=null)&&gr--);ee=Ue[0]!=null,yt[0]||yt.splice(0,1)}if(x==u){for($=1,gr=yt[0];gr>=10;gr/=10,$++);Rr(Et,q+(Et.e=$+W*a-1)+1,K,ee)}else Et.e=W,Et.r=+ee;return Et}})();function Vr(_,D,N,H){var k,q,K,x,L;if(N==null?N=te:b(N,0,8),!_.c)return _.toString();if(k=_.c[0],K=_.e,D==null)L=A(_.c),L=H==1||H==2&&(K<=le||K>=ue)?B(L,K):v(L,K,"0");else if(_=Rr(new oe(_),D,N),q=_.e,L=A(_.c),x=L.length,H==1||H==2&&(D<=q||q<=le)){for(;x<D;L+="0",x++);L=B(L,q)}else if(D-=K+(H===2&&q>K),L=v(L,q,"0"),q+1>x){if(--D>0)for(L+=".";D--;L+="0");}else if(D+=q-x,D>0)for(q+1==x&&(L+=".");D--;L+="0");return _.s<0&&k?"-"+L:L}function Or(_,D){for(var N,H,k=1,q=new oe(_[0]);k<_.length;k++)H=new oe(_[k]),(!H.s||(N=S(q,H))===D||N===0&&q.s===D)&&(q=H);return q}function Hl(_,D,N){for(var H=1,k=D.length;!D[--k];D.pop());for(k=D[0];k>=10;k/=10,H++);return(N=H+N*a-1)>tt?_.c=_.e=null:N<Be?_.c=[_.e=0]:(_.e=N,_.c=D),_}Z=(function(){var _=/^(-?)0([xbo])(?=\w[\w.]*$)/i,D=/^([^.]+)\.$/,N=/^\.([^.]+)$/,H=/^-?(Infinity|NaN)$/,k=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(q,K,x,L){var W,$=x?K:K.replace(k,"");if(H.test($))q.s=isNaN($)?null:$<0?-1:1;else{if(!x&&($=$.replace(_,function(ee,fe,me){return W=(me=me.toLowerCase())=="x"?16:me=="b"?2:8,!L||L==W?fe:ee}),L&&(W=L,$=$.replace(D,"$1").replace(N,"0.$1")),K!=$))return new oe($,W);if(oe.DEBUG)throw Error(i+"Not a"+(L?" base "+L:"")+" number: "+K);q.s=null}q.c=q.e=null}})();function Rr(_,D,N,H){var k,q,K,x,L,W,$,ee=_.c,fe=d;if(ee){e:{for(k=1,x=ee[0];x>=10;x/=10,k++);if(q=D-k,q<0)q+=a,K=D,L=ee[W=0],$=o(L/fe[k-K-1]%10);else if(W=n((q+1)/a),W>=ee.length)if(H){for(;ee.length<=W;ee.push(0));L=$=0,k=1,q%=a,K=q-a+1}else break e;else{for(L=x=ee[W],k=1;x>=10;x/=10,k++);q%=a,K=q-a+k,$=K<0?0:o(L/fe[k-K-1]%10)}if(H=H||D<0||ee[W+1]!=null||(K<0?L:L%fe[k-K-1]),H=N<4?($||H)&&(N==0||N==(_.s<0?3:2)):$>5||$==5&&(N==4||H||N==6&&(q>0?K>0?L/fe[k-K]:0:ee[W-1])%10&1||N==(_.s<0?8:7)),D<1||!ee[0])return ee.length=0,H?(D-=_.e+1,ee[0]=fe[(a-D%a)%a],_.e=-D||0):ee[0]=_.e=0,_;if(q==0?(ee.length=W,x=1,W--):(ee.length=W+1,x=fe[a-q],ee[W]=K>0?o(L/fe[k-K]%fe[K])*x:0),H)for(;;)if(W==0){for(q=1,K=ee[0];K>=10;K/=10,q++);for(K=ee[0]+=x,x=1;K>=10;K/=10,x++);q!=x&&(_.e++,ee[0]==u&&(ee[0]=1));break}else{if(ee[W]+=x,ee[W]!=u)break;ee[W--]=0,x=1}for(q=ee.length;ee[--q]===0;ee.pop());}_.e>tt?_.c=_.e=null:_.e<Be&&(_.c=[_.e=0])}return _}function qt(_){var D,N=_.e;return N===null?_.toString():(D=A(_.c),D=N<=le||N>=ue?B(D,N):v(D,N,"0"),_.s<0?"-"+D:D)}return M.absoluteValue=M.abs=function(){var _=new oe(this);return _.s<0&&(_.s=1),_},M.comparedTo=function(_,D){return S(this,new oe(_,D))},M.decimalPlaces=M.dp=function(_,D){var N,H,k,q=this;if(_!=null)return b(_,0,m),D==null?D=te:b(D,0,8),Rr(new oe(q),_+q.e+1,D);if(!(N=q.c))return null;if(H=((k=N.length-1)-y(this.e/a))*a,k=N[k])for(;k%10==0;k/=10,H--);return H<0&&(H=0),H},M.dividedBy=M.div=function(_,D){return O(this,new oe(_,D),Y,te)},M.dividedToIntegerBy=M.idiv=function(_,D){return O(this,new oe(_,D),0,1)},M.exponentiatedBy=M.pow=function(_,D){var N,H,k,q,K,x,L,W,$,ee=this;if(_=new oe(_),_.c&&!_.isInteger())throw Error(i+"Exponent not an integer: "+qt(_));if(D!=null&&(D=new oe(D)),x=_.e>14,!ee.c||!ee.c[0]||ee.c[0]==1&&!ee.e&&ee.c.length==1||!_.c||!_.c[0])return $=new oe(Math.pow(+qt(ee),x?_.s*(2-P(_)):+qt(_))),D?$.mod(D):$;if(L=_.s<0,D){if(D.c?!D.c[0]:!D.s)return new oe(NaN);H=!L&&ee.isInteger()&&D.isInteger(),H&&(ee=ee.mod(D))}else{if(_.e>9&&(ee.e>0||ee.e<-1||(ee.e==0?ee.c[0]>1||x&&ee.c[1]>=24e7:ee.c[0]<8e13||x&&ee.c[0]<=9999975e7)))return q=ee.s<0&&P(_)?-0:0,ee.e>-1&&(q=1/q),new oe(L?1/q:q);Ut&&(q=n(Ut/a+2))}for(x?(N=new oe(.5),L&&(_.s=1),W=P(_)):(k=Math.abs(+qt(_)),W=k%2),$=new oe(V);;){if(W){if($=$.times(ee),!$.c)break;q?$.c.length>q&&($.c.length=q):H&&($=$.mod(D))}if(k){if(k=o(k/2),k===0)break;W=k%2}else if(_=_.times(N),Rr(_,_.e+1,1),_.e>14)W=P(_);else{if(k=+qt(_),k===0)break;W=k%2}ee=ee.times(ee),q?ee.c&&ee.c.length>q&&(ee.c.length=q):H&&(ee=ee.mod(D))}return H?$:(L&&($=V.div($)),D?$.mod(D):q?Rr($,Ut,te,K):$)},M.integerValue=function(_){var D=new oe(this);return _==null?_=te:b(_,0,8),Rr(D,D.e+1,_)},M.isEqualTo=M.eq=function(_,D){return S(this,new oe(_,D))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(_,D){return S(this,new oe(_,D))>0},M.isGreaterThanOrEqualTo=M.gte=function(_,D){return(D=S(this,new oe(_,D)))===1||D===0},M.isInteger=function(){return!!this.c&&y(this.e/a)>this.c.length-2},M.isLessThan=M.lt=function(_,D){return S(this,new oe(_,D))<0},M.isLessThanOrEqualTo=M.lte=function(_,D){return(D=S(this,new oe(_,D)))===-1||D===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(_,D){var N,H,k,q,K=this,x=K.s;if(_=new oe(_,D),D=_.s,!x||!D)return new oe(NaN);if(x!=D)return _.s=-D,K.plus(_);var L=K.e/a,W=_.e/a,$=K.c,ee=_.c;if(!L||!W){if(!$||!ee)return $?(_.s=-D,_):new oe(ee?K:NaN);if(!$[0]||!ee[0])return ee[0]?(_.s=-D,_):new oe($[0]?K:te==3?-0:0)}if(L=y(L),W=y(W),$=$.slice(),x=L-W){for((q=x<0)?(x=-x,k=$):(W=L,k=ee),k.reverse(),D=x;D--;k.push(0));k.reverse()}else for(H=(q=(x=$.length)<(D=ee.length))?x:D,x=D=0;D<H;D++)if($[D]!=ee[D]){q=$[D]<ee[D];break}if(q&&(k=$,$=ee,ee=k,_.s=-_.s),D=(H=ee.length)-(N=$.length),D>0)for(;D--;$[N++]=0);for(D=u-1;H>x;){if($[--H]<ee[H]){for(N=H;N&&!$[--N];$[N]=D);--$[N],$[H]+=u}$[H]-=ee[H]}for(;$[0]==0;$.splice(0,1),--W);return $[0]?Hl(_,$,W):(_.s=te==3?-1:1,_.c=[_.e=0],_)},M.modulo=M.mod=function(_,D){var N,H,k=this;return _=new oe(_,D),!k.c||!_.s||_.c&&!_.c[0]?new oe(NaN):!_.c||k.c&&!k.c[0]?new oe(k):(_t==9?(H=_.s,_.s=1,N=O(k,_,0,3),_.s=H,N.s*=H):N=O(k,_,0,_t),_=k.minus(N.times(_)),!_.c[0]&&_t==1&&(_.s=k.s),_)},M.multipliedBy=M.times=function(_,D){var N,H,k,q,K,x,L,W,$,ee,fe,me,Ve,Et,yt,Ue=this,Je=Ue.c,Gt=(_=new oe(_,D)).c;if(!Je||!Gt||!Je[0]||!Gt[0])return!Ue.s||!_.s||Je&&!Je[0]&&!Gt||Gt&&!Gt[0]&&!Je?_.c=_.e=_.s=null:(_.s*=Ue.s,!Je||!Gt?_.c=_.e=null:(_.c=[0],_.e=0)),_;for(H=y(Ue.e/a)+y(_.e/a),_.s*=Ue.s,L=Je.length,ee=Gt.length,L<ee&&(Ve=Je,Je=Gt,Gt=Ve,k=L,L=ee,ee=k),k=L+ee,Ve=[];k--;Ve.push(0));for(Et=u,yt=p,k=ee;--k>=0;){for(N=0,fe=Gt[k]%yt,me=Gt[k]/yt|0,K=L,q=k+K;q>k;)W=Je[--K]%yt,$=Je[K]/yt|0,x=me*W+$*fe,W=fe*W+x%yt*yt+Ve[q]+N,N=(W/Et|0)+(x/yt|0)+me*$,Ve[q--]=W%Et;Ve[q]=N}return N?++H:Ve.splice(0,1),Hl(_,Ve,H)},M.negated=function(){var _=new oe(this);return _.s=-_.s||null,_},M.plus=function(_,D){var N,H=this,k=H.s;if(_=new oe(_,D),D=_.s,!k||!D)return new oe(NaN);if(k!=D)return _.s=-D,H.minus(_);var q=H.e/a,K=_.e/a,x=H.c,L=_.c;if(!q||!K){if(!x||!L)return new oe(k/0);if(!x[0]||!L[0])return L[0]?_:new oe(x[0]?H:k*0)}if(q=y(q),K=y(K),x=x.slice(),k=q-K){for(k>0?(K=q,N=L):(k=-k,N=x),N.reverse();k--;N.push(0));N.reverse()}for(k=x.length,D=L.length,k-D<0&&(N=L,L=x,x=N,D=k),k=0;D;)k=(x[--D]=x[D]+L[D]+k)/u|0,x[D]=u===x[D]?0:x[D]%u;return k&&(x=[k].concat(x),++K),Hl(_,x,K)},M.precision=M.sd=function(_,D){var N,H,k,q=this;if(_!=null&&_!==!!_)return b(_,1,m),D==null?D=te:b(D,0,8),Rr(new oe(q),_,D);if(!(N=q.c))return null;if(k=N.length-1,H=k*a+1,k=N[k]){for(;k%10==0;k/=10,H--);for(k=N[0];k>=10;k/=10,H++);}return _&&q.e+1>H&&(H=q.e+1),H},M.shiftedBy=function(_){return b(_,-c,c),this.times("1e"+_)},M.squareRoot=M.sqrt=function(){var _,D,N,H,k,q=this,K=q.c,x=q.s,L=q.e,W=Y+4,$=new oe("0.5");if(x!==1||!K||!K[0])return new oe(!x||x<0&&(!K||K[0])?NaN:K?q:1/0);if(x=Math.sqrt(+qt(q)),x==0||x==1/0?(D=A(K),(D.length+L)%2==0&&(D+="0"),x=Math.sqrt(+D),L=y((L+1)/2)-(L<0||L%2),x==1/0?D="5e"+L:(D=x.toExponential(),D=D.slice(0,D.indexOf("e")+1)+L),N=new oe(D)):N=new oe(x+""),N.c[0]){for(L=N.e,x=L+W,x<3&&(x=0);;)if(k=N,N=$.times(k.plus(O(q,k,W,1))),A(k.c).slice(0,x)===(D=A(N.c)).slice(0,x))if(N.e<L&&--x,D=D.slice(x-3,x+1),D=="9999"||!H&&D=="4999"){if(!H&&(Rr(k,k.e+Y+2,0),k.times(k).eq(q))){N=k;break}W+=4,x+=4,H=1}else{(!+D||!+D.slice(1)&&D.charAt(0)=="5")&&(Rr(N,N.e+Y+2,1),_=!N.times(N).eq(q));break}}return Rr(N,N.e+Y+1,te,_)},M.toExponential=function(_,D){return _!=null&&(b(_,0,m),_++),Vr(this,_,D,1)},M.toFixed=function(_,D){return _!=null&&(b(_,0,m),_=_+this.e+1),Vr(this,_,D)},M.toFormat=function(_,D,N){var H,k=this;if(N==null)_!=null&&D&&typeof D=="object"?(N=D,D=null):_&&typeof _=="object"?(N=_,_=D=null):N=wa;else if(typeof N!="object")throw Error(i+"Argument not an object: "+N);if(H=k.toFixed(_,D),k.c){var q,K=H.split("."),x=+N.groupSize,L=+N.secondaryGroupSize,W=N.groupSeparator||"",$=K[0],ee=K[1],fe=k.s<0,me=fe?$.slice(1):$,Ve=me.length;if(L&&(q=x,x=L,L=q,Ve-=q),x>0&&Ve>0){for(q=Ve%x||x,$=me.substr(0,q);q<Ve;q+=x)$+=W+me.substr(q,x);L>0&&($+=W+me.slice(q)),fe&&($="-"+$)}H=ee?$+(N.decimalSeparator||"")+((L=+N.fractionGroupSize)?ee.replace(new RegExp("\\d{"+L+"}\\B","g"),"$&"+(N.fractionGroupSeparator||"")):ee):$}return(N.prefix||"")+H+(N.suffix||"")},M.toFraction=function(_){var D,N,H,k,q,K,x,L,W,$,ee,fe,me=this,Ve=me.c;if(_!=null&&(x=new oe(_),!x.isInteger()&&(x.c||x.s!==1)||x.lt(V)))throw Error(i+"Argument "+(x.isInteger()?"out of range: ":"not an integer: ")+qt(x));if(!Ve)return new oe(me);for(D=new oe(V),W=N=new oe(V),H=L=new oe(V),fe=A(Ve),q=D.e=fe.length-me.e-1,D.c[0]=d[(K=q%a)<0?a+K:K],_=!_||x.comparedTo(D)>0?q>0?D:W:x,K=tt,tt=1/0,x=new oe(fe),L.c[0]=0;$=O(x,D,0,1),k=N.plus($.times(H)),k.comparedTo(_)!=1;)N=H,H=k,W=L.plus($.times(k=W)),L=k,D=x.minus($.times(k=D)),x=k;return k=O(_.minus(N),H,0,1),L=L.plus(k.times(W)),N=N.plus(k.times(H)),L.s=W.s=me.s,q=q*2,ee=O(W,H,q,te).minus(me).abs().comparedTo(O(L,N,q,te).minus(me).abs())<1?[W,H]:[L,N],tt=K,ee},M.toNumber=function(){return+qt(this)},M.toPrecision=function(_,D){return _!=null&&b(_,1,m),Vr(this,_,D,2)},M.toString=function(_){var D,N=this,H=N.s,k=N.e;return k===null?H?(D="Infinity",H<0&&(D="-"+D)):D="NaN":(_==null?D=k<=le||k>=ue?B(A(N.c),k):v(A(N.c),k,"0"):_===10&&$l?(N=Rr(new oe(N),Y+k+1,te),D=v(A(N.c),N.e,"0")):(b(_,2,Ko.length,"Base"),D=z(v(A(N.c),k,"0"),10,_,H,!0)),H<0&&N.c[0]&&(D="-"+D)),D},M.valueOf=M.toJSON=function(){return qt(this)},M._isBigNumber=!0,I!=null&&oe.set(I),oe}function y(I){var O=I|0;return I>0||I===O?O:O-1}function A(I){for(var O,z,Z=1,M=I.length,V=I[0]+"";Z<M;){for(O=I[Z++]+"",z=a-O.length;z--;O="0"+O);V+=O}for(M=V.length;V.charCodeAt(--M)===48;);return V.slice(0,M+1||1)}function S(I,O){var z,Z,M=I.c,V=O.c,Y=I.s,te=O.s,le=I.e,ue=O.e;if(!Y||!te)return null;if(z=M&&!M[0],Z=V&&!V[0],z||Z)return z?Z?0:-te:Y;if(Y!=te)return Y;if(z=Y<0,Z=le==ue,!M||!V)return Z?0:!M^z?1:-1;if(!Z)return le>ue^z?1:-1;for(te=(le=M.length)<(ue=V.length)?le:ue,Y=0;Y<te;Y++)if(M[Y]!=V[Y])return M[Y]>V[Y]^z?1:-1;return le==ue?0:le>ue^z?1:-1}function b(I,O,z,Z){if(I<O||I>z||I!==o(I))throw Error(i+(Z||"Argument")+(typeof I=="number"?I<O||I>z?" out of range: ":" not an integer: ":" not a primitive number: ")+String(I))}function P(I){var O=I.c.length-1;return y(I.e/a)==O&&I.c[O]%2!=0}function B(I,O){return(I.length>1?I.charAt(0)+"."+I.slice(1):I)+(O<0?"e":"e+")+O}function v(I,O,z){var Z,M;if(O<0){for(M=z+".";++O;M+=z);I=M+I}else if(Z=I.length,++O>Z){for(M=z,O-=Z;--O;M+=z);I+=M}else O<Z&&(I=I.slice(0,O)+"."+I.slice(O));return I}e=E(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof Ch<"u"&&Ch.exports?Ch.exports=e:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=e)})(k8)});var G8=R((rpe,q8)=>{var L8=HE(),U8=q8.exports;(function(){"use strict";function t(c){return c<10?"0"+c:c}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,o,i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function u(c){return r.lastIndex=0,r.test(c)?'"'+c.replace(r,function(d){var p=i[d];return typeof p=="string"?p:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function a(c,d){var p,m,E,y,A=n,S,b=d[c],P=b!=null&&(b instanceof L8||L8.isBigNumber(b));switch(b&&typeof b=="object"&&typeof b.toJSON=="function"&&(b=b.toJSON(c)),typeof s=="function"&&(b=s.call(d,c,b)),typeof b){case"string":return P?b:u(b);case"number":return isFinite(b)?String(b):"null";case"boolean":case"null":case"bigint":return String(b);case"object":if(!b)return"null";if(n+=o,S=[],Object.prototype.toString.apply(b)==="[object Array]"){for(y=b.length,p=0;p<y;p+=1)S[p]=a(p,b)||"null";return E=S.length===0?"[]":n?`[
`+n+S.join(`,
`+n)+`
`+A+"]":"["+S.join(",")+"]",n=A,E}if(s&&typeof s=="object")for(y=s.length,p=0;p<y;p+=1)typeof s[p]=="string"&&(m=s[p],E=a(m,b),E&&S.push(u(m)+(n?": ":":")+E));else Object.keys(b).forEach(function(B){var v=a(B,b);v&&S.push(u(B)+(n?": ":":")+v)});return E=S.length===0?"{}":n?`{
`+n+S.join(`,
`+n)+`
`+A+"}":"{"+S.join(",")+"}",n=A,E}}typeof U8.stringify!="function"&&(U8.stringify=function(c,d,p){var m;if(n="",o="",typeof p=="number")for(m=0;m<p;m+=1)o+=" ";else typeof p=="string"&&(o=p);if(s=d,d&&typeof d!="function"&&(typeof d!="object"||typeof d.length!="number"))throw new Error("JSON.stringify");return a("",{"":c})})})()});var $8=R((npe,V8)=>{var Ah=null,yq=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,Cq=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,Aq=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction<"u")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction<"u")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,n,o={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},i,s=function(A){throw{name:"SyntaxError",message:A,at:r,text:i}},u=function(A){return A&&A!==n&&s("Expected '"+A+"' instead of '"+n+"'"),n=i.charAt(r),r+=1,n},a=function(){var A,S="";for(n==="-"&&(S="-",u("-"));n>="0"&&n<="9";)S+=n,u();if(n===".")for(S+=".";u()&&n>="0"&&n<="9";)S+=n;if(n==="e"||n==="E")for(S+=n,u(),(n==="-"||n==="+")&&(S+=n,u());n>="0"&&n<="9";)S+=n,u();if(A=+S,!isFinite(A))s("Bad number");else return Ah==null&&(Ah=HE()),S.length>15?e.storeAsString?S:e.useNativeBigInt?BigInt(S):new Ah(S):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(A):new Ah(A):A},c=function(){var A,S,b="",P;if(n==='"')for(var B=r;u();){if(n==='"')return r-1>B&&(b+=i.substring(B,r-1)),u(),b;if(n==="\\"){if(r-1>B&&(b+=i.substring(B,r-1)),u(),n==="u"){for(P=0,S=0;S<4&&(A=parseInt(u(),16),!!isFinite(A));S+=1)P=P*16+A;b+=String.fromCharCode(P)}else if(typeof o[n]=="string")b+=o[n];else break;B=r}}s("Bad string")},d=function(){for(;n&&n<=" ";)u()},p=function(){switch(n){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}s("Unexpected '"+n+"'")},m,E=function(){var A=[];if(n==="["){if(u("["),d(),n==="]")return u("]"),A;for(;n;){if(A.push(m()),d(),n==="]")return u("]"),A;u(","),d()}}s("Bad array")},y=function(){var A,S=Object.create(null);if(n==="{"){if(u("{"),d(),n==="}")return u("}"),S;for(;n;){if(A=c(),d(),u(":"),e.strict===!0&&Object.hasOwnProperty.call(S,A)&&s('Duplicate key "'+A+'"'),yq.test(A)===!0?e.protoAction==="error"?s("Object contains forbidden prototype property"):e.protoAction==="ignore"?m():S[A]=m():Cq.test(A)===!0?e.constructorAction==="error"?s("Object contains forbidden constructor property"):e.constructorAction==="ignore"?m():S[A]=m():S[A]=m(),d(),n==="}")return u("}"),S;u(","),d()}}s("Bad object")};return m=function(){switch(d(),n){case"{":return y();case"[":return E();case'"':return c();case"-":return a();default:return n>="0"&&n<="9"?a():p()}},function(A,S){var b;return i=A+"",r=0,n=" ",b=m(),d(),n&&s("Syntax error"),typeof S=="function"?(function P(B,v){var I,O,z=B[v];return z&&typeof z=="object"&&Object.keys(z).forEach(function(Z){O=P(z,Z),O!==void 0?z[Z]=O:delete z[Z]}),S.call(B,v,z)})({"":b},""):b}};V8.exports=Aq});var z8=R((ope,Sh)=>{var H8=G8().stringify,W8=$8();Sh.exports=function(t){return{parse:W8(t),stringify:H8}};Sh.exports.parse=W8();Sh.exports.stringify=H8});var WE=R(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.GCE_LINUX_BIOS_PATHS=void 0;po.isGoogleCloudServerless=Y8;po.isGoogleComputeEngineLinux=J8;po.isGoogleComputeEngineMACAddress=X8;po.isGoogleComputeEngine=Q8;po.detectGCPResidency=_q;var j8=require("fs"),K8=require("os");po.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};var Sq=/^42:01/;function Y8(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function J8(){if((0,K8.platform)()!=="linux")return!1;try{(0,j8.statSync)(po.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let t=(0,j8.readFileSync)(po.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(t)}catch{return!1}}function X8(){let t=(0,K8.networkInterfaces)();for(let e of Object.values(t))if(e){for(let{mac:r}of e)if(Sq.test(r))return!0}return!1}function Q8(){return J8()||X8()}function _q(){return Y8()||Q8()}});var Z8=R(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});_h.Colours=void 0;var yr=class t{static isEnabled(e){return e&&e.isTTY&&(typeof e.getColorDepth=="function"?e.getColorDepth()>2:!0)}static refresh(){t.enabled=t.isEnabled(process==null?void 0:process.stderr),this.enabled?(t.reset="\x1B[0m",t.bright="\x1B[1m",t.dim="\x1B[2m",t.red="\x1B[31m",t.green="\x1B[32m",t.yellow="\x1B[33m",t.blue="\x1B[34m",t.magenta="\x1B[35m",t.cyan="\x1B[36m",t.white="\x1B[37m",t.grey="\x1B[90m"):(t.reset="",t.bright="",t.dim="",t.red="",t.green="",t.yellow="",t.blue="",t.magenta="",t.cyan="",t.white="",t.grey="")}};_h.Colours=yr;yr.enabled=!1;yr.reset="";yr.bright="";yr.dim="";yr.red="";yr.green="";yr.yellow="";yr.blue="";yr.magenta="";yr.cyan="";yr.white="";yr.grey="";yr.refresh()});var n7=R(nt=>{"use strict";var wq=nt&&nt.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Tq=nt&&nt.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),e7=nt&&nt.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&wq(r,e,n[o]);return Tq(r,e),r}})();Object.defineProperty(nt,"__esModule",{value:!0});nt.env=nt.DebugLogBackendBase=nt.placeholder=nt.AdhocDebugLogger=nt.LogSeverity=void 0;nt.getNodeBackend=jE;nt.getDebugBackend=vq;nt.getStructuredBackend=Oq;nt.setBackend=Rq;nt.log=r7;var bq=require("events"),d1=e7(require("process")),t7=e7(require("util")),mn=Z8(),mo;(function(t){t.DEFAULT="DEFAULT",t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR"})(mo||(nt.LogSeverity=mo={}));var f1=class extends bq.EventEmitter{constructor(e,r){super(),this.namespace=e,this.upstream=r,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(n,o)=>this.on(n,o)}),this.func.debug=(...n)=>this.invokeSeverity(mo.DEBUG,...n),this.func.info=(...n)=>this.invokeSeverity(mo.INFO,...n),this.func.warn=(...n)=>this.invokeSeverity(mo.WARNING,...n),this.func.error=(...n)=>this.invokeSeverity(mo.ERROR,...n),this.func.sublog=n=>r7(n,this.func)}invoke(e,...r){if(this.upstream)try{this.upstream(e,...r)}catch{}try{this.emit("log",e,r)}catch{}}invokeSeverity(e,...r){this.invoke({severity:e},...r)}};nt.AdhocDebugLogger=f1;nt.placeholder=new f1("",()=>{}).func;var Ka=class{constructor(){var e;this.cached=new Map,this.filters=[],this.filtersSet=!1;let r=(e=d1.env[nt.env.nodeEnables])!==null&&e!==void 0?e:"*";r==="all"&&(r="*"),this.filters=r.split(",")}log(e,r,...n){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let o=this.cached.get(e);o||(o=this.makeLogger(e),this.cached.set(e,o)),o(r,...n)}catch(o){console.error(o)}}};nt.DebugLogBackendBase=Ka;var zE=class extends Ka{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(e){return this.enabledRegexp.test(e)}makeLogger(e){return this.enabledRegexp.test(e)?(r,...n)=>{var o;let i=`${mn.Colours.green}${e}${mn.Colours.reset}`,s=`${mn.Colours.yellow}${d1.pid}${mn.Colours.reset}`,u;switch(r.severity){case mo.ERROR:u=`${mn.Colours.red}${r.severity}${mn.Colours.reset}`;break;case mo.INFO:u=`${mn.Colours.magenta}${r.severity}${mn.Colours.reset}`;break;case mo.WARNING:u=`${mn.Colours.yellow}${r.severity}${mn.Colours.reset}`;break;default:u=(o=r.severity)!==null&&o!==void 0?o:mo.DEFAULT;break}let a=t7.formatWithOptions({colors:mn.Colours.enabled},...n),c=Object.assign({},r);delete c.severity;let d=Object.getOwnPropertyNames(c).length?JSON.stringify(c):"",p=d?`${mn.Colours.grey}${d}${mn.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",s,i,u,a,d?` ${p}`:"")}:()=>{}}setFilters(){let r=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=new RegExp(`^${r}$`,"i")}};function jE(){return new zE}var KE=class extends Ka{constructor(e){super(),this.debugPkg=e}makeLogger(e){let r=this.debugPkg(e);return(n,...o)=>{r(o[0],...o.slice(1))}}setFilters(){var e;let r=(e=d1.env.NODE_DEBUG)!==null&&e!==void 0?e:"";d1.env.NODE_DEBUG=`${r}${r?",":""}${this.filters.join(",")}`}};function vq(t){return new KE(t)}var YE=class extends Ka{constructor(e){var r;super(),this.upstream=(r=e)!==null&&r!==void 0?r:void 0}makeLogger(e){var r;let n=(r=this.upstream)===null||r===void 0?void 0:r.makeLogger(e);return(o,...i)=>{var s;let u=(s=o.severity)!==null&&s!==void 0?s:mo.INFO,a=Object.assign({severity:u,message:t7.format(...i)},o),c=JSON.stringify(a);n?n(o,c):console.log("%s",c)}}setFilters(){var e;(e=this.upstream)===null||e===void 0||e.setFilters()}};function Oq(t){return new YE(t)}nt.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};var JE=new Map,gn;function Rq(t){gn=t,JE.clear()}function r7(t,e){if(!gn&&!d1.env[nt.env.nodeEnables]||!t)return nt.placeholder;e&&(t=`${e.instance.namespace}:${t}`);let r=JE.get(t);if(r)return r.func;if(gn===null)return nt.placeholder;gn===void 0&&(gn=jE());let n=(()=>{let o;return new f1(t,(s,...u)=>{if(o!==gn){if(gn===null)return;gn===void 0&&(gn=jE()),o=gn}gn?.log(t,s,...u)})})();return JE.set(t,n),n.func}});var XE=R(Ou=>{"use strict";var Dq=Ou&&Ou.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Iq=Ou&&Ou.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Dq(e,t,r)};Object.defineProperty(Ou,"__esModule",{value:!0});Iq(n7(),Ou)});var p1=R(Ce=>{"use strict";var i7=Ce&&Ce.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Mq=Ce&&Ce.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Nq=Ce&&Ce.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&i7(r,e,n[o]);return Mq(r,e),r}})(),Bq=Ce&&Ce.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&i7(e,t,r)};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.gcpResidencyCache=Ce.METADATA_SERVER_DETECTION=Ce.HEADERS=Ce.HEADER_VALUE=Ce.HEADER_NAME=Ce.SECONDARY_HOST_ADDRESS=Ce.HOST_ADDRESS=Ce.BASE_PATH=void 0;Ce.instance=Uq;Ce.project=qq;Ce.universe=Gq;Ce.bulk=Vq;Ce.isAvailable=Hq;Ce.resetIsAvailableCache=Wq;Ce.getGCPResidency=ey;Ce.setGCPResidency=s7;Ce.requestTimeout=u7;var QE=ir(),Pq=z8(),Fq=WE(),xq=Nq(XE());Ce.BASE_PATH="/computeMetadata/v1";Ce.HOST_ADDRESS="http://169.254.169.254";Ce.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";Ce.HEADER_NAME="Metadata-Flavor";Ce.HEADER_VALUE="Google";Ce.HEADERS=Object.freeze({[Ce.HEADER_NAME]:Ce.HEADER_VALUE});var o7=xq.log("gcp-metadata");Ce.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"});function ZE(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||Ce.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(Ce.BASE_PATH,t).href}function kq(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}async function h1(t,e={},r=3,n=!1){let o=new Headers(Ce.HEADERS),i="",s={};if(typeof t=="object"){let p=t;new Headers(p.headers).forEach((m,E)=>o.set(E,m)),i=p.metadataKey,s=p.params||s,r=p.noResponseRetries||r,n=p.fastFail||n}else i=t;typeof e=="string"?i+=`/${e}`:(kq(e),e.property&&(i+=`/${e.property}`),new Headers(e.headers).forEach((p,m)=>o.set(m,p)),s=e.params||s);let u=n?Lq:QE.request,a={url:`${ZE()}/${i}`,headers:o,retryConfig:{noResponseRetries:r},params:s,responseType:"text",timeout:u7()};o7.info("instance request %j",a);let c=await u(a);o7.info("instance metadata is %s",c.data);let d=c.headers.get(Ce.HEADER_NAME);if(d!==Ce.HEADER_VALUE)throw new RangeError(`Invalid response from metadata service: incorrect ${Ce.HEADER_NAME} header. Expected '${Ce.HEADER_VALUE}', got ${d?`'${d}'`:"no header"}`);if(typeof c.data=="string")try{return Pq.parse(c.data)}catch{}return c.data}async function Lq(t){let e={...t,url:t.url?.toString().replace(ZE(),ZE(Ce.SECONDARY_HOST_ADDRESS))},r=(0,QE.request)(t),n=(0,QE.request)(e);return Promise.any([r,n])}function Uq(t){return h1("instance",t)}function qq(t){return h1("project",t)}function Gq(t){return h1("universe",t)}async function Vq(t){let e={};return await Promise.all(t.map(r=>(async()=>{let n=await h1(r),o=r.metadataKey;e[o]=n})())),e}function $q(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var wh;async function Hq(){if(process.env.METADATA_SERVER_DETECTION){let t=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(t in Ce.METADATA_SERVER_DETECTION))throw new RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${t}\`, but it should be \`${Object.keys(Ce.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(t){case"assume-present":return!0;case"none":return!1;case"bios-only":return ey();case"ping-only":}}try{return wh===void 0&&(wh=h1("instance",void 0,$q(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await wh,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code.toString()))){let r="UNKNOWN";e.code&&(r=e.code.toString()),process.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}}function Wq(){wh=void 0}Ce.gcpResidencyCache=null;function ey(){return Ce.gcpResidencyCache===null&&s7(),Ce.gcpResidencyCache}function s7(t=null){Ce.gcpResidencyCache=t!==null?t:(0,Fq.detectGCPResidency)()}function u7(){return ey()?0:3e3}Bq(WE(),Ce)});var l7=R(Th=>{"use strict";Th.byteLength=jq;Th.toByteArray=Yq;Th.fromByteArray=Qq;var Zo=[],qn=[],zq=typeof Uint8Array<"u"?Uint8Array:Array,ty="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ru=0,a7=ty.length;Ru<a7;++Ru)Zo[Ru]=ty[Ru],qn[ty.charCodeAt(Ru)]=Ru;var Ru,a7;qn[45]=62;qn[95]=63;function c7(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function jq(t){var e=c7(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Kq(t,e,r){return(e+r)*3/4-r}function Yq(t){var e,r=c7(t),n=r[0],o=r[1],i=new zq(Kq(t,n,o)),s=0,u=o>0?n-4:n,a;for(a=0;a<u;a+=4)e=qn[t.charCodeAt(a)]<<18|qn[t.charCodeAt(a+1)]<<12|qn[t.charCodeAt(a+2)]<<6|qn[t.charCodeAt(a+3)],i[s++]=e>>16&255,i[s++]=e>>8&255,i[s++]=e&255;return o===2&&(e=qn[t.charCodeAt(a)]<<2|qn[t.charCodeAt(a+1)]>>4,i[s++]=e&255),o===1&&(e=qn[t.charCodeAt(a)]<<10|qn[t.charCodeAt(a+1)]<<4|qn[t.charCodeAt(a+2)]>>2,i[s++]=e>>8&255,i[s++]=e&255),i}function Jq(t){return Zo[t>>18&63]+Zo[t>>12&63]+Zo[t>>6&63]+Zo[t&63]}function Xq(t,e,r){for(var n,o=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),o.push(Jq(n));return o.join("")}function Qq(t){for(var e,r=t.length,n=r%3,o=[],i=16383,s=0,u=r-n;s<u;s+=i)o.push(Xq(t,s,s+i>u?u:s+i));return n===1?(e=t[r-1],o.push(Zo[e>>2]+Zo[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],o.push(Zo[e>>10]+Zo[e>>4&63]+Zo[e<<2&63]+"=")),o.join("")}});var ny=R(ry=>{"use strict";Object.defineProperty(ry,"__esModule",{value:!0});ry.fromArrayBufferToHex=Zq;function Zq(t){return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}});var d7=R(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});bh.BrowserCrypto=void 0;var Ya=l7(),eG=ny(),oy=class t{constructor(){if(typeof window>"u"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(e){let r=new TextEncoder().encode(e),n=await window.crypto.subtle.digest("SHA-256",r);return Ya.fromByteArray(new Uint8Array(n))}randomBytesBase64(e){let r=new Uint8Array(e);return window.crypto.getRandomValues(r),Ya.fromByteArray(r)}static padBase64(e){for(;e.length%4!==0;)e+="=";return e}async verify(e,r,n){let o={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(r),s=Ya.toByteArray(t.padBase64(n)),u=await window.crypto.subtle.importKey("jwk",e,o,!0,["verify"]);return await window.crypto.subtle.verify(o,u,s,i)}async sign(e,r){let n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},o=new TextEncoder().encode(r),i=await window.crypto.subtle.importKey("jwk",e,n,!0,["sign"]),s=await window.crypto.subtle.sign(n,i,o);return Ya.fromByteArray(new Uint8Array(s))}decodeBase64StringUtf8(e){let r=Ya.toByteArray(t.padBase64(e));return new TextDecoder().decode(r)}encodeBase64StringUtf8(e){let r=new TextEncoder().encode(e);return Ya.fromByteArray(r)}async sha256DigestHex(e){let r=new TextEncoder().encode(e),n=await window.crypto.subtle.digest("SHA-256",r);return(0,eG.fromArrayBufferToHex)(n)}async signWithHmacSha256(e,r){let n=typeof e=="string"?e:String.fromCharCode(...new Uint16Array(e)),o=new TextEncoder,i=await window.crypto.subtle.importKey("raw",o.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",i,o.encode(r))}};bh.BrowserCrypto=oy});var f7=R(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});vh.NodeCrypto=void 0;var Ja=require("crypto"),iy=class{async sha256DigestBase64(e){return Ja.createHash("sha256").update(e).digest("base64")}randomBytesBase64(e){return Ja.randomBytes(e).toString("base64")}async verify(e,r,n){let o=Ja.createVerify("RSA-SHA256");return o.update(r),o.end(),o.verify(e,n,"base64")}async sign(e,r){let n=Ja.createSign("RSA-SHA256");return n.update(r),n.end(),n.sign(e,"base64")}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}async sha256DigestHex(e){return Ja.createHash("sha256").update(e).digest("hex")}async signWithHmacSha256(e,r){let n=typeof e=="string"?e:rG(e);return tG(Ja.createHmac("sha256",n).update(r).digest())}};vh.NodeCrypto=iy;function tG(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function rG(t){return Buffer.from(t)}});var m1=R(Ii=>{"use strict";var nG=Ii&&Ii.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),oG=Ii&&Ii.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&nG(e,t,r)};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.createCrypto=uG;Ii.hasBrowserCrypto=h7;var iG=d7(),sG=f7();oG(ny(),Ii);function uG(){return h7()?new iG.BrowserCrypto:new sG.NodeCrypto}function h7(){return typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.subtle<"u"}});var Xa=R((sy,m7)=>{var Oh=require("buffer"),ei=Oh.Buffer;function p7(t,e){for(var r in t)e[r]=t[r]}ei.from&&ei.alloc&&ei.allocUnsafe&&ei.allocUnsafeSlow?m7.exports=Oh:(p7(Oh,sy),sy.Buffer=Du);function Du(t,e,r){return ei(t,e,r)}Du.prototype=Object.create(ei.prototype);p7(ei,Du);Du.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return ei(t,e,r)};Du.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=ei(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Du.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ei(t)};Du.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Oh.SlowBuffer(t)}});var E7=R((mpe,g7)=>{"use strict";function uy(t){var e=(t/8|0)+(t%8===0?0:1);return e}var aG={ES256:uy(256),ES384:uy(384),ES512:uy(521)};function cG(t){var e=aG[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}g7.exports=cG});var ay=R((gpe,w7)=>{"use strict";var Rh=Xa().Buffer,C7=E7(),Dh=128,A7=0,lG=32,dG=16,fG=2,S7=dG|lG|A7<<6,Ih=fG|A7<<6;function hG(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _7(t){if(Rh.isBuffer(t))return t;if(typeof t=="string")return Rh.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function pG(t,e){t=_7(t);var r=C7(e),n=r+1,o=t.length,i=0;if(t[i++]!==S7)throw new Error('Could not find expected "seq"');var s=t[i++];if(s===(Dh|1)&&(s=t[i++]),o-i<s)throw new Error('"seq" specified length of "'+s+'", only "'+(o-i)+'" remaining');if(t[i++]!==Ih)throw new Error('Could not find expected "int" for "r"');var u=t[i++];if(o-i-2<u)throw new Error('"r" specified length of "'+u+'", only "'+(o-i-2)+'" available');if(n<u)throw new Error('"r" specified length of "'+u+'", max of "'+n+'" is acceptable');var a=i;if(i+=u,t[i++]!==Ih)throw new Error('Could not find expected "int" for "s"');var c=t[i++];if(o-i!==c)throw new Error('"s" specified length of "'+c+'", expected "'+(o-i)+'"');if(n<c)throw new Error('"s" specified length of "'+c+'", max of "'+n+'" is acceptable');var d=i;if(i+=c,i!==o)throw new Error('Expected to consume entire buffer, but "'+(o-i)+'" bytes remain');var p=r-u,m=r-c,E=Rh.allocUnsafe(p+u+m+c);for(i=0;i<p;++i)E[i]=0;t.copy(E,i,a+Math.max(-p,0),a+u),i=r;for(var y=i;i<y+m;++i)E[i]=0;return t.copy(E,i,d+Math.max(-m,0),d+c),E=E.toString("base64"),E=hG(E),E}function y7(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var o=t[e+n]>=Dh;return o&&--n,n}function mG(t,e){t=_7(t);var r=C7(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var o=y7(t,0,r),i=y7(t,r,t.length),s=r-o,u=r-i,a=2+s+1+1+u,c=a<Dh,d=Rh.allocUnsafe((c?2:3)+a),p=0;return d[p++]=S7,c?d[p++]=a:(d[p++]=Dh|1,d[p++]=a&255),d[p++]=Ih,d[p++]=s,o<0?(d[p++]=0,p+=t.copy(d,p,0,r)):p+=t.copy(d,p,o,r),d[p++]=Ih,d[p++]=u,i<0?(d[p++]=0,t.copy(d,p,r)):t.copy(d,p,r+i),d}w7.exports={derToJose:pG,joseToDer:mG}});var go=R(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.LRUCache=void 0;Mi.snakeToCamel=b7;Mi.originalOrCamelOptions=CG;Mi.removeUndefinedValuesInObject=AG;Mi.isValidFile=SG;Mi.getWellKnownCertificateConfigFileLocation=_G;var gG=require("fs"),EG=require("os"),cy=require("path"),yG="certificate_config.json",T7="gcloud";function b7(t){return t.replace(/([_][^_])/g,e=>e.slice(1).toUpperCase())}function CG(t){function e(r){let n=t||{};return n[r]??n[b7(r)]}return{get:e}}var ly=class{capacity;#e=new Map;maxAge;constructor(e){this.capacity=e.capacity,this.maxAge=e.maxAge}#t(e,r){this.#e.delete(e),this.#e.set(e,{value:r,lastAccessed:Date.now()})}set(e,r){this.#t(e,r),this.#r()}get(e){let r=this.#e.get(e);if(r)return this.#t(e,r.value),this.#r(),r.value}#r(){let e=this.maxAge?Date.now()-this.maxAge:0,r=this.#e.entries().next();for(;!r.done&&(this.#e.size>this.capacity||r.value[1].lastAccessed<e);)this.#e.delete(r.value[0]),r=this.#e.entries().next()}};Mi.LRUCache=ly;function AG(t){return Object.entries(t).forEach(([e,r])=>{(r===void 0||r==="undefined")&&delete t[e]}),t}async function SG(t){try{return(await gG.promises.lstat(t)).isFile()}catch{return!1}}function _G(){let t=process.env.CLOUDSDK_CONFIG||(wG()?cy.join(process.env.APPDATA||"",T7):cy.join(process.env.HOME||"",".config",T7));return cy.join(t,yG)}function wG(){return EG.platform().startsWith("win")}});var v7=R((ype,TG)=>{TG.exports={name:"google-auth-library",version:"10.5.0",author:"Google Inc.",description:"Google APIs Authentication Client Library for Node.js",engines:{node:">=18"},main:"./build/src/index.js",types:"./build/src/index.d.ts",repository:"googleapis/google-auth-library-nodejs.git",keywords:["google","api","google apis","client","client library"],dependencies:{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11",gaxios:"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0",gtoken:"^8.0.0",jws:"^4.0.0"},devDependencies:{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0",c8:"^10.0.0",codecov:"^3.0.2",gts:"^6.0.0","is-docker":"^3.0.0",jsdoc:"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1",keypair:"^1.0.4",mocha:"^11.1.0",mv:"^2.1.1",ncp:"^2.0.0",nock:"^14.0.5","null-loader":"^4.0.0",puppeteer:"^24.0.0",sinon:"^21.0.0","ts-loader":"^8.0.0",typescript:"5.8.2",webpack:"^5.21.2","webpack-cli":"^4.0.0"},files:["build/src","!build/src/**/*.map"],scripts:{test:"c8 mocha build/test",clean:"gts clean",prepare:"npm run compile",lint:"gts check --no-inline-config",compile:"tsc -p .",fix:"gts fix",pretest:"npm run compile -- --sourceMap",docs:"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap",webpack:"webpack","browser-test":"karma start","docs-test":"echo 'disabled until linkinator is fixed'","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install"},license:"Apache-2.0"}});var dy=R(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.USER_AGENT=ws.PRODUCT_NAME=ws.pkg=void 0;var O7=v7();ws.pkg=O7;var R7="google-api-nodejs-client";ws.PRODUCT_NAME=R7;var bG=`${R7}/${O7.version}`;ws.USER_AGENT=bG});var En=R(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.AuthClient=Eo.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=Eo.DEFAULT_UNIVERSE=void 0;var vG=require("events"),fy=ir(),OG=go(),RG=XE(),hy=dy();Eo.DEFAULT_UNIVERSE="googleapis.com";Eo.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=300*1e3;var py=class t extends vG.EventEmitter{apiKey;projectId;quotaProjectId;transporter;credentials={};eagerRefreshThresholdMillis=Eo.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;forceRefreshOnFailure=!1;universeDomain=Eo.DEFAULT_UNIVERSE;static RequestMethodNameSymbol=Symbol("request method name");static RequestLogIdSymbol=Symbol("request log id");constructor(e={}){super();let r=(0,OG.originalOrCamelOptions)(e);this.apiKey=e.apiKey,this.projectId=r.get("project_id")??null,this.quotaProjectId=r.get("quota_project_id"),this.credentials=r.get("credentials")??{},this.universeDomain=r.get("universe_domain")??Eo.DEFAULT_UNIVERSE,this.transporter=e.transporter??new fy.Gaxios(e.transporterOptions),r.get("useAuthRequestParameters")!==!1&&(this.transporter.interceptors.request.add(t.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(t.DEFAULT_RESPONSE_INTERCEPTOR)),e.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=e.forceRefreshOnFailure??!1}fetch(...e){let r=e[0],n=e[1],o,i=new Headers;return typeof r=="string"?o=new URL(r):r instanceof URL?o=r:r&&r.url&&(o=new URL(r.url)),r&&typeof r=="object"&&"headers"in r&&fy.Gaxios.mergeHeaders(i,r.headers),n&&fy.Gaxios.mergeHeaders(i,new Headers(n.headers)),typeof r=="object"&&!(r instanceof URL)?this.request({...n,...r,headers:i,url:o}):this.request({...n,headers:i,url:o})}setCredentials(e){this.credentials=e}addSharedMetadataHeaders(e){return!e.has("x-goog-user-project")&&this.quotaProjectId&&e.set("x-goog-user-project",this.quotaProjectId),e}addUserProjectAndAuthHeaders(e,r){let n=r.get("x-goog-user-project"),o=r.get("authorization");return n&&e.set("x-goog-user-project",n),o&&e.set("authorization",o),e}static log=(0,RG.log)("auth");static DEFAULT_REQUEST_INTERCEPTOR={resolved:async e=>{if(!e.headers.has("x-goog-api-client")){let n=process.version.replace(/^v/,"");e.headers.set("x-goog-api-client",`gl-node/${n}`)}let r=e.headers.get("User-Agent");r?r.includes(`${hy.PRODUCT_NAME}/`)||e.headers.set("User-Agent",`${r} ${hy.USER_AGENT}`):e.headers.set("User-Agent",hy.USER_AGENT);try{let n=e,o=n[t.RequestMethodNameSymbol],i=`${Math.floor(Math.random()*1e3)}`;n[t.RequestLogIdSymbol]=i;let s={url:e.url,headers:e.headers};o?t.log.info("%s [%s] request %j",o,i,s):t.log.info("[%s] request %j",i,s)}catch{}return e}};static DEFAULT_RESPONSE_INTERCEPTOR={resolved:async e=>{try{let r=e.config,n=r[t.RequestMethodNameSymbol],o=r[t.RequestLogIdSymbol];n?t.log.info("%s [%s] response %j",n,o,e.data):t.log.info("[%s] response %j",o,e.data)}catch{}return e},rejected:async e=>{try{let r=e.config,n=r[t.RequestMethodNameSymbol],o=r[t.RequestLogIdSymbol];n?t.log.info("%s [%s] error %j",n,o,e.response?.data):t.log.error("[%s] error %j",o,e.response?.data)}catch{}throw e}};static setMethodName(e,r){try{let n=e;n[t.RequestMethodNameSymbol]=r}catch{}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}};Eo.AuthClient=py});var gy=R(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.LoginTicket=void 0;var my=class{envelope;payload;constructor(e,r){this.envelope=e,this.payload=r}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};Mh.LoginTicket=my});var Iu=R(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.OAuth2Client=ti.ClientAuthentication=ti.CertificateFormat=ti.CodeChallengeMethod=void 0;var D7=ir(),DG=require("querystring"),IG=require("stream"),MG=ay(),I7=go(),Ey=m1(),Qa=En(),NG=gy(),M7;(function(t){t.Plain="plain",t.S256="S256"})(M7||(ti.CodeChallengeMethod=M7={}));var Ni;(function(t){t.PEM="PEM",t.JWK="JWK"})(Ni||(ti.CertificateFormat=Ni={}));var g1;(function(t){t.ClientSecretPost="ClientSecretPost",t.ClientSecretBasic="ClientSecretBasic",t.None="None"})(g1||(ti.ClientAuthentication=g1={}));var yy=class t extends Qa.AuthClient{redirectUri;certificateCache={};certificateExpiry=null;certificateCacheFormat=Ni.PEM;refreshTokenPromises=new Map;endpoints;issuers;clientAuthentication;_clientId;_clientSecret;refreshHandler;constructor(e={},r,n){super(typeof e=="object"?e:{}),typeof e!="object"&&(e={clientId:e,clientSecret:r,redirectUri:n}),this._clientId=e.clientId||e.client_id,this._clientSecret=e.clientSecret||e.client_secret,this.redirectUri=e.redirectUri||e.redirect_uris?.[0],this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...e.endpoints},this.clientAuthentication=e.clientAuthentication||g1.ClientSecretPost,this.issuers=e.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}static GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";static CLOCK_SKEW_SECS_=300;static DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400;generateAuthUrl(e={}){if(e.code_challenge_method&&!e.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return e.response_type=e.response_type||"code",e.client_id=e.client_id||this._clientId,e.redirect_uri=e.redirect_uri||this.redirectUri,Array.isArray(e.scope)&&(e.scope=e.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+DG.stringify(e)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let e=(0,Ey.createCrypto)(),n=e.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),i=(await e.sha256DigestBase64(n)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:n,codeChallenge:i}}getToken(e,r){let n=typeof e=="string"?{code:e}:e;if(r)this.getTokenAsync(n).then(o=>r(null,o.tokens,o.res),o=>r(o,null,o.response));else return this.getTokenAsync(n)}async getTokenAsync(e){let r=this.endpoints.oauth2TokenUrl.toString(),n=new Headers,o={client_id:e.client_id||this._clientId,code_verifier:e.codeVerifier,code:e.code,grant_type:"authorization_code",redirect_uri:e.redirect_uri||this.redirectUri};if(this.clientAuthentication===g1.ClientSecretBasic){let a=Buffer.from(`${this._clientId}:${this._clientSecret}`);n.set("authorization",`Basic ${a.toString("base64")}`)}this.clientAuthentication===g1.ClientSecretPost&&(o.client_secret=this._clientSecret);let i={...t.RETRY_CONFIG,method:"POST",url:r,data:new URLSearchParams((0,I7.removeUndefinedValuesInObject)(o)),headers:n};Qa.AuthClient.setMethodName(i,"getTokenAsync");let s=await this.transporter.request(i),u=s.data;return s.data&&s.data.expires_in&&(u.expiry_date=new Date().getTime()+s.data.expires_in*1e3,delete u.expires_in),this.emit("tokens",u),{tokens:u,res:s}}async refreshToken(e){if(!e)return this.refreshTokenNoCache(e);if(this.refreshTokenPromises.has(e))return this.refreshTokenPromises.get(e);let r=this.refreshTokenNoCache(e).then(n=>(this.refreshTokenPromises.delete(e),n),n=>{throw this.refreshTokenPromises.delete(e),n});return this.refreshTokenPromises.set(e,r),r}async refreshTokenNoCache(e){if(!e)throw new Error("No refresh token is set.");let r=this.endpoints.oauth2TokenUrl.toString(),n={refresh_token:e,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},o;try{let s={...t.RETRY_CONFIG,method:"POST",url:r,data:new URLSearchParams((0,I7.removeUndefinedValuesInObject)(n))};Qa.AuthClient.setMethodName(s,"refreshTokenNoCache"),o=await this.transporter.request(s)}catch(s){throw s instanceof D7.GaxiosError&&s.message==="invalid_grant"&&s.response?.data&&/ReAuth/i.test(s.response.data.error_description)&&(s.message=JSON.stringify(s.response.data)),s}let i=o.data;return o.data&&o.data.expires_in&&(i.expiry_date=new Date().getTime()+o.data.expires_in*1e3,delete i.expires_in),this.emit("tokens",i),{tokens:i,res:o}}refreshAccessToken(e){if(e)this.refreshAccessTokenAsync().then(r=>e(null,r.credentials,r.res),e);else return this.refreshAccessTokenAsync()}async refreshAccessTokenAsync(){let e=await this.refreshToken(this.credentials.refresh_token),r=e.tokens;return r.refresh_token=this.credentials.refresh_token,this.credentials=r,{credentials:this.credentials,res:e.res}}getAccessToken(e){if(e)this.getAccessTokenAsync().then(r=>e(null,r.token,r.res),e);else return this.getAccessTokenAsync()}async getAccessTokenAsync(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let n=await this.processAndValidateRefreshHandler();if(n?.access_token)return this.setCredentials(n),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let r=await this.refreshAccessTokenAsync();if(!r.credentials||r.credentials&&!r.credentials.access_token)throw new Error("Could not refresh access token.");return{token:r.credentials.access_token,res:r.res}}else return{token:this.credentials.access_token}}async getRequestHeaders(e){return(await this.getRequestMetadataAsync(e)).headers}async getRequestMetadataAsync(e){let r=this.credentials;if(!r.access_token&&!r.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(r.access_token&&!this.isTokenExpiring()){r.token_type=r.token_type||"Bearer";let u=new Headers({authorization:r.token_type+" "+r.access_token});return{headers:this.addSharedMetadataHeaders(u)}}if(this.refreshHandler){let u=await this.processAndValidateRefreshHandler();if(u?.access_token){this.setCredentials(u);let a=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(a)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let n=null,o=null;try{n=await this.refreshToken(r.refresh_token),o=n.tokens}catch(u){let a=u;throw a.response&&(a.response.status===403||a.response.status===404)&&(a.message=`Could not refresh access token: ${a.message}`),a}let i=this.credentials;i.token_type=i.token_type||"Bearer",o.refresh_token=i.refresh_token,this.credentials=o;let s=new Headers({authorization:i.token_type+" "+o.access_token});return{headers:this.addSharedMetadataHeaders(s),res:n.res}}static getRevokeTokenUrl(e){return new t().getRevokeTokenURL(e).toString()}getRevokeTokenURL(e){let r=new URL(this.endpoints.oauth2RevokeUrl);return r.searchParams.append("token",e),r}revokeToken(e,r){let n={...t.RETRY_CONFIG,url:this.getRevokeTokenURL(e).toString(),method:"POST"};if(Qa.AuthClient.setMethodName(n,"revokeToken"),r)this.transporter.request(n).then(o=>r(null,o),r);else return this.transporter.request(n)}revokeCredentials(e){if(e)this.revokeCredentialsAsync().then(r=>e(null,r),e);else return this.revokeCredentialsAsync()}async revokeCredentialsAsync(){let e=this.credentials.access_token;if(this.credentials={},e)return this.revokeToken(e);throw new Error("No access token to revoke.")}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){try{let n=await this.getRequestMetadataAsync();return e.headers=D7.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,n.headers),this.apiKey&&e.headers.set("X-Goog-Api-Key",this.apiKey),await this.transporter.request(e)}catch(n){let o=n.response;if(o){let i=o.status,s=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),u=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,a=o.config.data instanceof IG.Readable,c=i===401||i===403;if(!r&&c&&!a&&s)return await this.refreshAccessTokenAsync(),this.requestAsync(e,!0);if(!r&&c&&!a&&u){let d=await this.processAndValidateRefreshHandler();return d?.access_token&&this.setCredentials(d),this.requestAsync(e,!0)}}throw n}}verifyIdToken(e,r){if(r&&typeof r!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(r)this.verifyIdTokenAsync(e).then(n=>r(null,n),r);else return this.verifyIdTokenAsync(e)}async verifyIdTokenAsync(e){if(!e.idToken)throw new Error("The verifyIdToken method requires an ID Token");let r=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(e.idToken,r.certs,e.audience,this.issuers,e.maxExpiry)}async getTokenInfo(e){let{data:r}=await this.transporter.request({...t.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${e}`},url:this.endpoints.tokenInfoUrl.toString()}),n=Object.assign({expiry_date:new Date().getTime()+r.expires_in*1e3,scopes:r.scope.split(" ")},r);return delete n.expires_in,delete n.scope,n}getFederatedSignonCerts(e){if(e)this.getFederatedSignonCertsAsync().then(r=>e(null,r.certs,r.res),e);else return this.getFederatedSignonCertsAsync()}async getFederatedSignonCertsAsync(){let e=new Date().getTime(),r=(0,Ey.hasBrowserCrypto)()?Ni.JWK:Ni.PEM;if(this.certificateExpiry&&e<this.certificateExpiry.getTime()&&this.certificateCacheFormat===r)return{certs:this.certificateCache,format:r};let n,o;switch(r){case Ni.PEM:o=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case Ni.JWK:o=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw new Error(`Unsupported certificate format ${r}`)}try{let c={...t.RETRY_CONFIG,url:o};Qa.AuthClient.setMethodName(c,"getFederatedSignonCertsAsync"),n=await this.transporter.request(c)}catch(c){throw c instanceof Error&&(c.message=`Failed to retrieve verification certificates: ${c.message}`),c}let i=n?.headers.get("cache-control"),s=-1;if(i){let c=/max-age=(?<maxAge>[0-9]+)/.exec(i)?.groups?.maxAge;c&&(s=Number(c)*1e3)}let u={};switch(r){case Ni.PEM:u=n.data;break;case Ni.JWK:for(let c of n.data.keys)u[c.kid]=c;break;default:throw new Error(`Unsupported certificate format ${r}`)}let a=new Date;return this.certificateExpiry=s===-1?null:new Date(a.getTime()+s),this.certificateCache=u,this.certificateCacheFormat=r,{certs:u,format:r,res:n}}getIapPublicKeys(e){if(e)this.getIapPublicKeysAsync().then(r=>e(null,r.pubkeys,r.res),e);else return this.getIapPublicKeysAsync()}async getIapPublicKeysAsync(){let e,r=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let n={...t.RETRY_CONFIG,url:r};Qa.AuthClient.setMethodName(n,"getIapPublicKeysAsync"),e=await this.transporter.request(n)}catch(n){throw n instanceof Error&&(n.message=`Failed to retrieve verification certificates: ${n.message}`),n}return{pubkeys:e.data,res:e}}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(e,r,n,o,i){let s=(0,Ey.createCrypto)();i||(i=t.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);let u=e.split(".");if(u.length!==3)throw new Error("Wrong number of segments in token: "+e);let a=u[0]+"."+u[1],c=u[2],d,p;try{d=JSON.parse(s.decodeBase64StringUtf8(u[0]))}catch(B){throw B instanceof Error&&(B.message=`Can't parse token envelope: ${u[0]}': ${B.message}`),B}if(!d)throw new Error("Can't parse token envelope: "+u[0]);try{p=JSON.parse(s.decodeBase64StringUtf8(u[1]))}catch(B){throw B instanceof Error&&(B.message=`Can't parse token payload '${u[0]}`),B}if(!p)throw new Error("Can't parse token payload: "+u[1]);if(!Object.prototype.hasOwnProperty.call(r,d.kid))throw new Error("No pem found for envelope: "+JSON.stringify(d));let m=r[d.kid];if(d.alg==="ES256"&&(c=MG.joseToDer(c,"ES256").toString("base64")),!await s.verify(m,a,c))throw new Error("Invalid token signature: "+e);if(!p.iat)throw new Error("No issue time in token: "+JSON.stringify(p));if(!p.exp)throw new Error("No expiration time in token: "+JSON.stringify(p));let y=Number(p.iat);if(isNaN(y))throw new Error("iat field using invalid format");let A=Number(p.exp);if(isNaN(A))throw new Error("exp field using invalid format");let S=new Date().getTime()/1e3;if(A>=S+i)throw new Error("Expiration time too far in future: "+JSON.stringify(p));let b=y-t.CLOCK_SKEW_SECS_,P=A+t.CLOCK_SKEW_SECS_;if(S<b)throw new Error("Token used too early, "+S+" < "+b+": "+JSON.stringify(p));if(S>P)throw new Error("Token used too late, "+S+" > "+P+": "+JSON.stringify(p));if(o&&o.indexOf(p.iss)<0)throw new Error("Invalid issuer, expected one of ["+o+"], but got "+p.iss);if(typeof n<"u"&&n!==null){let B=p.aud,v=!1;if(n.constructor===Array?v=n.indexOf(B)>-1:v=B===n,!v)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new NG.LoginTicket(d,p)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let e=await this.refreshHandler();if(!e.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return e}}isTokenExpiring(){let e=this.credentials.expiry_date;return e?e<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};ti.OAuth2Client=yy});var Ay=R(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});Nh.Compute=void 0;var BG=ir(),N7=p1(),PG=Iu(),Cy=class extends PG.OAuth2Client{serviceAccountEmail;scopes;constructor(e={}){super(e),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=e.serviceAccountEmail||"default",this.scopes=Array.isArray(e.scopes)?e.scopes:e.scopes?[e.scopes]:[]}async refreshTokenNoCache(){let e=`service-accounts/${this.serviceAccountEmail}/token`,r;try{let o={property:e};this.scopes.length>0&&(o.params={scopes:this.scopes.join(",")}),r=await N7.instance(o)}catch(o){throw o instanceof BG.GaxiosError&&(o.message=`Could not refresh access token: ${o.message}`,this.wrapError(o)),o}let n=r;return r&&r.expires_in&&(n.expiry_date=new Date().getTime()+r.expires_in*1e3,delete n.expires_in),this.emit("tokens",n),{tokens:n,res:null}}async fetchIdToken(e){let r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${e}`,n;try{let o={property:r};n=await N7.instance(o)}catch(o){throw o instanceof Error&&(o.message=`Could not fetch ID token: ${o.message}`),o}return n}wrapError(e){let r=e.response;r&&r.status&&(e.status=r.status,r.status===403?e.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+e.message:r.status===404&&(e.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+e.message))}};Nh.Compute=Cy});var _y=R(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});Bh.IdTokenClient=void 0;var FG=Iu(),Sy=class extends FG.OAuth2Client{targetAudience;idTokenProvider;constructor(e){super(e),this.targetAudience=e.targetAudience,this.idTokenProvider=e.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let r=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:r,expiry_date:this.getIdTokenExpiryDate(r)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate(e){let r=e.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}};Bh.IdTokenClient=Sy});var wy=R(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.GCPEnv=void 0;Za.clear=xG;Za.getEnv=kG;var B7=p1(),ri;(function(t){t.APP_ENGINE="APP_ENGINE",t.KUBERNETES_ENGINE="KUBERNETES_ENGINE",t.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",t.COMPUTE_ENGINE="COMPUTE_ENGINE",t.CLOUD_RUN="CLOUD_RUN",t.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",t.NONE="NONE"})(ri||(Za.GCPEnv=ri={}));var E1;function xG(){E1=void 0}async function kG(){return E1||(E1=LG(),E1)}async function LG(){let t=ri.NONE;return UG()?t=ri.APP_ENGINE:qG()?t=ri.CLOUD_FUNCTIONS:await HG()?await $G()?t=ri.KUBERNETES_ENGINE:GG()?t=ri.CLOUD_RUN:VG()?t=ri.CLOUD_RUN_JOBS:t=ri.COMPUTE_ENGINE:t=ri.NONE,t}function UG(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function qG(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function GG(){return!!process.env.K_CONFIGURATION}function VG(){return!!process.env.CLOUD_RUN_JOB}async function $G(){try{return await B7.instance("attributes/cluster-name"),!0}catch{return!1}}async function HG(){return B7.isAvailable()}});var Ty=R((vpe,P7)=>{var Ph=Xa().Buffer,WG=require("stream"),zG=require("util");function Fh(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=Ph.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=Ph.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}zG.inherits(Fh,WG);Fh.prototype.write=function(e){this.buffer=Ph.concat([this.buffer,Ph.from(e)]),this.emit("data",e)};Fh.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};P7.exports=Fh});var x7=R((Ope,F7)=>{"use strict";var y1=require("buffer").Buffer,by=require("buffer").SlowBuffer;F7.exports=xh;function xh(t,e){if(!y1.isBuffer(t)||!y1.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}xh.install=function(){y1.prototype.equal=by.prototype.equal=function(e){return xh(this,e)}};var jG=y1.prototype.equal,KG=by.prototype.equal;xh.restore=function(){y1.prototype.equal=jG,by.prototype.equal=KG}});var Dy=R((Rpe,W7)=>{var tc=Xa().Buffer,Gn=require("crypto"),L7=ay(),k7=require("util"),YG=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,C1="secret must be a string or buffer",ec="key must be a string or a buffer",JG="key must be a string, a buffer or an object",Oy=typeof Gn.createPublicKey=="function";Oy&&(ec+=" or a KeyObject",C1+="or a KeyObject");function U7(t){if(!tc.isBuffer(t)&&typeof t!="string"&&(!Oy||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw yo(ec)}function q7(t){if(!tc.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw yo(JG)}function XG(t){if(!tc.isBuffer(t)){if(typeof t=="string")return t;if(!Oy||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw yo(C1)}}function Ry(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function G7(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function yo(t){var e=[].slice.call(arguments,1),r=k7.format.bind(k7,t).apply(null,e);return new TypeError(r)}function QG(t){return tc.isBuffer(t)||typeof t=="string"}function A1(t){return QG(t)||(t=JSON.stringify(t)),t}function V7(t){return function(r,n){XG(n),r=A1(r);var o=Gn.createHmac("sha"+t,n),i=(o.update(r),o.digest("base64"));return Ry(i)}}var vy,ZG="timingSafeEqual"in Gn?function(e,r){return e.byteLength!==r.byteLength?!1:Gn.timingSafeEqual(e,r)}:function(e,r){return vy||(vy=x7()),vy(e,r)};function eV(t){return function(r,n,o){var i=V7(t)(r,o);return ZG(tc.from(n),tc.from(i))}}function $7(t){return function(r,n){q7(n),r=A1(r);var o=Gn.createSign("RSA-SHA"+t),i=(o.update(r),o.sign(n,"base64"));return Ry(i)}}function H7(t){return function(r,n,o){U7(o),r=A1(r),n=G7(n);var i=Gn.createVerify("RSA-SHA"+t);return i.update(r),i.verify(o,n,"base64")}}function tV(t){return function(r,n){q7(n),r=A1(r);var o=Gn.createSign("RSA-SHA"+t),i=(o.update(r),o.sign({key:n,padding:Gn.constants.RSA_PKCS1_PSS_PADDING,saltLength:Gn.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Ry(i)}}function rV(t){return function(r,n,o){U7(o),r=A1(r),n=G7(n);var i=Gn.createVerify("RSA-SHA"+t);return i.update(r),i.verify({key:o,padding:Gn.constants.RSA_PKCS1_PSS_PADDING,saltLength:Gn.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function nV(t){var e=$7(t);return function(){var n=e.apply(null,arguments);return n=L7.derToJose(n,"ES"+t),n}}function oV(t){var e=H7(t);return function(n,o,i){o=L7.joseToDer(o,"ES"+t).toString("base64");var s=e(n,o,i);return s}}function iV(){return function(){return""}}function sV(){return function(e,r){return r===""}}W7.exports=function(e){var r={hs:V7,rs:$7,ps:tV,es:nV,none:iV},n={hs:eV,rs:H7,ps:rV,es:oV,none:sV},o=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!o)throw yo(YG,e);var i=(o[1]||o[3]).toLowerCase(),s=o[2];return{sign:r[i](s),verify:n[i](s)}}});var Iy=R((Dpe,z7)=>{var uV=require("buffer").Buffer;z7.exports=function(e){return typeof e=="string"?e:typeof e=="number"||uV.isBuffer(e)?e.toString():JSON.stringify(e)}});var Q7=R((Ipe,X7)=>{var aV=Xa().Buffer,j7=Ty(),cV=Dy(),lV=require("stream"),K7=Iy(),My=require("util");function Y7(t,e){return aV.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function dV(t,e,r){r=r||"utf8";var n=Y7(K7(t),"binary"),o=Y7(K7(e),r);return My.format("%s.%s",n,o)}function J7(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,o=t.encoding,i=cV(e.alg),s=dV(e,r,o),u=i.sign(s,n);return My.format("%s.%s",s,u)}function kh(t){var e=t.secret;if(e=e??t.privateKey,e=e??t.key,/^hs/i.test(t.header.alg)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var r=new j7(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new j7(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}My.inherits(kh,lV);kh.prototype.sign=function(){try{var e=J7({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};kh.sign=J7;X7.exports=kh});var av=R((Mpe,uv)=>{var ev=Xa().Buffer,Z7=Ty(),fV=Dy(),hV=require("stream"),tv=Iy(),pV=require("util"),mV=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function gV(t){return Object.prototype.toString.call(t)==="[object Object]"}function EV(t){if(gV(t))return t;try{return JSON.parse(t)}catch{return}}function rv(t){var e=t.split(".",1)[0];return EV(ev.from(e,"base64").toString("binary"))}function yV(t){return t.split(".",2).join(".")}function nv(t){return t.split(".")[2]}function CV(t,e){e=e||"utf8";var r=t.split(".")[1];return ev.from(r,"base64").toString(e)}function ov(t){return mV.test(t)&&!!rv(t)}function iv(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=tv(t);var o=nv(t),i=yV(t),s=fV(e);return s.verify(i,o,r)}function sv(t,e){if(e=e||{},t=tv(t),!ov(t))return null;var r=rv(t);if(!r)return null;var n=CV(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:nv(t)}}function rc(t){t=t||{};var e=t.secret;if(e=e??t.publicKey,e=e??t.key,/^hs/i.test(t.algorithm)===!0&&e==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var r=new Z7(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new Z7(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}pV.inherits(rc,hV);rc.prototype.verify=function(){try{var e=iv(this.signature.buffer,this.algorithm,this.key.buffer),r=sv(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};rc.decode=sv;rc.isValid=ov;rc.verify=iv;uv.exports=rc});var Ny=R(Ts=>{var cv=Q7(),Lh=av(),AV=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Ts.ALGORITHMS=AV;Ts.sign=cv.sign;Ts.verify=Lh.verify;Ts.decode=Lh.decode;Ts.isValid=Lh.isValid;Ts.createSign=function(e){return new cv(e)};Ts.createVerify=function(e){return new Lh(e)}});var Tv=R(qh=>{"use strict";Object.defineProperty(qh,"__esModule",{value:!0});qh.GoogleToken=void 0;var lv=Uh(require("fs")),SV=ir(),_V=Uh(Ny()),wV=Uh(require("path")),TV=require("util");function Uh(t,e){if(typeof WeakMap=="function")var r=new WeakMap,n=new WeakMap;return(Uh=function(i,s){if(!s&&i&&i.__esModule)return i;var u,a,c={__proto__:null,default:i};if(i===null||Bi(i)!="object"&&typeof i!="function")return c;if(u=s?n:r){if(u.has(i))return u.get(i);u.set(i,c)}for(var d in i)d!=="default"&&{}.hasOwnProperty.call(i,d)&&((a=(u=Object.defineProperty)&&Object.getOwnPropertyDescriptor(i,d))&&(a.get||a.set)?u(c,d,a):c[d]=i[d]);return c})(t,e)}function Bi(t){"@babel/helpers - typeof";return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bi(t)}function bV(t,e){Cv(t,e),e.add(t)}function vV(t,e,r){Cv(t,e),e.set(t,r)}function Cv(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dv(t,e,r){return t.set(Co(t,e),r),r}function fv(t,e){return t.get(Co(t,e))}function Co(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function hv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_v(n.key),n)}}function Av(t,e,r){return e&&hv(t.prototype,e),r&&hv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OV(t,e,r){return e=T1(e),RV(t,Ly()?Reflect.construct(e,r||[],T1(t).constructor):e.apply(t,r))}function RV(t,e){if(e&&(Bi(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DV(t)}function DV(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IV(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w1(t,e)}function By(t){var e=typeof Map=="function"?new Map:void 0;return By=function(n){if(n===null||!NV(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,o)}function o(){return MV(n,arguments,T1(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),w1(o,n)},By(t)}function MV(t,e,r){if(Ly())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&w1(o,r.prototype),o}function Ly(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ly=function(){return!!t})()}function NV(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function w1(t,e){return w1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},w1(t,e)}function T1(t){return T1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T1(t)}function yn(t,e,r){return(e=_v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _v(t){var e=BV(t,"string");return Bi(e)=="symbol"?e:e+""}function BV(t,e){if(Bi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Bi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function An(){var t,e,r=typeof Symbol=="function"?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(E,y,A,S){var b=y&&y.prototype instanceof u?y:u,P=Object.create(b.prototype);return Cn(P,"_invoke",(function(B,v,I){var O,z,Z,M=0,V=I||[],Y=!1,te={p:0,n:0,v:t,a:le,f:le.bind(t,4),d:function(Be,tt){return O=Be,z=0,Z=t,te.n=tt,s}};function le(ue,Be){for(z=ue,Z=Be,e=0;!Y&&M&&!tt&&e<V.length;e++){var tt,dt=V[e],_t=te.p,Ut=dt[2];ue>3?(tt=Ut===Be)&&(Z=dt[(z=dt[4])?5:(z=3,3)],dt[4]=dt[5]=t):dt[0]<=_t&&((tt=ue<2&&_t<dt[1])?(z=0,te.v=Be,te.n=dt[1]):_t<Ut&&(tt=ue<3||dt[0]>Be||Be>Ut)&&(dt[4]=ue,dt[5]=Be,te.n=Ut,z=0))}if(tt||ue>1)return s;throw Y=!0,Be}return function(ue,Be,tt){if(M>1)throw TypeError("Generator is already running");for(Y&&Be===1&&le(Be,tt),z=Be,Z=tt;(e=z<2?t:Z)||!Y;){O||(z?z<3?(z>1&&(te.n=-1),le(z,Z)):te.n=Z:te.v=Z);try{if(M=2,O){if(z||(ue="next"),e=O[ue]){if(!(e=e.call(O,Z)))throw TypeError("iterator result is not an object");if(!e.done)return e;Z=e.value,z<2&&(z=0)}else z===1&&(e=O.return)&&e.call(O),z<2&&(Z=TypeError("The iterator does not provide a '"+ue+"' method"),z=1);O=t}else if((e=(Y=te.n<0)?Z:B.call(v,te))!==s)break}catch(dt){O=t,z=1,Z=dt}finally{M=1}}return{value:e,done:Y}}})(E,A,S),!0),P}var s={};function u(){}function a(){}function c(){}e=Object.getPrototypeOf;var d=[][n]?e(e([][n]())):(Cn(e={},n,function(){return this}),e),p=c.prototype=u.prototype=Object.create(d);function m(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,c):(E.__proto__=c,Cn(E,o,"GeneratorFunction")),E.prototype=Object.create(p),E}return a.prototype=c,Cn(p,"constructor",c),Cn(c,"constructor",a),a.displayName="GeneratorFunction",Cn(c,o,"GeneratorFunction"),Cn(p),Cn(p,o,"Generator"),Cn(p,n,function(){return this}),Cn(p,"toString",function(){return"[object Generator]"}),(An=function(){return{w:i,m}})()}function Cn(t,e,r,n){var o=Object.defineProperty;try{o({},"",{})}catch{o=0}Cn=function(s,u,a,c){if(u)o?o(s,u,{value:a,enumerable:!c,configurable:!c,writable:!c}):s[u]=a;else{var d=function(m,E){Cn(s,m,function(y){return this._invoke(m,E,y)})};d("next",0),d("throw",1),d("return",2)}},Cn(t,e,r,n)}function pv(t,e,r,n,o,i,s){try{var u=t[i](s),a=u.value}catch(c){return void r(c)}u.done?e(a):Promise.resolve(a).then(n,o)}function nc(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function s(a){pv(i,n,o,s,u,"next",a)}function u(a){pv(i,n,o,s,u,"throw",a)}s(void 0)})}}var mv=lv.readFile?(0,TV.promisify)(lv.readFile):nc(An().m(function t(){return An().w(function(e){for(;;)switch(e.n){case 0:throw new _1("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return e.a(2)}},t)})),gv="https://oauth2.googleapis.com/token",PV="https://oauth2.googleapis.com/revoke?token=",_1=(function(t){function e(r,n){var o;return Sv(this,e),o=OV(this,e,[r]),yn(o,"code",void 0),o.code=n,o}return IV(e,t),Av(e)})(By(Error)),S1=new WeakMap,ni=new WeakSet,Bpe=qh.GoogleToken=(function(){function t(e){Sv(this,t),bV(this,ni),yn(this,"expiresAt",void 0),yn(this,"key",void 0),yn(this,"keyFile",void 0),yn(this,"iss",void 0),yn(this,"sub",void 0),yn(this,"scope",void 0),yn(this,"rawToken",void 0),yn(this,"tokenExpires",void 0),yn(this,"email",void 0),yn(this,"additionalClaims",void 0),yn(this,"eagerRefreshThresholdMillis",void 0),yn(this,"transporter",{request:function(n){return(0,SV.request)(n)}}),vV(this,S1,void 0),Co(ni,this,wv).call(this,e)}return Av(t,[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var r=new Date().getTime();return this.rawToken&&this.expiresAt?r>=this.expiresAt:!0}},{key:"isTokenExpiring",value:function(){var r,n=new Date().getTime(),o=(r=this.eagerRefreshThresholdMillis)!==null&&r!==void 0?r:0;return this.rawToken&&this.expiresAt?this.expiresAt<=n+o:!0}},{key:"getToken",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Bi(r)==="object"&&(n=r,r=void 0),n=Object.assign({forceRefresh:!1},n),r){var o=r;Co(ni,this,Ev).call(this,n).then(function(i){return o(null,i)},r);return}return Co(ni,this,Ev).call(this,n)}},{key:"getCredentials",value:(function(){var e=nc(An().m(function n(o){var i,s,u,a,c,d,p;return An().w(function(m){for(;;)switch(m.n){case 0:i=wV.extname(o),p=i,m.n=p===".json"?1:p===".der"||p===".crt"||p===".pem"?4:p===".p12"||p===".pfx"?6:7;break;case 1:return m.n=2,mv(o,"utf8");case 2:if(s=m.v,u=JSON.parse(s),a=u.private_key,c=u.client_email,!(!a||!c)){m.n=3;break}throw new _1("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return m.a(2,{privateKey:a,clientEmail:c});case 4:return m.n=5,mv(o,"utf8");case 5:return d=m.v,m.a(2,{privateKey:d});case 6:throw new _1("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new _1("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return m.a(2)}},n)}));function r(n){return e.apply(this,arguments)}return r})()},{key:"revokeToken",value:function(r){if(r){Co(ni,this,yv).call(this).then(function(){return r()},r);return}return Co(ni,this,yv).call(this)}}])})();function Ev(t){return Py.apply(this,arguments)}function Py(){return Py=nc(An().m(function t(e){return An().w(function(r){for(;;)switch(r.n){case 0:if(!(fv(S1,this)&&!e.forceRefresh)){r.n=1;break}return r.a(2,fv(S1,this));case 1:return r.p=1,r.n=2,dv(S1,this,Co(ni,this,FV).call(this,e));case 2:return r.a(2,r.v);case 3:return r.p=3,dv(S1,this,void 0),r.f(3);case 4:return r.a(2)}},t,this,[[1,,3,4]])})),Py.apply(this,arguments)}function FV(t){return Fy.apply(this,arguments)}function Fy(){return Fy=nc(An().m(function t(e){var r;return An().w(function(n){for(;;)switch(n.n){case 0:if(!(this.isTokenExpiring()===!1&&e.forceRefresh===!1)){n.n=1;break}return n.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){n.n=2;break}throw new Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){n.n=4;break}return n.n=3,this.getCredentials(this.keyFile);case 3:r=n.v,this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||Co(ni,this,xV).call(this);case 4:return n.a(2,Co(ni,this,kV).call(this))}},t,this)})),Fy.apply(this,arguments)}function xV(){if(!this.iss)throw new _1("email is required.","MISSING_CREDENTIALS")}function yv(){return xy.apply(this,arguments)}function xy(){return xy=nc(An().m(function t(){var e;return An().w(function(r){for(;;)switch(r.n){case 0:if(this.accessToken){r.n=1;break}throw new Error("No token to revoke.");case 1:return e=PV+this.accessToken,r.n=2,this.transporter.request({url:e,retry:!0});case 2:Co(ni,this,wv).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return r.a(2)}},t,this)})),xy.apply(this,arguments)}function wv(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.keyFile=t.keyFile,this.key=t.key,this.rawToken=void 0,this.iss=t.email||t.iss,this.sub=t.sub,this.additionalClaims=t.additionalClaims,Bi(t.scope)==="object"?this.scope=t.scope.join(" "):this.scope=t.scope,this.eagerRefreshThresholdMillis=t.eagerRefreshThresholdMillis,t.transporter&&(this.transporter=t.transporter)}function kV(){return ky.apply(this,arguments)}function ky(){return ky=nc(An().m(function t(){var e,r,n,o,i,s,u,a,c,d;return An().w(function(p){for(;;)switch(p.n){case 0:return e=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},n=Object.assign({iss:this.iss,scope:this.scope,aud:gv,exp:e+3600,iat:e,sub:this.sub},r),o=_V.sign({header:{alg:"RS256"},payload:n,secret:this.key}),p.p=1,p.n=2,this.transporter.request({method:"POST",url:gv,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:o}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return i=p.v,this.rawToken=i.data,this.expiresAt=i.data.expires_in===null||i.data.expires_in===void 0?void 0:(e+i.data.expires_in)*1e3,p.a(2,this.rawToken);case 3:throw p.p=3,d=p.v,this.rawToken=void 0,this.tokenExpires=void 0,a=d.response&&(s=d.response)!==null&&s!==void 0&&s.data?(u=d.response)===null||u===void 0?void 0:u.data:{},a.error&&(c=a.error_description?": ".concat(a.error_description):"",d.message="".concat(a.error).concat(c)),d;case 4:return p.a(2)}},t,this,[[1,3]])})),ky.apply(this,arguments)}});var qy=R(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.JWTAccess=void 0;var LV=Ny(),UV=go(),bv={alg:"RS256",typ:"JWT"},Uy=class t{email;key;keyId;projectId;eagerRefreshThresholdMillis;cache=new UV.LRUCache({capacity:500,maxAge:3600*1e3});constructor(e,r,n,o){this.email=e,this.key=r,this.keyId=n,this.eagerRefreshThresholdMillis=o??300*1e3}getCachedKey(e,r){let n=e;if(r&&Array.isArray(r)&&r.length?n=e?`${e}_${r.join("_")}`:`${r.join("_")}`:typeof r=="string"&&(n=e?`${e}_${r}`:r),!n)throw Error("Scopes or url must be provided");return n}getRequestHeaders(e,r,n){let o=this.getCachedKey(e,n),i=this.cache.get(o),s=Date.now();if(i&&i.expiration-s>this.eagerRefreshThresholdMillis)return new Headers(i.headers);let u=Math.floor(Date.now()/1e3),a=t.getExpirationTime(u),c;if(Array.isArray(n)&&(n=n.join(" ")),n?c={iss:this.email,sub:this.email,scope:n,exp:a,iat:u}:c={iss:this.email,sub:this.email,aud:e,exp:a,iat:u},r){for(let y in c)if(r[y])throw new Error(`The '${y}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let d=this.keyId?{...bv,kid:this.keyId}:bv,p=Object.assign(c,r),m=LV.sign({header:d,payload:p,secret:this.key}),E=new Headers({authorization:`Bearer ${m}`});return this.cache.set(o,{expiration:a*1e3,headers:E}),E}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{e||n(new Error("Must pass in a stream containing the service account auth settings."));let o="";e.setEncoding("utf8").on("data",i=>o+=i).on("error",n).on("end",()=>{try{let i=JSON.parse(o);this.fromJSON(i),r()}catch(i){n(i)}})})}};Gh.JWTAccess=Uy});var Vy=R($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});$h.JWT=void 0;var vv=Tv(),qV=qy(),GV=Iu(),Vh=En(),Gy=class t extends GV.OAuth2Client{email;keyFile;key;keyId;defaultScopes;scopes;scope;subject;gtoken;additionalClaims;useJWTAccessWithScope;defaultServicePath;access;constructor(e={}){super(e),this.email=e.email,this.keyFile=e.keyFile,this.key=e.key,this.keyId=e.keyId,this.scopes=e.scopes,this.subject=e.subject,this.additionalClaims=e.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(e){let r=new t(this);return r.scopes=e,r}async getRequestMetadataAsync(e){e=this.defaultServicePath?`https://${this.defaultServicePath}/`:e;let r=!this.hasUserScopes()&&e||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==Vh.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==Vh.DEFAULT_UNIVERSE)throw new RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${Vh.DEFAULT_UNIVERSE}`);if(!this.apiKey&&r)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:n}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${n.id_token}`}))}}else{this.access||(this.access=new qV.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let n;this.hasUserScopes()?n=this.scopes:e||(n=this.defaultScopes);let o=this.useJWTAccessWithScope||this.universeDomain!==Vh.DEFAULT_UNIVERSE,i=await this.access.getRequestHeaders(e??void 0,this.additionalClaims,o?n:void 0);return{headers:this.addSharedMetadataHeaders(i)}}else return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(e):{headers:new Headers}}async fetchIdToken(e){let r=new vv.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:e},transporter:this.transporter});if(await r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(e){if(e)this.authorizeAsync().then(r=>e(null,r),e);else return this.authorizeAsync()}async authorizeAsync(){let e=await this.refreshToken();if(!e)throw new Error("No result returned");return this.credentials=e.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,e.tokens}async refreshTokenNoCache(){let e=this.createGToken(),n={access_token:(await e.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:e.expiresAt,id_token:e.idToken};return this.emit("tokens",n),{res:null,tokens:n}}createGToken(){return this.gtoken||(this.gtoken=new vv.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id,this.quotaProjectId=e.quota_project_id,this.universeDomain=e.universe_domain||this.universeDomain}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{if(!e)throw new Error("Must pass in a stream containing the service account auth settings.");let o="";e.setEncoding("utf8").on("error",n).on("data",i=>o+=i).on("end",()=>{try{let i=JSON.parse(o);this.fromJSON(i),r()}catch(i){n(i)}})})}fromAPIKey(e){if(typeof e!="string")throw new Error("Must provide an API Key string.");this.apiKey=e}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let r=await this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")}};$h.JWT=Gy});var Hy=R(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.UserRefreshClient=oc.USER_REFRESH_ACCOUNT_TYPE=void 0;var VV=Iu(),$V=En();oc.USER_REFRESH_ACCOUNT_TYPE="authorized_user";var $y=class t extends VV.OAuth2Client{_refreshToken;constructor(e,r,n,o,i){let s=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,refreshToken:n,eagerRefreshThresholdMillis:o,forceRefreshOnFailure:i};super(s),this._refreshToken=s.refreshToken,this.credentials.refresh_token=s.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(e){let r={...t.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:e})};return $V.AuthClient.setMethodName(r,"fetchIdToken"),(await this.transporter.request(r)).data.id_token}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the user refresh token");if(e.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!e.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!e.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!e.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=e.client_id,this._clientSecret=e.client_secret,this._refreshToken=e.refresh_token,this.credentials.refresh_token=e.refresh_token,this.quotaProjectId=e.quota_project_id,this.universeDomain=e.universe_domain||this.universeDomain}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}async fromStreamAsync(e){return new Promise((r,n)=>{if(!e)return n(new Error("Must pass in a stream containing the user refresh token."));let o="";e.setEncoding("utf8").on("error",n).on("data",i=>o+=i).on("end",()=>{try{let i=JSON.parse(o);return this.fromJSON(i),r()}catch(i){return n(i)}})})}static fromJSON(e){let r=new t;return r.fromJSON(e),r}};oc.UserRefreshClient=$y});var zy=R(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.Impersonated=ic.IMPERSONATED_ACCOUNT_TYPE=void 0;var Ov=Iu(),HV=ir(),WV=go();ic.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";var Wy=class t extends Ov.OAuth2Client{sourceClient;targetPrincipal;targetScopes;delegates;lifetime;endpoint;constructor(e={}){if(super(e),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=e.sourceClient??new Ov.OAuth2Client,this.targetPrincipal=e.targetPrincipal??"",this.delegates=e.delegates??[],this.targetScopes=e.targetScopes??[],this.lifetime=e.lifetime??3600,!!!(0,WV.originalOrCamelOptions)(e).get("universe_domain"))this.universeDomain=this.sourceClient.universeDomain;else if(this.sourceClient.universeDomain!==this.universeDomain)throw new RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`);this.endpoint=e.endpoint??`https://iamcredentials.${this.universeDomain}`}async sign(e){await this.sourceClient.getAccessToken();let r=`projects/-/serviceAccounts/${this.targetPrincipal}`,n=`${this.endpoint}/v1/${r}:signBlob`,o={delegates:this.delegates,payload:Buffer.from(e).toString("base64")};return(await this.sourceClient.request({...t.RETRY_CONFIG,url:n,data:o,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){try{await this.sourceClient.getAccessToken();let e="projects/-/serviceAccounts/"+this.targetPrincipal,r=`${this.endpoint}/v1/${e}:generateAccessToken`,n={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},o=await this.sourceClient.request({...t.RETRY_CONFIG,url:r,data:n,method:"POST"}),i=o.data;return this.credentials.access_token=i.accessToken,this.credentials.expiry_date=Date.parse(i.expireTime),{tokens:this.credentials,res:o}}catch(e){if(!(e instanceof Error))throw e;let r=0,n="";throw e instanceof HV.GaxiosError&&(r=e?.response?.data?.error?.status,n=e?.response?.data?.error?.message),r&&n?(e.message=`${r}: unable to impersonate: ${n}`,e):(e.message=`unable to impersonate: ${e}`,e)}}async fetchIdToken(e,r){await this.sourceClient.getAccessToken();let n=`projects/-/serviceAccounts/${this.targetPrincipal}`,o=`${this.endpoint}/v1/${n}:generateIdToken`,i={delegates:this.delegates,audience:e,includeEmail:r?.includeEmail??!0,useEmailAzp:r?.includeEmail??!0};return(await this.sourceClient.request({...t.RETRY_CONFIG,url:o,data:i,method:"POST"})).data.token}};ic.Impersonated=Wy});var Ky=R(b1=>{"use strict";Object.defineProperty(b1,"__esModule",{value:!0});b1.OAuthClientAuthHandler=void 0;b1.getErrorFromOAuthErrorResponse=KV;var sc=ir(),zV=m1(),jV=["PUT","POST","PATCH"],jy=class{#e=(0,zV.createCrypto)();#t;transporter;constructor(e){e&&"clientId"in e?(this.#t=e,this.transporter=new sc.Gaxios):(this.#t=e?.clientAuthentication,this.transporter=e?.transporter||new sc.Gaxios)}applyClientAuthenticationOptions(e,r){e.headers=sc.Gaxios.mergeHeaders(e.headers),this.injectAuthenticatedHeaders(e,r),r||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,r){if(r)e.headers=sc.Gaxios.mergeHeaders(e.headers,{authorization:`Bearer ${r}`});else if(this.#t?.confidentialClientType==="basic"){e.headers=sc.Gaxios.mergeHeaders(e.headers);let n=this.#t.clientId,o=this.#t.clientSecret||"",i=this.#e.encodeBase64StringUtf8(`${n}:${o}`);sc.Gaxios.mergeHeaders(e.headers,{authorization:`Basic ${i}`})}}injectAuthenticatedRequestBody(e){if(this.#t?.confidentialClientType==="request-body"){let r=(e.method||"GET").toUpperCase();if(!jV.includes(r))throw new Error(`${r} HTTP method does not support ${this.#t.confidentialClientType} client authentication`);let o=new Headers(e.headers).get("content-type");if(o?.startsWith("application/x-www-form-urlencoded")||e.data instanceof URLSearchParams){let i=new URLSearchParams(e.data??"");i.append("client_id",this.#t.clientId),i.append("client_secret",this.#t.clientSecret||""),e.data=i}else if(o?.startsWith("application/json"))e.data=e.data||{},Object.assign(e.data,{client_id:this.#t.clientId,client_secret:this.#t.clientSecret||""});else throw new Error(`${o} content-types are not supported with ${this.#t.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}};b1.OAuthClientAuthHandler=jy;function KV(t,e){let r=t.error,n=t.error_description,o=t.error_uri,i=`Error code ${r}`;typeof n<"u"&&(i+=`: ${n}`),typeof o<"u"&&(i+=` - ${o}`);let s=new Error(i);if(e){let u=Object.keys(e);e.stack&&u.push("stack"),u.forEach(a=>{a!=="message"&&Object.defineProperty(s,a,{value:e[a],writable:!1,enumerable:!0})})}return s}});var Wh=R(Hh=>{"use strict";Object.defineProperty(Hh,"__esModule",{value:!0});Hh.StsCredentials=void 0;var YV=ir(),JV=En(),Rv=Ky(),XV=go(),Yy=class t extends Rv.OAuthClientAuthHandler{#e;constructor(e={tokenExchangeEndpoint:""},r){(typeof e!="object"||e instanceof URL)&&(e={tokenExchangeEndpoint:e,clientAuthentication:r}),super(e),this.#e=e.tokenExchangeEndpoint}async exchangeToken(e,r,n){let o={grant_type:e.grantType,resource:e.resource,audience:e.audience,scope:e.scope?.join(" "),requested_token_type:e.requestedTokenType,subject_token:e.subjectToken,subject_token_type:e.subjectTokenType,actor_token:e.actingParty?.actorToken,actor_token_type:e.actingParty?.actorTokenType,options:n&&JSON.stringify(n)},i={...t.RETRY_CONFIG,url:this.#e.toString(),method:"POST",headers:r,data:new URLSearchParams((0,XV.removeUndefinedValuesInObject)(o))};JV.AuthClient.setMethodName(i,"exchangeToken"),this.applyClientAuthenticationOptions(i);try{let s=await this.transporter.request(i),u=s.data;return u.res=s,u}catch(s){throw s instanceof YV.GaxiosError&&s.response?(0,Rv.getErrorFromOAuthErrorResponse)(s.response.data,s):s}}};Hh.StsCredentials=Yy});var bs=R(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.BaseExternalAccountClient=Vn.CLOUD_RESOURCE_MANAGER=Vn.EXTERNAL_ACCOUNT_TYPE=Vn.EXPIRATION_TIME_OFFSET=void 0;var QV=ir(),ZV=require("stream"),Jy=En(),e$=Wh(),Dv=go(),t$=dy(),r$="urn:ietf:params:oauth:grant-type:token-exchange",n$="urn:ietf:params:oauth:token-type:access_token",Xy="https://www.googleapis.com/auth/cloud-platform",o$=3600;Vn.EXPIRATION_TIME_OFFSET=300*1e3;Vn.EXTERNAL_ACCOUNT_TYPE="external_account";Vn.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var i$="//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",s$="https://sts.{universeDomain}/v1/token",Qy=class t extends Jy.AuthClient{scopes;projectNumber;audience;subjectTokenType;stsCredential;clientAuth;credentialSourceType;cachedAccessToken;serviceAccountImpersonationUrl;serviceAccountImpersonationLifetime;workforcePoolUserProject;configLifetimeRequested;tokenUrl;cloudResourceManagerURL;supplierContext;#e=null;constructor(e){super(e);let r=(0,Dv.originalOrCamelOptions)(e),n=r.get("type");if(n&&n!==Vn.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${Vn.EXTERNAL_ACCOUNT_TYPE}" type but received "${e.type}"`);let o=r.get("client_id"),i=r.get("client_secret");this.tokenUrl=r.get("token_url")??s$.replace("{universeDomain}",this.universeDomain);let s=r.get("subject_token_type"),u=r.get("workforce_pool_user_project"),a=r.get("service_account_impersonation_url"),c=r.get("service_account_impersonation"),d=(0,Dv.originalOrCamelOptions)(c).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(r.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),o&&(this.clientAuth={confidentialClientType:"basic",clientId:o,clientSecret:i}),this.stsCredential=new e$.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=r.get("scopes")||[Xy],this.cachedAccessToken=null,this.audience=r.get("audience"),this.subjectTokenType=s,this.workforcePoolUserProject=u;let p=new RegExp(i$);if(this.workforcePoolUserProject&&!this.audience.match(p))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=a,this.serviceAccountImpersonationLifetime=d,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=o$),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw new RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);return/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl)?.groups?.email||null}return null}setCredentials(e){super.setCredentials(e),this.cachedAccessToken=e}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async getProjectId(){let e=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(e){let r=await this.getRequestHeaders(),n={...t.RETRY_CONFIG,headers:r,url:`${this.cloudResourceManagerURL.toString()}${e}`};Jy.AuthClient.setMethodName(n,"getProjectId");let o=await this.transporter.request(n);return this.projectId=o.data.projectId,this.projectId}return null}async requestAsync(e,r=!1){let n;try{let o=await this.getRequestHeaders();e.headers=QV.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,o),n=await this.transporter.request(e)}catch(o){let i=o.response;if(i){let s=i.status,u=i.config.data instanceof ZV.Readable;if(!r&&(s===401||s===403)&&!u&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw o}return n}async refreshAccessTokenAsync(){this.#e=this.#e||this.#t();try{return await this.#e}finally{this.#e=null}}async#t(){let e=await this.retrieveSubjectToken(),r={grantType:r$,audience:this.audience,requestedTokenType:n$,subjectToken:e,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[Xy]:this.getScopesArray()},n=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,o=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),i=await this.stsCredential.exchangeToken(r,o,n);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(i.access_token):i.expires_in?this.cachedAccessToken={access_token:i.access_token,expiry_date:new Date().getTime()+i.expires_in*1e3,res:i.res}:this.cachedAccessToken={access_token:i.access_token,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber(e){let r=e.match(/\/projects\/([^/]+)/);return r?r[1]:null}async getImpersonatedAccessToken(e){let r={...t.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${e}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};Jy.AuthClient.setMethodName(r,"getImpersonatedAccessToken");let n=await this.transporter.request(r),o=n.data;return{access_token:o.accessToken,expiry_date:new Date(o.expireTime).getTime(),res:n}}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:this.scopes||[Xy]}getMetricsHeaderValue(){let e=process.version.replace(/^v/,""),r=this.serviceAccountImpersonationUrl!==void 0,n=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${e} auth/${t$.pkg.version} google-byoid-sdk source/${n} sa-impersonation/${r} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}};Vn.BaseExternalAccountClient=Qy});var Iv=R(zh=>{"use strict";Object.defineProperty(zh,"__esModule",{value:!0});zh.FileSubjectTokenSupplier=void 0;var eC=require("util"),tC=require("fs"),u$=(0,eC.promisify)(tC.readFile??(()=>{})),a$=(0,eC.promisify)(tC.realpath??(()=>{})),c$=(0,eC.promisify)(tC.lstat??(()=>{})),Zy=class{filePath;formatType;subjectTokenFieldName;constructor(e){this.filePath=e.filePath,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName}async getSubjectToken(){let e=this.filePath;try{if(e=await a$(e),!(await c$(e)).isFile())throw new Error}catch(o){throw o instanceof Error&&(o.message=`The file at ${e} does not exist, or it is not a file. ${o.message}`),o}let r,n=await u$(e,{encoding:"utf8"});if(this.formatType==="text"?r=n:this.formatType==="json"&&this.subjectTokenFieldName&&(r=JSON.parse(n)[this.subjectTokenFieldName]),!r)throw new Error("Unable to parse the subject_token from the credential_source file");return r}};zh.FileSubjectTokenSupplier=Zy});var Mv=R(jh=>{"use strict";Object.defineProperty(jh,"__esModule",{value:!0});jh.UrlSubjectTokenSupplier=void 0;var l$=En(),rC=class{url;headers;formatType;subjectTokenFieldName;additionalGaxiosOptions;constructor(e){this.url=e.url,this.formatType=e.formatType,this.subjectTokenFieldName=e.subjectTokenFieldName,this.headers=e.headers,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getSubjectToken(e){let r={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};l$.AuthClient.setMethodName(r,"getSubjectToken");let n;if(this.formatType==="text"?n=(await e.transporter.request(r)).data:this.formatType==="json"&&this.subjectTokenFieldName&&(n=(await e.transporter.request(r)).data[this.subjectTokenFieldName]),!n)throw new Error("Unable to parse the subject_token from the credential_source URL");return n}};jh.UrlSubjectTokenSupplier=rC});var Nv=R(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.CertificateSubjectTokenSupplier=Sn.InvalidConfigurationError=Sn.CertificateSourceUnavailableError=Sn.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;var Kh=go(),Yh=require("fs"),Jh=require("crypto"),d$=require("https");Sn.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";var oi=class extends Error{constructor(e){super(e),this.name="CertificateSourceUnavailableError"}};Sn.CertificateSourceUnavailableError=oi;var $n=class extends Error{constructor(e){super(e),this.name="InvalidConfigurationError"}};Sn.InvalidConfigurationError=$n;var nC=class{certificateConfigPath;trustChainPath;cert;key;constructor(e){if(!e.useDefaultCertificateConfig&&!e.certificateConfigLocation)throw new $n("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if(e.useDefaultCertificateConfig&&e.certificateConfigLocation)throw new $n("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=e.trustChainPath,this.certificateConfigPath=e.certificateConfigLocation??""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new $n("Cannot create mTLS Agent with missing certificate or key");return new d$.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await this.#e();let{certPath:e,keyPath:r}=await this.#t();return{cert:this.cert,key:this.key}=await this.#r(e,r),await this.#n(this.cert)}async#e(){let e=this.certificateConfigPath;if(e){if(await(0,Kh.isValidFile)(e))return e;throw new oi(`Provided certificate config path is invalid: ${e}`)}let r=process.env[Sn.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(r){if(await(0,Kh.isValidFile)(r))return r;throw new oi(`Path from environment variable "${Sn.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${r}`)}let n=(0,Kh.getWellKnownCertificateConfigFileLocation)();if(await(0,Kh.isValidFile)(n))return n;throw new oi(`Could not find certificate configuration file. Searched override path, the "${Sn.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${n}).`)}async#t(){let e=this.certificateConfigPath,r;try{r=await Yh.promises.readFile(e,"utf8")}catch{throw new oi(`Failed to read certificate config file at: ${e}`)}try{let n=JSON.parse(r),o=n?.cert_configs?.workload?.cert_path,i=n?.cert_configs?.workload?.key_path;if(!o||!i)throw new $n(`Certificate config file (${e}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:o,keyPath:i}}catch(n){throw n instanceof $n?n:new $n(`Failed to parse certificate config from ${e}: ${n.message}`)}}async#r(e,r){let n,o;try{n=await Yh.promises.readFile(e),new Jh.X509Certificate(n)}catch(i){let s=i instanceof Error?i.message:String(i);throw new oi(`Failed to read certificate file at ${e}: ${s}`)}try{o=await Yh.promises.readFile(r),(0,Jh.createPrivateKey)(o)}catch(i){let s=i instanceof Error?i.message:String(i);throw new oi(`Failed to read private key file at ${r}: ${s}`)}return{cert:n,key:o}}async#n(e){let r=new Jh.X509Certificate(e);if(!this.trustChainPath)return JSON.stringify([r.raw.toString("base64")]);try{let i=((await Yh.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g)??[]).map((a,c)=>{try{return new Jh.X509Certificate(a)}catch(d){let p=d instanceof Error?d.message:String(d);throw new $n(`Failed to parse certificate at index ${c} in trust chain file ${this.trustChainPath}: ${p}`)}}),s=i.findIndex(a=>r.raw.equals(a.raw)),u;if(s===-1)u=[r,...i];else if(s===0)u=i;else throw new $n(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${s}).`);return JSON.stringify(u.map(a=>a.raw.toString("base64")))}catch(n){if(n instanceof $n)throw n;let o=n instanceof Error?n.message:String(n);throw new oi(`Failed to process certificate chain from ${this.trustChainPath}: ${o}`)}}};Sn.CertificateSubjectTokenSupplier=nC});var sC=R(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});Xh.IdentityPoolClient=void 0;var f$=bs(),oC=go(),h$=Iv(),p$=Mv(),Bv=Nv(),m$=Wh(),Pv=ir(),iC=class t extends f$.BaseExternalAccountClient{subjectTokenSupplier;constructor(e){super(e);let r=(0,oC.originalOrCamelOptions)(e),n=r.get("credential_source"),o=r.get("subject_token_supplier");if(!n&&!o)throw new Error("A credential source or subject token supplier must be specified.");if(n&&o)throw new Error("Only one of credential source or subject token supplier can be specified.");if(o)this.subjectTokenSupplier=o,this.credentialSourceType="programmatic";else{let i=(0,oC.originalOrCamelOptions)(n),s=(0,oC.originalOrCamelOptions)(i.get("format")),u=s.get("type")||"text",a=s.get("subject_token_field_name");if(u!=="json"&&u!=="text")throw new Error(`Invalid credential_source format "${u}"`);if(u==="json"&&!a)throw new Error("Missing subject_token_field_name for JSON credential_source format");let c=i.get("file"),d=i.get("url"),p=i.get("certificate"),m=i.get("headers");if(c&&d||d&&p||c&&p)throw new Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');if(c)this.credentialSourceType="file",this.subjectTokenSupplier=new h$.FileSubjectTokenSupplier({filePath:c,formatType:u,subjectTokenFieldName:a});else if(d)this.credentialSourceType="url",this.subjectTokenSupplier=new p$.UrlSubjectTokenSupplier({url:d,formatType:u,subjectTokenFieldName:a,headers:m,additionalGaxiosOptions:t.RETRY_CONFIG});else if(p){this.credentialSourceType="certificate";let E=new Bv.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:p.use_default_certificate_config,certificateConfigLocation:p.certificate_config_location,trustChainPath:p.trust_chain_path});this.subjectTokenSupplier=E}else throw new Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let e=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof Bv.CertificateSubjectTokenSupplier){let r=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new m$.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new Pv.Gaxios({agent:r})}),this.transporter=new Pv.Gaxios({...this.transporter.defaults||{},agent:r})}return e}};Xh.IdentityPoolClient=iC});var aC=R(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});Zh.AwsRequestSigner=void 0;var Qh=ir(),xv=m1(),Fv="AWS4-HMAC-SHA256",g$="aws4_request",uC=class{getCredentials;region;crypto;constructor(e,r){this.getCredentials=e,this.region=r,this.crypto=(0,xv.createCrypto)()}async getRequestOptions(e){if(!e.url)throw new RangeError('"url" is required in "amzOptions"');let r=typeof e.data=="object"?JSON.stringify(e.data):e.data,n=e.url,o=e.method||"GET",i=e.body||r,s=e.headers,u=await this.getCredentials(),a=new URL(n);if(typeof i!="string"&&i!==void 0)throw new TypeError(`'requestPayload' is expected to be a string if provided. Got: ${i}`);let c=await y$({crypto:this.crypto,host:a.host,canonicalUri:a.pathname,canonicalQuerystring:a.search.slice(1),method:o,region:this.region,securityCredentials:u,requestPayload:i,additionalAmzHeaders:s}),d=Qh.Gaxios.mergeHeaders(c.amzDate?{"x-amz-date":c.amzDate}:{},{authorization:c.authorizationHeader,host:a.host},s||{});u.token&&Qh.Gaxios.mergeHeaders(d,{"x-amz-security-token":u.token});let p={url:n,method:o,headers:d};return i!==void 0&&(p.body=i),p}};Zh.AwsRequestSigner=uC;async function v1(t,e,r){return await t.signWithHmacSha256(e,r)}async function E$(t,e,r,n,o){let i=await v1(t,`AWS4${e}`,r),s=await v1(t,i,n),u=await v1(t,s,o);return await v1(t,u,"aws4_request")}async function y$(t){let e=Qh.Gaxios.mergeHeaders(t.additionalAmzHeaders),r=t.requestPayload||"",n=t.host.split(".")[0],o=new Date,i=o.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),s=o.toISOString().replace(/[-]/g,"").replace(/T.*/,"");t.securityCredentials.token&&e.set("x-amz-security-token",t.securityCredentials.token);let u=Qh.Gaxios.mergeHeaders({host:t.host},e.has("date")?{}:{"x-amz-date":i},e),a="",c=[...u.keys()].sort();c.forEach(P=>{a+=`${P}:${u.get(P)}
`});let d=c.join(";"),p=await t.crypto.sha256DigestHex(r),m=`${t.method.toUpperCase()}
${t.canonicalUri}
${t.canonicalQuerystring}
${a}
${d}
${p}`,E=`${s}/${t.region}/${n}/${g$}`,y=`${Fv}
${i}
${E}
`+await t.crypto.sha256DigestHex(m),A=await E$(t.crypto,t.securityCredentials.secretAccessKey,s,t.region,n),S=await v1(t.crypto,A,y),b=`${Fv} Credential=${t.securityCredentials.accessKeyId}/${E}, SignedHeaders=${d}, Signature=${(0,xv.fromArrayBufferToHex)(S)}`;return{amzDate:e.has("date")?void 0:i,authorizationHeader:b,canonicalQuerystring:t.canonicalQuerystring}}});var kv=R(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.DefaultAwsSecurityCredentialsSupplier=void 0;var ep=En(),cC=class{regionUrl;securityCredentialsUrl;imdsV2SessionTokenUrl;additionalGaxiosOptions;constructor(e){this.regionUrl=e.regionUrl,this.securityCredentialsUrl=e.securityCredentialsUrl,this.imdsV2SessionTokenUrl=e.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=e.additionalGaxiosOptions}async getAwsRegion(e){if(this.#n)return this.#n;let r=new Headers;if(!this.#n&&this.imdsV2SessionTokenUrl&&r.set("x-aws-ec2-metadata-token",await this.#e(e.transporter)),!this.regionUrl)throw new RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let n={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:r};ep.AuthClient.setMethodName(n,"getAwsRegion");let o=await e.transporter.request(n);return o.data.substr(0,o.data.length-1)}async getAwsSecurityCredentials(e){if(this.#o)return this.#o;let r=new Headers;this.imdsV2SessionTokenUrl&&r.set("x-aws-ec2-metadata-token",await this.#e(e.transporter));let n=await this.#t(r,e.transporter),o=await this.#r(n,r,e.transporter);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,token:o.Token}}async#e(e){let r={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return ep.AuthClient.setMethodName(r,"#getImdsV2SessionToken"),(await e.request(r)).data}async#t(e,r){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let n={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:e};return ep.AuthClient.setMethodName(n,"#getAwsRoleName"),(await r.request(n)).data}async#r(e,r,n){let o={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${e}`,headers:r};return ep.AuthClient.setMethodName(o,"#retrieveAwsSecurityCredentials"),(await n.request(o)).data}get#n(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get#o(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null}};tp.DefaultAwsSecurityCredentialsSupplier=cC});var dC=R(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.AwsClient=void 0;var C$=aC(),A$=bs(),S$=kv(),Lv=go(),_$=ir(),lC=class t extends A$.BaseExternalAccountClient{environmentId;awsSecurityCredentialsSupplier;regionalCredVerificationUrl;awsRequestSigner;region;static#e="https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15";static AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";static AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";constructor(e){super(e);let r=(0,Lv.originalOrCamelOptions)(e),n=r.get("credential_source"),o=r.get("aws_security_credentials_supplier");if(!n&&!o)throw new Error("A credential source or AWS security credentials supplier must be specified.");if(n&&o)throw new Error("Only one of credential source or AWS security credentials supplier can be specified.");if(o)this.awsSecurityCredentialsSupplier=o,this.regionalCredVerificationUrl=t.#e,this.credentialSourceType="programmatic";else{let i=(0,Lv.originalOrCamelOptions)(n);this.environmentId=i.get("environment_id");let s=i.get("region_url"),u=i.get("url"),a=i.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new S$.DefaultAwsSecurityCredentialsSupplier({regionUrl:s,securityCredentialsUrl:u,imdsV2SessionTokenUrl:a}),this.regionalCredVerificationUrl=i.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){let e=this.environmentId?.match(/^(aws)(\d+)$/);if(!e||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(e[2],10)!==1)throw new Error(`aws version "${e[2]}" is not supported in the current build.`)}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new C$.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));let e=await this.awsRequestSigner.getRequestOptions({...t.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[];return _$.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},e.headers).forEach((o,i)=>r.push({key:i,value:o})),encodeURIComponent(JSON.stringify({url:e.url,method:e.method,headers:r}))}};rp.AwsClient=lC});var gC=R(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.InvalidSubjectTokenError=Ft.InvalidMessageFieldError=Ft.InvalidCodeFieldError=Ft.InvalidTokenTypeFieldError=Ft.InvalidExpirationTimeFieldError=Ft.InvalidSuccessFieldError=Ft.InvalidVersionFieldError=Ft.ExecutableResponseError=Ft.ExecutableResponse=void 0;var np="urn:ietf:params:oauth:token-type:saml2",fC="urn:ietf:params:oauth:token-type:id_token",hC="urn:ietf:params:oauth:token-type:jwt",pC=class{version;success;expirationTime;tokenType;errorCode;errorMessage;subjectToken;constructor(e){if(!e.version)throw new op("Executable response must contain a 'version' field.");if(e.success===void 0)throw new ip("Executable response must contain a 'success' field.");if(this.version=e.version,this.success=e.success,this.success){if(this.expirationTime=e.expiration_time,this.tokenType=e.token_type,this.tokenType!==np&&this.tokenType!==fC&&this.tokenType!==hC)throw new sp(`Executable response must contain a 'token_type' field when successful and it must be one of ${fC}, ${hC}, or ${np}.`);if(this.tokenType===np){if(!e.saml_response)throw new O1(`Executable response must contain a 'saml_response' field when token_type=${np}.`);this.subjectToken=e.saml_response}else{if(!e.id_token)throw new O1(`Executable response must contain a 'id_token' field when token_type=${fC} or ${hC}.`);this.subjectToken=e.id_token}}else{if(!e.code)throw new up("Executable response must contain a 'code' field when unsuccessful.");if(!e.message)throw new ap("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=e.code,this.errorMessage=e.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return this.expirationTime!==void 0&&this.expirationTime<Math.round(Date.now()/1e3)}};Ft.ExecutableResponse=pC;var ii=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}};Ft.ExecutableResponseError=ii;var op=class extends ii{};Ft.InvalidVersionFieldError=op;var ip=class extends ii{};Ft.InvalidSuccessFieldError=ip;var mC=class extends ii{};Ft.InvalidExpirationTimeFieldError=mC;var sp=class extends ii{};Ft.InvalidTokenTypeFieldError=sp;var up=class extends ii{};Ft.InvalidCodeFieldError=up;var ap=class extends ii{};Ft.InvalidMessageFieldError=ap;var O1=class extends ii{};Ft.InvalidSubjectTokenError=O1});var CC=R(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.PluggableAuthHandler=uc.ExecutableError=void 0;var Mu=gC(),w$=require("child_process"),EC=require("fs"),cp=class extends Error{code;constructor(e,r){super(`The executable failed with exit code: ${r} and error message: ${e}.`),this.code=r,Object.setPrototypeOf(this,new.target.prototype)}};uc.ExecutableError=cp;var yC=class t{commandComponents;timeoutMillis;outputFile;constructor(e){if(!e.command)throw new Error("No command provided.");if(this.commandComponents=t.parseCommand(e.command),this.timeoutMillis=e.timeoutMillis,!this.timeoutMillis)throw new Error("No timeoutMillis provided.");this.outputFile=e.outputFile}retrieveResponseFromExecutable(e){return new Promise((r,n)=>{let o=w$.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(e)}}),i="";o.stdout.on("data",u=>{i+=u}),o.stderr.on("data",u=>{i+=u});let s=setTimeout(()=>(o.removeAllListeners(),o.kill(),n(new Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);o.on("close",u=>{if(clearTimeout(s),u===0)try{let a=JSON.parse(i),c=new Mu.ExecutableResponse(a);return r(c)}catch(a){return a instanceof Mu.ExecutableResponseError?n(a):n(new Mu.ExecutableResponseError(`The executable returned an invalid response: ${i}`))}else return n(new cp(i,u.toString()))})})}async retrieveCachedResponse(){if(!this.outputFile||this.outputFile.length===0)return;let e;try{e=await EC.promises.realpath(this.outputFile)}catch{return}if(!(await EC.promises.lstat(e)).isFile())return;let r=await EC.promises.readFile(e,{encoding:"utf8"});if(r!=="")try{let n=JSON.parse(r);return new Mu.ExecutableResponse(n).isValid()?new Mu.ExecutableResponse(n):void 0}catch(n){throw n instanceof Mu.ExecutableResponseError?n:new Mu.ExecutableResponseError(`The output file contained an invalid response: ${r}`)}}static parseCommand(e){let r=e.match(/(?:[^\s"]+|"[^"]*")+/g);if(!r)throw new Error(`Provided command: "${e}" could not be parsed.`);for(let n=0;n<r.length;n++)r[n][0]==='"'&&r[n].slice(-1)==='"'&&(r[n]=r[n].slice(1,-1));return r}};uc.PluggableAuthHandler=yC});var SC=R(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.PluggableAuthClient=ac.ExecutableError=void 0;var T$=bs(),b$=gC(),Uv=CC(),v$=CC();Object.defineProperty(ac,"ExecutableError",{enumerable:!0,get:function(){return v$.ExecutableError}});var O$=30*1e3,qv=5*1e3,Gv=120*1e3,R$="GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES",Vv=1,AC=class extends T$.BaseExternalAccountClient{command;timeoutMillis;outputFile;handler;constructor(e){if(super(e),!e.credential_source.executable)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(this.command=e.credential_source.executable.command,!this.command)throw new Error('No valid Pluggable Auth "credential_source" provided.');if(e.credential_source.executable.timeout_millis===void 0)this.timeoutMillis=O$;else if(this.timeoutMillis=e.credential_source.executable.timeout_millis,this.timeoutMillis<qv||this.timeoutMillis>Gv)throw new Error(`Timeout must be between ${qv} and ${Gv} milliseconds.`);this.outputFile=e.credential_source.executable.output_file,this.handler=new Uv.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){if(process.env[R$]!=="1")throw new Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");let e;if(this.outputFile&&(e=await this.handler.retrieveCachedResponse()),!e){let r=new Map;r.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),r.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),r.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&r.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let n=this.getServiceAccountEmail();n&&r.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",n),e=await this.handler.retrieveResponseFromExecutable(r)}if(e.version>Vv)throw new Error(`Version of executable is not currently supported, maximum supported version is ${Vv}.`);if(!e.success)throw new Uv.ExecutableError(e.errorMessage,e.errorCode);if(this.outputFile&&!e.expirationTime)throw new b$.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(e.isExpired())throw new Error("Executable response is expired.");return e.subjectToken}};ac.PluggableAuthClient=AC});var wC=R(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.ExternalAccountClient=void 0;var D$=bs(),I$=sC(),M$=dC(),N$=SC(),_C=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(e){return e&&e.type===D$.EXTERNAL_ACCOUNT_TYPE?e.credential_source?.environment_id?new M$.AwsClient(e):e.credential_source?.executable?new N$.PluggableAuthClient(e):new I$.IdentityPoolClient(e):null}};lp.ExternalAccountClient=_C});var vC=R(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.ExternalAccountAuthorizedUserClient=cc.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;var Hv=En(),$v=Ky(),Wv=ir(),B$=require("stream"),P$=bs();cc.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";var F$="https://sts.{universeDomain}/v1/oauthtoken",TC=class t extends $v.OAuthClientAuthHandler{#e;constructor(e){super(e),this.#e=e.tokenRefreshEndpoint}async refreshToken(e,r){let n={...t.RETRY_CONFIG,url:this.#e,method:"POST",headers:r,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})};Hv.AuthClient.setMethodName(n,"refreshToken"),this.applyClientAuthenticationOptions(n);try{let o=await this.transporter.request(n),i=o.data;return i.res=o,i}catch(o){throw o instanceof Wv.GaxiosError&&o.response?(0,$v.getErrorFromOAuthErrorResponse)(o.response.data,o):o}}},bC=class extends Hv.AuthClient{cachedAccessToken;externalAccountAuthorizedUserHandler;refreshToken;constructor(e){super(e),e.universe_domain&&(this.universeDomain=e.universe_domain),this.refreshToken=e.refresh_token;let r={confidentialClientType:"basic",clientId:e.client_id,clientSecret:e.client_secret};this.externalAccountAuthorizedUserHandler=new TC({tokenRefreshEndpoint:e.token_url??F$.replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:r}),this.cachedAccessToken=null,this.quotaProjectId=e.quota_project_id,typeof e?.eagerRefreshThresholdMillis!="number"?this.eagerRefreshThresholdMillis=P$.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!e?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){let n;try{let o=await this.getRequestHeaders();e.headers=Wv.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,o),n=await this.transporter.request(e)}catch(o){let i=o.response;if(i){let s=i.status,u=i.config.data instanceof B$.Readable;if(!r&&(s===401||s===403)&&!u&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw o}return n}async refreshAccessTokenAsync(){let e=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:e.access_token,expiry_date:new Date().getTime()+e.expires_in*1e3,res:e.res},e.refresh_token!==void 0&&(this.refreshToken=e.refresh_token),this.cachedAccessToken}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};cc.ExternalAccountAuthorizedUserClient=bC});var Yv=R(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.GoogleAuth=Ao.GoogleAuthExceptionMessages=void 0;var x$=require("child_process"),R1=require("fs"),k$=ir(),D1=p1(),L$=require("os"),OC=require("path"),U$=m1(),q$=Ay(),G$=_y(),V$=wy(),lc=Vy(),zv=Hy(),dc=zy(),$$=wC(),I1=bs(),RC=En(),jv=vC(),Kv=go();Ao.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_CREDENTIALS_FOUND:`Unable to find credentials in current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`,NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:`Unable to detect a Universe Domain in the current environment.
To learn more about Universe Domain retrieval, visit: 
https://cloud.google.com/compute/docs/metadata/predefined-metadata-keys`};var DC=class{checkIsGCE=void 0;useJWTAccessWithScope;defaultServicePath;get isGCE(){return this.checkIsGCE}_findProjectIdPromise;_cachedProjectId;jsonContent=null;apiKey;cachedCredential=null;#e=null;defaultScopes;keyFilename;scopes;clientOptions={};constructor(e={}){if(this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.clientOptions=e.clientOptions||{},this.jsonContent=e.credentials||null,this.apiKey=e.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw new RangeError(Ao.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);e.universeDomain&&(this.clientOptions.universeDomain=e.universeDomain)}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(e)this.getProjectIdAsync().then(r=>e(null,r),e);else return this.getProjectIdAsync()}async getProjectIdOptional(){try{return await this.getProjectId()}catch(e){if(e instanceof Error&&e.message===Ao.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw e}}async findAndCacheProjectId(){let e=null;if(e||=await this.getProductionProjectId(),e||=await this.getFileProjectId(),e||=await this.getDefaultServiceProjectId(),e||=await this.getGCEProjectId(),e||=await this.getExternalAccountClientProjectId(),e)return this._cachedProjectId=e,e;throw new Error(Ao.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){let e;try{e=await D1.universe("universe-domain"),e||=RC.DEFAULT_UNIVERSE}catch(r){if(r&&r?.response?.status===404)e=RC.DEFAULT_UNIVERSE;else throw r}return e}async getUniverseDomain(){let e=(0,Kv.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{e??=(await this.getClient()).universeDomain}catch{e??=RC.DEFAULT_UNIVERSE}return e}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},r){let n;if(typeof e=="function"?r=e:n=e,r)this.getApplicationDefaultAsync(n).then(o=>r(null,o.credential,o.projectId),r);else return this.getApplicationDefaultAsync(n)}async getApplicationDefaultAsync(e={}){if(this.cachedCredential)return await this.#t(this.cachedCredential,null);let r;if(r=await this._tryGetApplicationCredentialsFromEnvironmentVariable(e),r)return r instanceof lc.JWT?r.scopes=this.scopes:r instanceof I1.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),await this.#t(r);if(r=await this._tryGetApplicationCredentialsFromWellKnownFile(e),r)return r instanceof lc.JWT?r.scopes=this.scopes:r instanceof I1.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),await this.#t(r);if(await this._checkIsGCE())return e.scopes=this.getAnyScopes(),await this.#t(new q$.Compute(e));throw new Error(Ao.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async#t(e,r=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let n=await this.getProjectIdOptional();return r&&(e.quotaProjectId=r),this.cachedCredential=e,{credential:e,projectId:n}}async _checkIsGCE(){return this.checkIsGCE===void 0&&(this.checkIsGCE=D1.getGCPResidency()||await D1.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(e){let r=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!r||r.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(r,e)}catch(n){throw n instanceof Error&&(n.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${n.message}`),n}}async _tryGetApplicationCredentialsFromWellKnownFile(e){let r=null;if(this._isWindows())r=process.env.APPDATA;else{let o=process.env.HOME;o&&(r=OC.join(o,".config"))}return r&&(r=OC.join(r,"gcloud","application_default_credentials.json"),R1.existsSync(r)||(r=null)),r?await this._getApplicationCredentialsFromFilePath(r,e):null}async _getApplicationCredentialsFromFilePath(e,r={}){if(!e||e.length===0)throw new Error("The file path is invalid.");try{if(e=R1.realpathSync(e),!R1.lstatSync(e).isFile())throw new Error}catch(o){throw o instanceof Error&&(o.message=`The file at ${e} does not exist, or it is not a file. ${o.message}`),o}let n=R1.createReadStream(e);return this.fromStream(n,r)}fromImpersonatedJSON(e){if(!e)throw new Error("Must pass in a JSON object containing an  impersonated refresh token");if(e.type!==dc.IMPERSONATED_ACCOUNT_TYPE)throw new Error(`The incoming JSON object does not have the "${dc.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!e.source_credentials)throw new Error("The incoming JSON object does not contain a source_credentials field");if(!e.service_account_impersonation_url)throw new Error("The incoming JSON object does not contain a service_account_impersonation_url field");let r=this.fromJSON(e.source_credentials);if(e.service_account_impersonation_url?.length>256)throw new RangeError(`Target principal is too long: ${e.service_account_impersonation_url}`);let n=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(e.service_account_impersonation_url)?.groups?.target;if(!n)throw new RangeError(`Cannot extract target principal from ${e.service_account_impersonation_url}`);let o=(this.scopes||e.scopes||this.defaultScopes)??[];return new dc.Impersonated({...e,sourceClient:r,targetPrincipal:n,targetScopes:Array.isArray(o)?o:[o]})}fromJSON(e,r={}){let n,o=(0,Kv.originalOrCamelOptions)(r).get("universe_domain");return e.type===zv.USER_REFRESH_ACCOUNT_TYPE?(n=new zv.UserRefreshClient(r),n.fromJSON(e)):e.type===dc.IMPERSONATED_ACCOUNT_TYPE?n=this.fromImpersonatedJSON(e):e.type===I1.EXTERNAL_ACCOUNT_TYPE?(n=$$.ExternalAccountClient.fromJSON({...e,...r}),n.scopes=this.getAnyScopes()):e.type===jv.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?n=new jv.ExternalAccountAuthorizedUserClient({...e,...r}):(r.scopes=this.scopes,n=new lc.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),o&&(n.universeDomain=o),n}_cacheClientFromJSON(e,r){let n=this.fromJSON(e,r);return this.jsonContent=e,this.cachedCredential=n,n}fromStream(e,r={},n){let o={};if(typeof r=="function"?n=r:o=r,n)this.fromStreamAsync(e,o).then(i=>n(null,i),n);else return this.fromStreamAsync(e,o)}fromStreamAsync(e,r){return new Promise((n,o)=>{if(!e)throw new Error("Must pass in a stream containing the Google auth settings.");let i=[];e.setEncoding("utf8").on("error",o).on("data",s=>i.push(s)).on("end",()=>{try{try{let s=JSON.parse(i.join("")),u=this._cacheClientFromJSON(s,r);return n(u)}catch(s){if(!this.keyFilename)throw s;let u=new lc.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=u,this.setGapicJWTValues(u),n(u)}}catch(s){return o(s)}})})}fromAPIKey(e,r={}){return new lc.JWT({...r,apiKey:e})}_isWindows(){let e=L$.platform();return!!(e&&e.length>=3&&e.substring(0,3).toLowerCase()==="win")}async getDefaultServiceProjectId(){return new Promise(e=>{(0,x$.exec)("gcloud config config-helper --format json",(r,n)=>{if(!r&&n)try{let o=JSON.parse(n).configuration.properties.core.project;e(o);return}catch{}e(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let r=await this.getClient();if(r&&r.projectId)return r.projectId}let e=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null}async getExternalAccountClientProjectId(){return!this.jsonContent||this.jsonContent.type!==I1.EXTERNAL_ACCOUNT_TYPE?null:await(await this.getClient()).getProjectId()}async getGCEProjectId(){try{return await D1.project("project-id")}catch{return null}}getCredentials(e){if(e)this.getCredentialsAsync().then(r=>e(null,r),e);else return this.getCredentialsAsync()}async getCredentialsAsync(){let e=await this.getClient();if(e instanceof dc.Impersonated)return{client_email:e.getTargetPrincipal()};if(e instanceof I1.BaseExternalAccountClient){let r=e.getServiceAccountEmail();if(r)return{client_email:r,universe_domain:e.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[r,n]=await Promise.all([D1.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:r,universe_domain:n}}throw new Error(Ao.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;this.#e=this.#e||this.#r();try{return await this.#e}finally{this.#e=null}}async#r(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){let e=OC.resolve(this.keyFilename),r=R1.createReadStream(e);return await this.fromStreamAsync(r,this.clientOptions)}else if(this.apiKey){let e=await this.fromAPIKey(this.apiKey,this.clientOptions);e.scopes=this.scopes;let{credential:r}=await this.#t(e);return r}else{let{credential:e}=await this.getApplicationDefaultAsync(this.clientOptions);return e}}async getIdTokenClient(e){let r=await this.getClient();if(!("fetchIdToken"in r))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new G$.IdTokenClient({targetAudience:e,idTokenProvider:r})}async getAccessToken(){return(await(await this.getClient()).getAccessToken()).token}async getRequestHeaders(e){return(await this.getClient()).getRequestHeaders(e)}async authorizeRequest(e={}){let r=e.url,o=await(await this.getClient()).getRequestHeaders(r);return e.headers=k$.Gaxios.mergeHeaders(e.headers,o),e}async fetch(...e){return(await this.getClient()).fetch(...e)}async request(e){return(await this.getClient()).request(e)}getEnv(){return(0,V$.getEnv)()}async sign(e,r){let n=await this.getClient(),o=await this.getUniverseDomain();if(r=r||`https://iamcredentials.${o}/v1/projects/-/serviceAccounts/`,n instanceof dc.Impersonated)return(await n.sign(e)).signedBlob;let i=(0,U$.createCrypto)();if(n instanceof lc.JWT&&n.key)return await i.sign(n.key,e);let s=await this.getCredentials();if(!s.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(i,s.client_email,e,r)}async signBlob(e,r,n,o){let i=new URL(o+`${r}:signBlob`);return(await this.request({method:"POST",url:i.href,data:{payload:e.encodeBase64StringUtf8(n)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}};Ao.GoogleAuth=DC});var Jv=R(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.IAMAuth=void 0;var IC=class{selector;token;constructor(e,r){this.selector=e,this.token=r,this.selector=e,this.token=r}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};dp.IAMAuth=IC});var Xv=R(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});si.DownscopedClient=si.EXPIRATION_TIME_OFFSET=si.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var H$=ir(),W$=require("stream"),MC=En(),z$=Wh(),j$="urn:ietf:params:oauth:grant-type:token-exchange",K$="urn:ietf:params:oauth:token-type:access_token",Y$="urn:ietf:params:oauth:token-type:access_token";si.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;si.EXPIRATION_TIME_OFFSET=300*1e3;var NC=class extends MC.AuthClient{authClient;credentialAccessBoundary;cachedDownscopedAccessToken;stsCredential;constructor(e,r={accessBoundary:{accessBoundaryRules:[]}}){if(super(e instanceof MC.AuthClient?{}:e),e instanceof MC.AuthClient?(this.authClient=e,this.credentialAccessBoundary=r):(this.authClient=e.authClient,this.credentialAccessBoundary=e.credentialAccessBoundary),this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>si.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${si.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let n of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(n.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new z$.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials(e){if(!e.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(e),this.cachedDownscopedAccessToken=e}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let e=await this.getAccessToken(),r=new Headers({authorization:`Bearer ${e.token}`});return this.addSharedMetadataHeaders(r)}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}async requestAsync(e,r=!1){let n;try{let o=await this.getRequestHeaders();e.headers=H$.Gaxios.mergeHeaders(e.headers),this.addUserProjectAndAuthHeaders(e.headers,o),n=await this.transporter.request(e)}catch(o){let i=o.response;if(i){let s=i.status,u=i.config.data instanceof W$.Readable;if(!r&&(s===401||s===403)&&!u&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(e,!0)}throw o}return n}async refreshAccessTokenAsync(){let e=(await this.authClient.getAccessToken()).token,r={grantType:j$,requestedTokenType:K$,subjectToken:e,subjectTokenType:Y$},n=await this.stsCredential.exchangeToken(r,void 0,this.credentialAccessBoundary),o=this.authClient.credentials?.expiry_date||null,i=n.expires_in?new Date().getTime()+n.expires_in*1e3:o;return this.cachedDownscopedAccessToken={access_token:n.access_token,expiry_date:i,res:n.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};si.DownscopedClient=NC});var Qv=R(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.PassThroughClient=void 0;var J$=En(),BC=class extends J$.AuthClient{async request(e){return this.transporter.request(e)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}};fp.PassThroughClient=BC});var nO=R(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.GoogleAuth=he.auth=he.PassThroughClient=he.ExternalAccountAuthorizedUserClient=he.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=he.ExecutableError=he.PluggableAuthClient=he.DownscopedClient=he.BaseExternalAccountClient=he.ExternalAccountClient=he.IdentityPoolClient=he.AwsRequestSigner=he.AwsClient=he.UserRefreshClient=he.LoginTicket=he.ClientAuthentication=he.OAuth2Client=he.CodeChallengeMethod=he.Impersonated=he.JWT=he.JWTAccess=he.IdTokenClient=he.IAMAuth=he.GCPEnv=he.Compute=he.DEFAULT_UNIVERSE=he.AuthClient=he.gaxios=he.gcpMetadata=void 0;var Zv=Yv();Object.defineProperty(he,"GoogleAuth",{enumerable:!0,get:function(){return Zv.GoogleAuth}});he.gcpMetadata=p1();he.gaxios=ir();var eO=En();Object.defineProperty(he,"AuthClient",{enumerable:!0,get:function(){return eO.AuthClient}});Object.defineProperty(he,"DEFAULT_UNIVERSE",{enumerable:!0,get:function(){return eO.DEFAULT_UNIVERSE}});var X$=Ay();Object.defineProperty(he,"Compute",{enumerable:!0,get:function(){return X$.Compute}});var Q$=wy();Object.defineProperty(he,"GCPEnv",{enumerable:!0,get:function(){return Q$.GCPEnv}});var Z$=Jv();Object.defineProperty(he,"IAMAuth",{enumerable:!0,get:function(){return Z$.IAMAuth}});var eH=_y();Object.defineProperty(he,"IdTokenClient",{enumerable:!0,get:function(){return eH.IdTokenClient}});var tH=qy();Object.defineProperty(he,"JWTAccess",{enumerable:!0,get:function(){return tH.JWTAccess}});var rH=Vy();Object.defineProperty(he,"JWT",{enumerable:!0,get:function(){return rH.JWT}});var nH=zy();Object.defineProperty(he,"Impersonated",{enumerable:!0,get:function(){return nH.Impersonated}});var PC=Iu();Object.defineProperty(he,"CodeChallengeMethod",{enumerable:!0,get:function(){return PC.CodeChallengeMethod}});Object.defineProperty(he,"OAuth2Client",{enumerable:!0,get:function(){return PC.OAuth2Client}});Object.defineProperty(he,"ClientAuthentication",{enumerable:!0,get:function(){return PC.ClientAuthentication}});var oH=gy();Object.defineProperty(he,"LoginTicket",{enumerable:!0,get:function(){return oH.LoginTicket}});var iH=Hy();Object.defineProperty(he,"UserRefreshClient",{enumerable:!0,get:function(){return iH.UserRefreshClient}});var sH=dC();Object.defineProperty(he,"AwsClient",{enumerable:!0,get:function(){return sH.AwsClient}});var uH=aC();Object.defineProperty(he,"AwsRequestSigner",{enumerable:!0,get:function(){return uH.AwsRequestSigner}});var aH=sC();Object.defineProperty(he,"IdentityPoolClient",{enumerable:!0,get:function(){return aH.IdentityPoolClient}});var cH=wC();Object.defineProperty(he,"ExternalAccountClient",{enumerable:!0,get:function(){return cH.ExternalAccountClient}});var lH=bs();Object.defineProperty(he,"BaseExternalAccountClient",{enumerable:!0,get:function(){return lH.BaseExternalAccountClient}});var dH=Xv();Object.defineProperty(he,"DownscopedClient",{enumerable:!0,get:function(){return dH.DownscopedClient}});var tO=SC();Object.defineProperty(he,"PluggableAuthClient",{enumerable:!0,get:function(){return tO.PluggableAuthClient}});Object.defineProperty(he,"ExecutableError",{enumerable:!0,get:function(){return tO.ExecutableError}});var rO=vC();Object.defineProperty(he,"EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE",{enumerable:!0,get:function(){return rO.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE}});Object.defineProperty(he,"ExternalAccountAuthorizedUserClient",{enumerable:!0,get:function(){return rO.ExternalAccountAuthorizedUserClient}});var fH=Qv();Object.defineProperty(he,"PassThroughClient",{enumerable:!0,get:function(){return fH.PassThroughClient}});var hH=new Zv.GoogleAuth;he.auth=hH});var Pi=R((i0e,sO)=>{"use strict";var oO=["nodebuffer","arraybuffer","fragments"],iO=typeof Blob<"u";iO&&oO.push("blob");sO.exports={BINARY_TYPES:oO,CLOSE_TIMEOUT:3e4,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:iO,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var M1=R((s0e,hp)=>{"use strict";var{EMPTY_BUFFER:pH}=Pi(),FC=Buffer[Symbol.species];function mH(t,e){if(t.length===0)return pH;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let o=0;o<t.length;o++){let i=t[o];r.set(i,n),n+=i.length}return n<e?new FC(r.buffer,r.byteOffset,n):r}function uO(t,e,r,n,o){for(let i=0;i<o;i++)r[n+i]=t[i]^e[i&3]}function aO(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function gH(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function xC(t){if(xC.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new FC(t):ArrayBuffer.isView(t)?e=new FC(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),xC.readOnly=!1),e}hp.exports={concat:mH,mask:uO,toArrayBuffer:gH,toBuffer:xC,unmask:aO};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");hp.exports.mask=function(e,r,n,o,i){i<48?uO(e,r,n,o,i):t.mask(e,r,n,o,i)},hp.exports.unmask=function(e,r){e.length<32?aO(e,r):t.unmask(e,r)}}catch{}});var dO=R((u0e,lO)=>{"use strict";var cO=Symbol("kDone"),kC=Symbol("kRun"),LC=class{constructor(e){this[cO]=()=>{this.pending--,this[kC]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[kC]()}[kC](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[cO])}}};lO.exports=LC});var B1=R((a0e,mO)=>{"use strict";var N1=require("zlib"),fO=M1(),EH=dO(),{kStatusCode:hO}=Pi(),yH=Buffer[Symbol.species],CH=Buffer.from([0,0,255,255]),mp=Symbol("permessage-deflate"),Fi=Symbol("total-length"),fc=Symbol("callback"),vs=Symbol("buffers"),hc=Symbol("error"),pp,UC=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!pp){let o=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;pp=new EH(o)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[fc];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(o=>!(r.serverNoContextTakeover===!1&&o.server_no_context_takeover||o.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>o.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!o.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let o=r[n];if(o.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(o=o[0],n==="client_max_window_bits"){if(o!==!0){let i=+o;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${o}`);o=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${o}`)}else if(n==="server_max_window_bits"){let i=+o;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${o}`);o=i}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(o!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${o}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=o})}),e}decompress(e,r,n){pp.add(o=>{this._decompress(e,r,(i,s)=>{o(),n(i,s)})})}compress(e,r,n){pp.add(o=>{this._compress(e,r,(i,s)=>{o(),n(i,s)})})}_decompress(e,r,n){let o=this._isServer?"client":"server";if(!this._inflate){let i=`${o}_max_window_bits`,s=typeof this.params[i]!="number"?N1.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=N1.createInflateRaw({...this._options.zlibInflateOptions,windowBits:s}),this._inflate[mp]=this,this._inflate[Fi]=0,this._inflate[vs]=[],this._inflate.on("error",SH),this._inflate.on("data",pO)}this._inflate[fc]=n,this._inflate.write(e),r&&this._inflate.write(CH),this._inflate.flush(()=>{let i=this._inflate[hc];if(i){this._inflate.close(),this._inflate=null,n(i);return}let s=fO.concat(this._inflate[vs],this._inflate[Fi]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[Fi]=0,this._inflate[vs]=[],r&&this.params[`${o}_no_context_takeover`]&&this._inflate.reset()),n(null,s)})}_compress(e,r,n){let o=this._isServer?"server":"client";if(!this._deflate){let i=`${o}_max_window_bits`,s=typeof this.params[i]!="number"?N1.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=N1.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:s}),this._deflate[Fi]=0,this._deflate[vs]=[],this._deflate.on("data",AH)}this._deflate[fc]=n,this._deflate.write(e),this._deflate.flush(N1.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=fO.concat(this._deflate[vs],this._deflate[Fi]);r&&(i=new yH(i.buffer,i.byteOffset,i.length-4)),this._deflate[fc]=null,this._deflate[Fi]=0,this._deflate[vs]=[],r&&this.params[`${o}_no_context_takeover`]&&this._deflate.reset(),n(null,i)})}};mO.exports=UC;function AH(t){this[vs].push(t),this[Fi]+=t.length}function pO(t){if(this[Fi]+=t.length,this[mp]._maxPayload<1||this[Fi]<=this[mp]._maxPayload){this[vs].push(t);return}this[hc]=new RangeError("Max payload size exceeded"),this[hc].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[hc][hO]=1009,this.removeListener("data",pO),this.reset()}function SH(t){if(this[mp]._inflate=null,this[hc]){this[fc](this[hc]);return}t[hO]=1007,this[fc](t)}});var pc=R((c0e,gp)=>{"use strict";var{isUtf8:gO}=require("buffer"),{hasBlob:_H}=Pi(),wH=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function TH(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function qC(t){let e=t.length,r=0;for(;r<e;)if((t[r]&128)===0)r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}function bH(t){return _H&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}gp.exports={isBlob:bH,isValidStatusCode:TH,isValidUTF8:qC,tokenChars:wH};if(gO)gp.exports.isValidUTF8=function(t){return t.length<24?qC(t):gO(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");gp.exports.isValidUTF8=function(e){return e.length<32?qC(e):t(e)}}catch{}});var WC=R((l0e,wO)=>{"use strict";var{Writable:vH}=require("stream"),EO=B1(),{BINARY_TYPES:OH,EMPTY_BUFFER:yO,kStatusCode:RH,kWebSocket:DH}=Pi(),{concat:GC,toArrayBuffer:IH,unmask:MH}=M1(),{isValidStatusCode:NH,isValidUTF8:CO}=pc(),Ep=Buffer[Symbol.species],Hn=0,AO=1,SO=2,_O=3,VC=4,$C=5,yp=6,HC=class extends vH{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||OH[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[DH]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=Hn}_write(e,r,n){if(this._opcode===8&&this._state==Hn)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new Ep(n.buffer,n.byteOffset+e,n.length-e),new Ep(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],o=r.length-e;e>=n.length?r.set(this._buffers.shift(),o):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),o),this._buffers[0]=new Ep(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case Hn:this.getInfo(e);break;case AO:this.getPayloadLength16(e);break;case SO:this.getPayloadLength64(e);break;case _O:this.getMask();break;case VC:this.getData(e);break;case $C:case yp:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if((r[0]&48)!==0){let o=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(o);return}let n=(r[0]&64)===64;if(n&&!this._extensions[EO.extensionName]){let o=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(o);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(n){let o=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(o);return}if(!this._fragmented){let o=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(o);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let o=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(o);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let o=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(o);return}if(n){let o=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(o);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let o=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(o);return}}else{let o=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(o);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let o=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(o);return}}else if(this._masked){let o=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(o);return}this._payloadLength===126?this._state=AO:this._payloadLength===127?this._state=SO:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),n=r.readUInt32BE(0);if(n>Math.pow(2,21)-1){let o=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(o);return}this._payloadLength=n*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=_O:this._state=VC}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=VC}getData(e){let r=yO;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&MH(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=$C,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[EO.extensionName].decompress(e,this._fin,(o,i)=>{if(o)return r(o);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let s=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(s);return}this._fragments.push(i)}this.dataMessage(r),this._state===Hn&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=Hn;return}let r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let o;this._binaryType==="nodebuffer"?o=GC(n,r):this._binaryType==="arraybuffer"?o=IH(GC(n,r)):this._binaryType==="blob"?o=new Blob(n):o=n,this._allowSynchronousEvents?(this.emit("message",o,!0),this._state=Hn):(this._state=yp,setImmediate(()=>{this.emit("message",o,!0),this._state=Hn,this.startLoop(e)}))}else{let o=GC(n,r);if(!this._skipUTF8Validation&&!CO(o)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(i);return}this._state===$C||this._allowSynchronousEvents?(this.emit("message",o,!1),this._state=Hn):(this._state=yp,setImmediate(()=>{this.emit("message",o,!1),this._state=Hn,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,yO),this.end();else{let n=e.readUInt16BE(0);if(!NH(n)){let i=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(i);return}let o=new Ep(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!CO(o)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(i);return}this._loop=!1,this.emit("conclude",n,o),this.end()}this._state=Hn;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=Hn):(this._state=yp,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=Hn,this.startLoop(r)}))}createError(e,r,n,o,i){this._loop=!1,this._errored=!0;let s=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(s,this.createError),s.code=i,s[RH]=o,s}};wO.exports=HC});var KC=R((f0e,vO)=>{"use strict";var{Duplex:d0e}=require("stream"),{randomFillSync:BH}=require("crypto"),TO=B1(),{EMPTY_BUFFER:PH,kWebSocket:FH,NOOP:xH}=Pi(),{isBlob:mc,isValidStatusCode:kH}=pc(),{mask:bO,toBuffer:Nu}=M1(),Wn=Symbol("kByteLength"),LH=Buffer.alloc(4),Cp=8*1024,Bu,gc=Cp,So=0,UH=1,qH=2,zC=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=So,this.onerror=xH,this[FH]=void 0}static frame(e,r){let n,o=!1,i=2,s=!1;r.mask&&(n=r.maskBuffer||LH,r.generateMask?r.generateMask(n):(gc===Cp&&(Bu===void 0&&(Bu=Buffer.alloc(Cp)),BH(Bu,0,Cp),gc=0),n[0]=Bu[gc++],n[1]=Bu[gc++],n[2]=Bu[gc++],n[3]=Bu[gc++]),s=(n[0]|n[1]|n[2]|n[3])===0,i=6);let u;typeof e=="string"?(!r.mask||s)&&r[Wn]!==void 0?u=r[Wn]:(e=Buffer.from(e),u=e.length):(u=e.length,o=r.mask&&r.readOnly&&!s);let a=u;u>=65536?(i+=8,a=127):u>125&&(i+=2,a=126);let c=Buffer.allocUnsafe(o?u+i:i);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=a,a===126?c.writeUInt16BE(u,2):a===127&&(c[2]=c[3]=0,c.writeUIntBE(u,4,6)),r.mask?(c[1]|=128,c[i-4]=n[0],c[i-3]=n[1],c[i-2]=n[2],c[i-1]=n[3],s?[c,e]:o?(bO(e,n,c,i,u),[c]):(bO(e,n,e,0,u),[c,e])):[c,e]}close(e,r,n,o){let i;if(e===void 0)i=PH;else{if(typeof e!="number"||!kH(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{let u=Buffer.byteLength(r);if(u>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+u),i.writeUInt16BE(e,0),typeof r=="string"?i.write(r,2):i.set(r,2)}}let s={[Wn]:i.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==So?this.enqueue([this.dispatch,i,!1,s,o]):this.sendFrame(t.frame(i,s),o)}ping(e,r,n){let o,i;if(typeof e=="string"?(o=Buffer.byteLength(e),i=!1):mc(e)?(o=e.size,i=!1):(e=Nu(e),o=e.length,i=Nu.readOnly),o>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[Wn]:o,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};mc(e)?this._state!==So?this.enqueue([this.getBlobData,e,!1,s,n]):this.getBlobData(e,!1,s,n):this._state!==So?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(t.frame(e,s),n)}pong(e,r,n){let o,i;if(typeof e=="string"?(o=Buffer.byteLength(e),i=!1):mc(e)?(o=e.size,i=!1):(e=Nu(e),o=e.length,i=Nu.readOnly),o>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[Wn]:o,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};mc(e)?this._state!==So?this.enqueue([this.getBlobData,e,!1,s,n]):this.getBlobData(e,!1,s,n):this._state!==So?this.enqueue([this.dispatch,e,!1,s,n]):this.sendFrame(t.frame(e,s),n)}send(e,r,n){let o=this._extensions[TO.extensionName],i=r.binary?2:1,s=r.compress,u,a;typeof e=="string"?(u=Buffer.byteLength(e),a=!1):mc(e)?(u=e.size,a=!1):(e=Nu(e),u=e.length,a=Nu.readOnly),this._firstFragment?(this._firstFragment=!1,s&&o&&o.params[o._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(s=u>=o._threshold),this._compress=s):(s=!1,i=0),r.fin&&(this._firstFragment=!0);let c={[Wn]:u,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:a,rsv1:s};mc(e)?this._state!==So?this.enqueue([this.getBlobData,e,this._compress,c,n]):this.getBlobData(e,this._compress,c,n):this._state!==So?this.enqueue([this.dispatch,e,this._compress,c,n]):this.dispatch(e,this._compress,c,n)}getBlobData(e,r,n,o){this._bufferedBytes+=n[Wn],this._state=qH,e.arrayBuffer().then(i=>{if(this._socket.destroyed){let u=new Error("The socket was closed while the blob was being read");process.nextTick(jC,this,u,o);return}this._bufferedBytes-=n[Wn];let s=Nu(i);r?this.dispatch(s,r,n,o):(this._state=So,this.sendFrame(t.frame(s,n),o),this.dequeue())}).catch(i=>{process.nextTick(GH,this,i,o)})}dispatch(e,r,n,o){if(!r){this.sendFrame(t.frame(e,n),o);return}let i=this._extensions[TO.extensionName];this._bufferedBytes+=n[Wn],this._state=UH,i.compress(e,n.fin,(s,u)=>{if(this._socket.destroyed){let a=new Error("The socket was closed while data was being compressed");jC(this,a,o);return}this._bufferedBytes-=n[Wn],this._state=So,n.readOnly=!1,this.sendFrame(t.frame(u,n),o),this.dequeue()})}dequeue(){for(;this._state===So&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Wn],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Wn],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};vO.exports=zC;function jC(t,e,r){typeof r=="function"&&r(e);for(let n=0;n<t._queue.length;n++){let o=t._queue[n],i=o[o.length-1];typeof i=="function"&&i(e)}}function GH(t,e,r){jC(t,e,r),t.onerror(e)}});var FO=R((h0e,PO)=>{"use strict";var{kForOnEventAttribute:P1,kListener:YC}=Pi(),OO=Symbol("kCode"),RO=Symbol("kData"),DO=Symbol("kError"),IO=Symbol("kMessage"),MO=Symbol("kReason"),Ec=Symbol("kTarget"),NO=Symbol("kType"),BO=Symbol("kWasClean"),xi=class{constructor(e){this[Ec]=null,this[NO]=e}get target(){return this[Ec]}get type(){return this[NO]}};Object.defineProperty(xi.prototype,"target",{enumerable:!0});Object.defineProperty(xi.prototype,"type",{enumerable:!0});var Pu=class extends xi{constructor(e,r={}){super(e),this[OO]=r.code===void 0?0:r.code,this[MO]=r.reason===void 0?"":r.reason,this[BO]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[OO]}get reason(){return this[MO]}get wasClean(){return this[BO]}};Object.defineProperty(Pu.prototype,"code",{enumerable:!0});Object.defineProperty(Pu.prototype,"reason",{enumerable:!0});Object.defineProperty(Pu.prototype,"wasClean",{enumerable:!0});var yc=class extends xi{constructor(e,r={}){super(e),this[DO]=r.error===void 0?null:r.error,this[IO]=r.message===void 0?"":r.message}get error(){return this[DO]}get message(){return this[IO]}};Object.defineProperty(yc.prototype,"error",{enumerable:!0});Object.defineProperty(yc.prototype,"message",{enumerable:!0});var F1=class extends xi{constructor(e,r={}){super(e),this[RO]=r.data===void 0?null:r.data}get data(){return this[RO]}};Object.defineProperty(F1.prototype,"data",{enumerable:!0});var VH={addEventListener(t,e,r={}){for(let o of this.listeners(t))if(!r[P1]&&o[YC]===e&&!o[P1])return;let n;if(t==="message")n=function(i,s){let u=new F1("message",{data:s?i:i.toString()});u[Ec]=this,Ap(e,this,u)};else if(t==="close")n=function(i,s){let u=new Pu("close",{code:i,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});u[Ec]=this,Ap(e,this,u)};else if(t==="error")n=function(i){let s=new yc("error",{error:i,message:i.message});s[Ec]=this,Ap(e,this,s)};else if(t==="open")n=function(){let i=new xi("open");i[Ec]=this,Ap(e,this,i)};else return;n[P1]=!!r[P1],n[YC]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[YC]===e&&!r[P1]){this.removeListener(t,r);break}}};PO.exports={CloseEvent:Pu,ErrorEvent:yc,Event:xi,EventTarget:VH,MessageEvent:F1};function Ap(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var JC=R((p0e,xO)=>{"use strict";var{tokenChars:x1}=pc();function ui(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function $H(t){let e=Object.create(null),r=Object.create(null),n=!1,o=!1,i=!1,s,u,a=-1,c=-1,d=-1,p=0;for(;p<t.length;p++)if(c=t.charCodeAt(p),s===void 0)if(d===-1&&x1[c]===1)a===-1&&(a=p);else if(p!==0&&(c===32||c===9))d===-1&&a!==-1&&(d=p);else if(c===59||c===44){if(a===-1)throw new SyntaxError(`Unexpected character at index ${p}`);d===-1&&(d=p);let E=t.slice(a,d);c===44?(ui(e,E,r),r=Object.create(null)):s=E,a=d=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);else if(u===void 0)if(d===-1&&x1[c]===1)a===-1&&(a=p);else if(c===32||c===9)d===-1&&a!==-1&&(d=p);else if(c===59||c===44){if(a===-1)throw new SyntaxError(`Unexpected character at index ${p}`);d===-1&&(d=p),ui(r,t.slice(a,d),!0),c===44&&(ui(e,s,r),r=Object.create(null),s=void 0),a=d=-1}else if(c===61&&a!==-1&&d===-1)u=t.slice(a,p),a=d=-1;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(o){if(x1[c]!==1)throw new SyntaxError(`Unexpected character at index ${p}`);a===-1?a=p:n||(n=!0),o=!1}else if(i)if(x1[c]===1)a===-1&&(a=p);else if(c===34&&a!==-1)i=!1,d=p;else if(c===92)o=!0;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(c===34&&t.charCodeAt(p-1)===61)i=!0;else if(d===-1&&x1[c]===1)a===-1&&(a=p);else if(a!==-1&&(c===32||c===9))d===-1&&(d=p);else if(c===59||c===44){if(a===-1)throw new SyntaxError(`Unexpected character at index ${p}`);d===-1&&(d=p);let E=t.slice(a,d);n&&(E=E.replace(/\\/g,""),n=!1),ui(r,u,E),c===44&&(ui(e,s,r),r=Object.create(null),s=void 0),u=void 0,a=d=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);if(a===-1||i||c===32||c===9)throw new SyntaxError("Unexpected end of input");d===-1&&(d=p);let m=t.slice(a,d);return s===void 0?ui(e,m,r):(u===void 0?ui(r,m,!0):n?ui(r,u,m.replace(/\\/g,"")):ui(r,u,m),ui(e,s,r)),e}function HH(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(o=>{let i=n[o];return Array.isArray(i)||(i=[i]),i.map(s=>s===!0?o:`${o}=${s}`).join("; ")})).join("; ")).join(", ")}).join(", ")}xO.exports={format:HH,parse:$H}});var Tp=R((E0e,KO)=>{"use strict";var WH=require("events"),zH=require("https"),jH=require("http"),UO=require("net"),KH=require("tls"),{randomBytes:YH,createHash:JH}=require("crypto"),{Duplex:m0e,Readable:g0e}=require("stream"),{URL:XC}=require("url"),Os=B1(),XH=WC(),QH=KC(),{isBlob:ZH}=pc(),{BINARY_TYPES:kO,CLOSE_TIMEOUT:eW,EMPTY_BUFFER:Sp,GUID:tW,kForOnEventAttribute:QC,kListener:rW,kStatusCode:nW,kWebSocket:Zt,NOOP:qO}=Pi(),{EventTarget:{addEventListener:oW,removeEventListener:iW}}=FO(),{format:sW,parse:uW}=JC(),{toBuffer:aW}=M1(),GO=Symbol("kAborted"),ZC=[8,13],ki=["CONNECTING","OPEN","CLOSING","CLOSED"],cW=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,Ct=class t extends WH{constructor(e,r,n){super(),this._binaryType=kO[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Sp,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),VO(this,e,r,n)):(this._autoPong=n.autoPong,this._closeTimeout=n.closeTimeout,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){kO.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let o=new XH({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),i=new QH(e,this._extensions,n.generateMask);this._receiver=o,this._sender=i,this._socket=e,o[Zt]=this,i[Zt]=this,e[Zt]=this,o.on("conclude",fW),o.on("drain",hW),o.on("error",pW),o.on("message",mW),o.on("ping",gW),o.on("pong",EW),i.onerror=yW,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",WO),e.on("data",wp),e.on("end",zO),e.on("error",jO),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Os.extensionName]&&this._extensions[Os.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){_n(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),HO(this)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){eA(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||Sp,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){eA(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||Sp,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){eA(this,e,n);return}let o={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[Os.extensionName]||(o.compress=!1),this._sender.send(e||Sp,o,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){_n(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(Ct,"CONNECTING",{enumerable:!0,value:ki.indexOf("CONNECTING")});Object.defineProperty(Ct.prototype,"CONNECTING",{enumerable:!0,value:ki.indexOf("CONNECTING")});Object.defineProperty(Ct,"OPEN",{enumerable:!0,value:ki.indexOf("OPEN")});Object.defineProperty(Ct.prototype,"OPEN",{enumerable:!0,value:ki.indexOf("OPEN")});Object.defineProperty(Ct,"CLOSING",{enumerable:!0,value:ki.indexOf("CLOSING")});Object.defineProperty(Ct.prototype,"CLOSING",{enumerable:!0,value:ki.indexOf("CLOSING")});Object.defineProperty(Ct,"CLOSED",{enumerable:!0,value:ki.indexOf("CLOSED")});Object.defineProperty(Ct.prototype,"CLOSED",{enumerable:!0,value:ki.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(Ct.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(Ct.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[QC])return e[rW];return null},set(e){for(let r of this.listeners(t))if(r[QC]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[QC]:!0})}})});Ct.prototype.addEventListener=oW;Ct.prototype.removeEventListener=iW;KO.exports=Ct;function VO(t,e,r,n){let o={allowSynchronousEvents:!0,autoPong:!0,closeTimeout:eW,protocolVersion:ZC[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=o.autoPong,t._closeTimeout=o.closeTimeout,!ZC.includes(o.protocolVersion))throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} (supported versions: ${ZC.join(", ")})`);let i;if(e instanceof XC)i=e;else try{i=new XC(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}i.protocol==="http:"?i.protocol="ws:":i.protocol==="https:"&&(i.protocol="wss:"),t._url=i.href;let s=i.protocol==="wss:",u=i.protocol==="ws+unix:",a;if(i.protocol!=="ws:"&&!s&&!u?a=`The URL's protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"`:u&&!i.pathname?a="The URL's pathname is empty":i.hash&&(a="The URL contains a fragment identifier"),a){let A=new SyntaxError(a);if(t._redirects===0)throw A;_p(t,A);return}let c=s?443:80,d=YH(16).toString("base64"),p=s?zH.request:jH.request,m=new Set,E;if(o.createConnection=o.createConnection||(s?dW:lW),o.defaultPort=o.defaultPort||c,o.port=i.port||c,o.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,o.headers={...o.headers,"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":d,Connection:"Upgrade",Upgrade:"websocket"},o.path=i.pathname+i.search,o.timeout=o.handshakeTimeout,o.perMessageDeflate&&(E=new Os(o.perMessageDeflate!==!0?o.perMessageDeflate:{},!1,o.maxPayload),o.headers["Sec-WebSocket-Extensions"]=sW({[Os.extensionName]:E.offer()})),r.length){for(let A of r){if(typeof A!="string"||!cW.test(A)||m.has(A))throw new SyntaxError("An invalid or duplicated subprotocol was specified");m.add(A)}o.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(o.origin&&(o.protocolVersion<13?o.headers["Sec-WebSocket-Origin"]=o.origin:o.headers.Origin=o.origin),(i.username||i.password)&&(o.auth=`${i.username}:${i.password}`),u){let A=o.path.split(":");o.socketPath=A[0],o.path=A[1]}let y;if(o.followRedirects){if(t._redirects===0){t._originalIpc=u,t._originalSecure=s,t._originalHostOrSocketPath=u?o.socketPath:i.host;let A=n&&n.headers;if(n={...n,headers:{}},A)for(let[S,b]of Object.entries(A))n.headers[S.toLowerCase()]=b}else if(t.listenerCount("redirect")===0){let A=u?t._originalIpc?o.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:i.host===t._originalHostOrSocketPath;(!A||t._originalSecure&&!s)&&(delete o.headers.authorization,delete o.headers.cookie,A||delete o.headers.host,o.auth=void 0)}o.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(o.auth).toString("base64")),y=t._req=p(o),t._redirects&&t.emit("redirect",t.url,y)}else y=t._req=p(o);o.timeout&&y.on("timeout",()=>{_n(t,y,"Opening handshake has timed out")}),y.on("error",A=>{y===null||y[GO]||(y=t._req=null,_p(t,A))}),y.on("response",A=>{let S=A.headers.location,b=A.statusCode;if(S&&o.followRedirects&&b>=300&&b<400){if(++t._redirects>o.maxRedirects){_n(t,y,"Maximum redirects exceeded");return}y.abort();let P;try{P=new XC(S,e)}catch{let v=new SyntaxError(`Invalid URL: ${S}`);_p(t,v);return}VO(t,P,r,n)}else t.emit("unexpected-response",y,A)||_n(t,y,`Unexpected server response: ${A.statusCode}`)}),y.on("upgrade",(A,S,b)=>{if(t.emit("upgrade",A),t.readyState!==Ct.CONNECTING)return;y=t._req=null;let P=A.headers.upgrade;if(P===void 0||P.toLowerCase()!=="websocket"){_n(t,S,"Invalid Upgrade header");return}let B=JH("sha1").update(d+tW).digest("base64");if(A.headers["sec-websocket-accept"]!==B){_n(t,S,"Invalid Sec-WebSocket-Accept header");return}let v=A.headers["sec-websocket-protocol"],I;if(v!==void 0?m.size?m.has(v)||(I="Server sent an invalid subprotocol"):I="Server sent a subprotocol but none was requested":m.size&&(I="Server sent no subprotocol"),I){_n(t,S,I);return}v&&(t._protocol=v);let O=A.headers["sec-websocket-extensions"];if(O!==void 0){if(!E){_n(t,S,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let z;try{z=uW(O)}catch{_n(t,S,"Invalid Sec-WebSocket-Extensions header");return}let Z=Object.keys(z);if(Z.length!==1||Z[0]!==Os.extensionName){_n(t,S,"Server indicated an extension that was not requested");return}try{E.accept(z[Os.extensionName])}catch{_n(t,S,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[Os.extensionName]=E}t.setSocket(S,b,{allowSynchronousEvents:o.allowSynchronousEvents,generateMask:o.generateMask,maxPayload:o.maxPayload,skipUTF8Validation:o.skipUTF8Validation})}),o.finishRequest?o.finishRequest(y,t):y.end()}function _p(t,e){t._readyState=Ct.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function lW(t){return t.path=t.socketPath,UO.connect(t)}function dW(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=UO.isIP(t.host)?"":t.host),KH.connect(t)}function _n(t,e,r){t._readyState=Ct.CLOSING;let n=new Error(r);Error.captureStackTrace(n,_n),e.setHeader?(e[GO]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(_p,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function eA(t,e,r){if(e){let n=ZH(e)?e.size:aW(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${ki[t.readyState]})`);process.nextTick(r,n)}}function fW(t,e){let r=this[Zt];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[Zt]!==void 0&&(r._socket.removeListener("data",wp),process.nextTick($O,r._socket),t===1005?r.close():r.close(t,e))}function hW(){let t=this[Zt];t.isPaused||t._socket.resume()}function pW(t){let e=this[Zt];e._socket[Zt]!==void 0&&(e._socket.removeListener("data",wp),process.nextTick($O,e._socket),e.close(t[nW])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function LO(){this[Zt].emitClose()}function mW(t,e){this[Zt].emit("message",t,e)}function gW(t){let e=this[Zt];e._autoPong&&e.pong(t,!this._isServer,qO),e.emit("ping",t)}function EW(t){this[Zt].emit("pong",t)}function $O(t){t.resume()}function yW(t){let e=this[Zt];e.readyState!==Ct.CLOSED&&(e.readyState===Ct.OPEN&&(e._readyState=Ct.CLOSING,HO(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function HO(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),t._closeTimeout)}function WO(){let t=this[Zt];if(this.removeListener("close",WO),this.removeListener("data",wp),this.removeListener("end",zO),t._readyState=Ct.CLOSING,!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&this._readableState.length!==0){let e=this.read(this._readableState.length);t._receiver.write(e)}t._receiver.end(),this[Zt]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",LO),t._receiver.on("finish",LO))}function wp(t){this[Zt]._receiver.write(t)||this.pause()}function zO(){let t=this[Zt];t._readyState=Ct.CLOSING,t._receiver.end(),this.end()}function jO(){let t=this[Zt];this.removeListener("error",jO),this.on("error",qO),t&&(t._readyState=Ct.CLOSING,this.destroy())}});var QO=R((C0e,XO)=>{"use strict";var y0e=Tp(),{Duplex:CW}=require("stream");function YO(t){t.emit("close")}function AW(){!this.destroyed&&this._writableState.finished&&this.destroy()}function JO(t){this.removeListener("error",JO),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function SW(t,e){let r=!0,n=new CW({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(i,s){let u=!s&&n._readableState.objectMode?i.toString():i;n.push(u)||t.pause()}),t.once("error",function(i){n.destroyed||(r=!1,n.destroy(i))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(o,i){if(t.readyState===t.CLOSED){i(o),process.nextTick(YO,n);return}let s=!1;t.once("error",function(a){s=!0,i(a)}),t.once("close",function(){s||i(o),process.nextTick(YO,n)}),r&&t.terminate()},n._final=function(o){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(o)});return}t._socket!==null&&(t._socket._writableState.finished?(o(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){o()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(o,i,s){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(o,i,s)});return}t.send(o,s)},n.on("end",AW),n.on("error",JO),n}XO.exports=SW});var eR=R((A0e,ZO)=>{"use strict";var{tokenChars:_W}=pc();function wW(t){let e=new Set,r=-1,n=-1,o=0;for(o;o<t.length;o++){let s=t.charCodeAt(o);if(n===-1&&_W[s]===1)r===-1&&(r=o);else if(o!==0&&(s===32||s===9))n===-1&&r!==-1&&(n=o);else if(s===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${o}`);n===-1&&(n=o);let u=t.slice(r,n);if(e.has(u))throw new SyntaxError(`The "${u}" subprotocol is duplicated`);e.add(u),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${o}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let i=t.slice(r,o);if(e.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return e.add(i),e}ZO.exports={parse:wW}});var uR=R((_0e,sR)=>{"use strict";var TW=require("events"),bp=require("http"),{Duplex:S0e}=require("stream"),{createHash:bW}=require("crypto"),tR=JC(),Fu=B1(),vW=eR(),OW=Tp(),{CLOSE_TIMEOUT:RW,GUID:DW,kWebSocket:IW}=Pi(),MW=/^[+/0-9A-Za-z]{22}==$/,rR=0,nR=1,iR=2,tA=class extends TW{constructor(e,r){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,closeTimeout:RW,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:OW,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=bp.createServer((n,o)=>{let i=bp.STATUS_CODES[426];o.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),o.end(i)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=NW(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(o,i,s)=>{this.handleUpgrade(o,i,s,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=rR}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===iR){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(k1,this);return}if(e&&this.once("close",e),this._state!==nR)if(this._state=nR,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(k1,this):process.nextTick(k1,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{k1(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,o){r.on("error",oR);let i=e.headers["sec-websocket-key"],s=e.headers.upgrade,u=+e.headers["sec-websocket-version"];if(e.method!=="GET"){xu(this,e,r,405,"Invalid HTTP method");return}if(s===void 0||s.toLowerCase()!=="websocket"){xu(this,e,r,400,"Invalid Upgrade header");return}if(i===void 0||!MW.test(i)){xu(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(u!==13&&u!==8){xu(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});return}if(!this.shouldHandle(e)){L1(r,400);return}let a=e.headers["sec-websocket-protocol"],c=new Set;if(a!==void 0)try{c=vW.parse(a)}catch{xu(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let d=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&d!==void 0){let m=new Fu(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let E=tR.parse(d);E[Fu.extensionName]&&(m.accept(E[Fu.extensionName]),p[Fu.extensionName]=m)}catch{xu(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let m={origin:e.headers[`${u===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(m,(E,y,A,S)=>{if(!E)return L1(r,y||401,A,S);this.completeUpgrade(p,i,c,e,r,n,o)});return}if(!this.options.verifyClient(m))return L1(r,401)}this.completeUpgrade(p,i,c,e,r,n,o)}completeUpgrade(e,r,n,o,i,s,u){if(!i.readable||!i.writable)return i.destroy();if(i[IW])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>rR)return L1(i,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${bW("sha1").update(r+DW).digest("base64")}`],d=new this.options.WebSocket(null,void 0,this.options);if(n.size){let p=this.options.handleProtocols?this.options.handleProtocols(n,o):n.values().next().value;p&&(c.push(`Sec-WebSocket-Protocol: ${p}`),d._protocol=p)}if(e[Fu.extensionName]){let p=e[Fu.extensionName].params,m=tR.format({[Fu.extensionName]:[p]});c.push(`Sec-WebSocket-Extensions: ${m}`),d._extensions=e}this.emit("headers",c,o),i.write(c.concat(`\r
`).join(`\r
`)),i.removeListener("error",oR),d.setSocket(i,s,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(d),d.on("close",()=>{this.clients.delete(d),this._shouldEmitClose&&!this.clients.size&&process.nextTick(k1,this)})),u(d,o)}};sR.exports=tA;function NW(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function k1(t){t._state=iR,t.emit("close")}function oR(){this.destroy()}function L1(t,e,r,n){r=r||bp.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${bp.STATUS_CODES[e]}\r
`+Object.keys(n).map(o=>`${o}: ${n[o]}`).join(`\r
`)+`\r
\r
`+r)}function xu(t,e,r,n,o,i){if(t.listenerCount("wsClientError")){let s=new Error(o);Error.captureStackTrace(s,xu),t.emit("wsClientError",s,r,e)}else L1(r,n,o,i)}});var JS=R(Qe=>{"use strict";var _Q=(()=>{let t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return e=>t.call(e)})();function Mc(t){return _Q(t)==="Uint8Array"}function GS(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&(t[Symbol.toStringTag]==="ArrayBuffer"||t[Symbol.toStringTag]==="SharedArrayBuffer")}function Nc(t){return t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"}function VS(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Map"}function Bc(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function wn(t,e){return JSON.stringify(t,(r,n)=>typeof n=="bigint"?{$numberLong:`${n}`}:VS(n)?Object.fromEntries(n):n)}function wQ(t){if(t!=null&&typeof t=="object"&&"stylize"in t&&typeof t.stylize=="function")return t.stylize}var $u=6,xc=Symbol.for("@@mdb.bson.version"),K1=2147483647,Y1=-2147483648,LD=Math.pow(2,63)-1,UD=-Math.pow(2,63),qD=Math.pow(2,53),GD=-Math.pow(2,53),$S=1,VD=2,HS=3,$D=4,WS=5,TQ=6,HD=7,WD=8,zD=9,zS=10,m0=11,bQ=12,jS=13,jD=14,KD=15,z1=16,YD=17,KS=18,JD=19,XD=255,QD=127,vQ=0,YS=4,ZD=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127}),X=class extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e,r){super(e,r)}static isBSONError(e){return e!=null&&typeof e=="object"&&"bsonError"in e&&e.bsonError===!0&&"name"in e&&"message"in e&&"stack"in e}},Hi=class extends X{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${$u}.x.x`)}},kc=class extends X{get name(){return"BSONRuntimeError"}constructor(e){super(e)}},Kn=class extends X{get name(){return"BSONOffsetError"}constructor(e,r,n){super(`${e}. offset: ${r}`,n),this.offset=r}},wD,TD;function eI(t,e,r,n){if(n){wD??=new TextDecoder("utf8",{fatal:!0});try{return wD.decode(t.subarray(e,r))}catch(o){throw new X("Invalid UTF-8 string in BSON document",{cause:o})}}return TD??=new TextDecoder("utf8",{fatal:!1}),TD.decode(t.subarray(e,r))}function tI(t,e,r){if(t.length===0)return"";let n=r-e;if(n===0)return"";if(n>20)return null;if(n===1&&t[e]<128)return String.fromCharCode(t[e]);if(n===2&&t[e]<128&&t[e+1]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1]);if(n===3&&t[e]<128&&t[e+1]<128&&t[e+2]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1])+String.fromCharCode(t[e+2]);let o=[];for(let i=e;i<r;i++){let s=t[i];if(s>127)return null;o.push(s)}return String.fromCharCode(...o)}function OQ(t,e,r){if(e.length===0)return 0;if(e.length>25||t.length-r<e.length)return null;for(let n=0,o=r;n<e.length;n++,o++){let i=e.charCodeAt(n);if(i>127)return null;t[o]=i}return e.length}function RQ(t){return Vi.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var DQ=(()=>{try{return require("crypto").randomBytes}catch{return RQ}})(),Vi={toLocalBufferType(t){if(Buffer.isBuffer(t))return t;if(ArrayBuffer.isView(t))return Buffer.from(t.buffer,t.byteOffset,t.byteLength);let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return Buffer.from(t);throw new X("Cannot create Buffer from the passed potentialBuffer.")},allocate(t){return Buffer.alloc(t)},allocateUnsafe(t){return Buffer.allocUnsafe(t)},equals(t,e){return Vi.toLocalBufferType(t).equals(e)},fromNumberArray(t){return Buffer.from(t)},fromBase64(t){return Buffer.from(t,"base64")},toBase64(t){return Vi.toLocalBufferType(t).toString("base64")},fromISO88591(t){return Buffer.from(t,"binary")},toISO88591(t){return Vi.toLocalBufferType(t).toString("binary")},fromHex(t){return Buffer.from(t,"hex")},toHex(t){return Vi.toLocalBufferType(t).toString("hex")},toUTF8(t,e,r,n){let o=r-e<=20?tI(t,e,r):null;if(o!=null)return o;let i=Vi.toLocalBufferType(t).toString("utf8",e,r);if(n){for(let s=0;s<i.length;s++)if(i.charCodeAt(s)===65533){eI(t,e,r,!0);break}}return i},utf8ByteLength(t){return Buffer.byteLength(t,"utf8")},encodeUTF8Into(t,e,r){let n=OQ(t,e,r);return n??Vi.toLocalBufferType(t).write(e,r,void 0,"utf8")},randomBytes:DQ,swap32(t){return Vi.toLocalBufferType(t).swap32()}};function IQ(){let{navigator:t}=globalThis;return typeof t=="object"&&t.product==="ReactNative"}function MQ(t){if(t<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${t}`);return j1.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var NQ=(()=>{let{crypto:t}=globalThis;if(t!=null&&typeof t.getRandomValues=="function")return e=>t.getRandomValues(j1.allocate(e));if(IQ()){let{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return MQ})(),bD=/(\d|[a-f])/i,j1={toLocalBufferType(t){let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="Uint8Array")return t;if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return new Uint8Array(t);throw new X("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(t){if(typeof t!="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(t)}`);return new Uint8Array(t)},allocateUnsafe(t){return j1.allocate(t)},equals(t,e){if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},fromNumberArray(t){return Uint8Array.from(t)},fromBase64(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))},toBase64(t){return btoa(j1.toISO88591(t))},fromISO88591(t){return Uint8Array.from(t,e=>e.charCodeAt(0)&255)},toISO88591(t){return Array.from(Uint16Array.from(t),e=>String.fromCharCode(e)).join("")},fromHex(t){let e=t.length%2===0?t:t.slice(0,t.length-1),r=[];for(let n=0;n<e.length;n+=2){let o=e[n],i=e[n+1];if(!bD.test(o)||!bD.test(i))break;let s=Number.parseInt(`${o}${i}`,16);r.push(s)}return Uint8Array.from(r)},toHex(t){return Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")},toUTF8(t,e,r,n){let o=r-e<=20?tI(t,e,r):null;return o??eI(t,e,r,n)},utf8ByteLength(t){return new TextEncoder().encode(t).byteLength},encodeUTF8Into(t,e,r){let n=new TextEncoder().encode(e);return t.set(n,r),n.byteLength},randomBytes:NQ,swap32(t){if(t.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t.length;e+=4){let r=t[e],n=t[e+1],o=t[e+2],i=t[e+3];t[e]=i,t[e+1]=o,t[e+2]=n,t[e+3]=r}return t}},BQ=typeof Buffer=="function"&&Buffer.prototype?._isBuffer!==!0,J=BQ?Vi:j1,Ar=class{get[xc](){return $u}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return this.inspect(e,r,n)}},Pc=new Float64Array(1),He=new Uint8Array(Pc.buffer,0,8);Pc[0]=-1;var gS=He[7]===0,Ae={isBigEndian:gS,getNonnegativeInt32LE(t,e){if(t[e+3]>127)throw new RangeError(`Size cannot be negative at offset: ${e}`);return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getInt32LE(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getUint32LE(t,e){return t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216},getUint32BE(t,e){return t[e+3]+t[e+2]*256+t[e+1]*65536+t[e]*16777216},getBigInt64LE(t,e){let r=BigInt(t[e+4]+t[e+5]*256+t[e+6]*65536+(t[e+7]<<24)),n=BigInt(t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216);return(r<<BigInt(32))+n},getFloat64LE:gS?(t,e)=>(He[7]=t[e],He[6]=t[e+1],He[5]=t[e+2],He[4]=t[e+3],He[3]=t[e+4],He[2]=t[e+5],He[1]=t[e+6],He[0]=t[e+7],Pc[0]):(t,e)=>(He[0]=t[e],He[1]=t[e+1],He[2]=t[e+2],He[3]=t[e+3],He[4]=t[e+4],He[5]=t[e+5],He[6]=t[e+6],He[7]=t[e+7],Pc[0]),setInt32BE(t,e,r){return t[e+3]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e]=r,4},setInt32LE(t,e,r){return t[e]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+3]=r,4},setBigInt64LE(t,e,r){let n=BigInt(4294967295),o=Number(r&n);t[e]=o,o>>=8,t[e+1]=o,o>>=8,t[e+2]=o,o>>=8,t[e+3]=o;let i=Number(r>>BigInt(32)&n);return t[e+4]=i,i>>=8,t[e+5]=i,i>>=8,t[e+6]=i,i>>=8,t[e+7]=i,8},setFloat64LE:gS?(t,e,r)=>(Pc[0]=r,t[e]=He[7],t[e+1]=He[6],t[e+2]=He[5],t[e+3]=He[4],t[e+4]=He[3],t[e+5]=He[2],t[e+6]=He[1],t[e+7]=He[0],8):(t,e,r)=>(Pc[0]=r,t[e]=He[0],t[e+1]=He[1],t[e+2]=He[2],t[e+3]=He[3],t[e+4]=He[4],t[e+5]=He[5],t[e+6]=He[6],t[e+7]=He[7],8)},Fe=class t extends Ar{get _bsontype(){return"Binary"}constructor(e,r){if(super(),e!=null&&typeof e=="string"&&!ArrayBuffer.isView(e)&&!GS(e)&&!Array.isArray(e))throw new X("Binary can only be constructed from Uint8Array or number[]");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=J.allocate(t.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(e)?J.fromNumberArray(e):J.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){if(typeof e=="string"&&e.length!==1)throw new X("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new X("only accepts single character Uint8Array or Array");let r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new X("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=r;else{let n=J.allocate(t.BUFFER_SIZE+this.buffer.length);n.set(this.buffer,0),this.buffer=n,this.buffer[this.position++]=r}}write(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.byteLength<r+e.length){let n=J.allocate(this.buffer.byteLength+e.length);n.set(this.buffer,0),this.buffer=n}if(ArrayBuffer.isView(e))this.buffer.set(J.toLocalBufferType(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position;else if(typeof e=="string")throw new X("input cannot be string")}read(e,r){r=r&&r>0?r:this.position;let n=e+r;return this.buffer.subarray(e,n>this.position?this.position:n)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return J.toBase64(this.buffer.subarray(0,this.position))}toString(e){return e==="hex"?J.toHex(this.buffer.subarray(0,this.position)):e==="base64"?J.toBase64(this.buffer.subarray(0,this.position)):e==="utf8"||e==="utf-8"?J.toUTF8(this.buffer,0,this.position,!1):J.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(e){e=e||{},this.sub_type===t.SUBTYPE_VECTOR&&Gi(this);let r=J.toBase64(this.buffer),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}}toUUID(){if(this.sub_type===t.SUBTYPE_UUID)return new Ms(this.buffer.subarray(0,this.position));throw new X(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${t.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,r){return new t(J.fromHex(e),r)}static createFromBase64(e,r){return new t(J.fromBase64(e),r)}static fromExtendedJSON(e,r){r=r||{};let n,o;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(o=e.$type?parseInt(e.$type,16):0,n=J.fromBase64(e.$binary)):typeof e.$binary!="string"&&(o=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=J.fromBase64(e.$binary.base64)):"$uuid"in e&&(o=4,n=Ms.bytesFromString(e.$uuid)),!n)throw new X(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return o===YS?new Ms(n):new t(n,o)}inspect(e,r,n){n??=wn;let o=J.toBase64(this.buffer.subarray(0,this.position)),i=n(o,r),s=n(this.sub_type,r);return`Binary.createFromBase64(${i}, ${s})`}toInt8Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new X("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Int8)throw new X("Binary datatype field is not Int8");return Gi(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new X("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Float32)throw new X("Binary datatype field is not Float32");Gi(this);let e=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return Ae.isBigEndian&&J.swap32(e),new Float32Array(e.buffer)}toPackedBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new X("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new X("Binary datatype field is not packed bit");return Gi(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new X("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new X("Binary datatype field is not packed bit");Gi(this);let r=(this.length()-2)*8-this.buffer[1],n=new Int8Array(r);for(let o=0;o<n.length;o++){let i=o/8|0,s=this.buffer[i+2],u=7-o%8,a=s>>u&1;n[o]=a}return n}static fromInt8Array(e){let r=J.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Int8,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2);let o=new this(r,this.SUBTYPE_VECTOR);return Gi(o),o}static fromFloat32Array(e){let r=J.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Float32,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2),Ae.isBigEndian&&J.swap32(new Uint8Array(r.buffer,2));let o=new this(r,this.SUBTYPE_VECTOR);return Gi(o),o}static fromPackedBits(e,r=0){let n=J.allocate(e.byteLength+2);n[0]=t.VECTOR_TYPE.PackedBit,n[1]=r,n.set(e,2);let o=new this(n,this.SUBTYPE_VECTOR);return Gi(o),o}static fromBits(e){let r=e.length+7>>>3,n=new Uint8Array(r+2);n[0]=t.VECTOR_TYPE.PackedBit;let o=e.length%8;n[1]=o===0?0:8-o;for(let i=0;i<e.length;i++){let s=i>>>3,u=e[i];if(u!==0&&u!==1)throw new X(`Invalid bit value at ${i}: must be 0 or 1, found ${e[i]}`);if(u===0)continue;let a=7-i%8;n[s+2]|=u<<a}return new this(n,t.SUBTYPE_VECTOR)}};Fe.BSON_BINARY_SUBTYPE_DEFAULT=0;Fe.BUFFER_SIZE=256;Fe.SUBTYPE_DEFAULT=0;Fe.SUBTYPE_FUNCTION=1;Fe.SUBTYPE_BYTE_ARRAY=2;Fe.SUBTYPE_UUID_OLD=3;Fe.SUBTYPE_UUID=4;Fe.SUBTYPE_MD5=5;Fe.SUBTYPE_ENCRYPTED=6;Fe.SUBTYPE_COLUMN=7;Fe.SUBTYPE_SENSITIVE=8;Fe.SUBTYPE_VECTOR=9;Fe.SUBTYPE_USER_DEFINED=128;Fe.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});function Gi(t){if(t.sub_type!==Fe.SUBTYPE_VECTOR)return;let e=t.position,r=t.buffer[0],n=t.buffer[1];if((r===Fe.VECTOR_TYPE.Float32||r===Fe.VECTOR_TYPE.Int8)&&n!==0)throw new X("Invalid Vector: padding must be zero for int8 and float32 vectors");if(r===Fe.VECTOR_TYPE.Float32&&e!==0&&e-2!==0&&(e-2)%4!==0)throw new X("Invalid Vector: Float32 vector must contain a multiple of 4 bytes");if(r===Fe.VECTOR_TYPE.PackedBit&&n!==0&&e===2)throw new X("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(r===Fe.VECTOR_TYPE.PackedBit&&n>7)throw new X(`Invalid Vector: padding must be a value between 0 and 7. found: ${n}`)}var ES=16,PQ=/^[0-9A-F]{32}$/i,FQ=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,Ms=class t extends Fe{constructor(e){let r;if(e==null)r=t.generate();else if(e instanceof t)r=J.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&e.byteLength===ES)r=J.toLocalBufferType(e);else if(typeof e=="string")r=t.bytesFromString(e);else throw new X("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(r,YS)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[J.toHex(this.buffer.subarray(0,4)),J.toHex(this.buffer.subarray(4,6)),J.toHex(this.buffer.subarray(6,8)),J.toHex(this.buffer.subarray(8,10)),J.toHex(this.buffer.subarray(10,16))].join("-"):J.toHex(this.buffer)}toString(e){return e==="hex"?J.toHex(this.id):e==="base64"?J.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof t)return J.equals(e.id,this.id);try{return J.equals(new t(e).id,this.id)}catch{return!1}}toBinary(){return new Fe(this.id,Fe.SUBTYPE_UUID)}static generate(){let e=J.randomBytes(ES);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e}static isValid(e){return e?typeof e=="string"?t.isValidUUIDString(e):Mc(e)?e.byteLength===ES:e._bsontype==="Binary"&&e.sub_type===this.SUBTYPE_UUID&&e.buffer.byteLength===16:!1}static createFromHexString(e){let r=t.bytesFromString(e);return new t(r)}static createFromBase64(e){return new t(J.fromBase64(e))}static bytesFromString(e){if(!t.isValidUUIDString(e))throw new X("UUID string representation must be 32 hex digits or canonical hyphenated representation");return J.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return PQ.test(e)||FQ.test(e)}inspect(e,r,n){return n??=wn,`new UUID(${n(this.toHexString(),r)})`}},Wi=class t extends Ar{get _bsontype(){return"Code"}constructor(e,r){super(),this.code=e.toString(),this.scope=r??null}toJSON(){return this.scope!=null?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new t(e.$code,e.$scope)}inspect(e,r,n){n??=wn;let o=n(this.code,r),i=o.includes(`
`);this.scope!=null&&(o+=`,${i?`
`:" "}${n(this.scope,r)}`);let s=i&&this.scope===null;return`new Code(${i?`
`:""}${o}${s?`
`:""})`}};function rI(t){return t!=null&&typeof t=="object"&&"$id"in t&&t.$id!=null&&"$ref"in t&&typeof t.$ref=="string"&&(!("$db"in t)||"$db"in t&&typeof t.$db=="string")}var ai=class t extends Ar{get _bsontype(){return"DBRef"}constructor(e,r,n,o){super();let i=e.split(".");i.length===2&&(n=i.shift(),e=i.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=o||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){let e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r}static fromExtendedJSON(e){let r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)}inspect(e,r,n){n??=wn;let o=[n(this.namespace,r),n(this.oid,r),...this.db?[n(this.db,r)]:[],...Object.keys(this.fields).length>0?[n(this.fields,r)]:[]];return o[1]=n===wn?`new ObjectId(${o[1]})`:o[1],`new DBRef(${o.join(", ")})`}};function nI(t){if(t==="")return t;let e=0,r=t[e]==="-",n=t[e]==="+";(n||r)&&(e+=1);let o=!1;for(;e<t.length&&t[e]==="0";++e)o=!0;return o?`${r?"-":""}${t.length===e?"0":t.slice(e)}`:n?t.slice(1):t}function xQ(t,e){e=e??10;let r="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,e);return new RegExp(`[^-+${r}]`,"i").test(t)?!1:t}var jn;try{jn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var vD=65536,kQ=1<<24,Fc=vD*vD,oI=Fc*Fc,LQ=oI/2,OD={},RD={},UQ=20,qQ=/^(\+?0|(\+|-)?[1-9][0-9]*)$/,se=class t extends Ar{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(e=0,r,n){super();let o=typeof r=="boolean"?r:!!n,i=typeof r=="number"?r:0,s=typeof e=="string"?t.fromString(e,o):typeof e=="bigint"?t.fromBigInt(e,o):{low:e|0,high:i|0,unsigned:o};this.low=s.low,this.high=s.high,this.unsigned=s.unsigned}static fromBits(e,r,n){return new t(e,r,n)}static fromInt(e,r){let n,o,i;return r?(e>>>=0,(i=0<=e&&e<256)&&(o=RD[e],o)?o:(n=t.fromBits(e,(e|0)<0?-1:0,!0),i&&(RD[e]=n),n)):(e|=0,(i=-128<=e&&e<128)&&(o=OD[e],o)?o:(n=t.fromBits(e,e<0?-1:0,!1),i&&(OD[e]=n),n))}static fromNumber(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=oI)return t.MAX_UNSIGNED_VALUE}else{if(e<=-9223372036854776e3)return t.MIN_VALUE;if(e+1>=LQ)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%Fc|0,e/Fc|0,r)}static fromBigInt(e,r){let n=BigInt(4294967295),o=BigInt(32);return new t(Number(e&n),Number(e>>o&n),r)}static _fromString(e,r,n){if(e.length===0)throw new X("empty string");if(n<2||36<n)throw new X("radix");let o;if((o=e.indexOf("-"))>0)throw new X("interior hyphen");if(o===0)return t._fromString(e.substring(1),r,n).neg();let i=t.fromNumber(Math.pow(n,8)),s=t.ZERO;for(let u=0;u<e.length;u+=8){let a=Math.min(8,e.length-u),c=parseInt(e.substring(u,u+a),n);if(a<8){let d=t.fromNumber(Math.pow(n,a));s=s.mul(d).add(t.fromNumber(c))}else s=s.mul(i),s=s.add(t.fromNumber(c))}return s.unsigned=r,s}static fromStringStrict(e,r,n){let o=!1;if(typeof r=="number"?(n=r,r=!1):o=!!r,n??=10,e.trim()!==e)throw new X(`Input: '${e}' contains leading and/or trailing whitespace`);if(!xQ(e,n))throw new X(`Input: '${e}' contains invalid characters for radix: ${n}`);let i=nI(e),s=t._fromString(i,o,n);if(s.toString(n).toLowerCase()!==i.toLowerCase())throw new X(`Input: ${e} is not representable as ${s.unsigned?"an unsigned":"a signed"} 64-bit Long ${n!=null?`with radix: ${n}`:""}`);return s}static fromString(e,r,n){let o=!1;return typeof r=="number"?(n=r,r=!1):o=!!r,n??=10,e==="NaN"&&n<24||(e==="Infinity"||e==="+Infinity"||e==="-Infinity")&&n<35?t.ZERO:t._fromString(e,o,n)}static fromBytes(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)}static fromBytesLE(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)}static fromBytesBE(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}static isLong(e){return e!=null&&typeof e=="object"&&"__isLong__"in e&&e.__isLong__===!0}static fromValue(e,r){return typeof e=="number"?t.fromNumber(e,r):typeof e=="string"?t.fromString(e,r):t.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)}add(e){t.isLong(e)||(e=t.fromValue(e));let r=this.high>>>16,n=this.high&65535,o=this.low>>>16,i=this.low&65535,s=e.high>>>16,u=e.high&65535,a=e.low>>>16,c=e.low&65535,d=0,p=0,m=0,E=0;return E+=i+c,m+=E>>>16,E&=65535,m+=o+a,p+=m>>>16,m&=65535,p+=n+u,d+=p>>>16,p&=65535,d+=r+s,d&=65535,t.fromBits(m<<16|E,d<<16|p,this.unsigned)}and(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;let r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw new X("division by zero");if(jn){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;let i=(this.unsigned?jn.div_u:jn.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(i,jn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;let r,n,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;o=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(r=this.shr(1).div(e).shl(1),r.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(n=this.sub(e.mul(r)),o=r.add(n.div(e)),o));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=t.ZERO}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));let i=Math.ceil(Math.log(r)/Math.LN2),s=i<=48?1:Math.pow(2,i-48),u=t.fromNumber(r),a=u.mul(e);for(;a.isNegative()||a.gt(n);)r-=s,u=t.fromNumber(r,this.unsigned),a=u.mul(e);u.isZero()&&(u=t.ONE),o=o.add(u),n=n.sub(a)}return o}div(e){return this.divide(e)}equals(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();let e=this.high!==0?this.high:this.low,r;for(r=31;r>0&&(e&1<<r)===0;r--);return this.high!==0?r+33:r+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(e){return this.comp(e)<0}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return this.comp(e)<=0}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(t.isLong(e)||(e=t.fromValue(e)),jn){let r=(this.unsigned?jn.rem_u:jn.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,jn.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),jn){let y=jn.mul(this.low,this.high,e.low,e.high);return t.fromBits(y,jn.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);let r=this.high>>>16,n=this.high&65535,o=this.low>>>16,i=this.low&65535,s=e.high>>>16,u=e.high&65535,a=e.low>>>16,c=e.low&65535,d=0,p=0,m=0,E=0;return E+=i*c,m+=E>>>16,E&=65535,m+=o*c,p+=m>>>16,m&=65535,m+=i*a,p+=m>>>16,m&=65535,p+=n*c,d+=p>>>16,p&=65535,p+=o*a,d+=p>>>16,p&=65535,p+=i*u,d+=p>>>16,p&=65535,d+=r*c+n*a+o*u+i*s,d&=65535,t.fromBits(m<<16|E,d<<16|p,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)}neg(){return this.negate()}not(){return t.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;{let r=this.high;if(e<32){let n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*Fc+(this.low>>>0):this.high*Fc+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){let e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){let e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]}toSigned(){return this.unsigned?t.fromBits(this.low,this.high,!1):this}toString(e){if(e=e||10,e<2||36<e)throw new X("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(t.MIN_VALUE)){let i=t.fromNumber(e),s=this.div(i),u=s.mul(i).sub(this);return s.toString(e)+u.toInt().toString(e)}else return"-"+this.neg().toString(e);let r=t.fromNumber(Math.pow(e,6),this.unsigned),n=this,o="";for(;;){let i=n.div(r),u=(n.sub(i.mul(r)).toInt()>>>0).toString(e);if(n=i,n.isZero())return u+o;for(;u.length<6;)u="0"+u;o=""+u+o}}toUnsigned(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)}xor(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,r){let{useBigInt64:n=!1,relaxed:o=!0}={...r};if(e.$numberLong.length>UQ)throw new X("$numberLong string is too long");if(!qQ.test(e.$numberLong))throw new X(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(n){let s=BigInt(e.$numberLong);return BigInt.asIntN(64,s)}let i=t.fromString(e.$numberLong);return o?i.toNumber():i}inspect(e,r,n){n??=wn;let o=n(this.toString(),r),i=this.unsigned?`, ${n(this.unsigned,r)}`:"";return`new Long(${o}${i})`}};se.TWO_PWR_24=se.fromInt(kQ);se.MAX_UNSIGNED_VALUE=se.fromBits(-1,-1,!0);se.ZERO=se.fromInt(0);se.UZERO=se.fromInt(0,!0);se.ONE=se.fromInt(1);se.UONE=se.fromInt(1,!0);se.NEG_ONE=se.fromInt(-1);se.MAX_VALUE=se.fromBits(-1,2147483647,!1);se.MIN_VALUE=se.fromBits(0,-2147483648,!1);var GQ=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,VQ=/^(\+|-)?(Infinity|inf)$/i,$Q=/^(\+|-)?NaN$/i,Dc=6111,H1=-6176,DD=6176,ID=34,yS=J.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),MD=J.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),ND=J.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),HQ=/^([-+])?(\d+)?$/,WQ=31,BD=16383,zQ=30,jQ=31;function PD(t){return!isNaN(parseInt(t,10))}function KQ(t){let e=se.fromNumber(1e9),r=se.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(let n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new se(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function YQ(t,e){if(!t&&!e)return{high:se.fromNumber(0),low:se.fromNumber(0)};let r=t.shiftRightUnsigned(32),n=new se(t.getLowBits(),0),o=e.shiftRightUnsigned(32),i=new se(e.getLowBits(),0),s=r.multiply(o),u=r.multiply(i),a=n.multiply(o),c=n.multiply(i);return s=s.add(u.shiftRightUnsigned(32)),u=new se(u.getLowBits(),0).add(a).add(c.shiftRightUnsigned(32)),s=s.add(u.shiftRightUnsigned(32)),c=u.shiftLeft(32).add(new se(c.getLowBits(),0)),{high:s,low:c}}function JQ(t,e){let r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){let o=t.low>>>0,i=e.low>>>0;if(o<i)return!0}return!1}function vo(t,e){throw new X(`"${t}" is not a valid Decimal128 string - ${e}`)}var Hu=class t extends Ar{get _bsontype(){return"Decimal128"}constructor(e){if(super(),typeof e=="string")this.bytes=t.fromString(e).bytes;else if(e instanceof Uint8Array||Mc(e)){if(e.byteLength!==16)throw new X("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new X("Decimal128 must take a Buffer or string")}static fromString(e){return t._fromString(e,{allowRounding:!1})}static fromStringWithRounding(e){return t._fromString(e,{allowRounding:!0})}static _fromString(e,r){let n=!1,o=!1,i=!1,s=!1,u=0,a=0,c=0,d=0,p=0,m=[0],E=0,y=0,A=0,S=0,b=new se(0,0),P=new se(0,0),B=0,v=0;if(e.length>=7e3)throw new X(""+e+" not a valid Decimal128 string");let I=e.match(GQ),O=e.match(VQ),z=e.match($Q);if(!I&&!O&&!z||e.length===0)throw new X(""+e+" not a valid Decimal128 string");if(I){let Y=I[2],te=I[4],le=I[5],ue=I[6];te&&ue===void 0&&vo(e,"missing exponent power"),te&&Y===void 0&&vo(e,"missing exponent base"),te===void 0&&(le||ue)&&vo(e,"missing e before exponent")}if((e[v]==="+"||e[v]==="-")&&(o=!0,n=e[v++]==="-"),!PD(e[v])&&e[v]!=="."){if(e[v]==="i"||e[v]==="I")return new t(n?MD:ND);if(e[v]==="N")return new t(yS)}for(;PD(e[v])||e[v]===".";){if(e[v]==="."){i&&vo(e,"contains multiple periods"),i=!0,v=v+1;continue}E<ID&&(e[v]!=="0"||s)&&(s||(p=a),s=!0,m[y++]=parseInt(e[v],10),E=E+1),s&&(c=c+1),i&&(d=d+1),a=a+1,v=v+1}if(i&&!a)throw new X(""+e+" not a valid Decimal128 string");if(e[v]==="e"||e[v]==="E"){let Y=e.substr(++v).match(HQ);if(!Y||!Y[2])return new t(yS);S=parseInt(Y[0],10),v=v+Y[0].length}if(e[v])return new t(yS);if(!E)m[0]=0,c=1,E=1,u=0;else if(A=E-1,u=c,u!==1)for(;e[p+u-1+Number(o)+Number(i)]==="0";)u=u-1;for(S<=d&&d>S+16384?S=H1:S=S-d;S>Dc;){if(A=A+1,A>=ID){if(u===0){S=Dc;break}vo(e,"overflow")}S=S-1}if(r.allowRounding){for(;S<H1||E<c;){if(A===0&&u<E){S=H1,u=0;break}if(E<c?c=c-1:A=A-1,S<Dc)S=S+1;else{if(m.join("").match(/^0+$/)){S=Dc;break}vo(e,"overflow")}}if(A+1<u){let Y=a;i&&(p=p+1,Y=Y+1),o&&(p=p+1,Y=Y+1);let te=parseInt(e[p+A+1],10),le=0;if(te>=5&&(le=1,te===5)){le=m[A]%2===1?1:0;for(let ue=p+A+2;ue<Y;ue++)if(parseInt(e[ue],10)){le=1;break}}if(le){let ue=A;for(;ue>=0&&++m[ue]>9;ue--)if(m[ue]=0,ue===0)if(S<Dc)S=S+1,m[ue]=1;else return new t(n?MD:ND)}}}else{for(;S<H1||E<c;){if(A===0){if(u===0){S=H1;break}vo(e,"exponent underflow")}E<c?(e[c-1+Number(o)+Number(i)]!=="0"&&u!==0&&vo(e,"inexact rounding"),c=c-1):(m[A]!==0&&vo(e,"inexact rounding"),A=A-1),S<Dc?S=S+1:vo(e,"overflow")}A+1<u&&(i&&(p=p+1),o&&(p=p+1),parseInt(e[p+A+1],10)!==0&&vo(e,"inexact rounding"))}if(b=se.fromNumber(0),P=se.fromNumber(0),u===0)b=se.fromNumber(0),P=se.fromNumber(0);else if(A<17){let Y=0;for(P=se.fromNumber(m[Y++]),b=new se(0,0);Y<=A;Y++)P=P.multiply(se.fromNumber(10)),P=P.add(se.fromNumber(m[Y]))}else{let Y=0;for(b=se.fromNumber(m[Y++]);Y<=A-17;Y++)b=b.multiply(se.fromNumber(10)),b=b.add(se.fromNumber(m[Y]));for(P=se.fromNumber(m[Y++]);Y<=A;Y++)P=P.multiply(se.fromNumber(10)),P=P.add(se.fromNumber(m[Y]))}let Z=YQ(b,se.fromString("100000000000000000"));Z.low=Z.low.add(P),JQ(Z.low,P)&&(Z.high=Z.high.add(se.fromNumber(1))),B=S+DD;let M={low:se.fromNumber(0),high:se.fromNumber(0)};Z.high.shiftRightUnsigned(49).and(se.fromNumber(1)).equals(se.fromNumber(1))?(M.high=M.high.or(se.fromNumber(3).shiftLeft(61)),M.high=M.high.or(se.fromNumber(B).and(se.fromNumber(16383).shiftLeft(47))),M.high=M.high.or(Z.high.and(se.fromNumber(0x7fffffffffff)))):(M.high=M.high.or(se.fromNumber(B&16383).shiftLeft(49)),M.high=M.high.or(Z.high.and(se.fromNumber(562949953421311)))),M.low=Z.low,n&&(M.high=M.high.or(se.fromString("9223372036854775808")));let V=J.allocateUnsafe(16);return v=0,V[v++]=M.low.low&255,V[v++]=M.low.low>>8&255,V[v++]=M.low.low>>16&255,V[v++]=M.low.low>>24&255,V[v++]=M.low.high&255,V[v++]=M.low.high>>8&255,V[v++]=M.low.high>>16&255,V[v++]=M.low.high>>24&255,V[v++]=M.high.low&255,V[v++]=M.high.low>>8&255,V[v++]=M.high.low>>16&255,V[v++]=M.high.low>>24&255,V[v++]=M.high.high&255,V[v++]=M.high.high>>8&255,V[v++]=M.high.high>>16&255,V[v++]=M.high.high>>24&255,new t(V)}toString(){let e,r=0,n=new Array(36);for(let v=0;v<n.length;v++)n[v]=0;let o=0,i=!1,s,u={parts:[0,0,0,0]},a,c,d=[];o=0;let p=this.bytes,m=p[o++]|p[o++]<<8|p[o++]<<16|p[o++]<<24,E=p[o++]|p[o++]<<8|p[o++]<<16|p[o++]<<24,y=p[o++]|p[o++]<<8|p[o++]<<16|p[o++]<<24,A=p[o++]|p[o++]<<8|p[o++]<<16|p[o++]<<24;o=0,{low:new se(m,E),high:new se(y,A)}.high.lessThan(se.ZERO)&&d.push("-");let b=A>>26&WQ;if(b>>3===3){if(b===zQ)return d.join("")+"Infinity";if(b===jQ)return"NaN";e=A>>15&BD,s=8+(A>>14&1)}else s=A>>14&7,e=A>>17&BD;let P=e-DD;if(u.parts[0]=(A&16383)+((s&15)<<14),u.parts[1]=y,u.parts[2]=E,u.parts[3]=m,u.parts[0]===0&&u.parts[1]===0&&u.parts[2]===0&&u.parts[3]===0)i=!0;else for(c=3;c>=0;c--){let v=0,I=KQ(u);if(u=I.quotient,v=I.rem.low,!!v)for(a=8;a>=0;a--)n[c*9+a]=v%10,v=Math.floor(v/10)}if(i)r=1,n[o]=0;else for(r=36;!n[o];)r=r-1,o=o+1;let B=r-1+P;if(B>=34||B<=-7||P>0){if(r>34)return d.push("0"),P>0?d.push(`E+${P}`):P<0&&d.push(`E${P}`),d.join("");d.push(`${n[o++]}`),r=r-1,r&&d.push(".");for(let v=0;v<r;v++)d.push(`${n[o++]}`);d.push("E"),B>0?d.push(`+${B}`):d.push(`${B}`)}else if(P>=0)for(let v=0;v<r;v++)d.push(`${n[o++]}`);else{let v=r+P;if(v>0)for(let I=0;I<v;I++)d.push(`${n[o++]}`);else d.push("0");for(d.push(".");v++<0;)d.push("0");for(let I=0;I<r-Math.max(v-1,0);I++)d.push(`${n[o++]}`)}return d.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return t.fromString(e.$numberDecimal)}inspect(e,r,n){return n??=wn,`new Decimal128(${n(this.toString(),r)})`}},Ns=class t extends Ar{get _bsontype(){return"Double"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}static fromString(e){let r=Number(e);if(e==="NaN")return new t(NaN);if(e==="Infinity")return new t(1/0);if(e==="-Infinity")return new t(-1/0);if(!Number.isFinite(r))throw new X(`Input: ${e} is not representable as a Double`);if(e.trim()!==e)throw new X(`Input: '${e}' contains whitespace`);if(e==="")throw new X("Input is an empty string");if(/[^-0-9.+eE]/.test(e))throw new X(`Input: '${e}' is not in decimal or exponential notation`);return new t(r)}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,r){let n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)}inspect(e,r,n){return n??=wn,`new Double(${n(this.value,r)})`}},Bs=class t extends Ar{get _bsontype(){return"Int32"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e|0}static fromString(e){let r=nI(e),n=Number(e);if(K1<n)throw new X(`Input: '${e}' is larger than the maximum value for Int32`);if(Y1>n)throw new X(`Input: '${e}' is smaller than the minimum value for Int32`);if(Number.isSafeInteger(n)){if(n.toString()!==r)throw new X(`Input: '${e}' is not a valid Int32 string`)}else throw new X(`Input: '${e}' is not a safe integer`);return new t(n)}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)}inspect(e,r,n){return n??=wn,`new Int32(${n(this.value,r)})`}},Wu=class t extends Ar{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MaxKey()"}},zu=class t extends Ar{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MinKey()"}},Vu=null,W1=new WeakMap,zi=class t extends Ar{get _bsontype(){return"ObjectId"}constructor(e){super();let r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new X("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=J.fromHex(e.toHexString()):r=e.id}else r=e;if(r==null||typeof r=="number")this.buffer=t.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this.buffer=J.toLocalBufferType(r);else if(typeof r=="string")if(t.validateHexString(r))this.buffer=J.fromHex(r),t.cacheHexString&&W1.set(this,r);else throw new X("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new X("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(e){this.buffer=e,t.cacheHexString&&W1.set(this,J.toHex(e))}static validateHexString(e){if(e?.length!==24)return!1;for(let r=0;r<24;r++){let n=e.charCodeAt(r);if(!(n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70))return!1}return!0}toHexString(){if(t.cacheHexString){let r=W1.get(this);if(r)return r}let e=J.toHex(this.id);return t.cacheHexString&&W1.set(this,e),e}static getInc(){return t.index=(t.index+1)%16777215}static generate(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));let r=t.getInc(),n=J.allocateUnsafe(12);return Ae.setInt32BE(n,0,e),Vu===null&&(Vu=J.randomBytes(5)),n[4]=Vu[0],n[5]=Vu[1],n[6]=Vu[2],n[7]=Vu[3],n[8]=Vu[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n}toString(e){return e==="base64"?J.toBase64(this.id):e==="hex"?this.toHexString():this.toHexString()}toJSON(){return this.toHexString()}static is(e){return e!=null&&typeof e=="object"&&"_bsontype"in e&&e._bsontype==="ObjectId"}equals(e){if(e==null)return!1;if(t.is(e))return this.buffer[11]===e.buffer[11]&&J.equals(this.buffer,e.buffer);if(typeof e=="string")return e.toLowerCase()===this.toHexString();if(typeof e=="object"&&typeof e.toHexString=="function"){let r=e.toHexString(),n=this.toHexString();return typeof r=="string"&&r.toLowerCase()===n}return!1}getTimestamp(){let e=new Date,r=Ae.getUint32BE(this.buffer,0);return e.setTime(Math.floor(r)*1e3),e}static createPk(){return new t}serializeInto(e,r){return e[r]=this.buffer[0],e[r+1]=this.buffer[1],e[r+2]=this.buffer[2],e[r+3]=this.buffer[3],e[r+4]=this.buffer[4],e[r+5]=this.buffer[5],e[r+6]=this.buffer[6],e[r+7]=this.buffer[7],e[r+8]=this.buffer[8],e[r+9]=this.buffer[9],e[r+10]=this.buffer[10],e[r+11]=this.buffer[11],12}static createFromTime(e){let r=J.allocate(12);for(let n=11;n>=4;n--)r[n]=0;return Ae.setInt32BE(r,0,e),new t(r)}static createFromHexString(e){if(e?.length!==24)throw new X("hex string must be 24 characters");return new t(J.fromHex(e))}static createFromBase64(e){if(e?.length!==16)throw new X("base64 string must be 16 characters");return new t(J.fromBase64(e))}static isValid(e){if(e==null)return!1;if(typeof e=="string")return t.validateHexString(e);try{return new t(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new t(e.$oid)}isCached(){return t.cacheHexString&&W1.has(this)}inspect(e,r,n){return n??=wn,`new ObjectId(${n(this.toHexString(),r)})`}};zi.index=Math.floor(Math.random()*16777215);function h0(t,e,r){let n=5;if(Array.isArray(t))for(let o=0;o<t.length;o++)n+=FD(o.toString(),t[o],e,!0,r);else{typeof t?.toBSON=="function"&&(t=t.toBSON());for(let o of Object.keys(t))n+=FD(o,t[o],e,!1,r)}return n}function FD(t,e,r=!1,n=!1,o=!1){switch(typeof e?.toBSON=="function"&&(e=e.toBSON()),typeof e){case"string":return 1+J.utf8ByteLength(t)+1+4+J.utf8ByteLength(e)+1;case"number":return Math.floor(e)===e&&e>=GD&&e<=qD&&e>=Y1&&e<=K1?(t!=null?J.utf8ByteLength(t)+1:0)+5:(t!=null?J.utf8ByteLength(t)+1:0)+9;case"undefined":return n||!o?(t!=null?J.utf8ByteLength(t)+1:0)+1:0;case"boolean":return(t!=null?J.utf8ByteLength(t)+1:0)+2;case"object":if(e!=null&&typeof e._bsontype=="string"&&e[xc]!==$u)throw new Hi;if(e==null||e._bsontype==="MinKey"||e._bsontype==="MaxKey")return(t!=null?J.utf8ByteLength(t)+1:0)+1;if(e._bsontype==="ObjectId")return(t!=null?J.utf8ByteLength(t)+1:0)+13;if(e instanceof Date||Bc(e))return(t!=null?J.utf8ByteLength(t)+1:0)+9;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer||GS(e))return(t!=null?J.utf8ByteLength(t)+1:0)+6+e.byteLength;if(e._bsontype==="Long"||e._bsontype==="Double"||e._bsontype==="Timestamp")return(t!=null?J.utf8ByteLength(t)+1:0)+9;if(e._bsontype==="Decimal128")return(t!=null?J.utf8ByteLength(t)+1:0)+17;if(e._bsontype==="Code")return e.scope!=null&&Object.keys(e.scope).length>0?(t!=null?J.utf8ByteLength(t)+1:0)+1+4+4+J.utf8ByteLength(e.code.toString())+1+h0(e.scope,r,o):(t!=null?J.utf8ByteLength(t)+1:0)+1+4+J.utf8ByteLength(e.code.toString())+1;if(e._bsontype==="Binary"){let i=e;return i.sub_type===Fe.SUBTYPE_BYTE_ARRAY?(t!=null?J.utf8ByteLength(t)+1:0)+(i.position+1+4+1+4):(t!=null?J.utf8ByteLength(t)+1:0)+(i.position+1+4+1)}else{if(e._bsontype==="Symbol")return(t!=null?J.utf8ByteLength(t)+1:0)+J.utf8ByteLength(e.value)+4+1+1;if(e._bsontype==="DBRef"){let i=Object.assign({$ref:e.collection,$id:e.oid},e.fields);return e.db!=null&&(i.$db=e.db),(t!=null?J.utf8ByteLength(t)+1:0)+1+h0(i,r,o)}else return e instanceof RegExp||Nc(e)?(t!=null?J.utf8ByteLength(t)+1:0)+1+J.utf8ByteLength(e.source)+1+(e.global?1:0)+(e.ignoreCase?1:0)+(e.multiline?1:0)+1:e._bsontype==="BSONRegExp"?(t!=null?J.utf8ByteLength(t)+1:0)+1+J.utf8ByteLength(e.pattern)+1+J.utf8ByteLength(e.options)+1:(t!=null?J.utf8ByteLength(t)+1:0)+h0(e,r,o)+1}case"function":return r?(t!=null?J.utf8ByteLength(t)+1:0)+1+4+J.utf8ByteLength(e.toString())+1:0;case"bigint":return(t!=null?J.utf8ByteLength(t)+1:0)+9;case"symbol":return 0;default:throw new X(`Unrecognized JS type: ${typeof e}`)}}function XQ(t){return t.split("").sort().join("")}var ji=class t extends Ar{get _bsontype(){return"BSONRegExp"}constructor(e,r){if(super(),this.pattern=e,this.options=XQ(r??""),this.pattern.indexOf("\0")!==-1)throw new X(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new X(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new X(`The regular expression option [${this.options[n]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new t(e.$regex,t.parseOptions(e.$options));if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new X(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}inspect(e,r,n){let o=wQ(r)??(u=>u);n??=wn;let i=o(n(this.pattern),"regexp"),s=o(n(this.options),"regexp");return`new BSONRegExp(${i}, ${s})`}},ju=class t extends Ar{get _bsontype(){return"BSONSymbol"}constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new t(e.$symbol)}inspect(e,r,n){return n??=wn,`new BSONSymbol(${n(this.value,r)})`}},QQ=se,Ps=class t extends QQ{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(e){if(e==null)super(0,0,!0);else if(typeof e=="bigint")super(e,!0);else if(se.isLong(e))super(e.low,e.high,!0);else if(typeof e=="object"&&"t"in e&&"i"in e){if(typeof e.t!="number"&&(typeof e.t!="object"||e.t._bsontype!=="Int32"))throw new X("Timestamp constructed from { t, i } must provide t as a number");if(typeof e.i!="number"&&(typeof e.i!="object"||e.i._bsontype!=="Int32"))throw new X("Timestamp constructed from { t, i } must provide i as a number");let r=Number(e.t),n=Number(e.i);if(r<0||Number.isNaN(r))throw new X("Timestamp constructed from { t, i } must provide a positive t");if(n<0||Number.isNaN(n))throw new X("Timestamp constructed from { t, i } must provide a positive i");if(r>4294967295)throw new X("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(n>4294967295)throw new X("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(n,r,!0)}else throw new X("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new t(se.fromInt(e,!0))}static fromNumber(e){return new t(se.fromNumber(e,!0))}static fromBits(e,r){return new t({i:e,t:r})}static fromString(e,r){return new t(se.fromString(e,!0,r))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(e){let r=se.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i,n=se.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t;return new t({t:n,i:r})}inspect(e,r,n){n??=wn;let o=n(this.t,r),i=n(this.i,r);return`new Timestamp({ t: ${o}, i: ${i} })`}};Ps.MAX_VALUE=se.MAX_UNSIGNED_VALUE;var ZQ=se.fromNumber(qD),eZ=se.fromNumber(GD);function iI(t,e,r){e=e??{};let n=e&&e.index?e.index:0,o=Ae.getInt32LE(t,n);if(o<5)throw new X(`bson size must be >= 5, is ${o}`);if(e.allowObjectSmallerThanBufferSize&&t.length<o)throw new X(`buffer length ${t.length} must be >= bson size ${o}`);if(!e.allowObjectSmallerThanBufferSize&&t.length!==o)throw new X(`buffer length ${t.length} must === bson size ${o}`);if(o+n>t.byteLength)throw new X(`(bson size ${o} + options.index ${n} must be <= buffer length ${t.byteLength})`);if(t[n+o-1]!==0)throw new X("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return p0(t,n,e,r)}var tZ=/^\$ref$|^\$id$|^\$db$/;function p0(t,e,r,n=!1){let o=r.fieldsAsRaw==null?null:r.fieldsAsRaw,i=r.raw==null?!1:r.raw,s=typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1,u=r.promoteBuffers??!1,a=r.promoteLongs??!0,c=r.promoteValues??!0,d=r.useBigInt64??!1;if(d&&!c)throw new X("Must either request bigint or Long for int64 deserialization");if(d&&!a)throw new X("Must either request bigint or Long for int64 deserialization");let p=r.validation==null?{utf8:!0}:r.validation,m=!0,E,y,A=p.utf8;if(typeof A=="boolean")E=A;else{m=!1;let I=Object.keys(A).map(function(O){return A[O]});if(I.length===0)throw new X("UTF-8 validation setting cannot be empty");if(typeof I[0]!="boolean")throw new X("Invalid UTF-8 validation option, must specify boolean values");if(E=I[0],!I.every(O=>O===E))throw new X("Invalid UTF-8 validation option - keys must be all true or all false")}if(!m){y=new Set;for(let I of Object.keys(A))y.add(I)}let S=e;if(t.length<5)throw new X("corrupt bson message < 5 bytes long");let b=Ae.getInt32LE(t,e);if(e+=4,b<5||b>t.length)throw new X("corrupt bson message");let P=n?[]:{},B=0,v=n?!1:null;for(;;){let I=t[e++];if(I===0)break;let O=e;for(;t[O]!==0&&O<t.length;)O++;if(O>=t.byteLength)throw new X("Bad BSON Document: illegal CString");let z=n?B++:J.toUTF8(t,e,O,!1),Z=!0;m||y?.has(z)?Z=E:Z=!E,v!==!1&&z[0]==="$"&&(v=tZ.test(z));let M;if(e=O+1,I===VD){let V=Ae.getInt32LE(t,e);if(e+=4,V<=0||V>t.length-e||t[e+V-1]!==0)throw new X("bad string length in bson");M=J.toUTF8(t,e,e+V-1,Z),e=e+V}else if(I===HD){let V=J.allocateUnsafe(12);for(let Y=0;Y<12;Y++)V[Y]=t[e+Y];M=new zi(V),e=e+12}else if(I===z1&&c===!1)M=new Bs(Ae.getInt32LE(t,e)),e+=4;else if(I===z1)M=Ae.getInt32LE(t,e),e+=4;else if(I===$S)M=Ae.getFloat64LE(t,e),e+=8,c===!1&&(M=new Ns(M));else if(I===zD){let V=Ae.getInt32LE(t,e),Y=Ae.getInt32LE(t,e+4);e+=8,M=new Date(new se(V,Y).toNumber())}else if(I===WD){if(t[e]!==0&&t[e]!==1)throw new X("illegal boolean type value");M=t[e++]===1}else if(I===HS){let V=e,Y=Ae.getInt32LE(t,e);if(Y<=0||Y>t.length-e)throw new X("bad embedded document length in bson");if(i)M=t.subarray(e,e+Y);else{let te=r;m||(te={...r,validation:{utf8:Z}}),M=p0(t,V,te,!1)}e=e+Y}else if(I===$D){let V=e,Y=Ae.getInt32LE(t,e),te=r,le=e+Y;if(o&&o[z]&&(te={...r,raw:!0}),m||(te={...te,validation:{utf8:Z}}),M=p0(t,V,te,!0),e=e+Y,t[e-1]!==0)throw new X("invalid array terminator byte");if(e!==le)throw new X("corrupted array bson")}else if(I===TQ)M=void 0;else if(I===zS)M=null;else if(I===KS)if(d)M=Ae.getBigInt64LE(t,e),e+=8;else{let V=Ae.getInt32LE(t,e),Y=Ae.getInt32LE(t,e+4);e+=8;let te=new se(V,Y);a&&c===!0?M=te.lessThanOrEqual(ZQ)&&te.greaterThanOrEqual(eZ)?te.toNumber():te:M=te}else if(I===JD){let V=J.allocateUnsafe(16);for(let Y=0;Y<16;Y++)V[Y]=t[e+Y];e=e+16,M=new Hu(V)}else if(I===WS){let V=Ae.getInt32LE(t,e);e+=4;let Y=V,te=t[e++];if(V<0)throw new X("Negative binary type element size found");if(V>t.byteLength)throw new X("Binary type size larger than document size");if(te===Fe.SUBTYPE_BYTE_ARRAY){if(V=Ae.getInt32LE(t,e),e+=4,V<0)throw new X("Negative binary type element size found for subtype 0x02");if(V>Y-4)throw new X("Binary type with subtype 0x02 contains too long binary size");if(V<Y-4)throw new X("Binary type with subtype 0x02 contains too short binary size")}u&&c?M=J.toLocalBufferType(t.subarray(e,e+V)):(M=new Fe(t.subarray(e,e+V),te),te===YS&&Ms.isValid(M)&&(M=M.toUUID())),e=e+V}else if(I===m0&&s===!1){for(O=e;t[O]!==0&&O<t.length;)O++;if(O>=t.length)throw new X("Bad BSON Document: illegal CString");let V=J.toUTF8(t,e,O,!1);for(e=O+1,O=e;t[O]!==0&&O<t.length;)O++;if(O>=t.length)throw new X("Bad BSON Document: illegal CString");let Y=J.toUTF8(t,e,O,!1);e=O+1;let te=new Array(Y.length);for(O=0;O<Y.length;O++)switch(Y[O]){case"m":te[O]="m";break;case"s":te[O]="g";break;case"i":te[O]="i";break}M=new RegExp(V,te.join(""))}else if(I===m0&&s===!0){for(O=e;t[O]!==0&&O<t.length;)O++;if(O>=t.length)throw new X("Bad BSON Document: illegal CString");let V=J.toUTF8(t,e,O,!1);for(e=O+1,O=e;t[O]!==0&&O<t.length;)O++;if(O>=t.length)throw new X("Bad BSON Document: illegal CString");let Y=J.toUTF8(t,e,O,!1);e=O+1,M=new ji(V,Y)}else if(I===jD){let V=Ae.getInt32LE(t,e);if(e+=4,V<=0||V>t.length-e||t[e+V-1]!==0)throw new X("bad string length in bson");let Y=J.toUTF8(t,e,e+V-1,Z);M=c?Y:new ju(Y),e=e+V}else if(I===YD)M=new Ps({i:Ae.getUint32LE(t,e),t:Ae.getUint32LE(t,e+4)}),e+=8;else if(I===XD)M=new zu;else if(I===QD)M=new Wu;else if(I===jS){let V=Ae.getInt32LE(t,e);if(e+=4,V<=0||V>t.length-e||t[e+V-1]!==0)throw new X("bad string length in bson");let Y=J.toUTF8(t,e,e+V-1,Z);M=new Wi(Y),e=e+V}else if(I===KD){let V=Ae.getInt32LE(t,e);if(e+=4,V<13)throw new X("code_w_scope total size shorter minimum expected length");let Y=Ae.getInt32LE(t,e);if(e+=4,Y<=0||Y>t.length-e||t[e+Y-1]!==0)throw new X("bad string length in bson");let te=J.toUTF8(t,e,e+Y-1,Z);e=e+Y;let le=e,ue=Ae.getInt32LE(t,e),Be=p0(t,le,r,!1);if(e=e+ue,V<8+ue+Y)throw new X("code_w_scope total size is too short, truncating scope");if(V>8+ue+Y)throw new X("code_w_scope total size is too long, clips outer document");M=new Wi(te,Be)}else if(I===bQ){let V=Ae.getInt32LE(t,e);if(e+=4,V<=0||V>t.length-e||t[e+V-1]!==0)throw new X("bad string length in bson");let Y=J.toUTF8(t,e,e+V-1,Z);e=e+V;let te=J.allocateUnsafe(12);for(let ue=0;ue<12;ue++)te[ue]=t[e+ue];let le=new zi(te);e=e+12,M=new ai(Y,le)}else throw new X(`Detected unknown BSON type ${I.toString(16)} for fieldname "${z}"`);z==="__proto__"?Object.defineProperty(P,z,{value:M,writable:!0,enumerable:!0,configurable:!0}):P[z]=M}if(b!==e-S)throw n?new X("corrupt array bson"):new X("corrupt object bson");if(!v)return P;if(rI(P)){let I=Object.assign({},P);return delete I.$ref,delete I.$id,delete I.$db,new ai(P.$ref,P.$id,P.$db,I)}return P}var g0=/\x00/,xD=new Set(["$db","$ref","$id","$clusterTime"]);function CS(t,e,r,n){t[n++]=VD;let o=J.encodeUTF8Into(t,e,n);n=n+o+1,t[n-1]=0;let i=J.encodeUTF8Into(t,r,n+4);return Ae.setInt32LE(t,n,i+1),n=n+4+i,t[n++]=0,n}function AS(t,e,r,n){let i=!Object.is(r,-0)&&Number.isSafeInteger(r)&&r<=K1&&r>=Y1?z1:$S;t[n++]=i;let s=J.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,i===z1?n+=Ae.setInt32LE(t,n,r):n+=Ae.setFloat64LE(t,n,r),n}function SS(t,e,r,n){t[n++]=KS;let o=J.encodeUTF8Into(t,e,n);return n+=o,t[n++]=0,n+=Ae.setBigInt64LE(t,n,r),n}function Ic(t,e,r,n){t[n++]=zS;let o=J.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,n}function _S(t,e,r,n){t[n++]=WD;let o=J.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,t[n++]=r?1:0,n}function wS(t,e,r,n){t[n++]=zD;let o=J.encodeUTF8Into(t,e,n);n=n+o,t[n++]=0;let i=se.fromNumber(r.getTime()),s=i.getLowBits(),u=i.getHighBits();return n+=Ae.setInt32LE(t,n,s),n+=Ae.setInt32LE(t,n,u),n}function TS(t,e,r,n){t[n++]=m0;let o=J.encodeUTF8Into(t,e,n);if(n=n+o,t[n++]=0,r.source&&r.source.match(g0)!=null)throw new X("value "+r.source+" must not contain null bytes");return n=n+J.encodeUTF8Into(t,r.source,n),t[n++]=0,r.ignoreCase&&(t[n++]=105),r.global&&(t[n++]=115),r.multiline&&(t[n++]=109),t[n++]=0,n}function bS(t,e,r,n){t[n++]=m0;let o=J.encodeUTF8Into(t,e,n);if(n=n+o,t[n++]=0,r.pattern.match(g0)!=null)throw new X("pattern "+r.pattern+" must not contain null bytes");n=n+J.encodeUTF8Into(t,r.pattern,n),t[n++]=0;let i=r.options.split("").sort().join("");return n=n+J.encodeUTF8Into(t,i,n),t[n++]=0,n}function vS(t,e,r,n){r===null?t[n++]=zS:r._bsontype==="MinKey"?t[n++]=XD:t[n++]=QD;let o=J.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,n}function OS(t,e,r,n){t[n++]=HD;let o=J.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,n+=r.serializeInto(t,n),n}function RS(t,e,r,n){t[n++]=WS;let o=J.encodeUTF8Into(t,e,n);n=n+o,t[n++]=0;let i=r.length;if(n+=Ae.setInt32LE(t,n,i),t[n++]=vQ,i<=16)for(let s=0;s<i;s++)t[n+s]=r[s];else t.set(r,n);return n=n+i,n}function DS(t,e,r,n,o,i,s,u,a){if(a.has(r))throw new X("Cannot convert circular structure to BSON");a.add(r),t[n++]=Array.isArray(r)?$D:HS;let c=J.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let d=J1(t,r,o,n,i+1,s,u,a);return a.delete(r),d}function IS(t,e,r,n){t[n++]=JD;let o=J.encodeUTF8Into(t,e,n);n=n+o,t[n++]=0;for(let i=0;i<16;i++)t[n+i]=r.bytes[i];return n+16}function MS(t,e,r,n){t[n++]=r._bsontype==="Long"?KS:YD;let o=J.encodeUTF8Into(t,e,n);n=n+o,t[n++]=0;let i=r.getLowBits(),s=r.getHighBits();return n+=Ae.setInt32LE(t,n,i),n+=Ae.setInt32LE(t,n,s),n}function NS(t,e,r,n){r=r.valueOf(),t[n++]=z1;let o=J.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,n+=Ae.setInt32LE(t,n,r),n}function BS(t,e,r,n){t[n++]=$S;let o=J.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,n+=Ae.setFloat64LE(t,n,r.value),n}function PS(t,e,r,n){t[n++]=jS;let o=J.encodeUTF8Into(t,e,n);n=n+o,t[n++]=0;let i=r.toString(),s=J.encodeUTF8Into(t,i,n+4)+1;return Ae.setInt32LE(t,n,s),n=n+4+s-1,t[n++]=0,n}function FS(t,e,r,n,o=!1,i=0,s=!1,u=!0,a){if(r.scope&&typeof r.scope=="object"){t[n++]=KD;let c=J.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let d=n,p=r.code;n=n+4;let m=J.encodeUTF8Into(t,p,n+4)+1;Ae.setInt32LE(t,n,m),t[n+4+m-1]=0,n=n+m+4;let E=J1(t,r.scope,o,n,i+1,s,u,a);n=E-1;let y=E-d;d+=Ae.setInt32LE(t,d,y),t[n++]=0}else{t[n++]=jS;let c=J.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let d=r.code.toString(),p=J.encodeUTF8Into(t,d,n+4)+1;Ae.setInt32LE(t,n,p),n=n+4+p-1,t[n++]=0}return n}function xS(t,e,r,n){t[n++]=WS;let o=J.encodeUTF8Into(t,e,n);n=n+o,t[n++]=0;let i=r.buffer,s=r.position;if(r.sub_type===Fe.SUBTYPE_BYTE_ARRAY&&(s=s+4),n+=Ae.setInt32LE(t,n,s),t[n++]=r.sub_type,r.sub_type===Fe.SUBTYPE_BYTE_ARRAY&&(s=s-4,n+=Ae.setInt32LE(t,n,s)),r.sub_type===Fe.SUBTYPE_VECTOR&&Gi(r),s<=16)for(let u=0;u<s;u++)t[n+u]=i[u];else t.set(i,n);return n=n+r.position,n}function kS(t,e,r,n){t[n++]=jD;let o=J.encodeUTF8Into(t,e,n);n=n+o,t[n++]=0;let i=J.encodeUTF8Into(t,r.value,n+4)+1;return Ae.setInt32LE(t,n,i),n=n+4+i-1,t[n++]=0,n}function LS(t,e,r,n,o,i,s){t[n++]=HS;let u=J.encodeUTF8Into(t,e,n);n=n+u,t[n++]=0;let a=n,c={$ref:r.collection||r.namespace,$id:r.oid};r.db!=null&&(c.$db=r.db),c=Object.assign(c,r.fields);let d=J1(t,c,!1,n,o+1,i,!0,s),p=d-a;return a+=Ae.setInt32LE(t,n,p),d}function J1(t,e,r,n,o,i,s,u){if(u==null){if(e==null)return t[0]=5,t[1]=0,t[2]=0,t[3]=0,t[4]=0,5;if(Array.isArray(e))throw new X("serialize does not support an array as the root input");if(typeof e!="object")throw new X("serialize does not support non-object as the root input");if("_bsontype"in e&&typeof e._bsontype=="string")throw new X("BSON types cannot be serialized as a document");if(Bc(e)||Nc(e)||Mc(e)||GS(e))throw new X("date, regexp, typedarray, and arraybuffer cannot be BSON documents");u=new Set}u.add(e);let a=n+4;if(Array.isArray(e))for(let d=0;d<e.length;d++){let p=`${d}`,m=e[d];typeof m?.toBSON=="function"&&(m=m.toBSON());let E=typeof m;if(m===void 0)a=Ic(t,p,m,a);else if(m===null)a=Ic(t,p,m,a);else if(E==="string")a=CS(t,p,m,a);else if(E==="number")a=AS(t,p,m,a);else if(E==="bigint")a=SS(t,p,m,a);else if(E==="boolean")a=_S(t,p,m,a);else if(E==="object"&&m._bsontype==null)m instanceof Date||Bc(m)?a=wS(t,p,m,a):m instanceof Uint8Array||Mc(m)?a=RS(t,p,m,a):m instanceof RegExp||Nc(m)?a=TS(t,p,m,a):a=DS(t,p,m,a,r,o,i,s,u);else if(E==="object"){if(m[xc]!==$u)throw new Hi;if(m._bsontype==="ObjectId")a=OS(t,p,m,a);else if(m._bsontype==="Decimal128")a=IS(t,p,m,a);else if(m._bsontype==="Long"||m._bsontype==="Timestamp")a=MS(t,p,m,a);else if(m._bsontype==="Double")a=BS(t,p,m,a);else if(m._bsontype==="Code")a=FS(t,p,m,a,r,o,i,s,u);else if(m._bsontype==="Binary")a=xS(t,p,m,a);else if(m._bsontype==="BSONSymbol")a=kS(t,p,m,a);else if(m._bsontype==="DBRef")a=LS(t,p,m,a,o,i,u);else if(m._bsontype==="BSONRegExp")a=bS(t,p,m,a);else if(m._bsontype==="Int32")a=NS(t,p,m,a);else if(m._bsontype==="MinKey"||m._bsontype==="MaxKey")a=vS(t,p,m,a);else if(typeof m._bsontype<"u")throw new X(`Unrecognized or invalid _bsontype: ${String(m._bsontype)}`)}else E==="function"&&i&&(a=PS(t,p,m,a))}else if(e instanceof Map||VS(e)){let d=e.entries(),p=!1;for(;!p;){let m=d.next();if(p=!!m.done,p)continue;let E=m.value?m.value[0]:void 0,y=m.value?m.value[1]:void 0;typeof y?.toBSON=="function"&&(y=y.toBSON());let A=typeof y;if(typeof E=="string"&&!xD.has(E)){if(E.match(g0)!=null)throw new X("key "+E+" must not contain null bytes");if(r){if(E[0]==="$")throw new X("key "+E+" must not start with '$'");if(E.includes("."))throw new X("key "+E+" must not contain '.'")}}if(y===void 0)s===!1&&(a=Ic(t,E,y,a));else if(y===null)a=Ic(t,E,y,a);else if(A==="string")a=CS(t,E,y,a);else if(A==="number")a=AS(t,E,y,a);else if(A==="bigint")a=SS(t,E,y,a);else if(A==="boolean")a=_S(t,E,y,a);else if(A==="object"&&y._bsontype==null)y instanceof Date||Bc(y)?a=wS(t,E,y,a):y instanceof Uint8Array||Mc(y)?a=RS(t,E,y,a):y instanceof RegExp||Nc(y)?a=TS(t,E,y,a):a=DS(t,E,y,a,r,o,i,s,u);else if(A==="object"){if(y[xc]!==$u)throw new Hi;if(y._bsontype==="ObjectId")a=OS(t,E,y,a);else if(y._bsontype==="Decimal128")a=IS(t,E,y,a);else if(y._bsontype==="Long"||y._bsontype==="Timestamp")a=MS(t,E,y,a);else if(y._bsontype==="Double")a=BS(t,E,y,a);else if(y._bsontype==="Code")a=FS(t,E,y,a,r,o,i,s,u);else if(y._bsontype==="Binary")a=xS(t,E,y,a);else if(y._bsontype==="BSONSymbol")a=kS(t,E,y,a);else if(y._bsontype==="DBRef")a=LS(t,E,y,a,o,i,u);else if(y._bsontype==="BSONRegExp")a=bS(t,E,y,a);else if(y._bsontype==="Int32")a=NS(t,E,y,a);else if(y._bsontype==="MinKey"||y._bsontype==="MaxKey")a=vS(t,E,y,a);else if(typeof y._bsontype<"u")throw new X(`Unrecognized or invalid _bsontype: ${String(y._bsontype)}`)}else A==="function"&&i&&(a=PS(t,E,y,a))}}else{if(typeof e?.toBSON=="function"&&(e=e.toBSON(),e!=null&&typeof e!="object"))throw new X("toBSON function did not return an object");for(let d of Object.keys(e)){let p=e[d];typeof p?.toBSON=="function"&&(p=p.toBSON());let m=typeof p;if(typeof d=="string"&&!xD.has(d)){if(d.match(g0)!=null)throw new X("key "+d+" must not contain null bytes");if(r){if(d[0]==="$")throw new X("key "+d+" must not start with '$'");if(d.includes("."))throw new X("key "+d+" must not contain '.'")}}if(p===void 0)s===!1&&(a=Ic(t,d,p,a));else if(p===null)a=Ic(t,d,p,a);else if(m==="string")a=CS(t,d,p,a);else if(m==="number")a=AS(t,d,p,a);else if(m==="bigint")a=SS(t,d,p,a);else if(m==="boolean")a=_S(t,d,p,a);else if(m==="object"&&p._bsontype==null)p instanceof Date||Bc(p)?a=wS(t,d,p,a):p instanceof Uint8Array||Mc(p)?a=RS(t,d,p,a):p instanceof RegExp||Nc(p)?a=TS(t,d,p,a):a=DS(t,d,p,a,r,o,i,s,u);else if(m==="object"){if(p[xc]!==$u)throw new Hi;if(p._bsontype==="ObjectId")a=OS(t,d,p,a);else if(p._bsontype==="Decimal128")a=IS(t,d,p,a);else if(p._bsontype==="Long"||p._bsontype==="Timestamp")a=MS(t,d,p,a);else if(p._bsontype==="Double")a=BS(t,d,p,a);else if(p._bsontype==="Code")a=FS(t,d,p,a,r,o,i,s,u);else if(p._bsontype==="Binary")a=xS(t,d,p,a);else if(p._bsontype==="BSONSymbol")a=kS(t,d,p,a);else if(p._bsontype==="DBRef")a=LS(t,d,p,a,o,i,u);else if(p._bsontype==="BSONRegExp")a=bS(t,d,p,a);else if(p._bsontype==="Int32")a=NS(t,d,p,a);else if(p._bsontype==="MinKey"||p._bsontype==="MaxKey")a=vS(t,d,p,a);else if(typeof p._bsontype<"u")throw new X(`Unrecognized or invalid _bsontype: ${String(p._bsontype)}`)}else m==="function"&&i&&(a=PS(t,d,p,a))}}u.delete(e),t[a++]=0;let c=a-n;return n+=Ae.setInt32LE(t,n,c),a}function rZ(t){return t!=null&&typeof t=="object"&&"_bsontype"in t&&typeof t._bsontype=="string"}var nZ={$oid:zi,$binary:Fe,$uuid:Fe,$symbol:ju,$numberInt:Bs,$numberDecimal:Hu,$numberDouble:Ns,$numberLong:se,$minKey:zu,$maxKey:Wu,$regex:ji,$regularExpression:ji,$timestamp:Ps};function sI(t,e={}){if(typeof t=="number"){let n=t<=K1&&t>=Y1,o=t<=LD&&t>=UD;if(e.relaxed||e.legacy)return t;if(Number.isInteger(t)&&!Object.is(t,-0)){if(n)return new Bs(t);if(o)return e.useBigInt64?BigInt(t):se.fromNumber(t)}return new Ns(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;let r=Object.keys(t).filter(n=>n.startsWith("$")&&t[n]!=null);for(let n=0;n<r.length;n++){let o=nZ[r[n]];if(o)return o.fromExtendedJSON(t,e)}if(t.$date!=null){let n=t.$date,o=new Date;if(e.legacy)if(typeof n=="number")o.setTime(n);else if(typeof n=="string")o.setTime(Date.parse(n));else if(typeof n=="bigint")o.setTime(Number(n));else throw new kc(`Unrecognized type for EJSON date: ${typeof n}`);else if(typeof n=="string")o.setTime(Date.parse(n));else if(se.isLong(n))o.setTime(n.toNumber());else if(typeof n=="number"&&e.relaxed)o.setTime(n);else if(typeof n=="bigint")o.setTime(Number(n));else throw new kc(`Unrecognized type for EJSON date: ${typeof n}`);return o}if(t.$code!=null){let n=Object.assign({},t);return t.$scope&&(n.$scope=sI(t.$scope)),Wi.fromExtendedJSON(t)}if(rI(t)||t.$dbPointer){let n=t.$ref?t:t.$dbPointer;if(n instanceof ai)return n;let o=Object.keys(n).filter(s=>s.startsWith("$")),i=!0;if(o.forEach(s=>{["$ref","$id","$db"].indexOf(s)===-1&&(i=!1)}),i)return ai.fromExtendedJSON(n)}return t}function oZ(t,e){return t.map((r,n)=>{e.seenObjects.push({propertyName:`index ${n}`,obj:null});try{return $i(r,e)}finally{e.seenObjects.pop()}})}function kD(t){let e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function $i(t,e){if(t instanceof Map||VS(t)){let r=Object.create(null);for(let[n,o]of t){if(typeof n!="string")throw new X("Can only serialize maps with string keys");r[n]=o}return $i(r,e)}if((typeof t=="object"||typeof t=="function")&&t!==null){let r=e.seenObjects.findIndex(n=>n.obj===t);if(r!==-1){let n=e.seenObjects.map(d=>d.propertyName),o=n.slice(0,r).map(d=>`${d} -> `).join(""),i=n[r],s=" -> "+n.slice(r+1,n.length-1).map(d=>`${d} -> `).join(""),u=n[n.length-1],a=" ".repeat(o.length+i.length/2),c="-".repeat(s.length+(i.length+u.length)/2-1);throw new X(`Converting circular structure to EJSON:
    ${o}${i}${s}${u}
    ${a}\\${c}/`)}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return oZ(t,e);if(t===void 0)return null;if(t instanceof Date||Bc(t)){let r=t.getTime(),n=r>-1&&r<2534023188e5;return e.legacy?e.relaxed&&n?{$date:t.getTime()}:{$date:kD(t)}:e.relaxed&&n?{$date:kD(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Number.isInteger(t)&&!Object.is(t,-0)){if(t>=Y1&&t<=K1)return{$numberInt:t.toString()};if(t>=UD&&t<=LD)return{$numberLong:t.toString()}}return{$numberDouble:Object.is(t,-0)?"-0.0":t.toString()}}if(typeof t=="bigint")return e.relaxed?Number(BigInt.asIntN(64,t)):{$numberLong:BigInt.asIntN(64,t).toString()};if(t instanceof RegExp||Nc(t)){let r=t.flags;if(r===void 0){let o=t.toString().match(/[gimuy]*$/);o&&(r=o[0])}return new ji(t.source,r).toExtendedJSON(e)}return t!=null&&typeof t=="object"?sZ(t,e):t}var iZ={Binary:t=>new Fe(t.value(),t.sub_type),Code:t=>new Wi(t.code,t.scope),DBRef:t=>new ai(t.collection||t.namespace,t.oid,t.db,t.fields),Decimal128:t=>new Hu(t.bytes),Double:t=>new Ns(t.value),Int32:t=>new Bs(t.value),Long:t=>se.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_),MaxKey:()=>new Wu,MinKey:()=>new zu,ObjectId:t=>new zi(t),BSONRegExp:t=>new ji(t.pattern,t.options),BSONSymbol:t=>new ju(t.value),Timestamp:t=>Ps.fromBits(t.low,t.high)};function sZ(t,e){if(t==null||typeof t!="object")throw new X("not an object instance");let r=t._bsontype;if(typeof r>"u"){let n={};for(let o of Object.keys(t)){e.seenObjects.push({propertyName:o,obj:null});try{let i=$i(t[o],e);o==="__proto__"?Object.defineProperty(n,o,{value:i,writable:!0,enumerable:!0,configurable:!0}):n[o]=i}finally{e.seenObjects.pop()}}return n}else{if(t!=null&&typeof t=="object"&&typeof t._bsontype=="string"&&t[xc]!==$u)throw new Hi;if(rZ(t)){let n=t;if(typeof n.toExtendedJSON!="function"){let o=iZ[t._bsontype];if(!o)throw new X("Unrecognized or invalid _bsontype: "+t._bsontype);n=o(n)}return r==="Code"&&n.scope?n=new Wi(n.code,$i(n.scope,e)):r==="DBRef"&&n.oid&&(n=new ai($i(n.collection,e),$i(n.oid,e),$i(n.db,e),$i(n.fields,e))),n.toExtendedJSON(e)}else throw new X("_bsontype must be a string, but was: "+typeof r)}}function uI(t,e){let r={useBigInt64:e?.useBigInt64??!1,relaxed:e?.relaxed??!0,legacy:e?.legacy??!1};return JSON.parse(t,(n,o)=>{if(n.indexOf("\0")!==-1)throw new X(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(n)}`);return sI(o,r)})}function aI(t,e,r,n){r!=null&&typeof r=="object"&&(n=r,r=0),e!=null&&typeof e=="object"&&!Array.isArray(e)&&(n=e,e=void 0,r=0);let o=Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}),i=$i(t,o);return JSON.stringify(i,e,r)}function uZ(t,e){return e=e||{},JSON.parse(aI(t,e))}function aZ(t,e){return e=e||{},uI(JSON.stringify(t),e)}var Ku=Object.create(null);Ku.parse=uI;Ku.stringify=aI;Ku.serialize=uZ;Ku.deserialize=aZ;Object.freeze(Ku);var wt={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function US(t,e){try{return Ae.getNonnegativeInt32LE(t,e)}catch(r){throw new Kn("BSON size cannot be negative",e,{cause:r})}}function qS(t,e){let r=e;for(;t[r]!==0;r++);if(r===t.length-1)throw new Kn("Null terminator not found",e);return r}function cZ(t,e=0){if(e??=0,t.length<5)throw new Kn(`Input must be at least 5 bytes, got ${t.length} bytes`,e);let r=US(t,e);if(r>t.length-e)throw new Kn(`Parsed documentSize (${r} bytes) does not match input length (${t.length} bytes)`,e);if(t[e+r-1]!==0)throw new Kn("BSON documents must end in 0x00",e+r);let n=[],o=e+4;for(;o<=r+e;){let i=t[o];if(o+=1,i===0){if(o-e!==r)throw new Kn("Invalid 0x00 type byte",o);break}let s=o,u=qS(t,o)-s;o+=u+1;let a;if(i===wt.double||i===wt.long||i===wt.date||i===wt.timestamp)a=8;else if(i===wt.int)a=4;else if(i===wt.objectId)a=12;else if(i===wt.decimal)a=16;else if(i===wt.bool)a=1;else if(i===wt.null||i===wt.undefined||i===wt.maxKey||i===wt.minKey)a=0;else if(i===wt.regex)a=qS(t,qS(t,o)+1)+1-o;else if(i===wt.object||i===wt.array||i===wt.javascriptWithScope)a=US(t,o);else if(i===wt.string||i===wt.binData||i===wt.dbPointer||i===wt.javascript||i===wt.symbol)a=US(t,o)+4,i===wt.binData&&(a+=1),i===wt.dbPointer&&(a+=12);else throw new Kn(`Invalid 0x${i.toString(16).padStart(2,"0")} type byte`,o);if(a>r)throw new Kn("value reports length larger than document",o);n.push([i,s,u,o,a]),o+=a}return n}var Lc=Object.create(null);Lc.parseToElements=cZ;Lc.ByteUtils=J;Lc.NumberUtils=Ae;Object.freeze(Lc);var cI=1024*1024*17,Is=J.allocate(cI);function lI(t){Is.length<t&&(Is=J.allocate(t))}function dI(t,e={}){let r=typeof e.checkKeys=="boolean"?e.checkKeys:!1,n=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,o=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0,i=typeof e.minInternalBufferSize=="number"?e.minInternalBufferSize:cI;Is.length<i&&(Is=J.allocate(i));let s=J1(Is,t,r,0,0,n,o,null),u=J.allocateUnsafe(s);return u.set(Is.subarray(0,s),0),u}function fI(t,e,r={}){let n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,o=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,i=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,s=typeof r.index=="number"?r.index:0,u=J1(Is,t,n,0,0,o,i,null);return e.set(Is.subarray(0,u),s),s+u-1}function hI(t,e={}){return iI(J.toLocalBufferType(t),e)}function pI(t,e={}){e=e||{};let r=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,n=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0;return h0(t,r,n)}function mI(t,e,r,n,o,i){let s=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},i),u=J.toLocalBufferType(t),a=e;for(let c=0;c<r;c++){let d=Ae.getInt32LE(u,a);s.index=a,n[o+c]=iI(u,s),a=a+d}return a}var lZ=Object.freeze({__proto__:null,BSONError:X,BSONOffsetError:Kn,BSONRegExp:ji,BSONRuntimeError:kc,BSONSymbol:ju,BSONType:ZD,BSONValue:Ar,BSONVersionError:Hi,Binary:Fe,Code:Wi,DBRef:ai,Decimal128:Hu,Double:Ns,EJSON:Ku,Int32:Bs,Long:se,MaxKey:Wu,MinKey:zu,ObjectId:zi,Timestamp:Ps,UUID:Ms,calculateObjectSize:pI,deserialize:hI,deserializeStream:mI,onDemand:Lc,serialize:dI,serializeWithBufferAndIndex:fI,setInternalBufferSize:lI});Qe.BSON=lZ;Qe.BSONError=X;Qe.BSONOffsetError=Kn;Qe.BSONRegExp=ji;Qe.BSONRuntimeError=kc;Qe.BSONSymbol=ju;Qe.BSONType=ZD;Qe.BSONValue=Ar;Qe.BSONVersionError=Hi;Qe.Binary=Fe;Qe.Code=Wi;Qe.DBRef=ai;Qe.Decimal128=Hu;Qe.Double=Ns;Qe.EJSON=Ku;Qe.Int32=Bs;Qe.Long=se;Qe.MaxKey=Wu;Qe.MinKey=zu;Qe.ObjectId=zi;Qe.Timestamp=Ps;Qe.UUID=Ms;Qe.calculateObjectSize=pI;Qe.deserialize=hI;Qe.deserializeStream=mI;Qe.onDemand=Lc;Qe.serialize=dI;Qe.serializeWithBufferAndIndex=fI;Qe.setInternalBufferSize=lI});var qe=R(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.toUTF8=ge.getBigInt64LE=ge.getFloat64LE=ge.getInt32LE=ge.UUID=ge.Timestamp=ge.serialize=ge.ObjectId=ge.MinKey=ge.MaxKey=ge.Long=ge.Int32=ge.EJSON=ge.Double=ge.deserialize=ge.Decimal128=ge.DBRef=ge.Code=ge.calculateObjectSize=ge.BSONType=ge.BSONSymbol=ge.BSONRegExp=ge.BSONError=ge.BSON=ge.Binary=void 0;ge.parseToElementsToArray=dZ;ge.pluckBSONSerializeOptions=fZ;ge.resolveBSONOptions=hZ;ge.parseUtf8ValidationOption=pZ;var X1=JS(),It=JS();Object.defineProperty(ge,"Binary",{enumerable:!0,get:function(){return It.Binary}});Object.defineProperty(ge,"BSON",{enumerable:!0,get:function(){return It.BSON}});Object.defineProperty(ge,"BSONError",{enumerable:!0,get:function(){return It.BSONError}});Object.defineProperty(ge,"BSONRegExp",{enumerable:!0,get:function(){return It.BSONRegExp}});Object.defineProperty(ge,"BSONSymbol",{enumerable:!0,get:function(){return It.BSONSymbol}});Object.defineProperty(ge,"BSONType",{enumerable:!0,get:function(){return It.BSONType}});Object.defineProperty(ge,"calculateObjectSize",{enumerable:!0,get:function(){return It.calculateObjectSize}});Object.defineProperty(ge,"Code",{enumerable:!0,get:function(){return It.Code}});Object.defineProperty(ge,"DBRef",{enumerable:!0,get:function(){return It.DBRef}});Object.defineProperty(ge,"Decimal128",{enumerable:!0,get:function(){return It.Decimal128}});Object.defineProperty(ge,"deserialize",{enumerable:!0,get:function(){return It.deserialize}});Object.defineProperty(ge,"Double",{enumerable:!0,get:function(){return It.Double}});Object.defineProperty(ge,"EJSON",{enumerable:!0,get:function(){return It.EJSON}});Object.defineProperty(ge,"Int32",{enumerable:!0,get:function(){return It.Int32}});Object.defineProperty(ge,"Long",{enumerable:!0,get:function(){return It.Long}});Object.defineProperty(ge,"MaxKey",{enumerable:!0,get:function(){return It.MaxKey}});Object.defineProperty(ge,"MinKey",{enumerable:!0,get:function(){return It.MinKey}});Object.defineProperty(ge,"ObjectId",{enumerable:!0,get:function(){return It.ObjectId}});Object.defineProperty(ge,"serialize",{enumerable:!0,get:function(){return It.serialize}});Object.defineProperty(ge,"Timestamp",{enumerable:!0,get:function(){return It.Timestamp}});Object.defineProperty(ge,"UUID",{enumerable:!0,get:function(){return It.UUID}});function dZ(t,e){let r=X1.BSON.onDemand.parseToElements(t,e);return Array.isArray(r)?r:[...r]}ge.getInt32LE=X1.BSON.onDemand.NumberUtils.getInt32LE;ge.getFloat64LE=X1.BSON.onDemand.NumberUtils.getFloat64LE;ge.getBigInt64LE=X1.BSON.onDemand.NumberUtils.getBigInt64LE;ge.toUTF8=X1.BSON.onDemand.ByteUtils.toUTF8;function fZ(t){let{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:o,promoteLongs:i,serializeFunctions:s,ignoreUndefined:u,bsonRegExp:a,raw:c,enableUtf8Validation:d}=t;return{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:o,promoteLongs:i,serializeFunctions:s,ignoreUndefined:u,bsonRegExp:a,raw:c,enableUtf8Validation:d}}function hZ(t,e){let r=e?.bsonOptions;return{raw:t?.raw??r?.raw??!1,useBigInt64:t?.useBigInt64??r?.useBigInt64??!1,promoteLongs:t?.promoteLongs??r?.promoteLongs??!0,promoteValues:t?.promoteValues??r?.promoteValues??!0,promoteBuffers:t?.promoteBuffers??r?.promoteBuffers??!1,ignoreUndefined:t?.ignoreUndefined??r?.ignoreUndefined??!1,bsonRegExp:t?.bsonRegExp??r?.bsonRegExp??!1,serializeFunctions:t?.serializeFunctions??r?.serializeFunctions??!1,fieldsAsRaw:t?.fieldsAsRaw??r?.fieldsAsRaw??{},enableUtf8Validation:t?.enableUtf8Validation??r?.enableUtf8Validation??!0}}function pZ(t){return t?.enableUtf8Validation===!1?{utf8:!1}:{utf8:{writeErrors:!1}}}});var ie=R(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.MongoWriteConcernError=G.MongoServerSelectionError=G.MongoSystemError=G.MongoMissingDependencyError=G.MongoMissingCredentialsError=G.MongoCompatibilityError=G.MongoInvalidArgumentError=G.MongoParseError=G.MongoNetworkTimeoutError=G.MongoNetworkError=G.MongoClientClosedError=G.MongoTopologyClosedError=G.MongoCursorExhaustedError=G.MongoServerClosedError=G.MongoCursorInUseError=G.MongoOperationTimeoutError=G.MongoUnexpectedServerResponseError=G.MongoGridFSChunkError=G.MongoGridFSStreamError=G.MongoTailableCursorError=G.MongoChangeStreamError=G.MongoClientBulkWriteExecutionError=G.MongoClientBulkWriteCursorError=G.MongoClientBulkWriteError=G.MongoGCPError=G.MongoAzureError=G.MongoOIDCError=G.MongoAWSError=G.MongoKerberosError=G.MongoExpiredSessionError=G.MongoTransactionError=G.MongoNotConnectedError=G.MongoDecompressionError=G.MongoBatchReExecutionError=G.MongoStalePrimaryError=G.MongoRuntimeError=G.MongoAPIError=G.MongoDriverError=G.MongoServerError=G.MongoError=G.MongoErrorLabel=G.GET_MORE_RESUMABLE_CODES=G.MONGODB_ERROR_CODES=G.NODE_IS_RECOVERING_ERROR_MESSAGE=G.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=G.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;G.needsRetryableWriteLabel=gZ;G.isRetryableWriteError=EI;G.isRetryableReadError=EZ;G.isNodeShuttingDownError=_Z;G.isSDAMUnrecoverableError=wZ;G.isNetworkTimeoutError=TZ;G.isResumableError=bZ;G.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");G.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");G.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");G.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});G.GET_MORE_RESUMABLE_CODES=new Set([G.MONGODB_ERROR_CODES.HostUnreachable,G.MONGODB_ERROR_CODES.HostNotFound,G.MONGODB_ERROR_CODES.NetworkTimeout,G.MONGODB_ERROR_CODES.ShutdownInProgress,G.MONGODB_ERROR_CODES.PrimarySteppedDown,G.MONGODB_ERROR_CODES.ExceededTimeLimit,G.MONGODB_ERROR_CODES.SocketException,G.MONGODB_ERROR_CODES.NotWritablePrimary,G.MONGODB_ERROR_CODES.InterruptedAtShutdown,G.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,G.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,G.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,G.MONGODB_ERROR_CODES.StaleShardVersion,G.MONGODB_ERROR_CODES.StaleEpoch,G.MONGODB_ERROR_CODES.StaleConfig,G.MONGODB_ERROR_CODES.RetryChangeStream,G.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,G.MONGODB_ERROR_CODES.CursorNotFound]);G.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequstedRetry:"PoolRequstedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function mZ(t){return t!=null&&typeof t=="object"&&"errors"in t&&Array.isArray(t.errors)}var Oo=class extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor(e,r){super(e,r),this.errorLabelSet=new Set}static buildErrorMessage(e){return typeof e=="string"?e:mZ(e)&&e.message.length===0?e.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":e.errors.map(({message:r})=>r).join(", "):e!=null&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(e){return this.errorLabelSet.has(e)}addErrorLabel(e){this.errorLabelSet.add(e)}};G.MongoError=Oo;var Q1=class extends Oo{constructor(e){if(super(e.message||e.errmsg||e.$err||"n/a"),e.errorLabels)for(let r of e.errorLabels)this.addErrorLabel(r);this.errorResponse=e;for(let r in e)r!=="errorLabels"&&r!=="errmsg"&&r!=="message"&&r!=="errorResponse"&&(this[r]=e[r])}get name(){return"MongoServerError"}};G.MongoServerError=Q1;var Yu=class extends Oo{constructor(e,r){super(e,r)}get name(){return"MongoDriverError"}};G.MongoDriverError=Yu;var sr=class extends Yu{constructor(e,r){super(e,r)}get name(){return"MongoAPIError"}};G.MongoAPIError=sr;var Jr=class extends Yu{constructor(e,r){super(e,r)}get name(){return"MongoRuntimeError"}};G.MongoRuntimeError=Jr;var QS=class extends Jr{constructor(e,r){super(e,r)}get name(){return"MongoStalePrimaryError"}};G.MongoStalePrimaryError=QS;var ZS=class extends sr{constructor(e="This batch has already been executed, create new batch to execute"){super(e)}get name(){return"MongoBatchReExecutionError"}};G.MongoBatchReExecutionError=ZS;var e_=class extends Jr{constructor(e){super(e)}get name(){return"MongoDecompressionError"}};G.MongoDecompressionError=e_;var t_=class extends sr{constructor(e){super(e)}get name(){return"MongoNotConnectedError"}};G.MongoNotConnectedError=t_;var r_=class extends sr{constructor(e){super(e)}get name(){return"MongoTransactionError"}};G.MongoTransactionError=r_;var n_=class extends sr{constructor(e="Cannot use a session that has ended"){super(e)}get name(){return"MongoExpiredSessionError"}};G.MongoExpiredSessionError=n_;var o_=class extends Jr{constructor(e){super(e)}get name(){return"MongoKerberosError"}};G.MongoKerberosError=o_;var i_=class extends Jr{constructor(e,r){super(e,r)}get name(){return"MongoAWSError"}};G.MongoAWSError=i_;var Z1=class extends Jr{constructor(e){super(e)}get name(){return"MongoOIDCError"}};G.MongoOIDCError=Z1;var s_=class extends Z1{constructor(e){super(e)}get name(){return"MongoAzureError"}};G.MongoAzureError=s_;var u_=class extends Z1{constructor(e){super(e)}get name(){return"MongoGCPError"}};G.MongoGCPError=u_;var a_=class extends Q1{constructor(e){super(e),this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}};G.MongoClientBulkWriteError=a_;var c_=class extends Jr{constructor(e){super(e)}get name(){return"MongoClientBulkWriteCursorError"}};G.MongoClientBulkWriteCursorError=c_;var l_=class extends Jr{constructor(e){super(e)}get name(){return"MongoClientBulkWriteExecutionError"}};G.MongoClientBulkWriteExecutionError=l_;var d_=class extends Jr{constructor(e){super(e)}get name(){return"MongoChangeStreamError"}};G.MongoChangeStreamError=d_;var f_=class extends sr{constructor(e="Tailable cursor does not support this operation"){super(e)}get name(){return"MongoTailableCursorError"}};G.MongoTailableCursorError=f_;var h_=class extends Jr{constructor(e){super(e)}get name(){return"MongoGridFSStreamError"}};G.MongoGridFSStreamError=h_;var p_=class extends Jr{constructor(e){super(e)}get name(){return"MongoGridFSChunkError"}};G.MongoGridFSChunkError=p_;var m_=class extends Jr{constructor(e,r){super(e,r)}get name(){return"MongoUnexpectedServerResponseError"}};G.MongoUnexpectedServerResponseError=m_;var g_=class extends Yu{get name(){return"MongoOperationTimeoutError"}};G.MongoOperationTimeoutError=g_;var E_=class extends sr{constructor(e="Cursor is already initialized"){super(e)}get name(){return"MongoCursorInUseError"}};G.MongoCursorInUseError=E_;var y_=class extends sr{constructor(e="Server is closed"){super(e)}get name(){return"MongoServerClosedError"}};G.MongoServerClosedError=y_;var C_=class extends sr{constructor(e){super(e||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}};G.MongoCursorExhaustedError=C_;var A_=class extends sr{constructor(e="Topology is closed"){super(e)}get name(){return"MongoTopologyClosedError"}};G.MongoTopologyClosedError=A_;var S_=class extends sr{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}};G.MongoClientClosedError=S_;var Fs=class extends Oo{constructor(e,r){super(e,{cause:r?.cause}),this.beforeHandshake=!!r?.beforeHandshake}get name(){return"MongoNetworkError"}};G.MongoNetworkError=Fs;var __=class extends Fs{constructor(e,r){super(e,r)}get name(){return"MongoNetworkTimeoutError"}};G.MongoNetworkTimeoutError=__;var E0=class extends Yu{constructor(e){super(e)}get name(){return"MongoParseError"}};G.MongoParseError=E0;var w_=class extends sr{constructor(e,r){super(e,r)}get name(){return"MongoInvalidArgumentError"}};G.MongoInvalidArgumentError=w_;var T_=class extends sr{constructor(e){super(e)}get name(){return"MongoCompatibilityError"}};G.MongoCompatibilityError=T_;var b_=class extends sr{constructor(e){super(e)}get name(){return"MongoMissingCredentialsError"}};G.MongoMissingCredentialsError=b_;var v_=class extends sr{constructor(e,r){super(e,r),this.dependencyName=r.dependencyName}get name(){return"MongoMissingDependencyError"}};G.MongoMissingDependencyError=v_;var y0=class extends Oo{constructor(e,r){r&&r.error?super(Oo.buildErrorMessage(r.error.message||r.error),{cause:r.error}):super(e),r&&(this.reason=r),this.code=r.error?.code}get name(){return"MongoSystemError"}};G.MongoSystemError=y0;var C0=class extends y0{constructor(e,r){super(e,r)}get name(){return"MongoServerSelectionError"}};G.MongoServerSelectionError=C0;var A0=class extends Q1{constructor(e){super({...e.writeConcernError,...e}),this.errInfo=e.writeConcernError.errInfo,this.result=e}get name(){return"MongoWriteConcernError"}};G.MongoWriteConcernError=A0;var gI=new Set([G.MONGODB_ERROR_CODES.HostUnreachable,G.MONGODB_ERROR_CODES.HostNotFound,G.MONGODB_ERROR_CODES.NetworkTimeout,G.MONGODB_ERROR_CODES.ShutdownInProgress,G.MONGODB_ERROR_CODES.PrimarySteppedDown,G.MONGODB_ERROR_CODES.SocketException,G.MONGODB_ERROR_CODES.NotWritablePrimary,G.MONGODB_ERROR_CODES.InterruptedAtShutdown,G.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,G.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,G.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,G.MONGODB_ERROR_CODES.ExceededTimeLimit,G.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),XS=gI;function gZ(t,e,r){if(t instanceof Fs)return!0;if(t instanceof Oo&&(e>=9||EI(t))&&!t.hasErrorLabel(G.MongoErrorLabel.HandshakeError))return!1;if(t instanceof A0){if(r==="Mongos"&&e<9)return XS.has(t.result.code??0);let i=t.result.writeConcernError.code??Number(t.code);return XS.has(Number.isNaN(i)?0:i)}return t instanceof Oo?XS.has(Number(t.code)):!!(G.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||G.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}function EI(t){return t.hasErrorLabel(G.MongoErrorLabel.RetryableWriteError)||t.hasErrorLabel(G.MongoErrorLabel.PoolRequstedRetry)}function EZ(t){return!!((typeof t.code=="number"?gI.has(t.code):!1)||t instanceof Fs||G.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||G.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}var yZ=new Set([G.MONGODB_ERROR_CODES.ShutdownInProgress,G.MONGODB_ERROR_CODES.PrimarySteppedDown,G.MONGODB_ERROR_CODES.InterruptedAtShutdown,G.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,G.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),CZ=new Set([G.MONGODB_ERROR_CODES.NotWritablePrimary,G.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,G.MONGODB_ERROR_CODES.LegacyNotPrimary]),AZ=new Set([G.MONGODB_ERROR_CODES.InterruptedAtShutdown,G.MONGODB_ERROR_CODES.ShutdownInProgress]);function yI(t){return typeof t.code=="number"?yZ.has(t.code):G.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(t.message)||G.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message)}function SZ(t){return typeof t.code=="number"?CZ.has(t.code):yI(t)?!1:G.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)}function _Z(t){return!!(typeof t.code=="number"&&AZ.has(t.code))}function wZ(t){return t instanceof E0||t==null?!0:yI(t)||SZ(t)}function TZ(t){return!!(t instanceof Fs&&t.message.match(/timed out/))}function bZ(t,e){return t==null||!(t instanceof Oo)?!1:t instanceof Fs||t instanceof C0?!0:e!=null&&e>=9?t.code===G.MONGODB_ERROR_CODES.CursorNotFound?!0:t.hasErrorLabel(G.MongoErrorLabel.ResumableChangeStreamError):typeof t.code=="number"?G.GET_MORE_RESUMABLE_CODES.has(t.code):!1}});var tr=R(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.ReadPreference=Sr.ReadPreferenceMode=void 0;var Ju=ie();Sr.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});var er=class t{constructor(e,r,n){if(!t.isValid(e))throw new Ju.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(e)}`);if(n==null&&typeof r=="object"&&!Array.isArray(r))n=r,r=void 0;else if(r&&!Array.isArray(r))throw new Ju.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=e,this.tags=r,this.hedge=n?.hedge,this.maxStalenessSeconds=void 0,this.minWireVersion=void 0,n=n??{},n.maxStalenessSeconds!=null){if(n.maxStalenessSeconds<=0)throw new Ju.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=n.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===t.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new Ju.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new Ju.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new Ju.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(e){return new t(e)}static fromOptions(e){if(!e)return;let r=e.readPreference??e.session?.transaction.options.readPreference,n=e.readPreferenceTags;if(r!=null){if(typeof r=="string")return new t(r,n,{maxStalenessSeconds:e.maxStalenessSeconds,hedge:e.hedge});if(!(r instanceof t)&&typeof r=="object"){let o=r.mode||r.preference;if(o&&typeof o=="string")return new t(o,r.tags??n,{maxStalenessSeconds:r.maxStalenessSeconds,hedge:e.hedge})}return n&&(r.tags=n),r}}static translate(e){if(e.readPreference==null)return e;let r=e.readPreference;if(typeof r=="string")e.readPreference=new t(r);else if(r&&!(r instanceof t)&&typeof r=="object"){let n=r.mode||r.preference;n&&typeof n=="string"&&(e.readPreference=new t(n,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds}))}else if(!(r instanceof t))throw new Ju.MongoInvalidArgumentError(`Invalid read preference: ${r}`);return e}static isValid(e){return new Set([t.PRIMARY,t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST,null]).has(e)}isValid(e){return t.isValid(typeof e=="string"?e:this.mode)}secondaryOk(){return new Set([t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST]).has(this.mode)}equals(e){return e.mode===this.mode}toJSON(){let e={mode:this.mode};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),this.hedge&&(e.hedge=this.hedge),e}};Sr.ReadPreference=er;er.PRIMARY=Sr.ReadPreferenceMode.primary;er.PRIMARY_PREFERRED=Sr.ReadPreferenceMode.primaryPreferred;er.SECONDARY=Sr.ReadPreferenceMode.secondary;er.SECONDARY_PREFERRED=Sr.ReadPreferenceMode.secondaryPreferred;er.NEAREST=Sr.ReadPreferenceMode.nearest;er.primary=new er(Sr.ReadPreferenceMode.primary);er.primaryPreferred=new er(Sr.ReadPreferenceMode.primaryPreferred);er.secondary=new er(Sr.ReadPreferenceMode.secondary);er.secondaryPreferred=new er(Sr.ReadPreferenceMode.secondaryPreferred);er.nearest=new er(Sr.ReadPreferenceMode.nearest)});var Tn=R(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.ServerType=Pr.TopologyType=Pr.STATE_CONNECTED=Pr.STATE_CONNECTING=Pr.STATE_CLOSED=Pr.STATE_CLOSING=void 0;Pr._advanceClusterTime=vZ;Pr.STATE_CLOSING="closing";Pr.STATE_CLOSED="closed";Pr.STATE_CONNECTING="connecting";Pr.STATE_CONNECTED="connected";Pr.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});Pr.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function vZ(t,e){(t.clusterTime==null||e.clusterTime.greaterThan(t.clusterTime.clusterTime))&&(t.clusterTime=e)}});var td=R(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;Ki.writableServerSelector=RZ;Ki.sameServerSelector=DZ;Ki.secondaryWritableServerSelector=IZ;Ki.readPreferenceServerSelector=R_;var O_=ie(),ed=tr(),bn=Tn(),OZ=1e4,CI=90;Ki.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function RZ(){return function(e,r){return S0(e,r.filter(n=>n.isWritable))}}function DZ(t){return function(r,n){return t?n.filter(o=>o.address===t.address&&o.type!==bn.ServerType.Unknown):[]}}function IZ(t,e){return!e||!t||t&&t<Ki.MIN_SECONDARY_WRITE_WIRE_VERSION?R_(ed.ReadPreference.primary):R_(e)}function MZ(t,e,r){if(t.maxStalenessSeconds==null||t.maxStalenessSeconds<0)return r;let n=t.maxStalenessSeconds,o=(e.heartbeatFrequencyMS+OZ)/1e3;if(n<o)throw new O_.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${o} seconds`);if(n<CI)throw new O_.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${CI} seconds`);if(e.type===bn.TopologyType.ReplicaSetWithPrimary){let i=Array.from(e.servers.values()).filter(_0)[0];return r.reduce((s,u)=>{let c=(u.lastUpdateTime-u.lastWriteDate-(i.lastUpdateTime-i.lastWriteDate)+e.heartbeatFrequencyMS)/1e3,d=t.maxStalenessSeconds??0;return c<=d&&s.push(u),s},[])}if(e.type===bn.TopologyType.ReplicaSetNoPrimary){if(r.length===0)return r;let i=r.reduce((s,u)=>u.lastWriteDate>s.lastWriteDate?u:s);return r.reduce((s,u)=>{let c=(i.lastWriteDate-u.lastWriteDate+e.heartbeatFrequencyMS)/1e3,d=t.maxStalenessSeconds??0;return c<=d&&s.push(u),s},[])}return r}function NZ(t,e){let r=Object.keys(t),n=Object.keys(e);for(let o=0;o<r.length;++o){let i=r[o];if(n.indexOf(i)===-1||e[i]!==t[i])return!1}return!0}function BZ(t,e){if(t.tags==null||Array.isArray(t.tags)&&t.tags.length===0)return e;for(let r=0;r<t.tags.length;++r){let n=t.tags[r],o=e.reduce((i,s)=>(NZ(n,s.tags)&&i.push(s),i),[]);if(o.length)return o}return[]}function S0(t,e){let r=e.reduce((o,i)=>Math.min(i.roundTripTime,o),1/0),n=r+t.localThresholdMS;return e.reduce((o,i)=>(i.roundTripTime<=n&&i.roundTripTime>=r&&o.push(i),o),[])}function _0(t){return t.type===bn.ServerType.RSPrimary}function PZ(t){return t.type===bn.ServerType.RSSecondary}function FZ(t){return t.type===bn.ServerType.RSSecondary||t.type===bn.ServerType.RSPrimary}function AI(t){return t.type!==bn.ServerType.Unknown}function xZ(t){return t.type===bn.ServerType.LoadBalancer}function R_(t){if(!t.isValid())throw new O_.MongoInvalidArgumentError("Invalid read preference specified");return function(r,n,o=[]){if(r.type===bn.TopologyType.LoadBalanced)return n.filter(xZ);if(r.type===bn.TopologyType.Unknown)return[];if(r.type===bn.TopologyType.Single)return S0(r,n.filter(AI));if(r.type===bn.TopologyType.Sharded){let a=n.filter(d=>!o.includes(d)),c=a.length>0?a:o;return S0(r,c.filter(AI))}let i=t.mode;if(i===ed.ReadPreference.PRIMARY)return n.filter(_0);if(i===ed.ReadPreference.PRIMARY_PREFERRED){let a=n.filter(_0);if(a.length)return a}let s=i===ed.ReadPreference.NEAREST?FZ:PZ,u=S0(r,BZ(t,MZ(t,r,n.filter(s))));return i===ed.ReadPreference.SECONDARY_PREFERRED&&u.length===0?n.filter(_0):u}}});var xs=R(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.OP_MSG=Ke.OP_COMPRESSED=Ke.OP_DELETE=Ke.OP_QUERY=Ke.OP_INSERT=Ke.OP_UPDATE=Ke.OP_REPLY=Ke.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION=Ke.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=Ke.MIN_SUPPORTED_QE_SERVER_VERSION=Ke.MIN_SUPPORTED_QE_WIRE_VERSION=Ke.MAX_SUPPORTED_WIRE_VERSION=Ke.MIN_SUPPORTED_WIRE_VERSION=Ke.MAX_SUPPORTED_SERVER_VERSION=Ke.MIN_SUPPORTED_SERVER_VERSION=void 0;Ke.MIN_SUPPORTED_SERVER_VERSION="4.2";Ke.MAX_SUPPORTED_SERVER_VERSION="8.2";Ke.MIN_SUPPORTED_WIRE_VERSION=8;Ke.MAX_SUPPORTED_WIRE_VERSION=27;Ke.MIN_SUPPORTED_QE_WIRE_VERSION=21;Ke.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";Ke.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=27;Ke.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION="8.2";Ke.OP_REPLY=1;Ke.OP_UPDATE=2001;Ke.OP_INSERT=2002;Ke.OP_QUERY=2004;Ke.OP_DELETE=2006;Ke.OP_COMPRESSED=2012;Ke.OP_MSG=2013});var Mt=R(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.END=U.CHANGE=U.INIT=U.MORE=U.RESPONSE=U.SERVER_HEARTBEAT_FAILED=U.SERVER_HEARTBEAT_SUCCEEDED=U.SERVER_HEARTBEAT_STARTED=U.COMMAND_FAILED=U.COMMAND_SUCCEEDED=U.COMMAND_STARTED=U.CLUSTER_TIME_RECEIVED=U.CONNECTION_CHECKED_IN=U.CONNECTION_CHECKED_OUT=U.CONNECTION_CHECK_OUT_FAILED=U.CONNECTION_CHECK_OUT_STARTED=U.CONNECTION_CLOSED=U.CONNECTION_READY=U.CONNECTION_CREATED=U.CONNECTION_POOL_READY=U.CONNECTION_POOL_CLEARED=U.CONNECTION_POOL_CLOSED=U.CONNECTION_POOL_CREATED=U.WAITING_FOR_SUITABLE_SERVER=U.SERVER_SELECTION_SUCCEEDED=U.SERVER_SELECTION_FAILED=U.SERVER_SELECTION_STARTED=U.TOPOLOGY_DESCRIPTION_CHANGED=U.TOPOLOGY_CLOSED=U.TOPOLOGY_OPENING=U.SERVER_DESCRIPTION_CHANGED=U.SERVER_CLOSED=U.SERVER_OPENING=U.DESCRIPTION_RECEIVED=U.UNPINNED=U.PINNED=U.MESSAGE=U.ENDED=U.CLOSED=U.CONNECT=U.OPEN=U.CLOSE=U.TIMEOUT=U.ERROR=U.SYSTEM_JS_COLLECTION=U.SYSTEM_COMMAND_COLLECTION=U.SYSTEM_USER_COLLECTION=U.SYSTEM_PROFILE_COLLECTION=U.SYSTEM_INDEX_COLLECTION=U.SYSTEM_NAMESPACE_COLLECTION=void 0;U.kDecoratedKeys=U.kDecorateResult=U.LEGACY_HELLO_COMMAND_CAMEL_CASE=U.LEGACY_HELLO_COMMAND=U.MONGO_CLIENT_EVENTS=U.LOCAL_SERVER_EVENTS=U.SERVER_RELAY_EVENTS=U.APM_EVENTS=U.TOPOLOGY_EVENTS=U.CMAP_EVENTS=U.HEARTBEAT_EVENTS=U.RESUME_TOKEN_CHANGED=void 0;U.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";U.SYSTEM_INDEX_COLLECTION="system.indexes";U.SYSTEM_PROFILE_COLLECTION="system.profile";U.SYSTEM_USER_COLLECTION="system.users";U.SYSTEM_COMMAND_COLLECTION="$cmd";U.SYSTEM_JS_COLLECTION="system.js";U.ERROR="error";U.TIMEOUT="timeout";U.CLOSE="close";U.OPEN="open";U.CONNECT="connect";U.CLOSED="closed";U.ENDED="ended";U.MESSAGE="message";U.PINNED="pinned";U.UNPINNED="unpinned";U.DESCRIPTION_RECEIVED="descriptionReceived";U.SERVER_OPENING="serverOpening";U.SERVER_CLOSED="serverClosed";U.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";U.TOPOLOGY_OPENING="topologyOpening";U.TOPOLOGY_CLOSED="topologyClosed";U.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";U.SERVER_SELECTION_STARTED="serverSelectionStarted";U.SERVER_SELECTION_FAILED="serverSelectionFailed";U.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";U.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";U.CONNECTION_POOL_CREATED="connectionPoolCreated";U.CONNECTION_POOL_CLOSED="connectionPoolClosed";U.CONNECTION_POOL_CLEARED="connectionPoolCleared";U.CONNECTION_POOL_READY="connectionPoolReady";U.CONNECTION_CREATED="connectionCreated";U.CONNECTION_READY="connectionReady";U.CONNECTION_CLOSED="connectionClosed";U.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";U.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";U.CONNECTION_CHECKED_OUT="connectionCheckedOut";U.CONNECTION_CHECKED_IN="connectionCheckedIn";U.CLUSTER_TIME_RECEIVED="clusterTimeReceived";U.COMMAND_STARTED="commandStarted";U.COMMAND_SUCCEEDED="commandSucceeded";U.COMMAND_FAILED="commandFailed";U.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";U.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";U.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";U.RESPONSE="response";U.MORE="more";U.INIT="init";U.CHANGE="change";U.END="end";U.RESUME_TOKEN_CHANGED="resumeTokenChanged";U.HEARTBEAT_EVENTS=Object.freeze([U.SERVER_HEARTBEAT_STARTED,U.SERVER_HEARTBEAT_SUCCEEDED,U.SERVER_HEARTBEAT_FAILED]);U.CMAP_EVENTS=Object.freeze([U.CONNECTION_POOL_CREATED,U.CONNECTION_POOL_READY,U.CONNECTION_POOL_CLEARED,U.CONNECTION_POOL_CLOSED,U.CONNECTION_CREATED,U.CONNECTION_READY,U.CONNECTION_CLOSED,U.CONNECTION_CHECK_OUT_STARTED,U.CONNECTION_CHECK_OUT_FAILED,U.CONNECTION_CHECKED_OUT,U.CONNECTION_CHECKED_IN]);U.TOPOLOGY_EVENTS=Object.freeze([U.SERVER_OPENING,U.SERVER_CLOSED,U.SERVER_DESCRIPTION_CHANGED,U.TOPOLOGY_OPENING,U.TOPOLOGY_CLOSED,U.TOPOLOGY_DESCRIPTION_CHANGED,U.ERROR,U.TIMEOUT,U.CLOSE]);U.APM_EVENTS=Object.freeze([U.COMMAND_STARTED,U.COMMAND_SUCCEEDED,U.COMMAND_FAILED]);U.SERVER_RELAY_EVENTS=Object.freeze([U.SERVER_HEARTBEAT_STARTED,U.SERVER_HEARTBEAT_SUCCEEDED,U.SERVER_HEARTBEAT_FAILED,U.COMMAND_STARTED,U.COMMAND_SUCCEEDED,U.COMMAND_FAILED,...U.CMAP_EVENTS]);U.LOCAL_SERVER_EVENTS=Object.freeze([U.CONNECT,U.DESCRIPTION_RECEIVED,U.CLOSED,U.ENDED]);U.MONGO_CLIENT_EVENTS=Object.freeze([...U.CMAP_EVENTS,...U.APM_EVENTS,...U.TOPOLOGY_EVENTS,...U.HEARTBEAT_EVENTS]);U.LEGACY_HELLO_COMMAND="ismaster";U.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";U.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");U.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var Do=R(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.ReadConcern=Ro.ReadConcernLevel=void 0;Ro.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});var D_=class t{constructor(e){this.level=Ro.ReadConcernLevel[e]??e}static fromOptions(e){if(e!=null){if(e.readConcern){let{readConcern:r}=e;if(r instanceof t)return r;if(typeof r=="string")return new t(r);if("level"in r&&r.level)return new t(r.level)}if(e.level)return new t(e.level)}}static get MAJORITY(){return Ro.ReadConcernLevel.majority}static get AVAILABLE(){return Ro.ReadConcernLevel.available}static get LINEARIZABLE(){return Ro.ReadConcernLevel.linearizable}static get SNAPSHOT(){return Ro.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}};Ro.ReadConcern=D_});var SI=R(w0=>{"use strict";Object.defineProperty(w0,"__esModule",{value:!0});w0.OnDemandDocument=void 0;var Me=qe(),rd={type:0,nameOffset:1,nameLength:2,offset:3,length:4},I_=class t{constructor(e,r=0,n=!1,o){this.cache=Object.create(null),this.indexFound=Object.create(null),this.bson=e,this.offset=r,this.isArray=n,this.elements=o??(0,Me.parseToElementsToArray)(this.bson,r)}isElementName(e,r){let n=r[rd.nameLength],o=r[rd.nameOffset];if(e.length!==n)return!1;let i=o+n;for(let s=o,u=0;u<e.length&&s<i;u++,s++)if(this.bson[s]!==e.charCodeAt(u))return!1;return!0}getElement(e){let r=this.cache[e];if(r===!1)return null;if(r!=null)return r;if(typeof e=="number")if(this.isArray)if(e<this.elements.length){let o={element:this.elements[e],value:void 0};return this.cache[e]=o,this.indexFound[e]=!0,o}else return null;else return null;for(let n=0;n<this.elements.length;n++){let o=this.elements[n];if(!(n in this.indexFound)&&this.isElementName(e,o)){let i={element:o,value:void 0};return this.cache[e]=i,this.indexFound[n]=!0,i}}return this.cache[e]=!1,null}toJSValue(e,r){let n=e[rd.type],o=e[rd.offset],i=e[rd.length];if(r!==n)return null;switch(r){case Me.BSONType.null:case Me.BSONType.undefined:return null;case Me.BSONType.double:return(0,Me.getFloat64LE)(this.bson,o);case Me.BSONType.int:return(0,Me.getInt32LE)(this.bson,o);case Me.BSONType.long:return(0,Me.getBigInt64LE)(this.bson,o);case Me.BSONType.bool:return!!this.bson[o];case Me.BSONType.objectId:return new Me.ObjectId(this.bson.subarray(o,o+12));case Me.BSONType.timestamp:return new Me.Timestamp((0,Me.getBigInt64LE)(this.bson,o));case Me.BSONType.string:return(0,Me.toUTF8)(this.bson,o+4,o+i-1,!1);case Me.BSONType.binData:{let s=(0,Me.getInt32LE)(this.bson,o),u=this.bson[o+4];if(u===2){let a=(0,Me.getInt32LE)(this.bson,o+1+4);if(a<0)throw new Me.BSONError("Negative binary type element size found for subtype 0x02");if(a>s-4)throw new Me.BSONError("Binary type with subtype 0x02 contains too long binary size");if(a<s-4)throw new Me.BSONError("Binary type with subtype 0x02 contains too short binary size");return new Me.Binary(this.bson.subarray(o+1+4+4,o+1+4+4+a),2)}return new Me.Binary(this.bson.subarray(o+1+4,o+1+4+s),u)}case Me.BSONType.date:return new Date(Number((0,Me.getBigInt64LE)(this.bson,o)));case Me.BSONType.object:return new t(this.bson,o);case Me.BSONType.array:return new t(this.bson,o,!0);default:throw new Me.BSONError(`Unsupported BSON type: ${r}`)}}size(){return this.elements.length}has(e){let r=this.cache[e];return r===!1?!1:r!=null?!0:this.getElement(e)!=null}get(e,r,n){let o=this.getElement(e);if(o==null){if(n===!0)throw new Me.BSONError(`BSON element "${e}" is missing`);return null}if(o.value==null){let i=this.toJSValue(o.element,r);if(i==null){if(n===!0)throw new Me.BSONError(`BSON element "${e}" is missing`);return null}o.value=i}return o.value}getNumber(e,r){let n=this.get(e,Me.BSONType.bool),o=n==null?null:n?1:0,i=this.get(e,Me.BSONType.long),s=i==null?null:Number(i),u=o??s??this.get(e,Me.BSONType.int)??this.get(e,Me.BSONType.double);if(r===!0&&u==null)throw new Me.BSONError(`BSON element "${e}" is missing`);return u}toObject(e){return(0,Me.deserialize)(this.bson,{...e,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let e=(0,Me.getInt32LE)(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+e)}};w0.OnDemandDocument=I_});var Ye=R(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.ClientBulkWriteCursorResponse=Io.ExplainedCursorResponse=Io.CursorResponse=Io.MongoDBResponse=void 0;Io.isErrorResponse=wI;var xe=qe(),Xu=ie(),_I=de(),kZ=SI(),T0={type:0,nameOffset:1,nameLength:2,offset:3,length:4};function wI(t,e){for(let r=0;r<e.length;r++){let n=e[r];if(n[T0.nameLength]===2){let o=n[T0.nameOffset];if(t[o]===111&&t[o+1]===107){let i=n[T0.offset],s=n[T0.length];for(let u=i;u<i+s;u++)if(t[u]!==0)return!1;return!0}}}return!0}var Uc=class t extends kZ.OnDemandDocument{get(e,r,n){try{return super.get(e,r,n)}catch(o){throw new Xu.MongoUnexpectedServerResponseError(o.message,{cause:o})}}static is(e){return e instanceof t}static make(e){let r=(0,xe.parseToElementsToArray)(e,0);return wI(e,r)?new t(e,0,!1,r):new this(e,0,!1,r)}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===Xu.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",xe.BSONType.object)?.getNumber("code")===Xu.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let n=this.get("writeErrors",xe.BSONType.array);if(n?.size()){for(let o=0;o<n.size();o++)if(n.get(o,xe.BSONType.object)?.getNumber("code")===Xu.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",xe.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",xe.BSONType.object)?.get("atClusterTime",xe.BSONType.timestamp)??this.get("atClusterTime",xe.BSONType.timestamp)}get operationTime(){return this.get("operationTime",xe.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",xe.BSONType.string)}get errmsg(){return this.get("errmsg",xe.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let e=this.get("$clusterTime",xe.BSONType.object);if(e==null)return this.clusterTime=null,null;let r=e.get("clusterTime",xe.BSONType.timestamp,!0),n=e.get("signature",xe.BSONType.object)?.toObject();this.clusterTime={clusterTime:r,signature:n}}return this.clusterTime??null}toObject(e){let r={...(0,xe.pluckBSONSerializeOptions)(e??{}),validation:(0,xe.parseUtf8ValidationOption)(e)};return super.toObject(r)}};Io.MongoDBResponse=Uc;Uc.empty=new Uc(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]));var nd=class t extends Uc{constructor(){super(...arguments),this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new t((0,xe.serialize)({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is(e){return e instanceof t||e===t.emptyGetMore}get cursor(){return this.get("cursor",xe.BSONType.object,!0)}get id(){try{return xe.Long.fromBigInt(this.cursor.get("id",xe.BSONType.long,!0))}catch(e){throw new Xu.MongoUnexpectedServerResponseError(e.message,{cause:e})}}get ns(){let e=this.cursor.get("ns",xe.BSONType.string);return e!=null?(0,_I.ns)(e):null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let e=this.encryptedResponse?.get("cursor",xe.BSONType.object);if(e?.has("firstBatch"))this._encryptedBatch=e.get("firstBatch",xe.BSONType.array,!0);else if(e?.has("nextBatch"))this._encryptedBatch=e.get("nextBatch",xe.BSONType.array,!0);else throw new Xu.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let e=this.cursor;if(e.has("firstBatch"))this._batch=e.get("firstBatch",xe.BSONType.array,!0);else if(e.has("nextBatch"))this._batch=e.get("nextBatch",xe.BSONType.array,!0);else throw new Xu.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",xe.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(e){if(this.iterated>=this.batchSize)return null;let r=this.batch.get(this.iterated,xe.BSONType.object,!0)??null,n=this.encryptedBatch?.get(this.iterated,xe.BSONType.object,!0)??null;if(this.iterated+=1,e?.raw)return r.toBytes();{let o=r.toObject(e);return n&&(0,_I.decorateDecryptionResult)(o,n.toObject(e),!0),o}}clear(){this.iterated=this.batchSize}};Io.CursorResponse=nd;var M_=class extends nd{constructor(){super(...arguments),this.isExplain=!0,this._length=1}get id(){return xe.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(e){return this._length===0?null:(this._length-=1,this.toObject(e))}};Io.ExplainedCursorResponse=M_;var N_=class extends nd{get insertedCount(){return this.get("nInserted",xe.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",xe.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",xe.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",xe.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",xe.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",xe.BSONType.object,!1)}};Io.ClientBulkWriteCursorResponse=N_});var Fr=R(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.WriteConcern=Qu.WRITE_CONCERN_KEYS=void 0;Qu.throwIfWriteConcernError=UZ;var TI=Ye(),LZ=ie();Qu.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];var B_=class t{constructor(e,r,n,o){e!=null&&(Number.isNaN(Number(e))?this.w=e:this.w=Number(e)),r!=null&&(this.wtimeoutMS=this.wtimeout=r),n!=null&&(this.journal=this.j=n),o!=null&&(this.journal=this.j=!!o)}static apply(e,r){let n={};return r.w!=null&&(n.w=r.w),r.wtimeoutMS!=null&&(n.wtimeout=r.wtimeoutMS),r.journal!=null&&(n.j=r.j),e.writeConcern=n,e}static fromOptions(e,r){if(e==null)return;r=r??{};let n;typeof e=="string"||typeof e=="number"?n={w:e}:e instanceof t?n=e:n=e.writeConcern;let i={...r instanceof t?r:r.writeConcern,...n},{w:s=void 0,wtimeout:u=void 0,j:a=void 0,fsync:c=void 0,journal:d=void 0,wtimeoutMS:p=void 0}=i;if(s!=null||u!=null||p!=null||a!=null||d!=null||c!=null)return new t(s,u??p,a??d,c)}};Qu.WriteConcern=B_;function UZ(t){if(typeof t=="object"&&t!=null){let e=TI.MongoDBResponse.is(t)&&t.has("writeConcernError")?t.toObject():!TI.MongoDBResponse.is(t)&&"writeConcernError"in t?t:null;if(e!=null)throw new LZ.MongoWriteConcernError(e)}}});var de=R(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.kDispose=ne.randomBytes=ne.COSMOS_DB_MSG=ne.DOCUMENT_DB_MSG=ne.COSMOS_DB_CHECK=ne.DOCUMENT_DB_CHECK=ne.MONGODB_WARNING_CODE=ne.DEFAULT_PK_FACTORY=ne.HostAddress=ne.BufferPool=ne.List=ne.MongoDBCollectionNamespace=ne.MongoDBNamespace=ne.ByteUtils=void 0;ne.isUint8Array=jZ;ne.hostMatchesWildcards=KZ;ne.normalizeHintField=YZ;ne.isObject=F_;ne.mergeOptions=XZ;ne.filterOptions=QZ;ne.applyRetryableWrites=ZZ;ne.isPromiseLike=eee;ne.decorateWithCollation=tee;ne.decorateWithReadConcern=ree;ne.getTopology=nee;ne.ns=oee;ne.makeCounter=iee;ne.uuidV4=see;ne.maxWireVersion=uee;ne.arrayStrictEqual=aee;ne.errorStrictEqual=cee;ne.makeStateMachine=lee;ne.now=II;ne.calculateDurationInMs=dee;ne.hasAtomicOperators=MI;ne.resolveTimeoutOptions=fee;ne.resolveOptions=hee;ne.isSuperset=NI;ne.isHello=pee;ne.setDifference=mee;ne.isRecord=Eee;ne.emitWarning=BI;ne.emitWarningOnce=yee;ne.enumToString=Cee;ne.supportsRetryableWrites=Aee;ne.shuffle=See;ne.commandSupportsReadConcern=_ee;ne.compareObjectId=wee;ne.parseInteger=PI;ne.parseUnsignedInteger=Tee;ne.checkParentDomainMatch=bee;ne.get=vee;ne.request=Oee;ne.isHostMatch=Ree;ne.promiseWithResolvers=U_;ne.squashError=Dee;ne.once=Iee;ne.maybeAddIdToDocuments=Mee;ne.fileIsAccessible=Nee;ne.csotMin=Bee;ne.noop=Pee;ne.decorateDecryptionResult=FI;ne.addAbortListener=q_;ne.abortable=Fee;var RI=require("crypto"),qZ=require("fs"),DI=require("http"),P_=require("timers"),GZ=require("url"),VZ=require("url"),$Z=require("util"),L_=qe(),bI=xs(),b0=Mt(),xr=ie(),HZ=Do(),WZ=tr(),zZ=Tn(),vI=Fr();ne.ByteUtils={toLocalBufferType(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)},equals(t,e){return ne.ByteUtils.toLocalBufferType(t).equals(e)},compare(t,e){return ne.ByteUtils.toLocalBufferType(t).compare(e)},toBase64(t){return ne.ByteUtils.toLocalBufferType(t).toString("base64")}};function jZ(t){return t!=null&&typeof t=="object"&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Uint8Array"}function KZ(t,e){for(let r of e)if(t===r||r.startsWith("*.")&&t?.endsWith(r.substring(2,r.length))||r.startsWith("*/")&&t?.endsWith(r.substring(2,r.length)))return!0;return!1}function YZ(t){let e;if(typeof t=="string")e=t;else if(Array.isArray(t))e={},t.forEach(r=>{e[r]=1});else if(t!=null&&typeof t=="object"){e={};for(let r in t)e[r]=t[r]}return e}var JZ=t=>Object.prototype.toString.call(t);function F_(t){return JZ(t)==="[object Object]"}function XZ(t,e){return{...t,...e}}function QZ(t,e){let r={};for(let n in t)e.includes(n)&&(r[n]=t[n]);return r}function ZZ(t,e){return e&&e.s.options?.retryWrites&&(t.retryWrites=!0),t}function eee(t){return t!=null&&typeof t=="object"&&"then"in t&&typeof t.then=="function"}function tee(t,e){e.collation&&typeof e.collation=="object"&&(t.collation=e.collation)}function ree(t,e,r){if(r&&r.session&&r.session.inTransaction())return;let n=Object.assign({},t.readConcern||{});e.s.readConcern&&Object.assign(n,e.s.readConcern),Object.keys(n).length>0&&Object.assign(t,{readConcern:n})}function nee(t){if("topology"in t&&t.topology)return t.topology;if("client"in t&&t.client.topology)return t.client.topology;throw new xr.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function oee(t){return od.fromString(t)}var od=class t{constructor(e,r){this.db=e,this.collection=r===""?void 0:r}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(e){return new v0(this.db,e)}static fromString(e){if(typeof e!="string"||e==="")throw new xr.MongoRuntimeError(`Cannot parse namespace from "${e}"`);let[r,...n]=e.split("."),o=n.join(".");return new t(r,o===""?void 0:o)}};ne.MongoDBNamespace=od;var v0=class extends od{constructor(e,r){super(e,r),this.collection=r}static fromString(e){return super.fromString(e)}};ne.MongoDBCollectionNamespace=v0;function*iee(t=0){let e=t;for(;;){let r=e;e+=1,yield r}}function see(){let t=RI.randomBytes(16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,t}function uee(t){if(t){if(t.hello)return t.hello.maxWireVersion;if(t.serverApi?.version||t.loadBalanced)return bI.MAX_SUPPORTED_WIRE_VERSION;if("lastHello"in t&&typeof t.lastHello=="function"){let e=t.lastHello();if(e)return e.maxWireVersion}if(t.description&&"maxWireVersion"in t.description&&t.description.maxWireVersion!=null)return t.description.maxWireVersion}return 0}function aee(t,e){return!Array.isArray(t)||!Array.isArray(e)?!1:t.length===e.length&&t.every((r,n)=>r===e[n])}function cee(t,e){return t===e?!0:!t||!e?t===e:!(t==null&&e!=null||t!=null&&e==null||t.constructor.name!==e.constructor.name||t.message!==e.message)}function lee(t){return function(r,n){let o=t[r.s.state];if(o&&o.indexOf(n)<0)throw new xr.MongoRuntimeError(`illegal state transition from [${r.s.state}] => [${n}], allowed: [${o}]`);r.emit("stateChanged",r.s.state,n),r.s.state=n}}function II(){let t=process.hrtime();return Math.floor(t[0]*1e3+t[1]/1e6)}function dee(t){if(typeof t!="number")return-1;let e=II()-t;return e<0?0:e}function MI(t,e){if(Array.isArray(t)){for(let n of t)if(MI(n))return!0;return!1}let r=Object.keys(t);if(e?.ignoreUndefined){let n=!0;for(let o of r)if(t[o]!==void 0){n=!1;break}if(n)throw new xr.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return r.length>0&&r[0][0]==="$"}function fee(t,e){let{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:o,timeoutMS:i}=t.s.options;return{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:o,timeoutMS:i,...e}}function hee(t,e){let r=Object.assign({},e,(0,L_.resolveBSONOptions)(e,t)),n=e?.timeoutMS??t?.timeoutMS,o=e?.session;if(!o?.inTransaction()){let u=HZ.ReadConcern.fromOptions(e)??t?.readConcern;u&&(r.readConcern=u);let a=vI.WriteConcern.fromOptions(e)??t?.writeConcern;a&&(n!=null&&(a=vI.WriteConcern.fromOptions({writeConcern:{...a,wtimeout:void 0,wtimeoutMS:void 0}})),r.writeConcern=a)}r.timeoutMS=n;let i=WZ.ReadPreference.fromOptions(e)??t?.readPreference;if(i&&(r.readPreference=i),o?.explicit&&o?.timeoutContext!=null&&e?.timeoutMS!=null)throw new xr.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return r}function NI(t,e){t=Array.isArray(t)?new Set(t):t,e=Array.isArray(e)?new Set(e):e;for(let r of e)if(!t.has(r))return!1;return!0}function pee(t){return!!(t[b0.LEGACY_HELLO_COMMAND]||t.hello)}function mee(t,e){let r=new Set(t);for(let n of e)r.delete(n);return r}var gee=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);function Eee(t,e=void 0){if(!F_(t))return!1;let r=t.constructor;if(r&&r.prototype&&(!F_(r.prototype)||!gee(r.prototype,"isPrototypeOf")))return!1;if(e){let n=Object.keys(t);return NI(n,e)}return!0}var O0=class{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let e of this.nodes())yield e.value}*nodes(){let e=this.head.next;for(;e!==this.head;){let{next:r}=e;yield e,e=r}}push(e){this.count+=1;let r={next:this.head,prev:this.head.prev,value:e};this.head.prev.next=r,this.head.prev=r}pushMany(e){for(let r of e)this.push(r)}unshift(e){this.count+=1;let r={next:this.head.next,prev:this.head,value:e};this.head.next.prev=r,this.head.next=r}remove(e){if(e===this.head||this.length===0)return null;this.count-=1;let r=e.prev,n=e.next;return r.next=n,n.prev=r,e.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(e){for(let r of this.nodes())e(r.value)&&this.remove(r)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}};ne.List=O0;var x_=class{constructor(){this.buffers=new O0,this.totalByteLength=0}get length(){return this.totalByteLength}append(e){this.buffers.push(e),this.totalByteLength+=e.length}getInt32(){if(this.totalByteLength<4)return null;let e=this.buffers.first();if(e!=null&&e.byteLength>=4)return e.readInt32LE(0);let r=this.read(4),n=r.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(r),n}read(e){if(typeof e!="number"||e<0)throw new xr.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(e>this.totalByteLength)return Buffer.alloc(0);let r=Buffer.allocUnsafe(e);for(let n=0;n<e;){let o=this.buffers.shift();if(o==null)break;let i=e-n,s=Math.min(i,o.byteLength),u=o.subarray(0,s);r.set(u,n),n+=s,this.totalByteLength-=s,s<o.byteLength&&this.buffers.unshift(o.subarray(s))}return r}};ne.BufferPool=x_;var k_=class t{constructor(e){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let r=e.split(" ").join("%20");if(r.endsWith(".sock")){this.socketPath=decodeURIComponent(r);return}let n=`iLoveJS://${r}`,o;try{o=new VZ.URL(n)}catch(a){let c=new xr.MongoRuntimeError(`Unable to parse ${r} with URL`);throw c.cause=a,c}let i=o.hostname,s=o.port,u=decodeURIComponent(i).toLowerCase();if(u.startsWith("[")&&u.endsWith("]")&&(this.isIPv6=!0,u=u.substring(1,i.length-1)),this.host=u.toLowerCase(),typeof s=="number"?this.port=s:typeof s=="string"&&s!==""?this.port=Number.parseInt(s,10):this.port=27017,this.port===0)throw new xr.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){return typeof this.host=="string"?this.isIPv6?`[${this.host}]:${this.port}`:`${this.host}:${this.port}`:`${this.socketPath}`}static fromString(e){return new t(e)}static fromHostPort(e,r){return e.includes(":")&&(e=`[${e}]`),t.fromString(`${e}:${r}`)}static fromSrvRecord({name:e,port:r}){return t.fromHostPort(e,r)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let e=this.host??"",r=this.port??0;return{host:e,port:r}}};ne.HostAddress=k_;ne.DEFAULT_PK_FACTORY={createPk(){return new L_.ObjectId}};ne.MONGODB_WARNING_CODE="MONGODB DRIVER";function BI(t){return process.emitWarning(t,{code:ne.MONGODB_WARNING_CODE})}var OI=new Set;function yee(t){if(!OI.has(t))return OI.add(t),BI(t)}function Cee(t){return Object.values(t).join(", ")}function Aee(t){return t?!!(t.loadBalanced||t.description.logicalSessionTimeoutMinutes!=null&&t.description.type!==zZ.ServerType.Standalone):!1}function See(t,e=0){let r=Array.from(t);if(e>r.length)throw new xr.MongoRuntimeError("Limit must be less than the number of items");let n=r.length,o=e%r.length===0?1:r.length-e;for(;n>o;){let i=Math.floor(Math.random()*n);n-=1;let s=r[n];r[n]=r[i],r[i]=s}return e%r.length===0?r:r.slice(o)}function _ee(t){return!!(t.aggregate||t.count||t.distinct||t.find||t.geoNear)}function wee(t,e){return t==null&&e==null?0:t==null?-1:e==null?1:ne.ByteUtils.compare(t.id,e.id)}function PI(t){if(typeof t=="number")return Math.trunc(t);let e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e}function Tee(t){let e=PI(t);return e!=null&&e>=0?e:null}function bee(t,e){let r=t.endsWith(".")?t.slice(0,t.length-1):t,n=e.endsWith(".")?e.slice(0,e.length-1):e,o=/^.*?\./,i=n.split(".").length<3,s=`.${r.replace(o,"")}`,u=i?n:`.${n.replace(o,"")}`;if(u.startsWith(".")||(u="."+u),i&&r.split(".").length<=n.split(".").length)throw new xr.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!s.endsWith(u))throw new xr.MongoAPIError("Server record does not share hostname with parent URI")}function vee(t,e={}){return new Promise((r,n)=>{let o,i=DI.get(t,e,s=>{s.setEncoding("utf8");let u="";s.on("data",a=>u+=a),s.on("end",()=>{(0,P_.clearTimeout)(o),r({status:s.statusCode,body:u})})}).on("error",s=>{(0,P_.clearTimeout)(o),n(s)}).end();o=(0,P_.setTimeout)(()=>{i.destroy(new xr.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function Oee(t,e={}){return await new Promise((r,n)=>{let o={method:"GET",timeout:1e4,json:!0,...GZ.parse(t),...e},i=DI.request(o,s=>{s.setEncoding("utf8");let u="";s.on("data",a=>{u+=a}),s.once("end",()=>{if(e.json===!1){r(u);return}try{let a=JSON.parse(u);r(a)}catch{n(new xr.MongoRuntimeError(`Invalid JSON response: "${u}"`))}})});i.once("timeout",()=>i.destroy(new xr.MongoNetworkTimeoutError(`Network request to ${t} timed out after ${e.timeout} ms`))),i.once("error",s=>n(s)),i.end()})}ne.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;ne.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;ne.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";ne.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function Ree(t,e){return!!(e&&t.test(e.toLowerCase()))}function U_(){let t,e;return{promise:new Promise(function(o,i){t=o,e=i}),resolve:t,reject:e}}function Dee(t){}ne.randomBytes=(0,$Z.promisify)(RI.randomBytes);async function Iee(t,e,r){r?.signal?.throwIfAborted();let{promise:n,resolve:o,reject:i}=U_(),s=c=>o(c),u=c=>i(c),a=q_(r?.signal,function(){i(this.reason)});t.once(e,s).once("error",u);try{return await n}finally{t.off(e,s),t.off("error",u),a?.[ne.kDispose]()}}function Mee(t,e,r){return(r.forceServerObjectId??t.db.options?.forceServerObjectId??!1)||e._id==null&&(e._id=t.s.pkFactory.createPk()),e}async function Nee(t,e){try{return await qZ.promises.access(t,e),!0}catch{return!1}}function Bee(t,e){return t===0?e:e===0?t:Math.min(t,e)}function Pee(){}function FI(t,e,r=!0){if(r&&(Buffer.isBuffer(e)&&(e=(0,L_.deserialize)(e)),Buffer.isBuffer(t)))throw new xr.MongoRuntimeError("Expected result of decryption to be deserialized BSON object");if(!(!t||typeof t!="object"))for(let n of Object.keys(t)){let o=e[n];if(o&&o._bsontype==="Binary"&&o.sub_type===6){t[b0.kDecoratedKeys]||Object.defineProperty(t,b0.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1}),t[b0.kDecoratedKeys].push(n);continue}FI(t[n],o,!1)}}ne.kDispose=Symbol.dispose??Symbol("dispose");function q_(t,e){if(t!=null)return t.addEventListener("abort",e,{once:!0}),{[ne.kDispose]:()=>t.removeEventListener("abort",e)}}async function Fee(t,{signal:e}){if(e==null)return await t;let{promise:r,reject:n}=U_(),o=e.aborted?n(e.reason):q_(e,function(){n(this.reason)});try{return await Promise.race([t,r])}finally{o?.[ne.kDispose]()}}});var $t=R(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.LegacyTimeoutContext=Jn.CSOTTimeoutContext=Jn.TimeoutContext=Jn.Timeout=Jn.TimeoutError=void 0;var xI=require("timers"),Zu=ie(),G_=de(),id=class extends Error{get name(){return"TimeoutError"}constructor(e,r){super(e,r),this.duration=r.duration}static is(e){return e!=null&&typeof e=="object"&&"name"in e&&e.name==="TimeoutError"}};Jn.TimeoutError=id;var Yn=class t extends Promise{get remainingTime(){return this.timedOut?0:this.duration===0?1/0:this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(e=()=>null,r){let n=r?.duration??0,o=!!r?.unref,i=r?.rejection;if(n<0)throw new Zu.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let s;super((u,a)=>{s=a,e(G_.noop,a)}),this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=n,this.start=Math.trunc(performance.now()),i==null&&this.duration>0?(this.id=(0,xI.setTimeout)(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,s(new id(`Expired after ${n}ms`,{duration:n}))},this.duration),typeof this.id.unref=="function"&&o&&this.id.unref()):i!=null&&(this.ended=Math.trunc(performance.now()),this.timedOut=!0,s(i))}clear(){(0,xI.clearTimeout)(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,G_.squashError),new id("Timed out",{duration:this.duration})}static expires(e,r){return new t(void 0,{duration:e,unref:r})}static reject(e){return new t(void 0,{duration:0,unref:!0,rejection:e})}};Jn.Timeout=Yn;function xee(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"waitQueueTimeoutMS"in t&&typeof t.waitQueueTimeoutMS=="number"}function kee(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"timeoutMS"in t&&typeof t.timeoutMS=="number"}var sd=class{static create(e){if(e.session?.timeoutContext!=null)return e.session?.timeoutContext;if(kee(e))return new R0(e);if(xee(e))return new D0(e);throw new Zu.MongoRuntimeError("Unrecognized options")}};Jn.TimeoutContext=sd;var R0=class t extends sd{constructor(e){super(),this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=e.timeoutMS,this.serverSelectionTimeoutMS=e.serverSelectionTimeoutMS,this.socketTimeoutMS=e.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let e=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-e}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:e,serverSelectionTimeoutMS:r}=this;if(e<=0)return Yn.reject(new Zu.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));r!==0&&(0,G_.csotMin)(e,r)===r?this._serverSelectionTimeout=Yn.expires(r):e>0&&Number.isFinite(e)?this._serverSelectionTimeout=Yn.expires(e):this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout=="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new Zu.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Yn.expires(e):Yn.reject(new Zu.MongoOperationTimeoutError("Timed out before socket write")):null}get timeoutForSocketRead(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Yn.expires(e):Yn.reject(new Zu.MongoOperationTimeoutError("Timed out before socket read")):null}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(e){let{remainingTimeMS:r}=this;if(r<=0)throw new Zu.MongoOperationTimeoutError(e??`Expired after ${this.timeoutMS}ms`);return r}clone(){let e=new t({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return e.start=this.start,e}refreshed(){return new t(this)}addMaxTimeMSToCommand(e,r){if(r.omitMaxTimeMS)return;let n=this.remainingTimeMS-this.minRoundTripTime;n>0&&Number.isFinite(n)&&(e.maxTimeMS=n)}getSocketTimeoutMS(){return 0}};Jn.CSOTTimeoutContext=R0;var D0=class t extends sd{constructor(e){super(),this.options=e,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){return this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0?Yn.expires(this.options.serverSelectionTimeoutMS):null}get connectionCheckoutTimeout(){return this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0?Yn.expires(this.options.waitQueueTimeoutMS):null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){}clear(){}get maxTimeMS(){return null}refreshed(){return new t(this.options)}addMaxTimeMSToCommand(e,r){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}};Jn.LegacyTimeoutContext=D0});var ud=R(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.Explain=ci.ExplainVerbosity=void 0;ci.validateExplainTimeoutOptions=Uee;ci.decorateWithExplain=qee;var Lee=ie();ci.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});var V_=class t{constructor(e,r){typeof e=="boolean"?this.verbosity=e?ci.ExplainVerbosity.allPlansExecution:ci.ExplainVerbosity.queryPlanner:this.verbosity=e,this.maxTimeMS=r}static fromOptions({explain:e}={}){if(e==null)return;if(typeof e=="boolean"||typeof e=="string")return new t(e);let{verbosity:r,maxTimeMS:n}=e;return new t(r,n)}};ci.Explain=V_;function Uee(t,e){let{maxTimeMS:r,timeoutMS:n}=t;if(n!=null&&(r!=null||e?.maxTimeMS!=null))throw new Lee.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function qee(t,e){let{verbosity:r,maxTimeMS:n}=e,o={explain:t,verbosity:r};return typeof n=="number"&&(o.maxTimeMS=n),o}});var ot=R(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.AbstractOperation=Xn.Aspect=void 0;Xn.defineAspects=Vee;var Gee=qe(),$_=tr();Xn.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING"),SUPPORTS_RAW_DATA:Symbol("SUPPORTS_RAW_DATA")};var H_=class{constructor(e={}){this.readPreference=this.hasAspect(Xn.Aspect.WRITE_OPERATION)?$_.ReadPreference.primary:$_.ReadPreference.fromOptions(e)??$_.ReadPreference.primary,this.bsonOptions=(0,Gee.resolveBSONOptions)(e),this._session=e.session!=null?e.session:void 0,this.options=e,this.bypassPinningCheck=!!e.bypassPinningCheck}hasAspect(e){let r=this.constructor;return r.aspects==null?!1:r.aspects.has(e)}get session(){return this._session}set session(e){this._session=e}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(Xn.Aspect.RETRYABLE)&&this.hasAspect(Xn.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(Xn.Aspect.RETRYABLE)&&this.hasAspect(Xn.Aspect.WRITE_OPERATION)}handleOk(e){return e.toObject(this.bsonOptions)}handleError(e){throw e}};Xn.AbstractOperation=H_;function Vee(t,e){return!Array.isArray(e)&&!(e instanceof Set)&&(e=[e]),e=new Set(e),Object.defineProperty(t,"aspects",{value:e,writable:!1}),e}});var Ot=R(M0=>{"use strict";Object.defineProperty(M0,"__esModule",{value:!0});M0.CommandOperation=void 0;var $ee=xs(),Hee=ie(),W_=ud(),Wee=Do(),I0=de(),kI=Fr(),ea=ot(),z_=class extends ea.AbstractOperation{constructor(e,r){super(r),this.options=r??{};let n=r?.dbName||r?.authdb;if(n?this.ns=new I0.MongoDBNamespace(n,"$cmd"):this.ns=e?e.s.namespace.withCollection("$cmd"):new I0.MongoDBNamespace("admin","$cmd"),this.readConcern=Wee.ReadConcern.fromOptions(r),this.writeConcern=kI.WriteConcern.fromOptions(r),this.hasAspect(ea.Aspect.EXPLAINABLE))this.explain=W_.Explain.fromOptions(r),this.explain&&(0,W_.validateExplainTimeoutOptions)(this.options,this.explain);else if(r?.explain!=null)throw new Hee.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){return this.hasAspect(ea.Aspect.EXPLAINABLE)?this.explain==null:super.canRetryWrite}buildOptions(e){return{...this.options,...this.bsonOptions,timeoutContext:e,readPreference:this.readPreference,session:this.session}}buildCommand(e,r){let n=this.buildCommandDocument(e,r),o=this.session&&this.session.inTransaction();return this.readConcern&&(0,I0.commandSupportsReadConcern)(n)&&!o&&Object.assign(n,{readConcern:this.readConcern}),this.writeConcern&&this.hasAspect(ea.Aspect.WRITE_OPERATION)&&!o&&kI.WriteConcern.apply(n,this.writeConcern),this.options.collation&&typeof this.options.collation=="object"&&!this.hasAspect(ea.Aspect.SKIP_COLLATION)&&Object.assign(n,{collation:this.options.collation}),typeof this.options.maxTimeMS=="number"&&(n.maxTimeMS=this.options.maxTimeMS),this.options.rawData!=null&&this.hasAspect(ea.Aspect.SUPPORTS_RAW_DATA)&&(0,I0.maxWireVersion)(e)>=$ee.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION&&(n.rawData=this.options.rawData),this.hasAspect(ea.Aspect.EXPLAINABLE)&&this.explain?(0,W_.decorateWithExplain)(n,this.explain):n}};M0.CommandOperation=z_});var ad=R(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.AggregateOperation=ta.DB_AGGREGATE_COLLECTION=void 0;var j_=Ye(),LI=ie(),zee=Fr(),jee=Ot(),qc=ot();ta.DB_AGGREGATE_COLLECTION=1;var N0=class extends jee.CommandOperation{constructor(e,r,n){if(super(void 0,{...n,dbName:e.db}),this.SERVER_COMMAND_RESPONSE_TYPE=j_.CursorResponse,this.options={...n},this.target=e.collection||ta.DB_AGGREGATE_COLLECTION,this.pipeline=r,this.hasWriteStage=!1,typeof n?.out=="string")this.pipeline=this.pipeline.concat({$out:n.out}),this.hasWriteStage=!0;else if(r.length>0){let o=r[r.length-1];(o.$out||o.$merge)&&(this.hasWriteStage=!0)}if(this.hasWriteStage||delete this.options.writeConcern,this.explain&&this.writeConcern)throw new LI.MongoInvalidArgumentError('Option "explain" cannot be used on an aggregate call with writeConcern');if(n?.cursor!=null&&typeof n.cursor!="object")throw new LI.MongoInvalidArgumentError("Cursor options must be an object");this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?j_.ExplainedCursorResponse:j_.CursorResponse}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(e){this.pipeline.push(e)}buildCommandDocument(){let e=this.options,r={aggregate:this.target,pipeline:this.pipeline};return this.hasWriteStage&&this.writeConcern&&zee.WriteConcern.apply(r,this.writeConcern),e.bypassDocumentValidation===!0&&(r.bypassDocumentValidation=e.bypassDocumentValidation),typeof e.allowDiskUse=="boolean"&&(r.allowDiskUse=e.allowDiskUse),e.hint&&(r.hint=e.hint),e.let&&(r.let=e.let),e.comment!==void 0&&(r.comment=e.comment),r.cursor=e.cursor||{},e.batchSize&&!this.hasWriteStage&&(r.cursor.batchSize=e.batchSize),r}handleOk(e){return e}};ta.AggregateOperation=N0;(0,qc.defineAspects)(N0,[qc.Aspect.READ_OPERATION,qc.Aspect.RETRYABLE,qc.Aspect.EXPLAINABLE,qc.Aspect.CURSOR_CREATING,qc.Aspect.SUPPORTS_RAW_DATA])});var rr=R(B0=>{"use strict";Object.defineProperty(B0,"__esModule",{value:!0});B0.executeOperation=Xee;B0.autoConnect=VI;var _r=ie(),UI=tr(),qI=td(),Kee=$t(),K_=de(),Yee=ad(),Yi=ot(),Jee=_r.MONGODB_ERROR_CODES.IllegalOperation,GI="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function Xee(t,e,r){if(!(e instanceof Yi.AbstractOperation))throw new _r.MongoRuntimeError("This method requires a valid operation instance");let n=t.topology==null?await(0,K_.abortable)(VI(t),e.options):t.topology,o=e.session,i;if(o==null)i=Symbol(),o=t.startSession({owner:i,explicit:!1});else{if(o.hasEnded)throw new _r.MongoExpiredSessionError("Use of expired sessions is not permitted");if(o.snapshotEnabled&&!n.capabilities.supportsSnapshotReads)throw new _r.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");if(o.client!==t)throw new _r.MongoInvalidArgumentError("ClientSession must be from the same MongoClient")}e.session??=o;let s=e.readPreference??UI.ReadPreference.primary,u=!!o?.inTransaction(),a=e.hasAspect(Yi.Aspect.READ_OPERATION);if(u&&!s.equals(UI.ReadPreference.primary)&&(a||e.commandName==="runCommand"))throw new _r.MongoTransactionError(`Read preference in a transaction must be primary, not: ${s.mode}`);o?.isPinned&&o.transaction.isCommitted&&!e.bypassPinningCheck&&o.unpin(),r??=Kee.TimeoutContext.create({session:o,serverSelectionTimeoutMS:t.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.s.options.waitQueueTimeoutMS,timeoutMS:e.options.timeoutMS});try{return await Qee(e,{topology:n,timeoutContext:r,session:o,readPreference:s})}finally{o?.owner!=null&&o.owner===i&&await o.endSession()}}async function VI(t){if(t.topology==null){if(t.s.hasBeenClosed)throw new _r.MongoNotConnectedError("Client must be connected before running operations");t.s.options.__skipPingOnConnect=!0;try{if(await t.connect(),t.topology==null)throw new _r.MongoRuntimeError("client.connect did not create a topology but also did not throw");return t.topology}finally{delete t.s.options.__skipPingOnConnect}}return t.topology}async function Qee(t,{topology:e,timeoutContext:r,session:n,readPreference:o}){let i;t.hasAspect(Yi.Aspect.MUST_SELECT_SAME_SERVER)?i=(0,qI.sameServerSelector)(t.server?.description):t instanceof Yee.AggregateOperation&&t.hasWriteStage?i=(0,qI.secondaryWritableServerSelector)(e.commonWireVersion,o):i=o;let s=await e.selectServer(i,{session:n,operationName:t.commandName,timeoutContext:r,signal:t.options.signal}),u=t.hasAspect(Yi.Aspect.READ_OPERATION),a=t.hasAspect(Yi.Aspect.WRITE_OPERATION),c=n?.inTransaction()??!1,d=e.s.options.retryReads&&!c&&t.canRetryRead,p=e.s.options.retryWrites&&!c&&(0,K_.supportsRetryableWrites)(s)&&t.canRetryWrite,m=t.hasAspect(Yi.Aspect.RETRYABLE)&&n!=null&&(u&&d||a&&p);a&&p&&n!=null&&(t.options.willRetryWrite=!0,n.incrementTransactionNumber());let E=m?r.csotEnabled()?1/0:2:1,y,A;for(let S=0;S<E;S++){if(y){if(a&&y.code===Jee)throw new _r.MongoServerError({message:GI,errmsg:GI,originalError:y});if(t.hasAspect(Yi.Aspect.COMMAND_BATCHING)&&!t.canRetryWrite||a&&!(0,_r.isRetryableWriteError)(y)||u&&!(0,_r.isRetryableReadError)(y))throw y;if(y instanceof _r.MongoNetworkError&&t.hasAspect(Yi.Aspect.CURSOR_CREATING)&&n!=null&&n.isPinned&&!n.inTransaction()&&n.unpin({force:!0,forceClear:!0}),s=await e.selectServer(i,{session:n,operationName:t.commandName,previousServer:A,signal:t.options.signal}),a&&!(0,K_.supportsRetryableWrites)(s))throw new _r.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}t.server=s;try{S>0&&t.hasAspect(Yi.Aspect.COMMAND_BATCHING)&&t.resetBatch();try{let b=await s.command(t,r);return t.handleOk(b)}catch(b){return t.handleError(b)}}catch(b){if(!(b instanceof _r.MongoError))throw b;if(y!=null&&b.hasErrorLabel(_r.MongoErrorLabel.NoWritesPerformed))throw y;A=s.description,y=b,r.clear()}}throw y??new _r.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var HI=R(F0=>{"use strict";Object.defineProperty(F0,"__esModule",{value:!0});F0.ListDatabasesOperation=void 0;var Zee=Ye(),$I=de(),ete=Ot(),Y_=ot(),P0=class extends ete.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Zee.MongoDBResponse,this.options=r??{},this.ns=new $I.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}buildCommandDocument(e,r){let n={listDatabases:1};return typeof this.options.nameOnly=="boolean"&&(n.nameOnly=this.options.nameOnly),this.options.filter&&(n.filter=this.options.filter),typeof this.options.authorizedDatabases=="boolean"&&(n.authorizedDatabases=this.options.authorizedDatabases),(0,$I.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(n.comment=this.options.comment),n}};F0.ListDatabasesOperation=P0;(0,Y_.defineAspects)(P0,[Y_.Aspect.READ_OPERATION,Y_.Aspect.RETRYABLE])});var J_=R(k0=>{"use strict";Object.defineProperty(k0,"__esModule",{value:!0});k0.RemoveUserOperation=void 0;var tte=Ye(),rte=Ot(),WI=ot(),x0=class extends rte.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=tte.MongoDBResponse,this.options=n,this.username=r}get commandName(){return"dropUser"}buildCommandDocument(e){return{dropUser:this.username}}handleOk(e){return!0}};k0.RemoveUserOperation=x0;(0,WI.defineAspects)(x0,[WI.Aspect.WRITE_OPERATION])});var cd=R(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.RunCursorCommandOperation=Gc.RunCommandOperation=void 0;var zI=Ye(),nte=ot(),L0=class extends nte.AbstractOperation{constructor(e,r,n){super(n),this.SERVER_COMMAND_RESPONSE_TYPE=zI.MongoDBResponse,this.command=r,this.options=n,this.ns=e.withCollection("$cmd")}get commandName(){return"runCommand"}buildCommand(e,r){return this.command}buildOptions(e){return{...this.options,session:this.session,timeoutContext:e,signal:this.options.signal,readPreference:this.options.readPreference}}};Gc.RunCommandOperation=L0;var X_=class extends L0{constructor(){super(...arguments),this.SERVER_COMMAND_RESPONSE_TYPE=zI.CursorResponse}handleOk(e){return e}};Gc.RunCursorCommandOperation=X_});var jI=R(U0=>{"use strict";Object.defineProperty(U0,"__esModule",{value:!0});U0.ValidateCollectionOperation=void 0;var ote=Ye(),Q_=ie(),ite=Ot(),Z_=class extends ite.CommandOperation{constructor(e,r,n){super(e.s.db,n),this.SERVER_COMMAND_RESPONSE_TYPE=ote.MongoDBResponse,this.options=n,this.collectionName=r}get commandName(){return"validate"}buildCommandDocument(e,r){return{validate:this.collectionName,...Object.fromEntries(Object.entries(this.options).filter(n=>n[0]!=="session"))}}handleOk(e){let r=super.handleOk(e);if(r.result!=null&&typeof r.result!="string")throw new Q_.MongoUnexpectedServerResponseError("Error with validation data");if(r.result!=null&&r.result.match(/exception|corrupt/)!=null)throw new Q_.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);if(r.valid!=null&&!r.valid)throw new Q_.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);return e}};U0.ValidateCollectionOperation=Z_});var t3=R(G0=>{"use strict";Object.defineProperty(G0,"__esModule",{value:!0});G0.Admin=void 0;var ste=qe(),q0=rr(),ute=HI(),ate=J_(),cte=cd(),lte=jI(),dte=de(),e3=class{constructor(e){this.s={db:e}}async command(e,r){return await(0,q0.executeOperation)(this.s.db.client,new cte.RunCommandOperation(new dte.MongoDBNamespace("admin"),e,{...(0,ste.resolveBSONOptions)(r),session:r?.session,readPreference:r?.readPreference,timeoutMS:r?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(e){return await this.command({buildinfo:1},e)}async serverInfo(e){return await this.command({buildinfo:1},e)}async serverStatus(e){return await this.command({serverStatus:1},e)}async ping(e){return await this.command({ping:1},e)}async removeUser(e,r){return await(0,q0.executeOperation)(this.s.db.client,new ate.RemoveUserOperation(this.s.db,e,{dbName:"admin",...r}))}async validateCollection(e,r={}){return await(0,q0.executeOperation)(this.s.db.client,new lte.ValidateCollectionOperation(this,e,r))}async listDatabases(e){return await(0,q0.executeOperation)(this.s.db.client,new ute.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...e}))}async replSetGetStatus(e){return await this.command({replSetGetStatus:1},e)}};G0.Admin=e3});var n3=R(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.DeleteManyOperation=Ji.DeleteOneOperation=Ji.DeleteOperation=void 0;Ji.makeDeleteStatement=r3;var fte=Ye(),ld=ie(),hte=de(),pte=Ot(),kr=ot(),Vc=class extends pte.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=fte.MongoDBResponse,this.options=n,this.ns=e,this.statements=r}get commandName(){return"delete"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.limit!=null?e.limit>0:!0)}buildCommandDocument(e,r){let n=this.options,o=typeof n.ordered=="boolean"?n.ordered:!0,i={delete:this.ns.collection,deletes:this.statements,ordered:o};if(n.let&&(i.let=n.let),n.comment!==void 0&&(i.comment=n.comment),this.writeConcern&&this.writeConcern.w===0&&(0,hte.maxWireVersion)(e)<9&&this.statements.find(u=>u.hint))throw new ld.MongoCompatibilityError("hint for the delete command is only supported on MongoDB 4.4+");return i}};Ji.DeleteOperation=Vc;var V0=class extends Vc{constructor(e,r,n){super(e,[r3(r,{...n,limit:1})],n)}handleOk(e){let r=super.handleOk(e);if(this.explain)return r;if(r.code)throw new ld.MongoServerError(r);if(r.writeErrors)throw new ld.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:r.n}}};Ji.DeleteOneOperation=V0;var $0=class extends Vc{constructor(e,r,n){super(e,[r3(r,n)],n)}handleOk(e){let r=super.handleOk(e);if(this.explain)return r;if(r.code)throw new ld.MongoServerError(r);if(r.writeErrors)throw new ld.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:r.n}}};Ji.DeleteManyOperation=$0;function r3(t,e){let r={q:t,limit:typeof e.limit=="number"?e.limit:0};return e.collation&&(r.collation=e.collation),e.hint&&(r.hint=e.hint),r}(0,kr.defineAspects)(Vc,[kr.Aspect.RETRYABLE,kr.Aspect.WRITE_OPERATION,kr.Aspect.SUPPORTS_RAW_DATA]);(0,kr.defineAspects)(V0,[kr.Aspect.RETRYABLE,kr.Aspect.WRITE_OPERATION,kr.Aspect.EXPLAINABLE,kr.Aspect.SKIP_COLLATION,kr.Aspect.SUPPORTS_RAW_DATA]);(0,kr.defineAspects)($0,[kr.Aspect.WRITE_OPERATION,kr.Aspect.EXPLAINABLE,kr.Aspect.SKIP_COLLATION,kr.Aspect.SUPPORTS_RAW_DATA])});var o3=R($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.InsertOneOperation=$c.InsertOperation=void 0;var mte=Ye(),KI=ie(),gte=de(),Ete=Ot(),ks=ot(),dd=class extends Ete.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=mte.MongoDBResponse,this.options={...n,checkKeys:n.checkKeys??!1},this.ns=e,this.documents=r}get commandName(){return"insert"}buildCommandDocument(e,r){let n=this.options??{},o=typeof n.ordered=="boolean"?n.ordered:!0,i={insert:this.ns.collection,documents:this.documents,ordered:o};return typeof n.bypassDocumentValidation=="boolean"&&(i.bypassDocumentValidation=n.bypassDocumentValidation),n.comment!==void 0&&(i.comment=n.comment),i}};$c.InsertOperation=dd;var H0=class extends dd{constructor(e,r,n){super(e.s.namespace,[(0,gte.maybeAddIdToDocuments)(e,r,n)],n)}handleOk(e){let r=super.handleOk(e);if(r.code)throw new KI.MongoServerError(r);if(r.writeErrors)throw new KI.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}};$c.InsertOneOperation=H0;(0,ks.defineAspects)(dd,[ks.Aspect.RETRYABLE,ks.Aspect.WRITE_OPERATION,ks.Aspect.SUPPORTS_RAW_DATA]);(0,ks.defineAspects)(H0,[ks.Aspect.RETRYABLE,ks.Aspect.WRITE_OPERATION,ks.Aspect.SUPPORTS_RAW_DATA])});var Wc=R(i3=>{"use strict";Object.defineProperty(i3,"__esModule",{value:!0});i3.formatSort=Rte;var YI=ie();function Hc(t=1){let e=`${t}`.toLowerCase();if(yte(t))return t;switch(e){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new YI.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(t)}`)}}function yte(t){return typeof t=="object"&&t!=null&&"$meta"in t&&typeof t.$meta=="string"}function Cte(t){if(Array.isArray(t)&&t.length===2)try{return Hc(t[1]),!0}catch{return!1}return!1}function Ate(t){return Array.isArray(t)&&Array.isArray(t[0])}function Ste(t){return t instanceof Map&&t.size>0}function _te(t){return Array.isArray(t)}function wte(t){return new Map([[`${t[0]}`,Hc([t[1]])]])}function Tte(t){let e=t.map(([r,n])=>[`${r}`,Hc(n)]);return new Map(e)}function bte(t){let e=t.map(r=>[`${r}`,1]);return new Map(e)}function vte(t){let e=Object.entries(t).map(([r,n])=>[`${r}`,Hc(n)]);return new Map(e)}function Ote(t){let e=Array.from(t).map(([r,n])=>[`${r}`,Hc(n)]);return new Map(e)}function Rte(t,e){if(t!=null){if(typeof t=="string")return new Map([[t,Hc(e)]]);if(typeof t!="object")throw new YI.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(t)} Sort must be a valid object`);if(!_te(t))return Ste(t)?Ote(t):Object.keys(t).length?vte(t):void 0;if(t.length)return Ate(t)?Tte(t):Cte(t)?wte(t):bte(t)}}});var u3=R(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.ReplaceOneOperation=Mo.UpdateManyOperation=Mo.UpdateOneOperation=Mo.UpdateOperation=void 0;Mo.makeUpdateStatement=K0;var Dte=Ye(),No=ie(),Ite=Wc(),s3=de(),Mte=Ot(),Nt=ot(),ra=class extends Mte.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=Dte.MongoDBResponse,this.options=n,this.ns=e,this.statements=r}get commandName(){return"update"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.multi==null||e.multi===!1)}buildCommandDocument(e,r){let n=this.options,o={update:this.ns.collection,updates:this.statements,ordered:n.ordered??!0};return typeof n.bypassDocumentValidation=="boolean"&&(o.bypassDocumentValidation=n.bypassDocumentValidation),n.let&&(o.let=n.let),n.comment!==void 0&&(o.comment=n.comment),o}};Mo.UpdateOperation=ra;var W0=class extends ra{constructor(e,r,n,o){if(super(e,[K0(r,n,{...o,multi:!1})],o),!(0,s3.hasAtomicOperators)(n,o))throw new No.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new No.MongoServerError(r);if(r.writeErrors)throw new No.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};Mo.UpdateOneOperation=W0;var z0=class extends ra{constructor(e,r,n,o){if(super(e,[K0(r,n,{...o,multi:!0})],o),!(0,s3.hasAtomicOperators)(n,o))throw new No.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new No.MongoServerError(r);if(r.writeErrors)throw new No.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};Mo.UpdateManyOperation=z0;var j0=class extends ra{constructor(e,r,n,o){if(super(e,[K0(r,n,{...o,multi:!1})],o),(0,s3.hasAtomicOperators)(n))throw new No.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new No.MongoServerError(r);if(r.writeErrors)throw new No.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};Mo.ReplaceOneOperation=j0;function K0(t,e,r){if(t==null||typeof t!="object")throw new No.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(e==null||typeof e!="object")throw new No.MongoInvalidArgumentError("Document must be a valid JavaScript object");let n={q:t,u:e};return typeof r.upsert=="boolean"&&(n.upsert=r.upsert),r.multi&&(n.multi=r.multi),r.hint&&(n.hint=r.hint),r.arrayFilters&&(n.arrayFilters=r.arrayFilters),r.collation&&(n.collation=r.collation),!r.multi&&r.sort!=null&&(n.sort=(0,Ite.formatSort)(r.sort)),n}(0,Nt.defineAspects)(ra,[Nt.Aspect.RETRYABLE,Nt.Aspect.WRITE_OPERATION,Nt.Aspect.SKIP_COLLATION,Nt.Aspect.SUPPORTS_RAW_DATA]);(0,Nt.defineAspects)(W0,[Nt.Aspect.RETRYABLE,Nt.Aspect.WRITE_OPERATION,Nt.Aspect.EXPLAINABLE,Nt.Aspect.SKIP_COLLATION,Nt.Aspect.SUPPORTS_RAW_DATA]);(0,Nt.defineAspects)(z0,[Nt.Aspect.WRITE_OPERATION,Nt.Aspect.EXPLAINABLE,Nt.Aspect.SKIP_COLLATION,Nt.Aspect.SUPPORTS_RAW_DATA]);(0,Nt.defineAspects)(j0,[Nt.Aspect.RETRYABLE,Nt.Aspect.WRITE_OPERATION,Nt.Aspect.SKIP_COLLATION,Nt.Aspect.SUPPORTS_RAW_DATA])});var md=R($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.BulkOperationBase=$e.FindOperators=$e.MongoBulkWriteError=$e.WriteError=$e.WriteConcernError=$e.BulkWriteResult=$e.Batch=$e.BatchType=void 0;$e.mergeBatchResults=c3;var QI=qe(),Ht=ie(),hd=n3(),Nte=rr(),Bte=o3(),na=u3(),Pte=$t(),Bo=de(),JI=Fr();$e.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});var a3=class{constructor(e,r){this.originalZeroIndex=r,this.currentIndex=0,this.originalIndexes=[],this.batchType=e,this.operations=[],this.size=0,this.sizeBytes=0}};$e.Batch=a3;var Ls=class t{static generateIdMap(e){let r={};for(let n of e)r[n.index]=n._id;return r}constructor(e,r){this.result=e,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=t.generateIdMap(this.result.upserted),this.insertedIds=t.generateIdMap(this.getSuccessfullyInsertedIds(e,r)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(e,r){return e.writeErrors.length===0?e.insertedIds:r?e.insertedIds.slice(0,e.writeErrors[0].index):e.insertedIds.filter(({index:n})=>!e.writeErrors.some(o=>n===o.index))}getUpsertedIdAt(e){return this.result.upserted[e]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(e){return e<this.result.writeErrors.length?this.result.writeErrors[e]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length!==0){if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];{let e="";for(let r=0;r<this.result.writeConcernErrors.length;r++){let n=this.result.writeConcernErrors[r];e=e+n.errmsg,r===0&&(e=e+" and ")}return new zc({errmsg:e,code:Ht.MONGODB_ERROR_CODES.WriteConcernTimeout})}}}toString(){return`BulkWriteResult(${QI.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}};$e.BulkWriteResult=Ls;var zc=class{constructor(e){this.serverError=e}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}};$e.WriteConcernError=zc;var pd=class{constructor(e){this.err=e}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}};$e.WriteError=pd;function c3(t,e,r,n){if(r?n=r:n&&n.result&&(n=n.result),n==null)return;if(n.ok===0&&e.ok===1){e.ok=0;let i={index:0,code:n.code||0,errmsg:n.message,errInfo:n.errInfo,op:t.operations[0]};e.writeErrors.push(new pd(i));return}else if(n.ok===0&&e.ok===0)return;ZI(t)&&n.n&&(e.nInserted=e.nInserted+n.n),f3(t)&&n.n&&(e.nRemoved=e.nRemoved+n.n);let o=0;if(Array.isArray(n.upserted)){o=n.upserted.length;for(let i=0;i<n.upserted.length;i++)e.upserted.push({index:n.upserted[i].index+t.originalZeroIndex,_id:n.upserted[i]._id})}else n.upserted&&(o=1,e.upserted.push({index:t.originalZeroIndex,_id:n.upserted}));if(d3(t)&&n.n){let i=n.nModified;e.nUpserted=e.nUpserted+o,e.nMatched=e.nMatched+(n.n-o),typeof i=="number"?e.nModified=e.nModified+i:e.nModified=0}if(Array.isArray(n.writeErrors))for(let i=0;i<n.writeErrors.length;i++){let s={index:t.originalIndexes[n.writeErrors[i].index],code:n.writeErrors[i].code,errmsg:n.writeErrors[i].errmsg,errInfo:n.writeErrors[i].errInfo,op:t.operations[n.writeErrors[i].index]};e.writeErrors.push(new pd(s))}n.writeConcernError&&e.writeConcernErrors.push(new zc(n.writeConcernError))}async function XI(t,e){if(t.s.batches.length===0)return new Ls(t.s.bulkResult,t.isOrdered);for(let n of t.s.batches){let o=(0,Bo.resolveOptions)(t,{...e,ordered:t.isOrdered});o.bypassDocumentValidation!==!0&&delete o.bypassDocumentValidation,t.s.bypassDocumentValidation===!0&&(o.bypassDocumentValidation=!0),t.s.checkKeys===!1&&(o.checkKeys=!1),o.retryWrites&&(d3(n)&&(o.retryWrites=o.retryWrites&&!n.operations.some(c=>c.multi)),f3(n)&&(o.retryWrites=o.retryWrites&&!n.operations.some(c=>c.limit===0)));let i=ZI(n)?new Bte.InsertOperation(t.s.namespace,n.operations,o):d3(n)?new na.UpdateOperation(t.s.namespace,n.operations,o):f3(n)?new hd.DeleteOperation(t.s.namespace,n.operations,o):null;if(i==null)throw new Ht.MongoRuntimeError(`Unknown batchType: ${n.batchType}`);let s=null,u;try{u=await(0,Nte.executeOperation)(t.s.collection.client,i,o.timeoutContext)}catch(c){s=c}if(s!=null)if(s instanceof Ht.MongoWriteConcernError){c3(n,t.s.bulkResult,s,u);let c=new Ls(t.s.bulkResult,t.isOrdered);throw new oa({message:s.result.writeConcernError.errmsg,code:s.result.writeConcernError.code},c)}else throw new oa(s,new Ls(t.s.bulkResult,t.isOrdered));c3(n,t.s.bulkResult,s,u);let a=new Ls(t.s.bulkResult,t.isOrdered);t.handleWriteError(a)}t.s.batches.length=0;let r=new Ls(t.s.bulkResult,t.isOrdered);return t.handleWriteError(r),r}var oa=class extends Ht.MongoServerError{constructor(e,r){super(e),this.writeErrors=[],e instanceof zc?this.err=e:e instanceof Error||(this.message=e.message,this.code=e.code,this.writeErrors=e.writeErrors??[]),this.result=r,Object.assign(this,e)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}};$e.MongoBulkWriteError=oa;var Y0=class{constructor(e){this.bulkOperation=e}update(e){let r=fd(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.UPDATE,(0,na.makeUpdateStatement)(r.selector,e,{...r,multi:!0}))}updateOne(e){if(!(0,Bo.hasAtomicOperators)(e,this.bulkOperation.bsonOptions))throw new Ht.MongoInvalidArgumentError("Update document requires atomic operators");let r=fd(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.UPDATE,(0,na.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}replaceOne(e){if((0,Bo.hasAtomicOperators)(e))throw new Ht.MongoInvalidArgumentError("Replacement document must not use atomic operators");let r=fd(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.UPDATE,(0,na.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}deleteOne(){let e=fd(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.DELETE,(0,hd.makeDeleteStatement)(e.selector,{...e,limit:1}))}delete(){let e=fd(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.DELETE,(0,hd.makeDeleteStatement)(e.selector,{...e,limit:0}))}upsert(){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.upsert=!0,this}collation(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.collation=e,this}arrayFilters(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.arrayFilters=e,this}hint(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.hint=e,this}};$e.FindOperators=Y0;var l3=class{constructor(e,r,n){this.collection=e,this.isOrdered=n;let o=(0,Bo.getTopology)(e);r=r??{};let i=e.s.namespace,s=!1,u=void 0,a=o.lastHello(),c=!!(o.s.options&&o.s.options.autoEncrypter),d=a&&a.maxBsonObjectSize?a.maxBsonObjectSize:1024*1024*16,p=c?1024*1024*2:d,m=a&&a.maxWriteBatchSize?a.maxWriteBatchSize:1e3,E=(m-1).toString(10).length+2,y=Object.assign({},r);y=(0,Bo.applyRetryableWrites)(y,e.db);let A={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};this.s={bulkResult:A,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:JI.WriteConcern.fromOptions(r),maxBsonObjectSize:d,maxBatchSizeBytes:p,maxWriteBatchSize:m,maxKeySize:E,namespace:i,topology:o,options:y,bsonOptions:(0,QI.resolveBSONOptions)(r),currentOp:u,executed:s,collection:e,err:void 0,checkKeys:typeof r.checkKeys=="boolean"?r.checkKeys:!1},r.bypassDocumentValidation===!0&&(this.s.bypassDocumentValidation=!0)}insert(e){return(0,Bo.maybeAddIdToDocuments)(this.collection,e,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList($e.BatchType.INSERT,e)}find(e){if(!e)throw new Ht.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:e},new Y0(this)}raw(e){if(e==null||typeof e!="object")throw new Ht.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in e){let r=this.shouldForceServerObjectId(),n=e.insertOne&&e.insertOne.document==null?e.insertOne:e.insertOne.document;return(0,Bo.maybeAddIdToDocuments)(this.collection,n,{forceServerObjectId:r}),this.addToOperationsList($e.BatchType.INSERT,n)}if("replaceOne"in e||"updateOne"in e||"updateMany"in e){if("replaceOne"in e){if("q"in e.replaceOne)throw new Ht.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,na.makeUpdateStatement)(e.replaceOne.filter,e.replaceOne.replacement,{...e.replaceOne,multi:!1});if((0,Bo.hasAtomicOperators)(r.u))throw new Ht.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList($e.BatchType.UPDATE,r)}if("updateOne"in e){if("q"in e.updateOne)throw new Ht.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,na.makeUpdateStatement)(e.updateOne.filter,e.updateOne.update,{...e.updateOne,multi:!1});if(!(0,Bo.hasAtomicOperators)(r.u,this.bsonOptions))throw new Ht.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList($e.BatchType.UPDATE,r)}if("updateMany"in e){if("q"in e.updateMany)throw new Ht.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,na.makeUpdateStatement)(e.updateMany.filter,e.updateMany.update,{...e.updateMany,multi:!0});if(!(0,Bo.hasAtomicOperators)(r.u,this.bsonOptions))throw new Ht.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList($e.BatchType.UPDATE,r)}}if("deleteOne"in e){if("q"in e.deleteOne)throw new Ht.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList($e.BatchType.DELETE,(0,hd.makeDeleteStatement)(e.deleteOne.filter,{...e.deleteOne,limit:1}))}if("deleteMany"in e){if("q"in e.deleteMany)throw new Ht.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList($e.BatchType.DELETE,(0,hd.makeDeleteStatement)(e.deleteMany.filter,{...e.deleteMany,limit:0}))}throw new Ht.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let e=[...this.s.batches];return this.isOrdered?this.s.currentBatch&&e.push(this.s.currentBatch):(this.s.currentInsertBatch&&e.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&e.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&e.push(this.s.currentRemoveBatch)),e}async execute(e={}){if(this.s.executed)throw new Ht.MongoBatchReExecutionError;let r=JI.WriteConcern.fromOptions(e);if(r&&(this.s.writeConcern=r),this.isOrdered?this.s.currentBatch&&this.s.batches.push(this.s.currentBatch):(this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch)),this.s.batches.length===0)throw new Ht.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let n=(0,Bo.resolveOptions)(this.collection,{...this.s.options,...e});return n.timeoutContext??=Pte.TimeoutContext.create({session:n.session,timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:this.collection.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:this.collection.client.s.options.waitQueueTimeoutMS}),n.session==null?await this.collection.client.withSession({explicit:!1},async o=>await XI(this,{...n,session:o})):await XI(this,{...n})}handleWriteError(e){if(this.s.bulkResult.writeErrors.length>0){let n=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new oa({message:n,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},e)}let r=e.getWriteConcernError();if(r)throw new oa(r,e)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.db.options?.forceServerObjectId===!0}};$e.BulkOperationBase=l3;function ZI(t){return t.batchType===$e.BatchType.INSERT}function d3(t){return t.batchType===$e.BatchType.UPDATE}function f3(t){return t.batchType===$e.BatchType.DELETE}function fd(t){let{currentOp:e}=t.s;return t.s.currentOp=void 0,e||(e={}),e}});var p3=R(X0=>{"use strict";Object.defineProperty(X0,"__esModule",{value:!0});X0.OrderedBulkOperation=void 0;var Fte=qe(),eM=ie(),J0=md(),h3=class extends J0.BulkOperationBase{constructor(e,r){super(e,r,!0)}addToOperationsList(e,r){let n=Fte.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new eM.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch==null&&(this.s.currentBatch=new J0.Batch(e,this.s.currentIndex));let o=this.s.maxKeySize;if((this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+o+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new J0.Batch(e,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0),e===J0.BatchType.INSERT&&this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:r._id}),Array.isArray(r))throw new eM.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(r),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=o+n,this.s.currentIndex+=1,this}};X0.OrderedBulkOperation=h3});var g3=R(Q0=>{"use strict";Object.defineProperty(Q0,"__esModule",{value:!0});Q0.UnorderedBulkOperation=void 0;var xte=qe(),tM=ie(),Xi=md(),m3=class extends Xi.BulkOperationBase{constructor(e,r){super(e,r,!1)}handleWriteError(e){if(!this.s.batches.length)return super.handleWriteError(e)}addToOperationsList(e,r){let n=xte.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new tM.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch=void 0,e===Xi.BatchType.INSERT?this.s.currentBatch=this.s.currentInsertBatch:e===Xi.BatchType.UPDATE?this.s.currentBatch=this.s.currentUpdateBatch:e===Xi.BatchType.DELETE&&(this.s.currentBatch=this.s.currentRemoveBatch);let o=this.s.maxKeySize;if(this.s.currentBatch==null&&(this.s.currentBatch=new Xi.Batch(e,this.s.currentIndex)),(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+o+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Xi.Batch(e,this.s.currentIndex)),Array.isArray(r))throw new tM.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.operations.push(r),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,e===Xi.BatchType.INSERT?(this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:r._id})):e===Xi.BatchType.UPDATE?this.s.currentUpdateBatch=this.s.currentBatch:e===Xi.BatchType.DELETE&&(this.s.currentRemoveBatch=this.s.currentBatch),this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=o+n,this}};Q0.UnorderedBulkOperation=m3});var Gs=R(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.MongoLogger=Ne.MongoLoggableComponent=Ne.SEVERITY_LEVEL_MAP=Ne.DEFAULT_MAX_DOCUMENT_LENGTH=Ne.SeverityLevel=void 0;Ne.parseSeverityFromString=A3;Ne.createStdioLogger=ia;Ne.stringifyWithMaxLen=qs;Ne.defaultLogTransform=oM;var rM=require("util"),nM=qe(),mt=Mt(),sa=de();Ne.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});Ne.DEFAULT_MAX_DOCUMENT_LENGTH=1e3;var C3=class extends Map{constructor(e){let r=[];for(let[n,o]of e)r.push([o,n]);r.push(...e),super(r)}getNumericSeverityLevel(e){return this.get(e)}getSeverityLevelName(e){return this.get(e)}};Ne.SEVERITY_LEVEL_MAP=new C3([[Ne.SeverityLevel.OFF,-1/0],[Ne.SeverityLevel.EMERGENCY,0],[Ne.SeverityLevel.ALERT,1],[Ne.SeverityLevel.CRITICAL,2],[Ne.SeverityLevel.ERROR,3],[Ne.SeverityLevel.WARNING,4],[Ne.SeverityLevel.NOTICE,5],[Ne.SeverityLevel.INFORMATIONAL,6],[Ne.SeverityLevel.DEBUG,7],[Ne.SeverityLevel.TRACE,8]]);Ne.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function A3(t){let e=Object.values(Ne.SeverityLevel),r=t?.toLowerCase();return r!=null&&e.includes(r)?r:null}function ia(t){return{write:(0,rM.promisify)((e,r)=>{let n=(0,rM.inspect)(e,{compact:!0,breakLength:1/0});t.write(`${n}
`,"utf-8",r)})}}function kte({MONGODB_LOG_PATH:t},{mongodbLogPath:e}){return typeof e=="string"&&/^stderr$/i.test(e)?{mongodbLogPath:ia(process.stderr),mongodbLogPathIsStdErr:!0}:typeof e=="string"&&/^stdout$/i.test(e)?{mongodbLogPath:ia(process.stdout),mongodbLogPathIsStdErr:!1}:typeof e=="object"&&typeof e?.write=="function"?{mongodbLogPath:e,mongodbLogPathIsStdErr:!1}:t&&/^stderr$/i.test(t)?{mongodbLogPath:ia(process.stderr),mongodbLogPathIsStdErr:!0}:t&&/^stdout$/i.test(t)?{mongodbLogPath:ia(process.stdout),mongodbLogPathIsStdErr:!1}:{mongodbLogPath:ia(process.stderr),mongodbLogPathIsStdErr:!0}}function jc(t,e,r){return A3(t)??A3(e)??r}function Lte(t,e){let r=Ne.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(t),n=Ne.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(e);return r<n?-1:r>n?1:0}function qs(t,e,r={}){let n="",o=0,i=function(u,a){if(!(o>=e)){if(u==="")return o+=1,a;if(o+=u.length+4,a==null)return a;switch(typeof a){case"string":o+=a.length+2;break;case"number":case"bigint":o+=String(a).length;break;case"boolean":o+=a?4:5;break;case"object":if((0,sa.isUint8Array)(a))o+=22+a.byteLength+a.byteLength*.33+18|0;else if("_bsontype"in a){let c=a;switch(c._bsontype){case"Int32":o+=String(c.value).length;break;case"Double":o+=(c.value|0)===c.value?String(c.value).length+2:String(c.value).length;break;case"Long":o+=c.toString().length;break;case"ObjectId":o+=35;break;case"MaxKey":case"MinKey":o+=13;break;case"Binary":o+=22+a.position+a.position*.33+18|0;break;case"Timestamp":o+=19+String(c.t).length+5+String(c.i).length+2;break;case"Code":c.scope==null?o+=c.code.length+10+2:o+=c.code.length+10+11;break;case"BSONRegExp":o+=34+c.pattern.length+13+c.options.length+3;break}}}return a}};if(typeof t=="string")n=t;else if(typeof t=="function")n=t.name;else try{e!==0?n=nM.EJSON.stringify(t,i,0,r):n=nM.EJSON.stringify(t,r)}catch(s){n=`Extended JSON serialization failed with: ${s.message}`}return e!==0&&n.length>e&&n.charCodeAt(e-1)!==n.codePointAt(e-1)&&(e--,e===0)?"":e!==0&&n.length>e?`${n.slice(0,e)}...`:n}function Ute(t){let e=t;return e.toLog!==void 0&&typeof e.toLog=="function"}function Z0(t,e,r=Ne.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:n,operation:o,topologyDescription:i,message:s}=e;return t.selector=qs(n,r),t.operation=o,t.topologyDescription=qs(i,r),t.message=s,t}function E3(t,e){t.commandName=e.commandName,t.requestId=e.requestId,t.driverConnectionId=e.connectionId;let{host:r,port:n}=sa.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,e?.serviceId&&(t.serviceId=e.serviceId.toHexString()),t.databaseName=e.databaseName,t.serverConnectionId=e.serverConnectionId,t}function vn(t,e){let{host:r,port:n}=sa.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,t}function Us(t,e){return t.topologyId=e.topologyId,t}function y3(t,e){let{awaited:r,connectionId:n}=e;t.awaited=r,t.driverConnectionId=e.connectionId;let{host:o,port:i}=sa.HostAddress.fromString(n).toHostPort();return t.serverHost=o,t.serverPort=i,t}function oM(t,e=Ne.DEFAULT_MAX_DOCUMENT_LENGTH){let r=Object.create(null);switch(t.name){case mt.SERVER_SELECTION_STARTED:return r=Z0(r,t,e),r;case mt.SERVER_SELECTION_FAILED:return r=Z0(r,t,e),r.failure=t.failure?.message,r;case mt.SERVER_SELECTION_SUCCEEDED:return r=Z0(r,t,e),r.serverHost=t.serverHost,r.serverPort=t.serverPort,r;case mt.WAITING_FOR_SUITABLE_SERVER:return r=Z0(r,t,e),r.remainingTimeMS=t.remainingTimeMS,r;case mt.COMMAND_STARTED:return r=E3(r,t),r.message="Command started",r.command=qs(t.command,e,{relaxed:!0}),r.databaseName=t.databaseName,r;case mt.COMMAND_SUCCEEDED:return r=E3(r,t),r.message="Command succeeded",r.durationMS=t.duration,r.reply=qs(t.reply,e,{relaxed:!0}),r;case mt.COMMAND_FAILED:return r=E3(r,t),r.message="Command failed",r.durationMS=t.duration,r.failure=t.failure?.message??"(redacted)",r;case mt.CONNECTION_POOL_CREATED:if(r=vn(r,t),r.message="Connection pool created",t.options){let{maxIdleTimeMS:n,minPoolSize:o,maxPoolSize:i,maxConnecting:s,waitQueueTimeoutMS:u}=t.options;r={...r,maxIdleTimeMS:n,minPoolSize:o,maxPoolSize:i,maxConnecting:s,waitQueueTimeoutMS:u}}return r;case mt.CONNECTION_POOL_READY:return r=vn(r,t),r.message="Connection pool ready",r;case mt.CONNECTION_POOL_CLEARED:return r=vn(r,t),r.message="Connection pool cleared",t.serviceId?._bsontype==="ObjectId"&&(r.serviceId=t.serviceId?.toHexString()),r;case mt.CONNECTION_POOL_CLOSED:return r=vn(r,t),r.message="Connection pool closed",r;case mt.CONNECTION_CREATED:return r=vn(r,t),r.message="Connection created",r.driverConnectionId=t.connectionId,r;case mt.CONNECTION_READY:return r=vn(r,t),r.message="Connection ready",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case mt.CONNECTION_CLOSED:switch(r=vn(r,t),r.message="Connection closed",r.driverConnectionId=t.connectionId,t.reason){case"stale":r.reason="Connection became stale because the pool was cleared";break;case"idle":r.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":r.reason="An error occurred while using the connection",t.error&&(r.error=t.error);break;case"poolClosed":r.reason="Connection pool was closed";break;default:r.reason=`Unknown close reason: ${t.reason}`}return r;case mt.CONNECTION_CHECK_OUT_STARTED:return r=vn(r,t),r.message="Connection checkout started",r;case mt.CONNECTION_CHECK_OUT_FAILED:switch(r=vn(r,t),r.message="Connection checkout failed",t.reason){case"poolClosed":r.reason="Connection pool was closed";break;case"timeout":r.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":r.reason="An error occurred while trying to establish a new connection",t.error&&(r.error=t.error);break;default:r.reason=`Unknown close reason: ${t.reason}`}return r.durationMS=t.durationMS,r;case mt.CONNECTION_CHECKED_OUT:return r=vn(r,t),r.message="Connection checked out",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case mt.CONNECTION_CHECKED_IN:return r=vn(r,t),r.message="Connection checked in",r.driverConnectionId=t.connectionId,r;case mt.SERVER_OPENING:return r=Us(r,t),r=vn(r,t),r.message="Starting server monitoring",r;case mt.SERVER_CLOSED:return r=Us(r,t),r=vn(r,t),r.message="Stopped server monitoring",r;case mt.SERVER_HEARTBEAT_STARTED:return r=Us(r,t),r=y3(r,t),r.message="Server heartbeat started",r;case mt.SERVER_HEARTBEAT_SUCCEEDED:return r=Us(r,t),r=y3(r,t),r.message="Server heartbeat succeeded",r.durationMS=t.duration,r.serverConnectionId=t.serverConnectionId,r.reply=qs(t.reply,e,{relaxed:!0}),r;case mt.SERVER_HEARTBEAT_FAILED:return r=Us(r,t),r=y3(r,t),r.message="Server heartbeat failed",r.durationMS=t.duration,r.failure=t.failure?.message,r;case mt.TOPOLOGY_OPENING:return r=Us(r,t),r.message="Starting topology monitoring",r;case mt.TOPOLOGY_CLOSED:return r=Us(r,t),r.message="Stopped topology monitoring",r;case mt.TOPOLOGY_DESCRIPTION_CHANGED:return r=Us(r,t),r.message="Topology description changed",r.previousDescription=r.reply=qs(t.previousDescription,e),r.newDescription=r.reply=qs(t.newDescription,e),r;default:for(let[n,o]of Object.entries(t))o!=null&&(r[n]=o)}return r}var S3=class{constructor(e){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=e.componentSeverities,this.maxDocumentLength=e.maxDocumentLength,this.logDestination=e.logDestination,this.logDestinationIsStdErr=e.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let e=Object();for(let r of Object.values(Ne.MongoLoggableComponent)){e[r]={};for(let n of Object.values(Ne.SeverityLevel))e[r][n]=Lte(n,this.componentSeverities[r])<=0}return e}turnOffSeverities(){for(let e of Object.values(Ne.MongoLoggableComponent)){this.componentSeverities[e]=Ne.SeverityLevel.OFF;for(let r of Object.values(Ne.SeverityLevel))this.severities[e][r]=!1}}logWriteFailureHandler(e){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=ia(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(Ne.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:e.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(e,r){return r===Ne.SeverityLevel.OFF?!1:this.severities[e][r]}log(e,r,n){if(!this.willLog(r,e))return;let o={t:new Date,c:r,s:e};if(typeof n=="string"?o.message=n:typeof n=="object"&&(Ute(n)?o={...o,...n.toLog()}:o={...o,...oM(n,this.maxDocumentLength)}),(0,sa.isPromiseLike)(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(o)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let i=this.logDestination.write(o);(0,sa.isPromiseLike)(i)&&(this.pendingLog=i.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this)))}catch(i){this.logWriteFailureHandler(i)}}static resolveOptions(e,r){let n=kte(e,r),o={...e,...r,mongodbLogPath:n.mongodbLogPath,mongodbLogPathIsStdErr:n.mongodbLogPathIsStdErr},i=jc(o.mongodbLogComponentSeverities?.default,o.MONGODB_LOG_ALL,Ne.SeverityLevel.OFF);return{componentSeverities:{command:jc(o.mongodbLogComponentSeverities?.command,o.MONGODB_LOG_COMMAND,i),topology:jc(o.mongodbLogComponentSeverities?.topology,o.MONGODB_LOG_TOPOLOGY,i),serverSelection:jc(o.mongodbLogComponentSeverities?.serverSelection,o.MONGODB_LOG_SERVER_SELECTION,i),connection:jc(o.mongodbLogComponentSeverities?.connection,o.MONGODB_LOG_CONNECTION,i),client:jc(o.mongodbLogComponentSeverities?.client,o.MONGODB_LOG_CLIENT,i),default:i},maxDocumentLength:o.mongodbLogMaxDocumentLength??(0,sa.parseUnsignedInteger)(o.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1e3,logDestination:o.mongodbLogPath,logDestinationIsStdErr:o.mongodbLogPathIsStdErr}}};Ne.MongoLogger=S3});var On=R(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.CancellationToken=Kc.TypedEventEmitter=void 0;var qte=require("events"),Gte=Gs(),Vte=de(),em=class extends qte.EventEmitter{emitAndLog(e,...r){this.emit(e,...r),this.component&&this.mongoLogger?.debug(this.component,r[0])}emitAndLogHeartbeat(e,r,n,...o){if(this.emit(e,...o),this.component){let i={topologyId:r,serverConnectionId:n??null,...o[0]};this.mongoLogger?.debug(this.component,i)}}emitAndLogCommand(e,r,n,o,...i){if(e&&this.emit(r,...i),o){let s={databaseName:n,...i[0]};this.mongoLogger?.debug(Gte.MongoLoggableComponent.COMMAND,s)}}};Kc.TypedEventEmitter=em;var _3=class extends em{constructor(...e){super(...e),this.on("error",Vte.noop)}};Kc.CancellationToken=_3});var w3=R(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});nm.GetMoreOperation=void 0;var $te=Ye(),iM=ie(),Hte=de(),tm=ot(),rm=class extends tm.AbstractOperation{constructor(e,r,n,o){super(o),this.SERVER_COMMAND_RESPONSE_TYPE=$te.CursorResponse,this.options=o,this.ns=e,this.cursorId=r,this.server=n}get commandName(){return"getMore"}buildCommand(e){if(this.cursorId==null||this.cursorId.isZero())throw new iM.MongoRuntimeError("Unable to iterate cursor with no id");let r=this.ns.collection;if(r==null)throw new iM.MongoRuntimeError("A collection name must be determined before getMore");let n={getMore:this.cursorId,collection:r};return typeof this.options.batchSize=="number"&&(n.batchSize=Math.abs(this.options.batchSize)),typeof this.options.maxAwaitTimeMS=="number"&&(n.maxTimeMS=this.options.maxAwaitTimeMS),this.options.comment!==void 0&&(0,Hte.maxWireVersion)(e)>=9&&(n.comment=this.options.comment),n}buildOptions(e){return{returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:e,...this.options}}handleOk(e){return e}};nm.GetMoreOperation=rm;(0,tm.defineAspects)(rm,[tm.Aspect.READ_OPERATION,tm.Aspect.MUST_SELECT_SAME_SERVER])});var sM=R(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.KillCursorsOperation=void 0;var Wte=Ye(),zte=ie(),T3=ot(),om=class extends T3.AbstractOperation{constructor(e,r,n,o){super(o),this.SERVER_COMMAND_RESPONSE_TYPE=Wte.MongoDBResponse,this.ns=r,this.cursorId=e,this.server=n}get commandName(){return"killCursors"}buildCommand(e,r){let n=this.ns.collection;if(n==null)throw new zte.MongoRuntimeError("A collection name must be determined before killCursors");return{killCursors:n,cursors:[this.cursorId]}}buildOptions(e){return{session:this.session,timeoutContext:e}}handleError(e){}};im.KillCursorsOperation=om;(0,T3.defineAspects)(om,[T3.Aspect.MUST_SELECT_SAME_SERVER])});var Fo=R(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.aws4=void 0;Po.getKerberos=jte;Po.getZstdLibrary=Kte;Po.getAwsCredentialProvider=Yte;Po.getGcpMetadata=Jte;Po.getSnappy=Xte;Po.getSocks=Qte;Po.getMongoDBClientEncryption=ere;var Vs=ie();function gd(t){let e=t?{kModuleError:t}:{};return new Proxy(e,{get:(r,n)=>{if(n==="kModuleError")return t;throw t},set:()=>{throw t}})}function jte(){let t;try{t=require("kerberos")}catch(e){t=gd(new Vs.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:e,dependencyName:"kerberos"}))}return t}function Kte(){let t;try{t=require("@mongodb-js/zstd")}catch(e){t=gd(new Vs.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:e,dependencyName:"zstd"}))}return t}function Yte(){try{return require("@aws-sdk/credential-providers")}catch(t){return gd(new Vs.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:t,dependencyName:"@aws-sdk/credential-providers"}))}}function Jte(){try{return require("gcp-metadata")}catch(t){return gd(new Vs.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:t,dependencyName:"gcp-metadata"}))}}function Xte(){try{return require("snappy")}catch(t){return{kModuleError:new Vs.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:t,dependencyName:"snappy"})}}}function Qte(){try{return require("socks")}catch(t){return{kModuleError:new Vs.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:t,dependencyName:"socks"})}}}Po.aws4=Zte();function Zte(){let t;try{t=require("aws4")}catch(e){t=gd(new Vs.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:e,dependencyName:"aws4"}))}return t}function ere(){let t=null;try{t=require("mongodb-client-encryption")}catch(e){return{kModuleError:new Vs.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:e,dependencyName:"mongodb-client-encryption"})}}return t}});var $s=R(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.AuthProvider=Yc.AuthContext=void 0;var tre=ie(),b3=class{constructor(e,r,n){this.reauthenticating=!1,this.connection=e,this.credentials=r,this.options=n}};Yc.AuthContext=b3;var v3=class{async prepare(e,r){return e}async reauth(e){if(e.reauthenticating)throw new tre.MongoRuntimeError("Reauthentication already in progress.");try{e.reauthenticating=!0,await this.auth(e)}finally{e.reauthenticating=!1}}};Yc.AuthProvider=v3});var sm=R(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.GSSAPI=xo.GSSAPICanonicalizationValue=void 0;xo.performGSSAPICanonicalizeHostName=cM;xo.resolveCname=I3;var R3=require("dns"),rre=Fo(),uM=ie(),nre=de(),ore=$s();xo.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function O3(t,e){return await t.command((0,nre.ns)("$external.$cmd"),e)}var Ed,D3=class extends ore.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(n==null)throw new uM.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:o}=n,i=await ire(e),s=await i.step(""),u=await O3(r,sre(s)),a=await aM(i,10,u.payload),c=await O3(r,ure(a,u.conversationId)),d=await are(i,o,c.payload);await O3(r,{saslContinue:1,conversationId:c.conversationId,payload:d})}};xo.GSSAPI=D3;async function ire(t){let{hostAddress:e}=t.options,{credentials:r}=t;if(!e||typeof e.host!="string"||!r)throw new uM.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(cre(),"kModuleError"in Ed)throw Ed.kModuleError;let{initializeClient:n}=Ed,{username:o,password:i}=r,s=r.mechanismProperties,u=s.SERVICE_NAME??"mongodb",a=await cM(e.host,s),c={};i!=null&&Object.assign(c,{user:o,password:i});let d=s.SERVICE_HOST??a,p=`${u}${process.platform==="win32"?"/":"@"}${d}`;return"SERVICE_REALM"in s&&(p=`${p}@${s.SERVICE_REALM}`),await n(p,c)}function sre(t){return{saslStart:1,mechanism:"GSSAPI",payload:t,autoAuthorize:1}}function ure(t,e){return{saslContinue:1,conversationId:e,payload:t}}async function aM(t,e,r){try{return await t.step(r)||""}catch(n){if(e===0)throw n;return await aM(t,e-1,r)}}async function are(t,e,r){let n=await t.unwrap(r);return await t.wrap(n||"",{user:e})}async function cM(t,e){let r=e.CANONICALIZE_HOST_NAME;if(!r||r===xo.GSSAPICanonicalizationValue.none)return t;if(r===xo.GSSAPICanonicalizationValue.on||r===xo.GSSAPICanonicalizationValue.forwardAndReverse){let{address:n}=await R3.promises.lookup(t);try{let o=await R3.promises.resolvePtr(n);return o.length>0?o[0]:t}catch{return await I3(t)}}else return await I3(t)}async function I3(t){try{let e=await R3.promises.resolveCname(t);return e.length>0?e[0]:t}catch{return t}}function cre(){Ed||(Ed=(0,rre.getKerberos)())}});var di=R(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.AUTH_MECHS_AUTH_SRC_EXTERNAL=li.AuthMechanism=void 0;li.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_CR:"MONGODB-CR",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});li.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([li.AuthMechanism.MONGODB_GSSAPI,li.AuthMechanism.MONGODB_AWS,li.AuthMechanism.MONGODB_OIDC,li.AuthMechanism.MONGODB_X509])});var um=R(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.MongoCredentials=ua.DEFAULT_ALLOWED_HOSTS=void 0;var Qn=ie(),lre=sm(),Lr=di();function dre(t){return t&&Array.isArray(t.saslSupportedMechs)?t.saslSupportedMechs.includes(Lr.AuthMechanism.MONGODB_SCRAM_SHA256)?Lr.AuthMechanism.MONGODB_SCRAM_SHA256:Lr.AuthMechanism.MONGODB_SCRAM_SHA1:Lr.AuthMechanism.MONGODB_SCRAM_SHA256}var lM=["test","azure","gcp","k8s"],dM="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";ua.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var fre="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.",M3=class t{constructor(e){this.username=e.username??"",this.password=e.password,this.source=e.source,!this.source&&e.db&&(this.source=e.db),this.mechanism=e.mechanism||Lr.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=e.mechanismProperties||{},this.mechanism.match(/MONGODB-AWS/i)&&(!this.username&&process.env.AWS_ACCESS_KEY_ID&&(this.username=process.env.AWS_ACCESS_KEY_ID),!this.password&&process.env.AWS_SECRET_ACCESS_KEY&&(this.password=process.env.AWS_SECRET_ACCESS_KEY),this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null&&(this.mechanismProperties={...this.mechanismProperties,AWS_SESSION_TOKEN:process.env.AWS_SESSION_TOKEN})),this.mechanism===Lr.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS&&(this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:ua.DEFAULT_ALLOWED_HOSTS}),Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(e){return this.mechanism===e.mechanism&&this.username===e.username&&this.password===e.password&&this.source===e.source}resolveAuthMechanism(e){return this.mechanism.match(/DEFAULT/i)?new t({username:this.username,password:this.password,source:this.source,mechanism:dre(e),mechanismProperties:this.mechanismProperties}):this}validate(){if((this.mechanism===Lr.AuthMechanism.MONGODB_GSSAPI||this.mechanism===Lr.AuthMechanism.MONGODB_PLAIN||this.mechanism===Lr.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===Lr.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new Qn.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===Lr.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new Qn.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new Qn.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new Qn.MongoInvalidArgumentError(fre);if(this.mechanismProperties.ENVIRONMENT&&!lM.includes(this.mechanismProperties.ENVIRONMENT))throw new Qn.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${lM.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new Qn.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let r=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(r))throw new Qn.MongoInvalidArgumentError(dM);for(let n of r)if(typeof n!="string")throw new Qn.MongoInvalidArgumentError(dM)}}if(Lr.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)&&this.source!=null&&this.source!=="$external")throw new Qn.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`);if(this.mechanism===Lr.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new Qn.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===Lr.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new Qn.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let e=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(lre.GSSAPICanonicalizationValue).includes(e))throw new Qn.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${e}`)}static merge(e,r){return new t({username:r.username??e?.username??"",password:r.password??e?.password??"",mechanism:r.mechanism??e?.mechanism??Lr.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:r.mechanismProperties??e?.mechanismProperties??{},source:r.source??r.db??e?.source??"admin"})}};ua.MongoCredentials=M3});var fM=R((hme,hre)=>{hre.exports={name:"mongodb",version:"6.21.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.3.0",bson:"^6.10.4","mongodb-connection-string-url":"^3.0.2"},peerDependencies:{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0 || ^2.0.0","gcp-metadata":"^5.2.0",kerberos:"^2.0.1","mongodb-client-encryption":">=6.0.0 <7",snappy:"^7.3.2",socks:"^2.7.1"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.876.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.11","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^2.0.1","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.3","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.41.0","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.34.0","eslint-config-prettier":"^10.1.8","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.5.4","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.2.0",express:"^5.1.0","gcp-metadata":"^5.3.0","js-yaml":"^4.1.0",mocha:"^11.7.1","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.5.0","mongodb-legacy":"^6.1.3",nyc:"^15.1.0",prettier:"^3.6.2",semver:"^7.7.2",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.3.2",socks:"^2.8.7","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.33.0",typescript:"5.8.3","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^18.0.0"},license:"Apache-2.0",engines:{node:">=16.20.1"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts lib/beta.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:resource-management":"nyc mocha --config test/manual/mocharc.js test/manual/resource_management.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:adl":"nyc mocha --config test/mocha_mongodb.js test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var N3=R(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.LimitedSizeDocument=void 0;Hs.isDriverInfoEqual=gre;Hs.makeClientMetadata=Ere;Hs.addContainerMetadata=Cre;Hs.getFAASEnv=mM;var yd=require("os"),Cd=require("process"),Jc=qe(),hM=ie(),pre=de(),mre=fM().version;function gre(t,e){let r=(n,o)=>(n||=void 0,o||=void 0,n===o);return r(t.name,e.name)&&r(t.platform,e.platform)&&r(t.version,e.version)}var Ad=class{constructor(e){this.document=new Map,this.documentSize=5,this.maxSize=e}ifItFitsItSits(e,r){let n=Jc.BSON.serialize(new Map().set(e,r)).byteLength-5;return n+this.documentSize>this.maxSize?!1:(this.documentSize+=n,this.document.set(e,r),!0)}toObject(){return Jc.BSON.deserialize(Jc.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}};Hs.LimitedSizeDocument=Ad;function Ere(t,{appName:e=""}){let r=new Ad(512);if(e.length>0){let u=Buffer.byteLength(e,"utf8")<=128?e:Buffer.from(e,"utf8").subarray(0,128).toString("utf8");r.ifItFitsItSits("application",{name:u})}let n={name:"nodejs",version:mre};for(let{name:u="",version:a=""}of t)u.length>0&&(n.name=`${n.name}|${u}`),a.length>0&&(n.version=`${n.version}|${a}`);if(!r.ifItFitsItSits("driver",n))throw new hM.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let o=Are();for(let{platform:u=""}of t)u.length>0&&(o=`${o}|${u}`);if(!r.ifItFitsItSits("platform",o))throw new hM.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let i=new Map().set("name",Cd.platform).set("architecture",Cd.arch).set("version",yd.release()).set("type",yd.type());if(!r.ifItFitsItSits("os",i)){for(let u of i.keys())if(i.delete(u),i.size===0||r.ifItFitsItSits("os",i))break}let s=mM();if(s!=null&&!r.ifItFitsItSits("env",s)){for(let u of s.keys())if(s.delete(u),s.size===0||r.ifItFitsItSits("env",s))break}return r.toObject()}var pM;async function yre(){let t={};pM??=(0,pre.fileIsAccessible)("/.dockerenv");let e=await pM,{KUBERNETES_SERVICE_HOST:r=""}=Cd.env,n=r.length>0;return e&&(t.runtime="docker"),n&&(t.orchestrator="kubernetes"),t}async function Cre(t){let e=await yre();if(Object.keys(e).length===0)return t;let r=new Ad(512),n={...t?.env,container:e};for(let[o,i]of Object.entries(t))o!=="env"?r.ifItFitsItSits(o,i):r.ifItFitsItSits("env",n)||r.ifItFitsItSits("env",i);return"env"in t||r.ifItFitsItSits("env",n),r.toObject()}function mM(){let{AWS_EXECUTION_ENV:t="",AWS_LAMBDA_RUNTIME_API:e="",FUNCTIONS_WORKER_RUNTIME:r="",K_SERVICE:n="",FUNCTION_NAME:o="",VERCEL:i="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:s="",AWS_REGION:u="",FUNCTION_MEMORY_MB:a="",FUNCTION_REGION:c="",FUNCTION_TIMEOUT_SEC:d="",VERCEL_REGION:p=""}=Cd.env,m=t.startsWith("AWS_Lambda_")||e.length>0,E=r.length>0,y=n.length>0||o.length>0,A=i.length>0,S=new Map;return A&&!(E||y)?(p.length>0&&S.set("region",p),S.set("name","vercel"),S):m&&!(E||y||A)?(u.length>0&&S.set("region",u),s.length>0&&Number.isInteger(+s)&&S.set("memory_mb",new Jc.Int32(s)),S.set("name","aws.lambda"),S):E&&!(y||m||A)?(S.set("name","azure.func"),S):y&&!(E||m||A)?(c.length>0&&S.set("region",c),a.length>0&&Number.isInteger(+a)&&S.set("memory_mb",new Jc.Int32(a)),d.length>0&&Number.isInteger(+d)&&S.set("timeout_sec",new Jc.Int32(d)),S.set("name","gcp.func"),S):null}function Are(){return"Deno"in globalThis?`Deno v${typeof Deno?.version?.deno=="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${yd.endianness()}`:"Bun"in globalThis?`Bun v${typeof Bun?.version=="string"?Bun?.version:"0.0.0-unknown"}, ${yd.endianness()}`:`Node.js ${Cd.version}, ${yd.endianness()}`}});var cm=R(Ze=>{"use strict";function it(t,e,r){return r.globals&&(t=r.globals[t.name]),new t(`${r.context?r.context:"Value"} ${e}.`)}function Zc(t,e){if(typeof t=="bigint")throw it(TypeError,"is a BigInt which cannot be converted to a number",e);return e.globals?e.globals.Number(t):Number(t)}function EM(t){return t>0&&t%1===.5&&(t&1)===0||t<0&&t%1===-.5&&(t&1)===1?Sd(Math.floor(t)):Sd(Math.round(t))}function am(t){return Sd(Math.trunc(t))}function gM(t){return t<0?-1:1}function Sre(t,e){let r=t%e;return gM(e)!==gM(r)?r+e:r}function Sd(t){return t===0?0:t}function el(t,{unsigned:e}){let r,n;e?(r=0,n=2**t-1):(r=-(2**(t-1)),n=2**(t-1)-1);let o=2**t,i=2**(t-1);return(s,u={})=>{let a=Zc(s,u);if(a=Sd(a),u.enforceRange){if(!Number.isFinite(a))throw it(TypeError,"is not a finite number",u);if(a=am(a),a<r||a>n)throw it(TypeError,`is outside the accepted range of ${r} to ${n}, inclusive`,u);return a}return!Number.isNaN(a)&&u.clamp?(a=Math.min(Math.max(a,r),n),a=EM(a),a):!Number.isFinite(a)||a===0?0:(a=am(a),a>=r&&a<=n?a:(a=Sre(a,o),!e&&a>=i?a-o:a))}}function yM(t,{unsigned:e}){let r=Number.MAX_SAFE_INTEGER,n=e?0:Number.MIN_SAFE_INTEGER,o=e?BigInt.asUintN:BigInt.asIntN;return(i,s={})=>{let u=Zc(i,s);if(u=Sd(u),s.enforceRange){if(!Number.isFinite(u))throw it(TypeError,"is not a finite number",s);if(u=am(u),u<n||u>r)throw it(TypeError,`is outside the accepted range of ${n} to ${r}, inclusive`,s);return u}if(!Number.isNaN(u)&&s.clamp)return u=Math.min(Math.max(u,n),r),u=EM(u),u;if(!Number.isFinite(u)||u===0)return 0;let a=BigInt(am(u));return a=o(t,a),Number(a)}}Ze.any=t=>t;Ze.undefined=()=>{};Ze.boolean=t=>!!t;Ze.byte=el(8,{unsigned:!1});Ze.octet=el(8,{unsigned:!0});Ze.short=el(16,{unsigned:!1});Ze["unsigned short"]=el(16,{unsigned:!0});Ze.long=el(32,{unsigned:!1});Ze["unsigned long"]=el(32,{unsigned:!0});Ze["long long"]=yM(64,{unsigned:!1});Ze["unsigned long long"]=yM(64,{unsigned:!0});Ze.double=(t,e={})=>{let r=Zc(t,e);if(!Number.isFinite(r))throw it(TypeError,"is not a finite floating-point value",e);return r};Ze["unrestricted double"]=(t,e={})=>Zc(t,e);Ze.float=(t,e={})=>{let r=Zc(t,e);if(!Number.isFinite(r))throw it(TypeError,"is not a finite floating-point value",e);if(Object.is(r,-0))return r;let n=Math.fround(r);if(!Number.isFinite(n))throw it(TypeError,"is outside the range of a single-precision floating-point value",e);return n};Ze["unrestricted float"]=(t,e={})=>{let r=Zc(t,e);return isNaN(r)||Object.is(r,-0)?r:Math.fround(r)};Ze.DOMString=(t,e={})=>{if(e.treatNullAsEmptyString&&t===null)return"";if(typeof t=="symbol")throw it(TypeError,"is a symbol, which cannot be converted to a string",e);return(e.globals?e.globals.String:String)(t)};Ze.ByteString=(t,e={})=>{let r=Ze.DOMString(t,e),n;for(let o=0;(n=r.codePointAt(o))!==void 0;++o)if(n>255)throw it(TypeError,"is not a valid ByteString",e);return r};Ze.USVString=(t,e={})=>{let r=Ze.DOMString(t,e),n=r.length,o=[];for(let i=0;i<n;++i){let s=r.charCodeAt(i);if(s<55296||s>57343)o.push(String.fromCodePoint(s));else if(56320<=s&&s<=57343)o.push(String.fromCodePoint(65533));else if(i===n-1)o.push(String.fromCodePoint(65533));else{let u=r.charCodeAt(i+1);if(56320<=u&&u<=57343){let a=s&1023,c=u&1023;o.push(String.fromCodePoint(65536+1024*a+c)),++i}else o.push(String.fromCodePoint(65533))}}return o.join("")};Ze.object=(t,e={})=>{if(t===null||typeof t!="object"&&typeof t!="function")throw it(TypeError,"is not an object",e);return t};var _re=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,wre=typeof SharedArrayBuffer=="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function B3(t){try{return _re.call(t),!0}catch{return!1}}function Xc(t){try{return wre.call(t),!0}catch{return!1}}function Qc(t){try{return new Uint8Array(t),!1}catch{return!0}}Ze.ArrayBuffer=(t,e={})=>{if(!B3(t))throw e.allowShared&&!Xc(t)?it(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",e):it(TypeError,"is not an ArrayBuffer",e);if(Qc(t))throw it(TypeError,"is a detached ArrayBuffer",e);return t};var Tre=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;Ze.DataView=(t,e={})=>{try{Tre.call(t)}catch{throw it(TypeError,"is not a DataView",e)}if(!e.allowShared&&Xc(t.buffer))throw it(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",e);if(Qc(t.buffer))throw it(TypeError,"is backed by a detached ArrayBuffer",e);return t};var bre=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach(t=>{let{name:e}=t,r=/^[AEIOU]/u.test(e)?"an":"a";Ze[e]=(n,o={})=>{if(!ArrayBuffer.isView(n)||bre.call(n)!==e)throw it(TypeError,`is not ${r} ${e} object`,o);if(!o.allowShared&&Xc(n.buffer))throw it(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",o);if(Qc(n.buffer))throw it(TypeError,"is a view on a detached ArrayBuffer",o);return n}});Ze.ArrayBufferView=(t,e={})=>{if(!ArrayBuffer.isView(t))throw it(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",e);if(!e.allowShared&&Xc(t.buffer))throw it(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(Qc(t.buffer))throw it(TypeError,"is a view on a detached ArrayBuffer",e);return t};Ze.BufferSource=(t,e={})=>{if(ArrayBuffer.isView(t)){if(!e.allowShared&&Xc(t.buffer))throw it(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(Qc(t.buffer))throw it(TypeError,"is a view on a detached ArrayBuffer",e);return t}if(!e.allowShared&&!B3(t))throw it(TypeError,"is not an ArrayBuffer or a view on one",e);if(e.allowShared&&!Xc(t)&&!B3(t))throw it(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",e);if(Qc(t))throw it(TypeError,"is a detached ArrayBuffer",e);return t};Ze.DOMTimeStamp=Ze["unsigned long long"]});var dm=R((bM,vM)=>{"use strict";function vre(t){return typeof t=="object"&&t!==null||typeof t=="function"}var CM=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function Ore(t,e){for(let r of Reflect.ownKeys(e)){let n=Reflect.getOwnPropertyDescriptor(e,r);if(n&&!Reflect.defineProperty(t,r,n))throw new TypeError(`Cannot redefine property: ${String(r)}`)}}function Rre(t,e){let r=_M(t);return Object.defineProperties(Object.create(r["%Object.prototype%"]),Object.getOwnPropertyDescriptors(e))}var AM=Symbol("wrapper"),SM=Symbol("impl"),tl=Symbol("SameObject caches"),lm=Symbol.for("[webidl2js] constructor registry"),Dre=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function _M(t){if(CM(t,lm))return t[lm];let e=Object.create(null);e["%Object.prototype%"]=t.Object.prototype,e["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new t.Array()[Symbol.iterator]()));try{e["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(t.eval("(async function* () {})").prototype))}catch{e["%AsyncIteratorPrototype%"]=Dre}return t[lm]=e,e}function Ire(t,e,r){return t[tl]||(t[tl]=Object.create(null)),e in t[tl]||(t[tl][e]=r()),t[tl][e]}function wM(t){return t?t[AM]:null}function TM(t){return t?t[SM]:null}function Mre(t){let e=wM(t);return e||t}function Nre(t){let e=TM(t);return e||t}var Bre=Symbol("internal");function Pre(t){if(typeof t!="string")return!1;let e=t>>>0;if(e===2**32-1)return!1;let r=`${e}`;return t===r}var Fre=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function xre(t){try{return Fre.call(t),!0}catch{return!1}}function kre([t,e],r){let n;switch(r){case"key":n=t;break;case"value":n=e;break;case"key+value":n=[t,e];break}return{value:n,done:!1}}var Lre=Symbol("supports property index"),Ure=Symbol("supported property indices"),qre=Symbol("supports property name"),Gre=Symbol("supported property names"),Vre=Symbol("indexed property get"),$re=Symbol("indexed property set new"),Hre=Symbol("indexed property set existing"),Wre=Symbol("named property get"),zre=Symbol("named property set new"),jre=Symbol("named property set existing"),Kre=Symbol("named property delete"),Yre=Symbol("async iterator get the next iteration result"),Jre=Symbol("async iterator return steps"),Xre=Symbol("async iterator initialization steps"),Qre=Symbol("async iterator end of iteration");vM.exports=bM={isObject:vre,hasOwn:CM,define:Ore,newObjectInRealm:Rre,wrapperSymbol:AM,implSymbol:SM,getSameObject:Ire,ctorRegistrySymbol:lm,initCtorRegistry:_M,wrapperForImpl:wM,implForWrapper:TM,tryWrapperForImpl:Mre,tryImplForWrapper:Nre,iterInternalSymbol:Bre,isArrayBuffer:xre,isArrayIndexPropName:Pre,supportsPropertyIndex:Lre,supportedPropertyIndices:Ure,supportsPropertyName:qre,supportedPropertyNames:Gre,indexedGet:Vre,indexedSetNew:$re,indexedSetExisting:Hre,namedGet:Wre,namedSetNew:zre,namedSetExisting:jre,namedDelete:Kre,asyncIteratorNext:Yre,asyncIteratorReturn:Jre,asyncIteratorInit:Xre,asyncIteratorEOI:Qre,iteratorResult:kre}});var PM=R((gme,BM)=>{"use strict";var Zre=/^xn--/,ene=/[^\0-\x7F]/,tne=/[\x2E\u3002\uFF0E\uFF61]/g,rne={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P3=35,fi=Math.floor,F3=String.fromCharCode;function Ws(t){throw new RangeError(rne[t])}function nne(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function RM(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(tne,".");let o=t.split("."),i=nne(o,e).join(".");return n+i}function DM(t){let e=[],r=0,n=t.length;for(;r<n;){let o=t.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){let i=t.charCodeAt(r++);(i&64512)==56320?e.push(((o&1023)<<10)+(i&1023)+65536):(e.push(o),r--)}else e.push(o)}return e}var one=t=>String.fromCodePoint(...t),ine=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},OM=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},IM=function(t,e,r){let n=0;for(t=r?fi(t/700):t>>1,t+=fi(t/e);t>P3*26>>1;n+=36)t=fi(t/P3);return fi(n+(P3+1)*t/(t+38))},MM=function(t){let e=[],r=t.length,n=0,o=128,i=72,s=t.lastIndexOf("-");s<0&&(s=0);for(let u=0;u<s;++u)t.charCodeAt(u)>=128&&Ws("not-basic"),e.push(t.charCodeAt(u));for(let u=s>0?s+1:0;u<r;){let a=n;for(let d=1,p=36;;p+=36){u>=r&&Ws("invalid-input");let m=ine(t.charCodeAt(u++));m>=36&&Ws("invalid-input"),m>fi((2147483647-n)/d)&&Ws("overflow"),n+=m*d;let E=p<=i?1:p>=i+26?26:p-i;if(m<E)break;let y=36-E;d>fi(2147483647/y)&&Ws("overflow"),d*=y}let c=e.length+1;i=IM(n-a,c,a==0),fi(n/c)>2147483647-o&&Ws("overflow"),o+=fi(n/c),n%=c,e.splice(n++,0,o)}return String.fromCodePoint(...e)},NM=function(t){let e=[];t=DM(t);let r=t.length,n=128,o=0,i=72;for(let a of t)a<128&&e.push(F3(a));let s=e.length,u=s;for(s&&e.push("-");u<r;){let a=2147483647;for(let d of t)d>=n&&d<a&&(a=d);let c=u+1;a-n>fi((2147483647-o)/c)&&Ws("overflow"),o+=(a-n)*c,n=a;for(let d of t)if(d<n&&++o>2147483647&&Ws("overflow"),d===n){let p=o;for(let m=36;;m+=36){let E=m<=i?1:m>=i+26?26:m-i;if(p<E)break;let y=p-E,A=36-E;e.push(F3(OM(E+y%A,0))),p=fi(y/A)}e.push(F3(OM(p,0))),i=IM(o,c,u===s),o=0,++u}++o,++n}return e.join("")},sne=function(t){return RM(t,function(e){return Zre.test(e)?MM(e.slice(4).toLowerCase()):e})},une=function(t){return RM(t,function(e){return ene.test(e)?"xn--"+NM(e):e})},ane={version:"2.3.1",ucs2:{decode:DM,encode:one},decode:MM,encode:NM,toASCII:une,toUnicode:sne};BM.exports=ane});var xM=R((Eme,FM)=>{"use strict";var cne=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113B8}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,lne=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1715\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA82C\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{11070}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{113CE}-\u{113D0}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{1193D}\u{1193E}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}\u{11F41}\u{11F42}\u{1612F}]/u,dne=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{10FCB}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0858\u0860\u0862-\u0865\u0867-\u086A\u0870-\u0882\u0886\u0889-\u088E\u08A0-\u08AC\u08AE-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10EC2}-\u{10EC4}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}\u{10FB2}-\u{10FB6}\u{10FB8}-\u{10FBF}\u{10FC1}-\u{10FC4}\u{10FC9}\u{10FCA}\u{1E900}-\u{1E943}]/u,fne=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,hne=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCEF}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,pne=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D4A}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,mne=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0897-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2429\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E5\u31EF\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CC00}-\u{1CCD5}\u{1CCF0}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,gne=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,Ene=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,yne=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10D40}-\u{10D49}\u{10E60}-\u{10E7E}]/u,Cne=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B4E-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2429\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E5\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6E}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D5}\u{113D7}\u{113D8}\u{113E1}\u{113E2}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F5A}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CC00}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E5D0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,Ane=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCF9}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;FM.exports={combiningMarks:cne,combiningClassVirama:lne,validZWNJ:dne,bidiDomain:fne,bidiS1LTR:hne,bidiS1RTL:pne,bidiS2:mne,bidiS3:gne,bidiS4EN:Ene,bidiS4AN:yne,bidiS5:Cne,bidiS6:Ane}});var kM=R((yme,Sne)=>{Sne.exports=[[[0,44],2],[[45,46],2],[47,2],[[48,57],2],[[58,64],2],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],2],[[97,122],2],[[123,127],2],[[128,159],3],[160,1," "],[[161,167],2],[168,1," \u0308"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,1," \u0304"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,1," \u0301"],[181,1,"\u03BC"],[182,2],[183,2],[184,1," \u0327"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1\u20444"],[189,1,"1\u20442"],[190,1,"3\u20444"],[191,2],[192,1,"\xE0"],[193,1,"\xE1"],[194,1,"\xE2"],[195,1,"\xE3"],[196,1,"\xE4"],[197,1,"\xE5"],[198,1,"\xE6"],[199,1,"\xE7"],[200,1,"\xE8"],[201,1,"\xE9"],[202,1,"\xEA"],[203,1,"\xEB"],[204,1,"\xEC"],[205,1,"\xED"],[206,1,"\xEE"],[207,1,"\xEF"],[208,1,"\xF0"],[209,1,"\xF1"],[210,1,"\xF2"],[211,1,"\xF3"],[212,1,"\xF4"],[213,1,"\xF5"],[214,1,"\xF6"],[215,2],[216,1,"\xF8"],[217,1,"\xF9"],[218,1,"\xFA"],[219,1,"\xFB"],[220,1,"\xFC"],[221,1,"\xFD"],[222,1,"\xFE"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"\u0101"],[257,2],[258,1,"\u0103"],[259,2],[260,1,"\u0105"],[261,2],[262,1,"\u0107"],[263,2],[264,1,"\u0109"],[265,2],[266,1,"\u010B"],[267,2],[268,1,"\u010D"],[269,2],[270,1,"\u010F"],[271,2],[272,1,"\u0111"],[273,2],[274,1,"\u0113"],[275,2],[276,1,"\u0115"],[277,2],[278,1,"\u0117"],[279,2],[280,1,"\u0119"],[281,2],[282,1,"\u011B"],[283,2],[284,1,"\u011D"],[285,2],[286,1,"\u011F"],[287,2],[288,1,"\u0121"],[289,2],[290,1,"\u0123"],[291,2],[292,1,"\u0125"],[293,2],[294,1,"\u0127"],[295,2],[296,1,"\u0129"],[297,2],[298,1,"\u012B"],[299,2],[300,1,"\u012D"],[301,2],[302,1,"\u012F"],[303,2],[304,1,"i\u0307"],[305,2],[[306,307],1,"ij"],[308,1,"\u0135"],[309,2],[310,1,"\u0137"],[[311,312],2],[313,1,"\u013A"],[314,2],[315,1,"\u013C"],[316,2],[317,1,"\u013E"],[318,2],[[319,320],1,"l\xB7"],[321,1,"\u0142"],[322,2],[323,1,"\u0144"],[324,2],[325,1,"\u0146"],[326,2],[327,1,"\u0148"],[328,2],[329,1,"\u02BCn"],[330,1,"\u014B"],[331,2],[332,1,"\u014D"],[333,2],[334,1,"\u014F"],[335,2],[336,1,"\u0151"],[337,2],[338,1,"\u0153"],[339,2],[340,1,"\u0155"],[341,2],[342,1,"\u0157"],[343,2],[344,1,"\u0159"],[345,2],[346,1,"\u015B"],[347,2],[348,1,"\u015D"],[349,2],[350,1,"\u015F"],[351,2],[352,1,"\u0161"],[353,2],[354,1,"\u0163"],[355,2],[356,1,"\u0165"],[357,2],[358,1,"\u0167"],[359,2],[360,1,"\u0169"],[361,2],[362,1,"\u016B"],[363,2],[364,1,"\u016D"],[365,2],[366,1,"\u016F"],[367,2],[368,1,"\u0171"],[369,2],[370,1,"\u0173"],[371,2],[372,1,"\u0175"],[373,2],[374,1,"\u0177"],[375,2],[376,1,"\xFF"],[377,1,"\u017A"],[378,2],[379,1,"\u017C"],[380,2],[381,1,"\u017E"],[382,2],[383,1,"s"],[384,2],[385,1,"\u0253"],[386,1,"\u0183"],[387,2],[388,1,"\u0185"],[389,2],[390,1,"\u0254"],[391,1,"\u0188"],[392,2],[393,1,"\u0256"],[394,1,"\u0257"],[395,1,"\u018C"],[[396,397],2],[398,1,"\u01DD"],[399,1,"\u0259"],[400,1,"\u025B"],[401,1,"\u0192"],[402,2],[403,1,"\u0260"],[404,1,"\u0263"],[405,2],[406,1,"\u0269"],[407,1,"\u0268"],[408,1,"\u0199"],[[409,411],2],[412,1,"\u026F"],[413,1,"\u0272"],[414,2],[415,1,"\u0275"],[416,1,"\u01A1"],[417,2],[418,1,"\u01A3"],[419,2],[420,1,"\u01A5"],[421,2],[422,1,"\u0280"],[423,1,"\u01A8"],[424,2],[425,1,"\u0283"],[[426,427],2],[428,1,"\u01AD"],[429,2],[430,1,"\u0288"],[431,1,"\u01B0"],[432,2],[433,1,"\u028A"],[434,1,"\u028B"],[435,1,"\u01B4"],[436,2],[437,1,"\u01B6"],[438,2],[439,1,"\u0292"],[440,1,"\u01B9"],[[441,443],2],[444,1,"\u01BD"],[[445,451],2],[[452,454],1,"d\u017E"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"\u01CE"],[462,2],[463,1,"\u01D0"],[464,2],[465,1,"\u01D2"],[466,2],[467,1,"\u01D4"],[468,2],[469,1,"\u01D6"],[470,2],[471,1,"\u01D8"],[472,2],[473,1,"\u01DA"],[474,2],[475,1,"\u01DC"],[[476,477],2],[478,1,"\u01DF"],[479,2],[480,1,"\u01E1"],[481,2],[482,1,"\u01E3"],[483,2],[484,1,"\u01E5"],[485,2],[486,1,"\u01E7"],[487,2],[488,1,"\u01E9"],[489,2],[490,1,"\u01EB"],[491,2],[492,1,"\u01ED"],[493,2],[494,1,"\u01EF"],[[495,496],2],[[497,499],1,"dz"],[500,1,"\u01F5"],[501,2],[502,1,"\u0195"],[503,1,"\u01BF"],[504,1,"\u01F9"],[505,2],[506,1,"\u01FB"],[507,2],[508,1,"\u01FD"],[509,2],[510,1,"\u01FF"],[511,2],[512,1,"\u0201"],[513,2],[514,1,"\u0203"],[515,2],[516,1,"\u0205"],[517,2],[518,1,"\u0207"],[519,2],[520,1,"\u0209"],[521,2],[522,1,"\u020B"],[523,2],[524,1,"\u020D"],[525,2],[526,1,"\u020F"],[527,2],[528,1,"\u0211"],[529,2],[530,1,"\u0213"],[531,2],[532,1,"\u0215"],[533,2],[534,1,"\u0217"],[535,2],[536,1,"\u0219"],[537,2],[538,1,"\u021B"],[539,2],[540,1,"\u021D"],[541,2],[542,1,"\u021F"],[543,2],[544,1,"\u019E"],[545,2],[546,1,"\u0223"],[547,2],[548,1,"\u0225"],[549,2],[550,1,"\u0227"],[551,2],[552,1,"\u0229"],[553,2],[554,1,"\u022B"],[555,2],[556,1,"\u022D"],[557,2],[558,1,"\u022F"],[559,2],[560,1,"\u0231"],[561,2],[562,1,"\u0233"],[563,2],[[564,566],2],[[567,569],2],[570,1,"\u2C65"],[571,1,"\u023C"],[572,2],[573,1,"\u019A"],[574,1,"\u2C66"],[[575,576],2],[577,1,"\u0242"],[578,2],[579,1,"\u0180"],[580,1,"\u0289"],[581,1,"\u028C"],[582,1,"\u0247"],[583,2],[584,1,"\u0249"],[585,2],[586,1,"\u024B"],[587,2],[588,1,"\u024D"],[589,2],[590,1,"\u024F"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"\u0266"],[690,1,"j"],[691,1,"r"],[692,1,"\u0279"],[693,1,"\u027B"],[694,1,"\u0281"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,1," \u0306"],[729,1," \u0307"],[730,1," \u030A"],[731,1," \u0328"],[732,1," \u0303"],[733,1," \u030B"],[734,2],[735,2],[736,1,"\u0263"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"\u0295"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"\u0300"],[833,1,"\u0301"],[834,2],[835,1,"\u0313"],[836,1,"\u0308\u0301"],[837,1,"\u03B9"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"\u0371"],[881,2],[882,1,"\u0373"],[883,2],[884,1,"\u02B9"],[885,2],[886,1,"\u0377"],[887,2],[[888,889],3],[890,1," \u03B9"],[[891,893],2],[894,1,";"],[895,1,"\u03F3"],[[896,899],3],[900,1," \u0301"],[901,1," \u0308\u0301"],[902,1,"\u03AC"],[903,1,"\xB7"],[904,1,"\u03AD"],[905,1,"\u03AE"],[906,1,"\u03AF"],[907,3],[908,1,"\u03CC"],[909,3],[910,1,"\u03CD"],[911,1,"\u03CE"],[912,2],[913,1,"\u03B1"],[914,1,"\u03B2"],[915,1,"\u03B3"],[916,1,"\u03B4"],[917,1,"\u03B5"],[918,1,"\u03B6"],[919,1,"\u03B7"],[920,1,"\u03B8"],[921,1,"\u03B9"],[922,1,"\u03BA"],[923,1,"\u03BB"],[924,1,"\u03BC"],[925,1,"\u03BD"],[926,1,"\u03BE"],[927,1,"\u03BF"],[928,1,"\u03C0"],[929,1,"\u03C1"],[930,3],[931,1,"\u03C3"],[932,1,"\u03C4"],[933,1,"\u03C5"],[934,1,"\u03C6"],[935,1,"\u03C7"],[936,1,"\u03C8"],[937,1,"\u03C9"],[938,1,"\u03CA"],[939,1,"\u03CB"],[[940,961],2],[962,6,"\u03C3"],[[963,974],2],[975,1,"\u03D7"],[976,1,"\u03B2"],[977,1,"\u03B8"],[978,1,"\u03C5"],[979,1,"\u03CD"],[980,1,"\u03CB"],[981,1,"\u03C6"],[982,1,"\u03C0"],[983,2],[984,1,"\u03D9"],[985,2],[986,1,"\u03DB"],[987,2],[988,1,"\u03DD"],[989,2],[990,1,"\u03DF"],[991,2],[992,1,"\u03E1"],[993,2],[994,1,"\u03E3"],[995,2],[996,1,"\u03E5"],[997,2],[998,1,"\u03E7"],[999,2],[1e3,1,"\u03E9"],[1001,2],[1002,1,"\u03EB"],[1003,2],[1004,1,"\u03ED"],[1005,2],[1006,1,"\u03EF"],[1007,2],[1008,1,"\u03BA"],[1009,1,"\u03C1"],[1010,1,"\u03C3"],[1011,2],[1012,1,"\u03B8"],[1013,1,"\u03B5"],[1014,2],[1015,1,"\u03F8"],[1016,2],[1017,1,"\u03C3"],[1018,1,"\u03FB"],[1019,2],[1020,2],[1021,1,"\u037B"],[1022,1,"\u037C"],[1023,1,"\u037D"],[1024,1,"\u0450"],[1025,1,"\u0451"],[1026,1,"\u0452"],[1027,1,"\u0453"],[1028,1,"\u0454"],[1029,1,"\u0455"],[1030,1,"\u0456"],[1031,1,"\u0457"],[1032,1,"\u0458"],[1033,1,"\u0459"],[1034,1,"\u045A"],[1035,1,"\u045B"],[1036,1,"\u045C"],[1037,1,"\u045D"],[1038,1,"\u045E"],[1039,1,"\u045F"],[1040,1,"\u0430"],[1041,1,"\u0431"],[1042,1,"\u0432"],[1043,1,"\u0433"],[1044,1,"\u0434"],[1045,1,"\u0435"],[1046,1,"\u0436"],[1047,1,"\u0437"],[1048,1,"\u0438"],[1049,1,"\u0439"],[1050,1,"\u043A"],[1051,1,"\u043B"],[1052,1,"\u043C"],[1053,1,"\u043D"],[1054,1,"\u043E"],[1055,1,"\u043F"],[1056,1,"\u0440"],[1057,1,"\u0441"],[1058,1,"\u0442"],[1059,1,"\u0443"],[1060,1,"\u0444"],[1061,1,"\u0445"],[1062,1,"\u0446"],[1063,1,"\u0447"],[1064,1,"\u0448"],[1065,1,"\u0449"],[1066,1,"\u044A"],[1067,1,"\u044B"],[1068,1,"\u044C"],[1069,1,"\u044D"],[1070,1,"\u044E"],[1071,1,"\u044F"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"\u0461"],[1121,2],[1122,1,"\u0463"],[1123,2],[1124,1,"\u0465"],[1125,2],[1126,1,"\u0467"],[1127,2],[1128,1,"\u0469"],[1129,2],[1130,1,"\u046B"],[1131,2],[1132,1,"\u046D"],[1133,2],[1134,1,"\u046F"],[1135,2],[1136,1,"\u0471"],[1137,2],[1138,1,"\u0473"],[1139,2],[1140,1,"\u0475"],[1141,2],[1142,1,"\u0477"],[1143,2],[1144,1,"\u0479"],[1145,2],[1146,1,"\u047B"],[1147,2],[1148,1,"\u047D"],[1149,2],[1150,1,"\u047F"],[1151,2],[1152,1,"\u0481"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"\u048B"],[1163,2],[1164,1,"\u048D"],[1165,2],[1166,1,"\u048F"],[1167,2],[1168,1,"\u0491"],[1169,2],[1170,1,"\u0493"],[1171,2],[1172,1,"\u0495"],[1173,2],[1174,1,"\u0497"],[1175,2],[1176,1,"\u0499"],[1177,2],[1178,1,"\u049B"],[1179,2],[1180,1,"\u049D"],[1181,2],[1182,1,"\u049F"],[1183,2],[1184,1,"\u04A1"],[1185,2],[1186,1,"\u04A3"],[1187,2],[1188,1,"\u04A5"],[1189,2],[1190,1,"\u04A7"],[1191,2],[1192,1,"\u04A9"],[1193,2],[1194,1,"\u04AB"],[1195,2],[1196,1,"\u04AD"],[1197,2],[1198,1,"\u04AF"],[1199,2],[1200,1,"\u04B1"],[1201,2],[1202,1,"\u04B3"],[1203,2],[1204,1,"\u04B5"],[1205,2],[1206,1,"\u04B7"],[1207,2],[1208,1,"\u04B9"],[1209,2],[1210,1,"\u04BB"],[1211,2],[1212,1,"\u04BD"],[1213,2],[1214,1,"\u04BF"],[1215,2],[1216,1,"\u04CF"],[1217,1,"\u04C2"],[1218,2],[1219,1,"\u04C4"],[1220,2],[1221,1,"\u04C6"],[1222,2],[1223,1,"\u04C8"],[1224,2],[1225,1,"\u04CA"],[1226,2],[1227,1,"\u04CC"],[1228,2],[1229,1,"\u04CE"],[1230,2],[1231,2],[1232,1,"\u04D1"],[1233,2],[1234,1,"\u04D3"],[1235,2],[1236,1,"\u04D5"],[1237,2],[1238,1,"\u04D7"],[1239,2],[1240,1,"\u04D9"],[1241,2],[1242,1,"\u04DB"],[1243,2],[1244,1,"\u04DD"],[1245,2],[1246,1,"\u04DF"],[1247,2],[1248,1,"\u04E1"],[1249,2],[1250,1,"\u04E3"],[1251,2],[1252,1,"\u04E5"],[1253,2],[1254,1,"\u04E7"],[1255,2],[1256,1,"\u04E9"],[1257,2],[1258,1,"\u04EB"],[1259,2],[1260,1,"\u04ED"],[1261,2],[1262,1,"\u04EF"],[1263,2],[1264,1,"\u04F1"],[1265,2],[1266,1,"\u04F3"],[1267,2],[1268,1,"\u04F5"],[1269,2],[1270,1,"\u04F7"],[1271,2],[1272,1,"\u04F9"],[1273,2],[1274,1,"\u04FB"],[1275,2],[1276,1,"\u04FD"],[1277,2],[1278,1,"\u04FF"],[1279,2],[1280,1,"\u0501"],[1281,2],[1282,1,"\u0503"],[1283,2],[1284,1,"\u0505"],[1285,2],[1286,1,"\u0507"],[1287,2],[1288,1,"\u0509"],[1289,2],[1290,1,"\u050B"],[1291,2],[1292,1,"\u050D"],[1293,2],[1294,1,"\u050F"],[1295,2],[1296,1,"\u0511"],[1297,2],[1298,1,"\u0513"],[1299,2],[1300,1,"\u0515"],[1301,2],[1302,1,"\u0517"],[1303,2],[1304,1,"\u0519"],[1305,2],[1306,1,"\u051B"],[1307,2],[1308,1,"\u051D"],[1309,2],[1310,1,"\u051F"],[1311,2],[1312,1,"\u0521"],[1313,2],[1314,1,"\u0523"],[1315,2],[1316,1,"\u0525"],[1317,2],[1318,1,"\u0527"],[1319,2],[1320,1,"\u0529"],[1321,2],[1322,1,"\u052B"],[1323,2],[1324,1,"\u052D"],[1325,2],[1326,1,"\u052F"],[1327,2],[1328,3],[1329,1,"\u0561"],[1330,1,"\u0562"],[1331,1,"\u0563"],[1332,1,"\u0564"],[1333,1,"\u0565"],[1334,1,"\u0566"],[1335,1,"\u0567"],[1336,1,"\u0568"],[1337,1,"\u0569"],[1338,1,"\u056A"],[1339,1,"\u056B"],[1340,1,"\u056C"],[1341,1,"\u056D"],[1342,1,"\u056E"],[1343,1,"\u056F"],[1344,1,"\u0570"],[1345,1,"\u0571"],[1346,1,"\u0572"],[1347,1,"\u0573"],[1348,1,"\u0574"],[1349,1,"\u0575"],[1350,1,"\u0576"],[1351,1,"\u0577"],[1352,1,"\u0578"],[1353,1,"\u0579"],[1354,1,"\u057A"],[1355,1,"\u057B"],[1356,1,"\u057C"],[1357,1,"\u057D"],[1358,1,"\u057E"],[1359,1,"\u057F"],[1360,1,"\u0580"],[1361,1,"\u0581"],[1362,1,"\u0582"],[1363,1,"\u0583"],[1364,1,"\u0584"],[1365,1,"\u0585"],[1366,1,"\u0586"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"\u0565\u0582"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"\u0627\u0674"],[1654,1,"\u0648\u0674"],[1655,1,"\u06C7\u0674"],[1656,1,"\u064A\u0674"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2198],3],[2199,2],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"\u0915\u093C"],[2393,1,"\u0916\u093C"],[2394,1,"\u0917\u093C"],[2395,1,"\u091C\u093C"],[2396,1,"\u0921\u093C"],[2397,1,"\u0922\u093C"],[2398,1,"\u092B\u093C"],[2399,1,"\u092F\u093C"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"\u09A1\u09BC"],[2525,1,"\u09A2\u09BC"],[2526,3],[2527,1,"\u09AF\u09BC"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"\u0A32\u0A3C"],[2612,3],[2613,2],[2614,1,"\u0A38\u0A3C"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"\u0A16\u0A3C"],[2650,1,"\u0A17\u0A3C"],[2651,1,"\u0A1C\u0A3C"],[2652,2],[2653,3],[2654,1,"\u0A2B\u0A3C"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"\u0B21\u0B3C"],[2909,1,"\u0B22\u0B3C"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"\u0E4D\u0E32"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"\u0ECD\u0EB2"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,"\u0EAB\u0E99"],[3805,1,"\u0EAB\u0EA1"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"\u0F0B"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"\u0F42\u0FB7"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"\u0F4C\u0FB7"],[[3918,3921],2],[3922,1,"\u0F51\u0FB7"],[[3923,3926],2],[3927,1,"\u0F56\u0FB7"],[[3928,3931],2],[3932,1,"\u0F5B\u0FB7"],[[3933,3944],2],[3945,1,"\u0F40\u0FB5"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"\u0F71\u0F72"],[3956,2],[3957,1,"\u0F71\u0F74"],[3958,1,"\u0FB2\u0F80"],[3959,1,"\u0FB2\u0F71\u0F80"],[3960,1,"\u0FB3\u0F80"],[3961,1,"\u0FB3\u0F71\u0F80"],[[3962,3968],2],[3969,1,"\u0F71\u0F80"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"\u0F92\u0FB7"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"\u0F9C\u0FB7"],[[3998,4001],2],[4002,1,"\u0FA1\u0FB7"],[[4003,4006],2],[4007,1,"\u0FA6\u0FB7"],[[4008,4011],2],[4012,1,"\u0FAB\u0FB7"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"\u0F90\u0FB5"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[4256,1,"\u2D00"],[4257,1,"\u2D01"],[4258,1,"\u2D02"],[4259,1,"\u2D03"],[4260,1,"\u2D04"],[4261,1,"\u2D05"],[4262,1,"\u2D06"],[4263,1,"\u2D07"],[4264,1,"\u2D08"],[4265,1,"\u2D09"],[4266,1,"\u2D0A"],[4267,1,"\u2D0B"],[4268,1,"\u2D0C"],[4269,1,"\u2D0D"],[4270,1,"\u2D0E"],[4271,1,"\u2D0F"],[4272,1,"\u2D10"],[4273,1,"\u2D11"],[4274,1,"\u2D12"],[4275,1,"\u2D13"],[4276,1,"\u2D14"],[4277,1,"\u2D15"],[4278,1,"\u2D16"],[4279,1,"\u2D17"],[4280,1,"\u2D18"],[4281,1,"\u2D19"],[4282,1,"\u2D1A"],[4283,1,"\u2D1B"],[4284,1,"\u2D1C"],[4285,1,"\u2D1D"],[4286,1,"\u2D1E"],[4287,1,"\u2D1F"],[4288,1,"\u2D20"],[4289,1,"\u2D21"],[4290,1,"\u2D22"],[4291,1,"\u2D23"],[4292,1,"\u2D24"],[4293,1,"\u2D25"],[4294,3],[4295,1,"\u2D27"],[[4296,4300],3],[4301,1,"\u2D2D"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"\u10DC"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],7],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"\u13F0"],[5113,1,"\u13F1"],[5114,1,"\u13F2"],[5115,1,"\u13F3"],[5116,1,"\u13F4"],[5117,1,"\u13F5"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6e3],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],7],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6154],2],[[6155,6158],7],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[6989,3],[[6990,6991],2],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,2],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"\u0432"],[7297,1,"\u0434"],[7298,1,"\u043E"],[7299,1,"\u0441"],[[7300,7301],1,"\u0442"],[7302,1,"\u044A"],[7303,1,"\u0463"],[7304,1,"\uA64B"],[7305,1,"\u1C8A"],[7306,2],[[7307,7311],3],[7312,1,"\u10D0"],[7313,1,"\u10D1"],[7314,1,"\u10D2"],[7315,1,"\u10D3"],[7316,1,"\u10D4"],[7317,1,"\u10D5"],[7318,1,"\u10D6"],[7319,1,"\u10D7"],[7320,1,"\u10D8"],[7321,1,"\u10D9"],[7322,1,"\u10DA"],[7323,1,"\u10DB"],[7324,1,"\u10DC"],[7325,1,"\u10DD"],[7326,1,"\u10DE"],[7327,1,"\u10DF"],[7328,1,"\u10E0"],[7329,1,"\u10E1"],[7330,1,"\u10E2"],[7331,1,"\u10E3"],[7332,1,"\u10E4"],[7333,1,"\u10E5"],[7334,1,"\u10E6"],[7335,1,"\u10E7"],[7336,1,"\u10E8"],[7337,1,"\u10E9"],[7338,1,"\u10EA"],[7339,1,"\u10EB"],[7340,1,"\u10EC"],[7341,1,"\u10ED"],[7342,1,"\u10EE"],[7343,1,"\u10EF"],[7344,1,"\u10F0"],[7345,1,"\u10F1"],[7346,1,"\u10F2"],[7347,1,"\u10F3"],[7348,1,"\u10F4"],[7349,1,"\u10F5"],[7350,1,"\u10F6"],[7351,1,"\u10F7"],[7352,1,"\u10F8"],[7353,1,"\u10F9"],[7354,1,"\u10FA"],[[7355,7356],3],[7357,1,"\u10FD"],[7358,1,"\u10FE"],[7359,1,"\u10FF"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"\xE6"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"\u01DD"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"\u0223"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"\u0250"],[7493,1,"\u0251"],[7494,1,"\u1D02"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"\u0259"],[7499,1,"\u025B"],[7500,1,"\u025C"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"\u014B"],[7506,1,"o"],[7507,1,"\u0254"],[7508,1,"\u1D16"],[7509,1,"\u1D17"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"\u1D1D"],[7514,1,"\u026F"],[7515,1,"v"],[7516,1,"\u1D25"],[7517,1,"\u03B2"],[7518,1,"\u03B3"],[7519,1,"\u03B4"],[7520,1,"\u03C6"],[7521,1,"\u03C7"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"\u03B2"],[7527,1,"\u03B3"],[7528,1,"\u03C1"],[7529,1,"\u03C6"],[7530,1,"\u03C7"],[7531,2],[[7532,7543],2],[7544,1,"\u043D"],[[7545,7578],2],[7579,1,"\u0252"],[7580,1,"c"],[7581,1,"\u0255"],[7582,1,"\xF0"],[7583,1,"\u025C"],[7584,1,"f"],[7585,1,"\u025F"],[7586,1,"\u0261"],[7587,1,"\u0265"],[7588,1,"\u0268"],[7589,1,"\u0269"],[7590,1,"\u026A"],[7591,1,"\u1D7B"],[7592,1,"\u029D"],[7593,1,"\u026D"],[7594,1,"\u1D85"],[7595,1,"\u029F"],[7596,1,"\u0271"],[7597,1,"\u0270"],[7598,1,"\u0272"],[7599,1,"\u0273"],[7600,1,"\u0274"],[7601,1,"\u0275"],[7602,1,"\u0278"],[7603,1,"\u0282"],[7604,1,"\u0283"],[7605,1,"\u01AB"],[7606,1,"\u0289"],[7607,1,"\u028A"],[7608,1,"\u1D1C"],[7609,1,"\u028B"],[7610,1,"\u028C"],[7611,1,"z"],[7612,1,"\u0290"],[7613,1,"\u0291"],[7614,1,"\u0292"],[7615,1,"\u03B8"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"\u1E01"],[7681,2],[7682,1,"\u1E03"],[7683,2],[7684,1,"\u1E05"],[7685,2],[7686,1,"\u1E07"],[7687,2],[7688,1,"\u1E09"],[7689,2],[7690,1,"\u1E0B"],[7691,2],[7692,1,"\u1E0D"],[7693,2],[7694,1,"\u1E0F"],[7695,2],[7696,1,"\u1E11"],[7697,2],[7698,1,"\u1E13"],[7699,2],[7700,1,"\u1E15"],[7701,2],[7702,1,"\u1E17"],[7703,2],[7704,1,"\u1E19"],[7705,2],[7706,1,"\u1E1B"],[7707,2],[7708,1,"\u1E1D"],[7709,2],[7710,1,"\u1E1F"],[7711,2],[7712,1,"\u1E21"],[7713,2],[7714,1,"\u1E23"],[7715,2],[7716,1,"\u1E25"],[7717,2],[7718,1,"\u1E27"],[7719,2],[7720,1,"\u1E29"],[7721,2],[7722,1,"\u1E2B"],[7723,2],[7724,1,"\u1E2D"],[7725,2],[7726,1,"\u1E2F"],[7727,2],[7728,1,"\u1E31"],[7729,2],[7730,1,"\u1E33"],[7731,2],[7732,1,"\u1E35"],[7733,2],[7734,1,"\u1E37"],[7735,2],[7736,1,"\u1E39"],[7737,2],[7738,1,"\u1E3B"],[7739,2],[7740,1,"\u1E3D"],[7741,2],[7742,1,"\u1E3F"],[7743,2],[7744,1,"\u1E41"],[7745,2],[7746,1,"\u1E43"],[7747,2],[7748,1,"\u1E45"],[7749,2],[7750,1,"\u1E47"],[7751,2],[7752,1,"\u1E49"],[7753,2],[7754,1,"\u1E4B"],[7755,2],[7756,1,"\u1E4D"],[7757,2],[7758,1,"\u1E4F"],[7759,2],[7760,1,"\u1E51"],[7761,2],[7762,1,"\u1E53"],[7763,2],[7764,1,"\u1E55"],[7765,2],[7766,1,"\u1E57"],[7767,2],[7768,1,"\u1E59"],[7769,2],[7770,1,"\u1E5B"],[7771,2],[7772,1,"\u1E5D"],[7773,2],[7774,1,"\u1E5F"],[7775,2],[7776,1,"\u1E61"],[7777,2],[7778,1,"\u1E63"],[7779,2],[7780,1,"\u1E65"],[7781,2],[7782,1,"\u1E67"],[7783,2],[7784,1,"\u1E69"],[7785,2],[7786,1,"\u1E6B"],[7787,2],[7788,1,"\u1E6D"],[7789,2],[7790,1,"\u1E6F"],[7791,2],[7792,1,"\u1E71"],[7793,2],[7794,1,"\u1E73"],[7795,2],[7796,1,"\u1E75"],[7797,2],[7798,1,"\u1E77"],[7799,2],[7800,1,"\u1E79"],[7801,2],[7802,1,"\u1E7B"],[7803,2],[7804,1,"\u1E7D"],[7805,2],[7806,1,"\u1E7F"],[7807,2],[7808,1,"\u1E81"],[7809,2],[7810,1,"\u1E83"],[7811,2],[7812,1,"\u1E85"],[7813,2],[7814,1,"\u1E87"],[7815,2],[7816,1,"\u1E89"],[7817,2],[7818,1,"\u1E8B"],[7819,2],[7820,1,"\u1E8D"],[7821,2],[7822,1,"\u1E8F"],[7823,2],[7824,1,"\u1E91"],[7825,2],[7826,1,"\u1E93"],[7827,2],[7828,1,"\u1E95"],[[7829,7833],2],[7834,1,"a\u02BE"],[7835,1,"\u1E61"],[[7836,7837],2],[7838,1,"\xDF"],[7839,2],[7840,1,"\u1EA1"],[7841,2],[7842,1,"\u1EA3"],[7843,2],[7844,1,"\u1EA5"],[7845,2],[7846,1,"\u1EA7"],[7847,2],[7848,1,"\u1EA9"],[7849,2],[7850,1,"\u1EAB"],[7851,2],[7852,1,"\u1EAD"],[7853,2],[7854,1,"\u1EAF"],[7855,2],[7856,1,"\u1EB1"],[7857,2],[7858,1,"\u1EB3"],[7859,2],[7860,1,"\u1EB5"],[7861,2],[7862,1,"\u1EB7"],[7863,2],[7864,1,"\u1EB9"],[7865,2],[7866,1,"\u1EBB"],[7867,2],[7868,1,"\u1EBD"],[7869,2],[7870,1,"\u1EBF"],[7871,2],[7872,1,"\u1EC1"],[7873,2],[7874,1,"\u1EC3"],[7875,2],[7876,1,"\u1EC5"],[7877,2],[7878,1,"\u1EC7"],[7879,2],[7880,1,"\u1EC9"],[7881,2],[7882,1,"\u1ECB"],[7883,2],[7884,1,"\u1ECD"],[7885,2],[7886,1,"\u1ECF"],[7887,2],[7888,1,"\u1ED1"],[7889,2],[7890,1,"\u1ED3"],[7891,2],[7892,1,"\u1ED5"],[7893,2],[7894,1,"\u1ED7"],[7895,2],[7896,1,"\u1ED9"],[7897,2],[7898,1,"\u1EDB"],[7899,2],[7900,1,"\u1EDD"],[7901,2],[7902,1,"\u1EDF"],[7903,2],[7904,1,"\u1EE1"],[7905,2],[7906,1,"\u1EE3"],[7907,2],[7908,1,"\u1EE5"],[7909,2],[7910,1,"\u1EE7"],[7911,2],[7912,1,"\u1EE9"],[7913,2],[7914,1,"\u1EEB"],[7915,2],[7916,1,"\u1EED"],[7917,2],[7918,1,"\u1EEF"],[7919,2],[7920,1,"\u1EF1"],[7921,2],[7922,1,"\u1EF3"],[7923,2],[7924,1,"\u1EF5"],[7925,2],[7926,1,"\u1EF7"],[7927,2],[7928,1,"\u1EF9"],[7929,2],[7930,1,"\u1EFB"],[7931,2],[7932,1,"\u1EFD"],[7933,2],[7934,1,"\u1EFF"],[7935,2],[[7936,7943],2],[7944,1,"\u1F00"],[7945,1,"\u1F01"],[7946,1,"\u1F02"],[7947,1,"\u1F03"],[7948,1,"\u1F04"],[7949,1,"\u1F05"],[7950,1,"\u1F06"],[7951,1,"\u1F07"],[[7952,7957],2],[[7958,7959],3],[7960,1,"\u1F10"],[7961,1,"\u1F11"],[7962,1,"\u1F12"],[7963,1,"\u1F13"],[7964,1,"\u1F14"],[7965,1,"\u1F15"],[[7966,7967],3],[[7968,7975],2],[7976,1,"\u1F20"],[7977,1,"\u1F21"],[7978,1,"\u1F22"],[7979,1,"\u1F23"],[7980,1,"\u1F24"],[7981,1,"\u1F25"],[7982,1,"\u1F26"],[7983,1,"\u1F27"],[[7984,7991],2],[7992,1,"\u1F30"],[7993,1,"\u1F31"],[7994,1,"\u1F32"],[7995,1,"\u1F33"],[7996,1,"\u1F34"],[7997,1,"\u1F35"],[7998,1,"\u1F36"],[7999,1,"\u1F37"],[[8e3,8005],2],[[8006,8007],3],[8008,1,"\u1F40"],[8009,1,"\u1F41"],[8010,1,"\u1F42"],[8011,1,"\u1F43"],[8012,1,"\u1F44"],[8013,1,"\u1F45"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"\u1F51"],[8026,3],[8027,1,"\u1F53"],[8028,3],[8029,1,"\u1F55"],[8030,3],[8031,1,"\u1F57"],[[8032,8039],2],[8040,1,"\u1F60"],[8041,1,"\u1F61"],[8042,1,"\u1F62"],[8043,1,"\u1F63"],[8044,1,"\u1F64"],[8045,1,"\u1F65"],[8046,1,"\u1F66"],[8047,1,"\u1F67"],[8048,2],[8049,1,"\u03AC"],[8050,2],[8051,1,"\u03AD"],[8052,2],[8053,1,"\u03AE"],[8054,2],[8055,1,"\u03AF"],[8056,2],[8057,1,"\u03CC"],[8058,2],[8059,1,"\u03CD"],[8060,2],[8061,1,"\u03CE"],[[8062,8063],3],[8064,1,"\u1F00\u03B9"],[8065,1,"\u1F01\u03B9"],[8066,1,"\u1F02\u03B9"],[8067,1,"\u1F03\u03B9"],[8068,1,"\u1F04\u03B9"],[8069,1,"\u1F05\u03B9"],[8070,1,"\u1F06\u03B9"],[8071,1,"\u1F07\u03B9"],[8072,1,"\u1F00\u03B9"],[8073,1,"\u1F01\u03B9"],[8074,1,"\u1F02\u03B9"],[8075,1,"\u1F03\u03B9"],[8076,1,"\u1F04\u03B9"],[8077,1,"\u1F05\u03B9"],[8078,1,"\u1F06\u03B9"],[8079,1,"\u1F07\u03B9"],[8080,1,"\u1F20\u03B9"],[8081,1,"\u1F21\u03B9"],[8082,1,"\u1F22\u03B9"],[8083,1,"\u1F23\u03B9"],[8084,1,"\u1F24\u03B9"],[8085,1,"\u1F25\u03B9"],[8086,1,"\u1F26\u03B9"],[8087,1,"\u1F27\u03B9"],[8088,1,"\u1F20\u03B9"],[8089,1,"\u1F21\u03B9"],[8090,1,"\u1F22\u03B9"],[8091,1,"\u1F23\u03B9"],[8092,1,"\u1F24\u03B9"],[8093,1,"\u1F25\u03B9"],[8094,1,"\u1F26\u03B9"],[8095,1,"\u1F27\u03B9"],[8096,1,"\u1F60\u03B9"],[8097,1,"\u1F61\u03B9"],[8098,1,"\u1F62\u03B9"],[8099,1,"\u1F63\u03B9"],[8100,1,"\u1F64\u03B9"],[8101,1,"\u1F65\u03B9"],[8102,1,"\u1F66\u03B9"],[8103,1,"\u1F67\u03B9"],[8104,1,"\u1F60\u03B9"],[8105,1,"\u1F61\u03B9"],[8106,1,"\u1F62\u03B9"],[8107,1,"\u1F63\u03B9"],[8108,1,"\u1F64\u03B9"],[8109,1,"\u1F65\u03B9"],[8110,1,"\u1F66\u03B9"],[8111,1,"\u1F67\u03B9"],[[8112,8113],2],[8114,1,"\u1F70\u03B9"],[8115,1,"\u03B1\u03B9"],[8116,1,"\u03AC\u03B9"],[8117,3],[8118,2],[8119,1,"\u1FB6\u03B9"],[8120,1,"\u1FB0"],[8121,1,"\u1FB1"],[8122,1,"\u1F70"],[8123,1,"\u03AC"],[8124,1,"\u03B1\u03B9"],[8125,1," \u0313"],[8126,1,"\u03B9"],[8127,1," \u0313"],[8128,1," \u0342"],[8129,1," \u0308\u0342"],[8130,1,"\u1F74\u03B9"],[8131,1,"\u03B7\u03B9"],[8132,1,"\u03AE\u03B9"],[8133,3],[8134,2],[8135,1,"\u1FC6\u03B9"],[8136,1,"\u1F72"],[8137,1,"\u03AD"],[8138,1,"\u1F74"],[8139,1,"\u03AE"],[8140,1,"\u03B7\u03B9"],[8141,1," \u0313\u0300"],[8142,1," \u0313\u0301"],[8143,1," \u0313\u0342"],[[8144,8146],2],[8147,1,"\u0390"],[[8148,8149],3],[[8150,8151],2],[8152,1,"\u1FD0"],[8153,1,"\u1FD1"],[8154,1,"\u1F76"],[8155,1,"\u03AF"],[8156,3],[8157,1," \u0314\u0300"],[8158,1," \u0314\u0301"],[8159,1," \u0314\u0342"],[[8160,8162],2],[8163,1,"\u03B0"],[[8164,8167],2],[8168,1,"\u1FE0"],[8169,1,"\u1FE1"],[8170,1,"\u1F7A"],[8171,1,"\u03CD"],[8172,1,"\u1FE5"],[8173,1," \u0308\u0300"],[8174,1," \u0308\u0301"],[8175,1,"`"],[[8176,8177],3],[8178,1,"\u1F7C\u03B9"],[8179,1,"\u03C9\u03B9"],[8180,1,"\u03CE\u03B9"],[8181,3],[8182,2],[8183,1,"\u1FF6\u03B9"],[8184,1,"\u1F78"],[8185,1,"\u03CC"],[8186,1,"\u1F7C"],[8187,1,"\u03CE"],[8188,1,"\u03C9\u03B9"],[8189,1," \u0301"],[8190,1," \u0314"],[8191,3],[[8192,8202],1," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"\u2010"],[[8210,8214],2],[8215,1," \u0333"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,1," "],[[8240,8242],2],[8243,1,"\u2032\u2032"],[8244,1,"\u2032\u2032\u2032"],[8245,2],[8246,1,"\u2035\u2035"],[8247,1,"\u2035\u2035\u2035"],[[8248,8251],2],[8252,1,"!!"],[8253,2],[8254,1," \u0305"],[[8255,8262],2],[8263,1,"??"],[8264,1,"?!"],[8265,1,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"\u2032\u2032\u2032\u2032"],[[8280,8286],2],[8287,1," "],[[8288,8291],7],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],7],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,1,"+"],[8315,1,"\u2212"],[8316,1,"="],[8317,1,"("],[8318,1,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,1,"+"],[8331,1,"\u2212"],[8332,1,"="],[8333,1,"("],[8334,1,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"\u0259"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,1,"a/c"],[8449,1,"a/s"],[8450,1,"c"],[8451,1,"\xB0c"],[8452,2],[8453,1,"c/o"],[8454,1,"c/u"],[8455,1,"\u025B"],[8456,2],[8457,1,"\xB0f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"\u0127"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"\u03C9"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"\xE5"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,1,"\u214E"],[8499,1,"m"],[8500,1,"o"],[8501,1,"\u05D0"],[8502,1,"\u05D1"],[8503,1,"\u05D2"],[8504,1,"\u05D3"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"\u03C0"],[[8509,8510],1,"\u03B3"],[8511,1,"\u03C0"],[8512,1,"\u2211"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1\u20447"],[8529,1,"1\u20449"],[8530,1,"1\u204410"],[8531,1,"1\u20443"],[8532,1,"2\u20443"],[8533,1,"1\u20445"],[8534,1,"2\u20445"],[8535,1,"3\u20445"],[8536,1,"4\u20445"],[8537,1,"1\u20446"],[8538,1,"5\u20446"],[8539,1,"1\u20448"],[8540,1,"3\u20448"],[8541,1,"5\u20448"],[8542,1,"7\u20448"],[8543,1,"1\u2044"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,1,"\u2184"],[8580,2],[[8581,8584],2],[8585,1,"0\u20443"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"\u222B\u222B"],[8749,1,"\u222B\u222B\u222B"],[8750,2],[8751,1,"\u222E\u222E"],[8752,1,"\u222E\u222E\u222E"],[[8753,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9e3],2],[9001,1,"\u3008"],[9002,1,"\u3009"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9257],2],[[9258,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,1,"(1)"],[9333,1,"(2)"],[9334,1,"(3)"],[9335,1,"(4)"],[9336,1,"(5)"],[9337,1,"(6)"],[9338,1,"(7)"],[9339,1,"(8)"],[9340,1,"(9)"],[9341,1,"(10)"],[9342,1,"(11)"],[9343,1,"(12)"],[9344,1,"(13)"],[9345,1,"(14)"],[9346,1,"(15)"],[9347,1,"(16)"],[9348,1,"(17)"],[9349,1,"(18)"],[9350,1,"(19)"],[9351,1,"(20)"],[[9352,9371],3],[9372,1,"(a)"],[9373,1,"(b)"],[9374,1,"(c)"],[9375,1,"(d)"],[9376,1,"(e)"],[9377,1,"(f)"],[9378,1,"(g)"],[9379,1,"(h)"],[9380,1,"(i)"],[9381,1,"(j)"],[9382,1,"(k)"],[9383,1,"(l)"],[9384,1,"(m)"],[9385,1,"(n)"],[9386,1,"(o)"],[9387,1,"(p)"],[9388,1,"(q)"],[9389,1,"(r)"],[9390,1,"(s)"],[9391,1,"(t)"],[9392,1,"(u)"],[9393,1,"(v)"],[9394,1,"(w)"],[9395,1,"(x)"],[9396,1,"(y)"],[9397,1,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"\u222B\u222B\u222B\u222B"],[[10765,10867],2],[10868,1,"::="],[10869,1,"=="],[10870,1,"==="],[[10871,10971],2],[10972,1,"\u2ADD\u0338"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"\u2C30"],[11265,1,"\u2C31"],[11266,1,"\u2C32"],[11267,1,"\u2C33"],[11268,1,"\u2C34"],[11269,1,"\u2C35"],[11270,1,"\u2C36"],[11271,1,"\u2C37"],[11272,1,"\u2C38"],[11273,1,"\u2C39"],[11274,1,"\u2C3A"],[11275,1,"\u2C3B"],[11276,1,"\u2C3C"],[11277,1,"\u2C3D"],[11278,1,"\u2C3E"],[11279,1,"\u2C3F"],[11280,1,"\u2C40"],[11281,1,"\u2C41"],[11282,1,"\u2C42"],[11283,1,"\u2C43"],[11284,1,"\u2C44"],[11285,1,"\u2C45"],[11286,1,"\u2C46"],[11287,1,"\u2C47"],[11288,1,"\u2C48"],[11289,1,"\u2C49"],[11290,1,"\u2C4A"],[11291,1,"\u2C4B"],[11292,1,"\u2C4C"],[11293,1,"\u2C4D"],[11294,1,"\u2C4E"],[11295,1,"\u2C4F"],[11296,1,"\u2C50"],[11297,1,"\u2C51"],[11298,1,"\u2C52"],[11299,1,"\u2C53"],[11300,1,"\u2C54"],[11301,1,"\u2C55"],[11302,1,"\u2C56"],[11303,1,"\u2C57"],[11304,1,"\u2C58"],[11305,1,"\u2C59"],[11306,1,"\u2C5A"],[11307,1,"\u2C5B"],[11308,1,"\u2C5C"],[11309,1,"\u2C5D"],[11310,1,"\u2C5E"],[11311,1,"\u2C5F"],[[11312,11358],2],[11359,2],[11360,1,"\u2C61"],[11361,2],[11362,1,"\u026B"],[11363,1,"\u1D7D"],[11364,1,"\u027D"],[[11365,11366],2],[11367,1,"\u2C68"],[11368,2],[11369,1,"\u2C6A"],[11370,2],[11371,1,"\u2C6C"],[11372,2],[11373,1,"\u0251"],[11374,1,"\u0271"],[11375,1,"\u0250"],[11376,1,"\u0252"],[11377,2],[11378,1,"\u2C73"],[11379,2],[11380,2],[11381,1,"\u2C76"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"\u023F"],[11391,1,"\u0240"],[11392,1,"\u2C81"],[11393,2],[11394,1,"\u2C83"],[11395,2],[11396,1,"\u2C85"],[11397,2],[11398,1,"\u2C87"],[11399,2],[11400,1,"\u2C89"],[11401,2],[11402,1,"\u2C8B"],[11403,2],[11404,1,"\u2C8D"],[11405,2],[11406,1,"\u2C8F"],[11407,2],[11408,1,"\u2C91"],[11409,2],[11410,1,"\u2C93"],[11411,2],[11412,1,"\u2C95"],[11413,2],[11414,1,"\u2C97"],[11415,2],[11416,1,"\u2C99"],[11417,2],[11418,1,"\u2C9B"],[11419,2],[11420,1,"\u2C9D"],[11421,2],[11422,1,"\u2C9F"],[11423,2],[11424,1,"\u2CA1"],[11425,2],[11426,1,"\u2CA3"],[11427,2],[11428,1,"\u2CA5"],[11429,2],[11430,1,"\u2CA7"],[11431,2],[11432,1,"\u2CA9"],[11433,2],[11434,1,"\u2CAB"],[11435,2],[11436,1,"\u2CAD"],[11437,2],[11438,1,"\u2CAF"],[11439,2],[11440,1,"\u2CB1"],[11441,2],[11442,1,"\u2CB3"],[11443,2],[11444,1,"\u2CB5"],[11445,2],[11446,1,"\u2CB7"],[11447,2],[11448,1,"\u2CB9"],[11449,2],[11450,1,"\u2CBB"],[11451,2],[11452,1,"\u2CBD"],[11453,2],[11454,1,"\u2CBF"],[11455,2],[11456,1,"\u2CC1"],[11457,2],[11458,1,"\u2CC3"],[11459,2],[11460,1,"\u2CC5"],[11461,2],[11462,1,"\u2CC7"],[11463,2],[11464,1,"\u2CC9"],[11465,2],[11466,1,"\u2CCB"],[11467,2],[11468,1,"\u2CCD"],[11469,2],[11470,1,"\u2CCF"],[11471,2],[11472,1,"\u2CD1"],[11473,2],[11474,1,"\u2CD3"],[11475,2],[11476,1,"\u2CD5"],[11477,2],[11478,1,"\u2CD7"],[11479,2],[11480,1,"\u2CD9"],[11481,2],[11482,1,"\u2CDB"],[11483,2],[11484,1,"\u2CDD"],[11485,2],[11486,1,"\u2CDF"],[11487,2],[11488,1,"\u2CE1"],[11489,2],[11490,1,"\u2CE3"],[[11491,11492],2],[[11493,11498],2],[11499,1,"\u2CEC"],[11500,2],[11501,1,"\u2CEE"],[[11502,11505],2],[11506,1,"\u2CF3"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"\u2D61"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"\u6BCD"],[[11936,12018],2],[12019,1,"\u9F9F"],[[12020,12031],3],[12032,1,"\u4E00"],[12033,1,"\u4E28"],[12034,1,"\u4E36"],[12035,1,"\u4E3F"],[12036,1,"\u4E59"],[12037,1,"\u4E85"],[12038,1,"\u4E8C"],[12039,1,"\u4EA0"],[12040,1,"\u4EBA"],[12041,1,"\u513F"],[12042,1,"\u5165"],[12043,1,"\u516B"],[12044,1,"\u5182"],[12045,1,"\u5196"],[12046,1,"\u51AB"],[12047,1,"\u51E0"],[12048,1,"\u51F5"],[12049,1,"\u5200"],[12050,1,"\u529B"],[12051,1,"\u52F9"],[12052,1,"\u5315"],[12053,1,"\u531A"],[12054,1,"\u5338"],[12055,1,"\u5341"],[12056,1,"\u535C"],[12057,1,"\u5369"],[12058,1,"\u5382"],[12059,1,"\u53B6"],[12060,1,"\u53C8"],[12061,1,"\u53E3"],[12062,1,"\u56D7"],[12063,1,"\u571F"],[12064,1,"\u58EB"],[12065,1,"\u5902"],[12066,1,"\u590A"],[12067,1,"\u5915"],[12068,1,"\u5927"],[12069,1,"\u5973"],[12070,1,"\u5B50"],[12071,1,"\u5B80"],[12072,1,"\u5BF8"],[12073,1,"\u5C0F"],[12074,1,"\u5C22"],[12075,1,"\u5C38"],[12076,1,"\u5C6E"],[12077,1,"\u5C71"],[12078,1,"\u5DDB"],[12079,1,"\u5DE5"],[12080,1,"\u5DF1"],[12081,1,"\u5DFE"],[12082,1,"\u5E72"],[12083,1,"\u5E7A"],[12084,1,"\u5E7F"],[12085,1,"\u5EF4"],[12086,1,"\u5EFE"],[12087,1,"\u5F0B"],[12088,1,"\u5F13"],[12089,1,"\u5F50"],[12090,1,"\u5F61"],[12091,1,"\u5F73"],[12092,1,"\u5FC3"],[12093,1,"\u6208"],[12094,1,"\u6236"],[12095,1,"\u624B"],[12096,1,"\u652F"],[12097,1,"\u6534"],[12098,1,"\u6587"],[12099,1,"\u6597"],[12100,1,"\u65A4"],[12101,1,"\u65B9"],[12102,1,"\u65E0"],[12103,1,"\u65E5"],[12104,1,"\u66F0"],[12105,1,"\u6708"],[12106,1,"\u6728"],[12107,1,"\u6B20"],[12108,1,"\u6B62"],[12109,1,"\u6B79"],[12110,1,"\u6BB3"],[12111,1,"\u6BCB"],[12112,1,"\u6BD4"],[12113,1,"\u6BDB"],[12114,1,"\u6C0F"],[12115,1,"\u6C14"],[12116,1,"\u6C34"],[12117,1,"\u706B"],[12118,1,"\u722A"],[12119,1,"\u7236"],[12120,1,"\u723B"],[12121,1,"\u723F"],[12122,1,"\u7247"],[12123,1,"\u7259"],[12124,1,"\u725B"],[12125,1,"\u72AC"],[12126,1,"\u7384"],[12127,1,"\u7389"],[12128,1,"\u74DC"],[12129,1,"\u74E6"],[12130,1,"\u7518"],[12131,1,"\u751F"],[12132,1,"\u7528"],[12133,1,"\u7530"],[12134,1,"\u758B"],[12135,1,"\u7592"],[12136,1,"\u7676"],[12137,1,"\u767D"],[12138,1,"\u76AE"],[12139,1,"\u76BF"],[12140,1,"\u76EE"],[12141,1,"\u77DB"],[12142,1,"\u77E2"],[12143,1,"\u77F3"],[12144,1,"\u793A"],[12145,1,"\u79B8"],[12146,1,"\u79BE"],[12147,1,"\u7A74"],[12148,1,"\u7ACB"],[12149,1,"\u7AF9"],[12150,1,"\u7C73"],[12151,1,"\u7CF8"],[12152,1,"\u7F36"],[12153,1,"\u7F51"],[12154,1,"\u7F8A"],[12155,1,"\u7FBD"],[12156,1,"\u8001"],[12157,1,"\u800C"],[12158,1,"\u8012"],[12159,1,"\u8033"],[12160,1,"\u807F"],[12161,1,"\u8089"],[12162,1,"\u81E3"],[12163,1,"\u81EA"],[12164,1,"\u81F3"],[12165,1,"\u81FC"],[12166,1,"\u820C"],[12167,1,"\u821B"],[12168,1,"\u821F"],[12169,1,"\u826E"],[12170,1,"\u8272"],[12171,1,"\u8278"],[12172,1,"\u864D"],[12173,1,"\u866B"],[12174,1,"\u8840"],[12175,1,"\u884C"],[12176,1,"\u8863"],[12177,1,"\u897E"],[12178,1,"\u898B"],[12179,1,"\u89D2"],[12180,1,"\u8A00"],[12181,1,"\u8C37"],[12182,1,"\u8C46"],[12183,1,"\u8C55"],[12184,1,"\u8C78"],[12185,1,"\u8C9D"],[12186,1,"\u8D64"],[12187,1,"\u8D70"],[12188,1,"\u8DB3"],[12189,1,"\u8EAB"],[12190,1,"\u8ECA"],[12191,1,"\u8F9B"],[12192,1,"\u8FB0"],[12193,1,"\u8FB5"],[12194,1,"\u9091"],[12195,1,"\u9149"],[12196,1,"\u91C6"],[12197,1,"\u91CC"],[12198,1,"\u91D1"],[12199,1,"\u9577"],[12200,1,"\u9580"],[12201,1,"\u961C"],[12202,1,"\u96B6"],[12203,1,"\u96B9"],[12204,1,"\u96E8"],[12205,1,"\u9751"],[12206,1,"\u975E"],[12207,1,"\u9762"],[12208,1,"\u9769"],[12209,1,"\u97CB"],[12210,1,"\u97ED"],[12211,1,"\u97F3"],[12212,1,"\u9801"],[12213,1,"\u98A8"],[12214,1,"\u98DB"],[12215,1,"\u98DF"],[12216,1,"\u9996"],[12217,1,"\u9999"],[12218,1,"\u99AC"],[12219,1,"\u9AA8"],[12220,1,"\u9AD8"],[12221,1,"\u9ADF"],[12222,1,"\u9B25"],[12223,1,"\u9B2F"],[12224,1,"\u9B32"],[12225,1,"\u9B3C"],[12226,1,"\u9B5A"],[12227,1,"\u9CE5"],[12228,1,"\u9E75"],[12229,1,"\u9E7F"],[12230,1,"\u9EA5"],[12231,1,"\u9EBB"],[12232,1,"\u9EC3"],[12233,1,"\u9ECD"],[12234,1,"\u9ED1"],[12235,1,"\u9EF9"],[12236,1,"\u9EFD"],[12237,1,"\u9F0E"],[12238,1,"\u9F13"],[12239,1,"\u9F20"],[12240,1,"\u9F3B"],[12241,1,"\u9F4A"],[12242,1,"\u9F52"],[12243,1,"\u9F8D"],[12244,1,"\u9F9C"],[12245,1,"\u9FA0"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,1," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"\u3012"],[12343,2],[12344,1,"\u5341"],[12345,1,"\u5344"],[12346,1,"\u5345"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,1," \u3099"],[12444,1," \u309A"],[[12445,12446],2],[12447,1,"\u3088\u308A"],[12448,2],[[12449,12542],2],[12543,1,"\u30B3\u30C8"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"\u1100"],[12594,1,"\u1101"],[12595,1,"\u11AA"],[12596,1,"\u1102"],[12597,1,"\u11AC"],[12598,1,"\u11AD"],[12599,1,"\u1103"],[12600,1,"\u1104"],[12601,1,"\u1105"],[12602,1,"\u11B0"],[12603,1,"\u11B1"],[12604,1,"\u11B2"],[12605,1,"\u11B3"],[12606,1,"\u11B4"],[12607,1,"\u11B5"],[12608,1,"\u111A"],[12609,1,"\u1106"],[12610,1,"\u1107"],[12611,1,"\u1108"],[12612,1,"\u1121"],[12613,1,"\u1109"],[12614,1,"\u110A"],[12615,1,"\u110B"],[12616,1,"\u110C"],[12617,1,"\u110D"],[12618,1,"\u110E"],[12619,1,"\u110F"],[12620,1,"\u1110"],[12621,1,"\u1111"],[12622,1,"\u1112"],[12623,1,"\u1161"],[12624,1,"\u1162"],[12625,1,"\u1163"],[12626,1,"\u1164"],[12627,1,"\u1165"],[12628,1,"\u1166"],[12629,1,"\u1167"],[12630,1,"\u1168"],[12631,1,"\u1169"],[12632,1,"\u116A"],[12633,1,"\u116B"],[12634,1,"\u116C"],[12635,1,"\u116D"],[12636,1,"\u116E"],[12637,1,"\u116F"],[12638,1,"\u1170"],[12639,1,"\u1171"],[12640,1,"\u1172"],[12641,1,"\u1173"],[12642,1,"\u1174"],[12643,1,"\u1175"],[12644,7],[12645,1,"\u1114"],[12646,1,"\u1115"],[12647,1,"\u11C7"],[12648,1,"\u11C8"],[12649,1,"\u11CC"],[12650,1,"\u11CE"],[12651,1,"\u11D3"],[12652,1,"\u11D7"],[12653,1,"\u11D9"],[12654,1,"\u111C"],[12655,1,"\u11DD"],[12656,1,"\u11DF"],[12657,1,"\u111D"],[12658,1,"\u111E"],[12659,1,"\u1120"],[12660,1,"\u1122"],[12661,1,"\u1123"],[12662,1,"\u1127"],[12663,1,"\u1129"],[12664,1,"\u112B"],[12665,1,"\u112C"],[12666,1,"\u112D"],[12667,1,"\u112E"],[12668,1,"\u112F"],[12669,1,"\u1132"],[12670,1,"\u1136"],[12671,1,"\u1140"],[12672,1,"\u1147"],[12673,1,"\u114C"],[12674,1,"\u11F1"],[12675,1,"\u11F2"],[12676,1,"\u1157"],[12677,1,"\u1158"],[12678,1,"\u1159"],[12679,1,"\u1184"],[12680,1,"\u1185"],[12681,1,"\u1188"],[12682,1,"\u1191"],[12683,1,"\u1192"],[12684,1,"\u1194"],[12685,1,"\u119E"],[12686,1,"\u11A1"],[12687,3],[[12688,12689],2],[12690,1,"\u4E00"],[12691,1,"\u4E8C"],[12692,1,"\u4E09"],[12693,1,"\u56DB"],[12694,1,"\u4E0A"],[12695,1,"\u4E2D"],[12696,1,"\u4E0B"],[12697,1,"\u7532"],[12698,1,"\u4E59"],[12699,1,"\u4E19"],[12700,1,"\u4E01"],[12701,1,"\u5929"],[12702,1,"\u5730"],[12703,1,"\u4EBA"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12773],2],[[12774,12782],3],[12783,3],[[12784,12799],2],[12800,1,"(\u1100)"],[12801,1,"(\u1102)"],[12802,1,"(\u1103)"],[12803,1,"(\u1105)"],[12804,1,"(\u1106)"],[12805,1,"(\u1107)"],[12806,1,"(\u1109)"],[12807,1,"(\u110B)"],[12808,1,"(\u110C)"],[12809,1,"(\u110E)"],[12810,1,"(\u110F)"],[12811,1,"(\u1110)"],[12812,1,"(\u1111)"],[12813,1,"(\u1112)"],[12814,1,"(\uAC00)"],[12815,1,"(\uB098)"],[12816,1,"(\uB2E4)"],[12817,1,"(\uB77C)"],[12818,1,"(\uB9C8)"],[12819,1,"(\uBC14)"],[12820,1,"(\uC0AC)"],[12821,1,"(\uC544)"],[12822,1,"(\uC790)"],[12823,1,"(\uCC28)"],[12824,1,"(\uCE74)"],[12825,1,"(\uD0C0)"],[12826,1,"(\uD30C)"],[12827,1,"(\uD558)"],[12828,1,"(\uC8FC)"],[12829,1,"(\uC624\uC804)"],[12830,1,"(\uC624\uD6C4)"],[12831,3],[12832,1,"(\u4E00)"],[12833,1,"(\u4E8C)"],[12834,1,"(\u4E09)"],[12835,1,"(\u56DB)"],[12836,1,"(\u4E94)"],[12837,1,"(\u516D)"],[12838,1,"(\u4E03)"],[12839,1,"(\u516B)"],[12840,1,"(\u4E5D)"],[12841,1,"(\u5341)"],[12842,1,"(\u6708)"],[12843,1,"(\u706B)"],[12844,1,"(\u6C34)"],[12845,1,"(\u6728)"],[12846,1,"(\u91D1)"],[12847,1,"(\u571F)"],[12848,1,"(\u65E5)"],[12849,1,"(\u682A)"],[12850,1,"(\u6709)"],[12851,1,"(\u793E)"],[12852,1,"(\u540D)"],[12853,1,"(\u7279)"],[12854,1,"(\u8CA1)"],[12855,1,"(\u795D)"],[12856,1,"(\u52B4)"],[12857,1,"(\u4EE3)"],[12858,1,"(\u547C)"],[12859,1,"(\u5B66)"],[12860,1,"(\u76E3)"],[12861,1,"(\u4F01)"],[12862,1,"(\u8CC7)"],[12863,1,"(\u5354)"],[12864,1,"(\u796D)"],[12865,1,"(\u4F11)"],[12866,1,"(\u81EA)"],[12867,1,"(\u81F3)"],[12868,1,"\u554F"],[12869,1,"\u5E7C"],[12870,1,"\u6587"],[12871,1,"\u7B8F"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"\u1100"],[12897,1,"\u1102"],[12898,1,"\u1103"],[12899,1,"\u1105"],[12900,1,"\u1106"],[12901,1,"\u1107"],[12902,1,"\u1109"],[12903,1,"\u110B"],[12904,1,"\u110C"],[12905,1,"\u110E"],[12906,1,"\u110F"],[12907,1,"\u1110"],[12908,1,"\u1111"],[12909,1,"\u1112"],[12910,1,"\uAC00"],[12911,1,"\uB098"],[12912,1,"\uB2E4"],[12913,1,"\uB77C"],[12914,1,"\uB9C8"],[12915,1,"\uBC14"],[12916,1,"\uC0AC"],[12917,1,"\uC544"],[12918,1,"\uC790"],[12919,1,"\uCC28"],[12920,1,"\uCE74"],[12921,1,"\uD0C0"],[12922,1,"\uD30C"],[12923,1,"\uD558"],[12924,1,"\uCC38\uACE0"],[12925,1,"\uC8FC\uC758"],[12926,1,"\uC6B0"],[12927,2],[12928,1,"\u4E00"],[12929,1,"\u4E8C"],[12930,1,"\u4E09"],[12931,1,"\u56DB"],[12932,1,"\u4E94"],[12933,1,"\u516D"],[12934,1,"\u4E03"],[12935,1,"\u516B"],[12936,1,"\u4E5D"],[12937,1,"\u5341"],[12938,1,"\u6708"],[12939,1,"\u706B"],[12940,1,"\u6C34"],[12941,1,"\u6728"],[12942,1,"\u91D1"],[12943,1,"\u571F"],[12944,1,"\u65E5"],[12945,1,"\u682A"],[12946,1,"\u6709"],[12947,1,"\u793E"],[12948,1,"\u540D"],[12949,1,"\u7279"],[12950,1,"\u8CA1"],[12951,1,"\u795D"],[12952,1,"\u52B4"],[12953,1,"\u79D8"],[12954,1,"\u7537"],[12955,1,"\u5973"],[12956,1,"\u9069"],[12957,1,"\u512A"],[12958,1,"\u5370"],[12959,1,"\u6CE8"],[12960,1,"\u9805"],[12961,1,"\u4F11"],[12962,1,"\u5199"],[12963,1,"\u6B63"],[12964,1,"\u4E0A"],[12965,1,"\u4E2D"],[12966,1,"\u4E0B"],[12967,1,"\u5DE6"],[12968,1,"\u53F3"],[12969,1,"\u533B"],[12970,1,"\u5B97"],[12971,1,"\u5B66"],[12972,1,"\u76E3"],[12973,1,"\u4F01"],[12974,1,"\u8CC7"],[12975,1,"\u5354"],[12976,1,"\u591C"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1\u6708"],[12993,1,"2\u6708"],[12994,1,"3\u6708"],[12995,1,"4\u6708"],[12996,1,"5\u6708"],[12997,1,"6\u6708"],[12998,1,"7\u6708"],[12999,1,"8\u6708"],[13e3,1,"9\u6708"],[13001,1,"10\u6708"],[13002,1,"11\u6708"],[13003,1,"12\u6708"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"\u30A2"],[13009,1,"\u30A4"],[13010,1,"\u30A6"],[13011,1,"\u30A8"],[13012,1,"\u30AA"],[13013,1,"\u30AB"],[13014,1,"\u30AD"],[13015,1,"\u30AF"],[13016,1,"\u30B1"],[13017,1,"\u30B3"],[13018,1,"\u30B5"],[13019,1,"\u30B7"],[13020,1,"\u30B9"],[13021,1,"\u30BB"],[13022,1,"\u30BD"],[13023,1,"\u30BF"],[13024,1,"\u30C1"],[13025,1,"\u30C4"],[13026,1,"\u30C6"],[13027,1,"\u30C8"],[13028,1,"\u30CA"],[13029,1,"\u30CB"],[13030,1,"\u30CC"],[13031,1,"\u30CD"],[13032,1,"\u30CE"],[13033,1,"\u30CF"],[13034,1,"\u30D2"],[13035,1,"\u30D5"],[13036,1,"\u30D8"],[13037,1,"\u30DB"],[13038,1,"\u30DE"],[13039,1,"\u30DF"],[13040,1,"\u30E0"],[13041,1,"\u30E1"],[13042,1,"\u30E2"],[13043,1,"\u30E4"],[13044,1,"\u30E6"],[13045,1,"\u30E8"],[13046,1,"\u30E9"],[13047,1,"\u30EA"],[13048,1,"\u30EB"],[13049,1,"\u30EC"],[13050,1,"\u30ED"],[13051,1,"\u30EF"],[13052,1,"\u30F0"],[13053,1,"\u30F1"],[13054,1,"\u30F2"],[13055,1,"\u4EE4\u548C"],[13056,1,"\u30A2\u30D1\u30FC\u30C8"],[13057,1,"\u30A2\u30EB\u30D5\u30A1"],[13058,1,"\u30A2\u30F3\u30DA\u30A2"],[13059,1,"\u30A2\u30FC\u30EB"],[13060,1,"\u30A4\u30CB\u30F3\u30B0"],[13061,1,"\u30A4\u30F3\u30C1"],[13062,1,"\u30A6\u30A9\u30F3"],[13063,1,"\u30A8\u30B9\u30AF\u30FC\u30C9"],[13064,1,"\u30A8\u30FC\u30AB\u30FC"],[13065,1,"\u30AA\u30F3\u30B9"],[13066,1,"\u30AA\u30FC\u30E0"],[13067,1,"\u30AB\u30A4\u30EA"],[13068,1,"\u30AB\u30E9\u30C3\u30C8"],[13069,1,"\u30AB\u30ED\u30EA\u30FC"],[13070,1,"\u30AC\u30ED\u30F3"],[13071,1,"\u30AC\u30F3\u30DE"],[13072,1,"\u30AE\u30AC"],[13073,1,"\u30AE\u30CB\u30FC"],[13074,1,"\u30AD\u30E5\u30EA\u30FC"],[13075,1,"\u30AE\u30EB\u30C0\u30FC"],[13076,1,"\u30AD\u30ED"],[13077,1,"\u30AD\u30ED\u30B0\u30E9\u30E0"],[13078,1,"\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB"],[13079,1,"\u30AD\u30ED\u30EF\u30C3\u30C8"],[13080,1,"\u30B0\u30E9\u30E0"],[13081,1,"\u30B0\u30E9\u30E0\u30C8\u30F3"],[13082,1,"\u30AF\u30EB\u30BC\u30A4\u30ED"],[13083,1,"\u30AF\u30ED\u30FC\u30CD"],[13084,1,"\u30B1\u30FC\u30B9"],[13085,1,"\u30B3\u30EB\u30CA"],[13086,1,"\u30B3\u30FC\u30DD"],[13087,1,"\u30B5\u30A4\u30AF\u30EB"],[13088,1,"\u30B5\u30F3\u30C1\u30FC\u30E0"],[13089,1,"\u30B7\u30EA\u30F3\u30B0"],[13090,1,"\u30BB\u30F3\u30C1"],[13091,1,"\u30BB\u30F3\u30C8"],[13092,1,"\u30C0\u30FC\u30B9"],[13093,1,"\u30C7\u30B7"],[13094,1,"\u30C9\u30EB"],[13095,1,"\u30C8\u30F3"],[13096,1,"\u30CA\u30CE"],[13097,1,"\u30CE\u30C3\u30C8"],[13098,1,"\u30CF\u30A4\u30C4"],[13099,1,"\u30D1\u30FC\u30BB\u30F3\u30C8"],[13100,1,"\u30D1\u30FC\u30C4"],[13101,1,"\u30D0\u30FC\u30EC\u30EB"],[13102,1,"\u30D4\u30A2\u30B9\u30C8\u30EB"],[13103,1,"\u30D4\u30AF\u30EB"],[13104,1,"\u30D4\u30B3"],[13105,1,"\u30D3\u30EB"],[13106,1,"\u30D5\u30A1\u30E9\u30C3\u30C9"],[13107,1,"\u30D5\u30A3\u30FC\u30C8"],[13108,1,"\u30D6\u30C3\u30B7\u30A7\u30EB"],[13109,1,"\u30D5\u30E9\u30F3"],[13110,1,"\u30D8\u30AF\u30BF\u30FC\u30EB"],[13111,1,"\u30DA\u30BD"],[13112,1,"\u30DA\u30CB\u30D2"],[13113,1,"\u30D8\u30EB\u30C4"],[13114,1,"\u30DA\u30F3\u30B9"],[13115,1,"\u30DA\u30FC\u30B8"],[13116,1,"\u30D9\u30FC\u30BF"],[13117,1,"\u30DD\u30A4\u30F3\u30C8"],[13118,1,"\u30DC\u30EB\u30C8"],[13119,1,"\u30DB\u30F3"],[13120,1,"\u30DD\u30F3\u30C9"],[13121,1,"\u30DB\u30FC\u30EB"],[13122,1,"\u30DB\u30FC\u30F3"],[13123,1,"\u30DE\u30A4\u30AF\u30ED"],[13124,1,"\u30DE\u30A4\u30EB"],[13125,1,"\u30DE\u30C3\u30CF"],[13126,1,"\u30DE\u30EB\u30AF"],[13127,1,"\u30DE\u30F3\u30B7\u30E7\u30F3"],[13128,1,"\u30DF\u30AF\u30ED\u30F3"],[13129,1,"\u30DF\u30EA"],[13130,1,"\u30DF\u30EA\u30D0\u30FC\u30EB"],[13131,1,"\u30E1\u30AC"],[13132,1,"\u30E1\u30AC\u30C8\u30F3"],[13133,1,"\u30E1\u30FC\u30C8\u30EB"],[13134,1,"\u30E4\u30FC\u30C9"],[13135,1,"\u30E4\u30FC\u30EB"],[13136,1,"\u30E6\u30A2\u30F3"],[13137,1,"\u30EA\u30C3\u30C8\u30EB"],[13138,1,"\u30EA\u30E9"],[13139,1,"\u30EB\u30D4\u30FC"],[13140,1,"\u30EB\u30FC\u30D6\u30EB"],[13141,1,"\u30EC\u30E0"],[13142,1,"\u30EC\u30F3\u30C8\u30B2\u30F3"],[13143,1,"\u30EF\u30C3\u30C8"],[13144,1,"0\u70B9"],[13145,1,"1\u70B9"],[13146,1,"2\u70B9"],[13147,1,"3\u70B9"],[13148,1,"4\u70B9"],[13149,1,"5\u70B9"],[13150,1,"6\u70B9"],[13151,1,"7\u70B9"],[13152,1,"8\u70B9"],[13153,1,"9\u70B9"],[13154,1,"10\u70B9"],[13155,1,"11\u70B9"],[13156,1,"12\u70B9"],[13157,1,"13\u70B9"],[13158,1,"14\u70B9"],[13159,1,"15\u70B9"],[13160,1,"16\u70B9"],[13161,1,"17\u70B9"],[13162,1,"18\u70B9"],[13163,1,"19\u70B9"],[13164,1,"20\u70B9"],[13165,1,"21\u70B9"],[13166,1,"22\u70B9"],[13167,1,"23\u70B9"],[13168,1,"24\u70B9"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"\u5E73\u6210"],[13180,1,"\u662D\u548C"],[13181,1,"\u5927\u6B63"],[13182,1,"\u660E\u6CBB"],[13183,1,"\u682A\u5F0F\u4F1A\u793E"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"\u03BCa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"\u03BCf"],[13197,1,"\u03BCg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"\u03BCl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"\u03BCm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m\u2215s"],[13224,1,"m\u2215s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad\u2215s"],[13231,1,"rad\u2215s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"\u03BCs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"\u03BCv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"\u03BCw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k\u03C9"],[13249,1,"m\u03C9"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c\u2215kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v\u2215m"],[13279,1,"a\u2215m"],[13280,1,"1\u65E5"],[13281,1,"2\u65E5"],[13282,1,"3\u65E5"],[13283,1,"4\u65E5"],[13284,1,"5\u65E5"],[13285,1,"6\u65E5"],[13286,1,"7\u65E5"],[13287,1,"8\u65E5"],[13288,1,"9\u65E5"],[13289,1,"10\u65E5"],[13290,1,"11\u65E5"],[13291,1,"12\u65E5"],[13292,1,"13\u65E5"],[13293,1,"14\u65E5"],[13294,1,"15\u65E5"],[13295,1,"16\u65E5"],[13296,1,"17\u65E5"],[13297,1,"18\u65E5"],[13298,1,"19\u65E5"],[13299,1,"20\u65E5"],[13300,1,"21\u65E5"],[13301,1,"22\u65E5"],[13302,1,"23\u65E5"],[13303,1,"24\u65E5"],[13304,1,"25\u65E5"],[13305,1,"26\u65E5"],[13306,1,"27\u65E5"],[13307,1,"28\u65E5"],[13308,1,"29\u65E5"],[13309,1,"30\u65E5"],[13310,1,"31\u65E5"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"\uA641"],[42561,2],[42562,1,"\uA643"],[42563,2],[42564,1,"\uA645"],[42565,2],[42566,1,"\uA647"],[42567,2],[42568,1,"\uA649"],[42569,2],[42570,1,"\uA64B"],[42571,2],[42572,1,"\uA64D"],[42573,2],[42574,1,"\uA64F"],[42575,2],[42576,1,"\uA651"],[42577,2],[42578,1,"\uA653"],[42579,2],[42580,1,"\uA655"],[42581,2],[42582,1,"\uA657"],[42583,2],[42584,1,"\uA659"],[42585,2],[42586,1,"\uA65B"],[42587,2],[42588,1,"\uA65D"],[42589,2],[42590,1,"\uA65F"],[42591,2],[42592,1,"\uA661"],[42593,2],[42594,1,"\uA663"],[42595,2],[42596,1,"\uA665"],[42597,2],[42598,1,"\uA667"],[42599,2],[42600,1,"\uA669"],[42601,2],[42602,1,"\uA66B"],[42603,2],[42604,1,"\uA66D"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"\uA681"],[42625,2],[42626,1,"\uA683"],[42627,2],[42628,1,"\uA685"],[42629,2],[42630,1,"\uA687"],[42631,2],[42632,1,"\uA689"],[42633,2],[42634,1,"\uA68B"],[42635,2],[42636,1,"\uA68D"],[42637,2],[42638,1,"\uA68F"],[42639,2],[42640,1,"\uA691"],[42641,2],[42642,1,"\uA693"],[42643,2],[42644,1,"\uA695"],[42645,2],[42646,1,"\uA697"],[42647,2],[42648,1,"\uA699"],[42649,2],[42650,1,"\uA69B"],[42651,2],[42652,1,"\u044A"],[42653,1,"\u044C"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"\uA723"],[42787,2],[42788,1,"\uA725"],[42789,2],[42790,1,"\uA727"],[42791,2],[42792,1,"\uA729"],[42793,2],[42794,1,"\uA72B"],[42795,2],[42796,1,"\uA72D"],[42797,2],[42798,1,"\uA72F"],[[42799,42801],2],[42802,1,"\uA733"],[42803,2],[42804,1,"\uA735"],[42805,2],[42806,1,"\uA737"],[42807,2],[42808,1,"\uA739"],[42809,2],[42810,1,"\uA73B"],[42811,2],[42812,1,"\uA73D"],[42813,2],[42814,1,"\uA73F"],[42815,2],[42816,1,"\uA741"],[42817,2],[42818,1,"\uA743"],[42819,2],[42820,1,"\uA745"],[42821,2],[42822,1,"\uA747"],[42823,2],[42824,1,"\uA749"],[42825,2],[42826,1,"\uA74B"],[42827,2],[42828,1,"\uA74D"],[42829,2],[42830,1,"\uA74F"],[42831,2],[42832,1,"\uA751"],[42833,2],[42834,1,"\uA753"],[42835,2],[42836,1,"\uA755"],[42837,2],[42838,1,"\uA757"],[42839,2],[42840,1,"\uA759"],[42841,2],[42842,1,"\uA75B"],[42843,2],[42844,1,"\uA75D"],[42845,2],[42846,1,"\uA75F"],[42847,2],[42848,1,"\uA761"],[42849,2],[42850,1,"\uA763"],[42851,2],[42852,1,"\uA765"],[42853,2],[42854,1,"\uA767"],[42855,2],[42856,1,"\uA769"],[42857,2],[42858,1,"\uA76B"],[42859,2],[42860,1,"\uA76D"],[42861,2],[42862,1,"\uA76F"],[42863,2],[42864,1,"\uA76F"],[[42865,42872],2],[42873,1,"\uA77A"],[42874,2],[42875,1,"\uA77C"],[42876,2],[42877,1,"\u1D79"],[42878,1,"\uA77F"],[42879,2],[42880,1,"\uA781"],[42881,2],[42882,1,"\uA783"],[42883,2],[42884,1,"\uA785"],[42885,2],[42886,1,"\uA787"],[[42887,42888],2],[[42889,42890],2],[42891,1,"\uA78C"],[42892,2],[42893,1,"\u0265"],[42894,2],[42895,2],[42896,1,"\uA791"],[42897,2],[42898,1,"\uA793"],[42899,2],[[42900,42901],2],[42902,1,"\uA797"],[42903,2],[42904,1,"\uA799"],[42905,2],[42906,1,"\uA79B"],[42907,2],[42908,1,"\uA79D"],[42909,2],[42910,1,"\uA79F"],[42911,2],[42912,1,"\uA7A1"],[42913,2],[42914,1,"\uA7A3"],[42915,2],[42916,1,"\uA7A5"],[42917,2],[42918,1,"\uA7A7"],[42919,2],[42920,1,"\uA7A9"],[42921,2],[42922,1,"\u0266"],[42923,1,"\u025C"],[42924,1,"\u0261"],[42925,1,"\u026C"],[42926,1,"\u026A"],[42927,2],[42928,1,"\u029E"],[42929,1,"\u0287"],[42930,1,"\u029D"],[42931,1,"\uAB53"],[42932,1,"\uA7B5"],[42933,2],[42934,1,"\uA7B7"],[42935,2],[42936,1,"\uA7B9"],[42937,2],[42938,1,"\uA7BB"],[42939,2],[42940,1,"\uA7BD"],[42941,2],[42942,1,"\uA7BF"],[42943,2],[42944,1,"\uA7C1"],[42945,2],[42946,1,"\uA7C3"],[42947,2],[42948,1,"\uA794"],[42949,1,"\u0282"],[42950,1,"\u1D8E"],[42951,1,"\uA7C8"],[42952,2],[42953,1,"\uA7CA"],[42954,2],[42955,1,"\u0264"],[42956,1,"\uA7CD"],[42957,2],[[42958,42959],3],[42960,1,"\uA7D1"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"\uA7D7"],[42967,2],[42968,1,"\uA7D9"],[42969,2],[42970,1,"\uA7DB"],[42971,2],[42972,1,"\u019B"],[[42973,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"\uA7F6"],[42998,2],[42999,2],[43e3,1,"\u0127"],[43001,1,"\u0153"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"\uA727"],[43869,1,"\uAB37"],[43870,1,"\u026B"],[43871,1,"\uAB52"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"\u028D"],[[43882,43883],2],[[43884,43887],3],[43888,1,"\u13A0"],[43889,1,"\u13A1"],[43890,1,"\u13A2"],[43891,1,"\u13A3"],[43892,1,"\u13A4"],[43893,1,"\u13A5"],[43894,1,"\u13A6"],[43895,1,"\u13A7"],[43896,1,"\u13A8"],[43897,1,"\u13A9"],[43898,1,"\u13AA"],[43899,1,"\u13AB"],[43900,1,"\u13AC"],[43901,1,"\u13AD"],[43902,1,"\u13AE"],[43903,1,"\u13AF"],[43904,1,"\u13B0"],[43905,1,"\u13B1"],[43906,1,"\u13B2"],[43907,1,"\u13B3"],[43908,1,"\u13B4"],[43909,1,"\u13B5"],[43910,1,"\u13B6"],[43911,1,"\u13B7"],[43912,1,"\u13B8"],[43913,1,"\u13B9"],[43914,1,"\u13BA"],[43915,1,"\u13BB"],[43916,1,"\u13BC"],[43917,1,"\u13BD"],[43918,1,"\u13BE"],[43919,1,"\u13BF"],[43920,1,"\u13C0"],[43921,1,"\u13C1"],[43922,1,"\u13C2"],[43923,1,"\u13C3"],[43924,1,"\u13C4"],[43925,1,"\u13C5"],[43926,1,"\u13C6"],[43927,1,"\u13C7"],[43928,1,"\u13C8"],[43929,1,"\u13C9"],[43930,1,"\u13CA"],[43931,1,"\u13CB"],[43932,1,"\u13CC"],[43933,1,"\u13CD"],[43934,1,"\u13CE"],[43935,1,"\u13CF"],[43936,1,"\u13D0"],[43937,1,"\u13D1"],[43938,1,"\u13D2"],[43939,1,"\u13D3"],[43940,1,"\u13D4"],[43941,1,"\u13D5"],[43942,1,"\u13D6"],[43943,1,"\u13D7"],[43944,1,"\u13D8"],[43945,1,"\u13D9"],[43946,1,"\u13DA"],[43947,1,"\u13DB"],[43948,1,"\u13DC"],[43949,1,"\u13DD"],[43950,1,"\u13DE"],[43951,1,"\u13DF"],[43952,1,"\u13E0"],[43953,1,"\u13E1"],[43954,1,"\u13E2"],[43955,1,"\u13E3"],[43956,1,"\u13E4"],[43957,1,"\u13E5"],[43958,1,"\u13E6"],[43959,1,"\u13E7"],[43960,1,"\u13E8"],[43961,1,"\u13E9"],[43962,1,"\u13EA"],[43963,1,"\u13EB"],[43964,1,"\u13EC"],[43965,1,"\u13ED"],[43966,1,"\u13EE"],[43967,1,"\u13EF"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"\u8C48"],[63745,1,"\u66F4"],[63746,1,"\u8ECA"],[63747,1,"\u8CC8"],[63748,1,"\u6ED1"],[63749,1,"\u4E32"],[63750,1,"\u53E5"],[[63751,63752],1,"\u9F9C"],[63753,1,"\u5951"],[63754,1,"\u91D1"],[63755,1,"\u5587"],[63756,1,"\u5948"],[63757,1,"\u61F6"],[63758,1,"\u7669"],[63759,1,"\u7F85"],[63760,1,"\u863F"],[63761,1,"\u87BA"],[63762,1,"\u88F8"],[63763,1,"\u908F"],[63764,1,"\u6A02"],[63765,1,"\u6D1B"],[63766,1,"\u70D9"],[63767,1,"\u73DE"],[63768,1,"\u843D"],[63769,1,"\u916A"],[63770,1,"\u99F1"],[63771,1,"\u4E82"],[63772,1,"\u5375"],[63773,1,"\u6B04"],[63774,1,"\u721B"],[63775,1,"\u862D"],[63776,1,"\u9E1E"],[63777,1,"\u5D50"],[63778,1,"\u6FEB"],[63779,1,"\u85CD"],[63780,1,"\u8964"],[63781,1,"\u62C9"],[63782,1,"\u81D8"],[63783,1,"\u881F"],[63784,1,"\u5ECA"],[63785,1,"\u6717"],[63786,1,"\u6D6A"],[63787,1,"\u72FC"],[63788,1,"\u90CE"],[63789,1,"\u4F86"],[63790,1,"\u51B7"],[63791,1,"\u52DE"],[63792,1,"\u64C4"],[63793,1,"\u6AD3"],[63794,1,"\u7210"],[63795,1,"\u76E7"],[63796,1,"\u8001"],[63797,1,"\u8606"],[63798,1,"\u865C"],[63799,1,"\u8DEF"],[63800,1,"\u9732"],[63801,1,"\u9B6F"],[63802,1,"\u9DFA"],[63803,1,"\u788C"],[63804,1,"\u797F"],[63805,1,"\u7DA0"],[63806,1,"\u83C9"],[63807,1,"\u9304"],[63808,1,"\u9E7F"],[63809,1,"\u8AD6"],[63810,1,"\u58DF"],[63811,1,"\u5F04"],[63812,1,"\u7C60"],[63813,1,"\u807E"],[63814,1,"\u7262"],[63815,1,"\u78CA"],[63816,1,"\u8CC2"],[63817,1,"\u96F7"],[63818,1,"\u58D8"],[63819,1,"\u5C62"],[63820,1,"\u6A13"],[63821,1,"\u6DDA"],[63822,1,"\u6F0F"],[63823,1,"\u7D2F"],[63824,1,"\u7E37"],[63825,1,"\u964B"],[63826,1,"\u52D2"],[63827,1,"\u808B"],[63828,1,"\u51DC"],[63829,1,"\u51CC"],[63830,1,"\u7A1C"],[63831,1,"\u7DBE"],[63832,1,"\u83F1"],[63833,1,"\u9675"],[63834,1,"\u8B80"],[63835,1,"\u62CF"],[63836,1,"\u6A02"],[63837,1,"\u8AFE"],[63838,1,"\u4E39"],[63839,1,"\u5BE7"],[63840,1,"\u6012"],[63841,1,"\u7387"],[63842,1,"\u7570"],[63843,1,"\u5317"],[63844,1,"\u78FB"],[63845,1,"\u4FBF"],[63846,1,"\u5FA9"],[63847,1,"\u4E0D"],[63848,1,"\u6CCC"],[63849,1,"\u6578"],[63850,1,"\u7D22"],[63851,1,"\u53C3"],[63852,1,"\u585E"],[63853,1,"\u7701"],[63854,1,"\u8449"],[63855,1,"\u8AAA"],[63856,1,"\u6BBA"],[63857,1,"\u8FB0"],[63858,1,"\u6C88"],[63859,1,"\u62FE"],[63860,1,"\u82E5"],[63861,1,"\u63A0"],[63862,1,"\u7565"],[63863,1,"\u4EAE"],[63864,1,"\u5169"],[63865,1,"\u51C9"],[63866,1,"\u6881"],[63867,1,"\u7CE7"],[63868,1,"\u826F"],[63869,1,"\u8AD2"],[63870,1,"\u91CF"],[63871,1,"\u52F5"],[63872,1,"\u5442"],[63873,1,"\u5973"],[63874,1,"\u5EEC"],[63875,1,"\u65C5"],[63876,1,"\u6FFE"],[63877,1,"\u792A"],[63878,1,"\u95AD"],[63879,1,"\u9A6A"],[63880,1,"\u9E97"],[63881,1,"\u9ECE"],[63882,1,"\u529B"],[63883,1,"\u66C6"],[63884,1,"\u6B77"],[63885,1,"\u8F62"],[63886,1,"\u5E74"],[63887,1,"\u6190"],[63888,1,"\u6200"],[63889,1,"\u649A"],[63890,1,"\u6F23"],[63891,1,"\u7149"],[63892,1,"\u7489"],[63893,1,"\u79CA"],[63894,1,"\u7DF4"],[63895,1,"\u806F"],[63896,1,"\u8F26"],[63897,1,"\u84EE"],[63898,1,"\u9023"],[63899,1,"\u934A"],[63900,1,"\u5217"],[63901,1,"\u52A3"],[63902,1,"\u54BD"],[63903,1,"\u70C8"],[63904,1,"\u88C2"],[63905,1,"\u8AAA"],[63906,1,"\u5EC9"],[63907,1,"\u5FF5"],[63908,1,"\u637B"],[63909,1,"\u6BAE"],[63910,1,"\u7C3E"],[63911,1,"\u7375"],[63912,1,"\u4EE4"],[63913,1,"\u56F9"],[63914,1,"\u5BE7"],[63915,1,"\u5DBA"],[63916,1,"\u601C"],[63917,1,"\u73B2"],[63918,1,"\u7469"],[63919,1,"\u7F9A"],[63920,1,"\u8046"],[63921,1,"\u9234"],[63922,1,"\u96F6"],[63923,1,"\u9748"],[63924,1,"\u9818"],[63925,1,"\u4F8B"],[63926,1,"\u79AE"],[63927,1,"\u91B4"],[63928,1,"\u96B8"],[63929,1,"\u60E1"],[63930,1,"\u4E86"],[63931,1,"\u50DA"],[63932,1,"\u5BEE"],[63933,1,"\u5C3F"],[63934,1,"\u6599"],[63935,1,"\u6A02"],[63936,1,"\u71CE"],[63937,1,"\u7642"],[63938,1,"\u84FC"],[63939,1,"\u907C"],[63940,1,"\u9F8D"],[63941,1,"\u6688"],[63942,1,"\u962E"],[63943,1,"\u5289"],[63944,1,"\u677B"],[63945,1,"\u67F3"],[63946,1,"\u6D41"],[63947,1,"\u6E9C"],[63948,1,"\u7409"],[63949,1,"\u7559"],[63950,1,"\u786B"],[63951,1,"\u7D10"],[63952,1,"\u985E"],[63953,1,"\u516D"],[63954,1,"\u622E"],[63955,1,"\u9678"],[63956,1,"\u502B"],[63957,1,"\u5D19"],[63958,1,"\u6DEA"],[63959,1,"\u8F2A"],[63960,1,"\u5F8B"],[63961,1,"\u6144"],[63962,1,"\u6817"],[63963,1,"\u7387"],[63964,1,"\u9686"],[63965,1,"\u5229"],[63966,1,"\u540F"],[63967,1,"\u5C65"],[63968,1,"\u6613"],[63969,1,"\u674E"],[63970,1,"\u68A8"],[63971,1,"\u6CE5"],[63972,1,"\u7406"],[63973,1,"\u75E2"],[63974,1,"\u7F79"],[63975,1,"\u88CF"],[63976,1,"\u88E1"],[63977,1,"\u91CC"],[63978,1,"\u96E2"],[63979,1,"\u533F"],[63980,1,"\u6EBA"],[63981,1,"\u541D"],[63982,1,"\u71D0"],[63983,1,"\u7498"],[63984,1,"\u85FA"],[63985,1,"\u96A3"],[63986,1,"\u9C57"],[63987,1,"\u9E9F"],[63988,1,"\u6797"],[63989,1,"\u6DCB"],[63990,1,"\u81E8"],[63991,1,"\u7ACB"],[63992,1,"\u7B20"],[63993,1,"\u7C92"],[63994,1,"\u72C0"],[63995,1,"\u7099"],[63996,1,"\u8B58"],[63997,1,"\u4EC0"],[63998,1,"\u8336"],[63999,1,"\u523A"],[64e3,1,"\u5207"],[64001,1,"\u5EA6"],[64002,1,"\u62D3"],[64003,1,"\u7CD6"],[64004,1,"\u5B85"],[64005,1,"\u6D1E"],[64006,1,"\u66B4"],[64007,1,"\u8F3B"],[64008,1,"\u884C"],[64009,1,"\u964D"],[64010,1,"\u898B"],[64011,1,"\u5ED3"],[64012,1,"\u5140"],[64013,1,"\u55C0"],[[64014,64015],2],[64016,1,"\u585A"],[64017,2],[64018,1,"\u6674"],[[64019,64020],2],[64021,1,"\u51DE"],[64022,1,"\u732A"],[64023,1,"\u76CA"],[64024,1,"\u793C"],[64025,1,"\u795E"],[64026,1,"\u7965"],[64027,1,"\u798F"],[64028,1,"\u9756"],[64029,1,"\u7CBE"],[64030,1,"\u7FBD"],[64031,2],[64032,1,"\u8612"],[64033,2],[64034,1,"\u8AF8"],[[64035,64036],2],[64037,1,"\u9038"],[64038,1,"\u90FD"],[[64039,64041],2],[64042,1,"\u98EF"],[64043,1,"\u98FC"],[64044,1,"\u9928"],[64045,1,"\u9DB4"],[64046,1,"\u90DE"],[64047,1,"\u96B7"],[64048,1,"\u4FAE"],[64049,1,"\u50E7"],[64050,1,"\u514D"],[64051,1,"\u52C9"],[64052,1,"\u52E4"],[64053,1,"\u5351"],[64054,1,"\u559D"],[64055,1,"\u5606"],[64056,1,"\u5668"],[64057,1,"\u5840"],[64058,1,"\u58A8"],[64059,1,"\u5C64"],[64060,1,"\u5C6E"],[64061,1,"\u6094"],[64062,1,"\u6168"],[64063,1,"\u618E"],[64064,1,"\u61F2"],[64065,1,"\u654F"],[64066,1,"\u65E2"],[64067,1,"\u6691"],[64068,1,"\u6885"],[64069,1,"\u6D77"],[64070,1,"\u6E1A"],[64071,1,"\u6F22"],[64072,1,"\u716E"],[64073,1,"\u722B"],[64074,1,"\u7422"],[64075,1,"\u7891"],[64076,1,"\u793E"],[64077,1,"\u7949"],[64078,1,"\u7948"],[64079,1,"\u7950"],[64080,1,"\u7956"],[64081,1,"\u795D"],[64082,1,"\u798D"],[64083,1,"\u798E"],[64084,1,"\u7A40"],[64085,1,"\u7A81"],[64086,1,"\u7BC0"],[64087,1,"\u7DF4"],[64088,1,"\u7E09"],[64089,1,"\u7E41"],[64090,1,"\u7F72"],[64091,1,"\u8005"],[64092,1,"\u81ED"],[[64093,64094],1,"\u8279"],[64095,1,"\u8457"],[64096,1,"\u8910"],[64097,1,"\u8996"],[64098,1,"\u8B01"],[64099,1,"\u8B39"],[64100,1,"\u8CD3"],[64101,1,"\u8D08"],[64102,1,"\u8FB6"],[64103,1,"\u9038"],[64104,1,"\u96E3"],[64105,1,"\u97FF"],[64106,1,"\u983B"],[64107,1,"\u6075"],[64108,1,"\u{242EE}"],[64109,1,"\u8218"],[[64110,64111],3],[64112,1,"\u4E26"],[64113,1,"\u51B5"],[64114,1,"\u5168"],[64115,1,"\u4F80"],[64116,1,"\u5145"],[64117,1,"\u5180"],[64118,1,"\u52C7"],[64119,1,"\u52FA"],[64120,1,"\u559D"],[64121,1,"\u5555"],[64122,1,"\u5599"],[64123,1,"\u55E2"],[64124,1,"\u585A"],[64125,1,"\u58B3"],[64126,1,"\u5944"],[64127,1,"\u5954"],[64128,1,"\u5A62"],[64129,1,"\u5B28"],[64130,1,"\u5ED2"],[64131,1,"\u5ED9"],[64132,1,"\u5F69"],[64133,1,"\u5FAD"],[64134,1,"\u60D8"],[64135,1,"\u614E"],[64136,1,"\u6108"],[64137,1,"\u618E"],[64138,1,"\u6160"],[64139,1,"\u61F2"],[64140,1,"\u6234"],[64141,1,"\u63C4"],[64142,1,"\u641C"],[64143,1,"\u6452"],[64144,1,"\u6556"],[64145,1,"\u6674"],[64146,1,"\u6717"],[64147,1,"\u671B"],[64148,1,"\u6756"],[64149,1,"\u6B79"],[64150,1,"\u6BBA"],[64151,1,"\u6D41"],[64152,1,"\u6EDB"],[64153,1,"\u6ECB"],[64154,1,"\u6F22"],[64155,1,"\u701E"],[64156,1,"\u716E"],[64157,1,"\u77A7"],[64158,1,"\u7235"],[64159,1,"\u72AF"],[64160,1,"\u732A"],[64161,1,"\u7471"],[64162,1,"\u7506"],[64163,1,"\u753B"],[64164,1,"\u761D"],[64165,1,"\u761F"],[64166,1,"\u76CA"],[64167,1,"\u76DB"],[64168,1,"\u76F4"],[64169,1,"\u774A"],[64170,1,"\u7740"],[64171,1,"\u78CC"],[64172,1,"\u7AB1"],[64173,1,"\u7BC0"],[64174,1,"\u7C7B"],[64175,1,"\u7D5B"],[64176,1,"\u7DF4"],[64177,1,"\u7F3E"],[64178,1,"\u8005"],[64179,1,"\u8352"],[64180,1,"\u83EF"],[64181,1,"\u8779"],[64182,1,"\u8941"],[64183,1,"\u8986"],[64184,1,"\u8996"],[64185,1,"\u8ABF"],[64186,1,"\u8AF8"],[64187,1,"\u8ACB"],[64188,1,"\u8B01"],[64189,1,"\u8AFE"],[64190,1,"\u8AED"],[64191,1,"\u8B39"],[64192,1,"\u8B8A"],[64193,1,"\u8D08"],[64194,1,"\u8F38"],[64195,1,"\u9072"],[64196,1,"\u9199"],[64197,1,"\u9276"],[64198,1,"\u967C"],[64199,1,"\u96E3"],[64200,1,"\u9756"],[64201,1,"\u97DB"],[64202,1,"\u97FF"],[64203,1,"\u980B"],[64204,1,"\u983B"],[64205,1,"\u9B12"],[64206,1,"\u9F9C"],[64207,1,"\u{2284A}"],[64208,1,"\u{22844}"],[64209,1,"\u{233D5}"],[64210,1,"\u3B9D"],[64211,1,"\u4018"],[64212,1,"\u4039"],[64213,1,"\u{25249}"],[64214,1,"\u{25CD0}"],[64215,1,"\u{27ED3}"],[64216,1,"\u9F43"],[64217,1,"\u9F8E"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"\u0574\u0576"],[64276,1,"\u0574\u0565"],[64277,1,"\u0574\u056B"],[64278,1,"\u057E\u0576"],[64279,1,"\u0574\u056D"],[[64280,64284],3],[64285,1,"\u05D9\u05B4"],[64286,2],[64287,1,"\u05F2\u05B7"],[64288,1,"\u05E2"],[64289,1,"\u05D0"],[64290,1,"\u05D3"],[64291,1,"\u05D4"],[64292,1,"\u05DB"],[64293,1,"\u05DC"],[64294,1,"\u05DD"],[64295,1,"\u05E8"],[64296,1,"\u05EA"],[64297,1,"+"],[64298,1,"\u05E9\u05C1"],[64299,1,"\u05E9\u05C2"],[64300,1,"\u05E9\u05BC\u05C1"],[64301,1,"\u05E9\u05BC\u05C2"],[64302,1,"\u05D0\u05B7"],[64303,1,"\u05D0\u05B8"],[64304,1,"\u05D0\u05BC"],[64305,1,"\u05D1\u05BC"],[64306,1,"\u05D2\u05BC"],[64307,1,"\u05D3\u05BC"],[64308,1,"\u05D4\u05BC"],[64309,1,"\u05D5\u05BC"],[64310,1,"\u05D6\u05BC"],[64311,3],[64312,1,"\u05D8\u05BC"],[64313,1,"\u05D9\u05BC"],[64314,1,"\u05DA\u05BC"],[64315,1,"\u05DB\u05BC"],[64316,1,"\u05DC\u05BC"],[64317,3],[64318,1,"\u05DE\u05BC"],[64319,3],[64320,1,"\u05E0\u05BC"],[64321,1,"\u05E1\u05BC"],[64322,3],[64323,1,"\u05E3\u05BC"],[64324,1,"\u05E4\u05BC"],[64325,3],[64326,1,"\u05E6\u05BC"],[64327,1,"\u05E7\u05BC"],[64328,1,"\u05E8\u05BC"],[64329,1,"\u05E9\u05BC"],[64330,1,"\u05EA\u05BC"],[64331,1,"\u05D5\u05B9"],[64332,1,"\u05D1\u05BF"],[64333,1,"\u05DB\u05BF"],[64334,1,"\u05E4\u05BF"],[64335,1,"\u05D0\u05DC"],[[64336,64337],1,"\u0671"],[[64338,64341],1,"\u067B"],[[64342,64345],1,"\u067E"],[[64346,64349],1,"\u0680"],[[64350,64353],1,"\u067A"],[[64354,64357],1,"\u067F"],[[64358,64361],1,"\u0679"],[[64362,64365],1,"\u06A4"],[[64366,64369],1,"\u06A6"],[[64370,64373],1,"\u0684"],[[64374,64377],1,"\u0683"],[[64378,64381],1,"\u0686"],[[64382,64385],1,"\u0687"],[[64386,64387],1,"\u068D"],[[64388,64389],1,"\u068C"],[[64390,64391],1,"\u068E"],[[64392,64393],1,"\u0688"],[[64394,64395],1,"\u0698"],[[64396,64397],1,"\u0691"],[[64398,64401],1,"\u06A9"],[[64402,64405],1,"\u06AF"],[[64406,64409],1,"\u06B3"],[[64410,64413],1,"\u06B1"],[[64414,64415],1,"\u06BA"],[[64416,64419],1,"\u06BB"],[[64420,64421],1,"\u06C0"],[[64422,64425],1,"\u06C1"],[[64426,64429],1,"\u06BE"],[[64430,64431],1,"\u06D2"],[[64432,64433],1,"\u06D3"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"\u06AD"],[[64471,64472],1,"\u06C7"],[[64473,64474],1,"\u06C6"],[[64475,64476],1,"\u06C8"],[64477,1,"\u06C7\u0674"],[[64478,64479],1,"\u06CB"],[[64480,64481],1,"\u06C5"],[[64482,64483],1,"\u06C9"],[[64484,64487],1,"\u06D0"],[[64488,64489],1,"\u0649"],[[64490,64491],1,"\u0626\u0627"],[[64492,64493],1,"\u0626\u06D5"],[[64494,64495],1,"\u0626\u0648"],[[64496,64497],1,"\u0626\u06C7"],[[64498,64499],1,"\u0626\u06C6"],[[64500,64501],1,"\u0626\u06C8"],[[64502,64504],1,"\u0626\u06D0"],[[64505,64507],1,"\u0626\u0649"],[[64508,64511],1,"\u06CC"],[64512,1,"\u0626\u062C"],[64513,1,"\u0626\u062D"],[64514,1,"\u0626\u0645"],[64515,1,"\u0626\u0649"],[64516,1,"\u0626\u064A"],[64517,1,"\u0628\u062C"],[64518,1,"\u0628\u062D"],[64519,1,"\u0628\u062E"],[64520,1,"\u0628\u0645"],[64521,1,"\u0628\u0649"],[64522,1,"\u0628\u064A"],[64523,1,"\u062A\u062C"],[64524,1,"\u062A\u062D"],[64525,1,"\u062A\u062E"],[64526,1,"\u062A\u0645"],[64527,1,"\u062A\u0649"],[64528,1,"\u062A\u064A"],[64529,1,"\u062B\u062C"],[64530,1,"\u062B\u0645"],[64531,1,"\u062B\u0649"],[64532,1,"\u062B\u064A"],[64533,1,"\u062C\u062D"],[64534,1,"\u062C\u0645"],[64535,1,"\u062D\u062C"],[64536,1,"\u062D\u0645"],[64537,1,"\u062E\u062C"],[64538,1,"\u062E\u062D"],[64539,1,"\u062E\u0645"],[64540,1,"\u0633\u062C"],[64541,1,"\u0633\u062D"],[64542,1,"\u0633\u062E"],[64543,1,"\u0633\u0645"],[64544,1,"\u0635\u062D"],[64545,1,"\u0635\u0645"],[64546,1,"\u0636\u062C"],[64547,1,"\u0636\u062D"],[64548,1,"\u0636\u062E"],[64549,1,"\u0636\u0645"],[64550,1,"\u0637\u062D"],[64551,1,"\u0637\u0645"],[64552,1,"\u0638\u0645"],[64553,1,"\u0639\u062C"],[64554,1,"\u0639\u0645"],[64555,1,"\u063A\u062C"],[64556,1,"\u063A\u0645"],[64557,1,"\u0641\u062C"],[64558,1,"\u0641\u062D"],[64559,1,"\u0641\u062E"],[64560,1,"\u0641\u0645"],[64561,1,"\u0641\u0649"],[64562,1,"\u0641\u064A"],[64563,1,"\u0642\u062D"],[64564,1,"\u0642\u0645"],[64565,1,"\u0642\u0649"],[64566,1,"\u0642\u064A"],[64567,1,"\u0643\u0627"],[64568,1,"\u0643\u062C"],[64569,1,"\u0643\u062D"],[64570,1,"\u0643\u062E"],[64571,1,"\u0643\u0644"],[64572,1,"\u0643\u0645"],[64573,1,"\u0643\u0649"],[64574,1,"\u0643\u064A"],[64575,1,"\u0644\u062C"],[64576,1,"\u0644\u062D"],[64577,1,"\u0644\u062E"],[64578,1,"\u0644\u0645"],[64579,1,"\u0644\u0649"],[64580,1,"\u0644\u064A"],[64581,1,"\u0645\u062C"],[64582,1,"\u0645\u062D"],[64583,1,"\u0645\u062E"],[64584,1,"\u0645\u0645"],[64585,1,"\u0645\u0649"],[64586,1,"\u0645\u064A"],[64587,1,"\u0646\u062C"],[64588,1,"\u0646\u062D"],[64589,1,"\u0646\u062E"],[64590,1,"\u0646\u0645"],[64591,1,"\u0646\u0649"],[64592,1,"\u0646\u064A"],[64593,1,"\u0647\u062C"],[64594,1,"\u0647\u0645"],[64595,1,"\u0647\u0649"],[64596,1,"\u0647\u064A"],[64597,1,"\u064A\u062C"],[64598,1,"\u064A\u062D"],[64599,1,"\u064A\u062E"],[64600,1,"\u064A\u0645"],[64601,1,"\u064A\u0649"],[64602,1,"\u064A\u064A"],[64603,1,"\u0630\u0670"],[64604,1,"\u0631\u0670"],[64605,1,"\u0649\u0670"],[64606,1," \u064C\u0651"],[64607,1," \u064D\u0651"],[64608,1," \u064E\u0651"],[64609,1," \u064F\u0651"],[64610,1," \u0650\u0651"],[64611,1," \u0651\u0670"],[64612,1,"\u0626\u0631"],[64613,1,"\u0626\u0632"],[64614,1,"\u0626\u0645"],[64615,1,"\u0626\u0646"],[64616,1,"\u0626\u0649"],[64617,1,"\u0626\u064A"],[64618,1,"\u0628\u0631"],[64619,1,"\u0628\u0632"],[64620,1,"\u0628\u0645"],[64621,1,"\u0628\u0646"],[64622,1,"\u0628\u0649"],[64623,1,"\u0628\u064A"],[64624,1,"\u062A\u0631"],[64625,1,"\u062A\u0632"],[64626,1,"\u062A\u0645"],[64627,1,"\u062A\u0646"],[64628,1,"\u062A\u0649"],[64629,1,"\u062A\u064A"],[64630,1,"\u062B\u0631"],[64631,1,"\u062B\u0632"],[64632,1,"\u062B\u0645"],[64633,1,"\u062B\u0646"],[64634,1,"\u062B\u0649"],[64635,1,"\u062B\u064A"],[64636,1,"\u0641\u0649"],[64637,1,"\u0641\u064A"],[64638,1,"\u0642\u0649"],[64639,1,"\u0642\u064A"],[64640,1,"\u0643\u0627"],[64641,1,"\u0643\u0644"],[64642,1,"\u0643\u0645"],[64643,1,"\u0643\u0649"],[64644,1,"\u0643\u064A"],[64645,1,"\u0644\u0645"],[64646,1,"\u0644\u0649"],[64647,1,"\u0644\u064A"],[64648,1,"\u0645\u0627"],[64649,1,"\u0645\u0645"],[64650,1,"\u0646\u0631"],[64651,1,"\u0646\u0632"],[64652,1,"\u0646\u0645"],[64653,1,"\u0646\u0646"],[64654,1,"\u0646\u0649"],[64655,1,"\u0646\u064A"],[64656,1,"\u0649\u0670"],[64657,1,"\u064A\u0631"],[64658,1,"\u064A\u0632"],[64659,1,"\u064A\u0645"],[64660,1,"\u064A\u0646"],[64661,1,"\u064A\u0649"],[64662,1,"\u064A\u064A"],[64663,1,"\u0626\u062C"],[64664,1,"\u0626\u062D"],[64665,1,"\u0626\u062E"],[64666,1,"\u0626\u0645"],[64667,1,"\u0626\u0647"],[64668,1,"\u0628\u062C"],[64669,1,"\u0628\u062D"],[64670,1,"\u0628\u062E"],[64671,1,"\u0628\u0645"],[64672,1,"\u0628\u0647"],[64673,1,"\u062A\u062C"],[64674,1,"\u062A\u062D"],[64675,1,"\u062A\u062E"],[64676,1,"\u062A\u0645"],[64677,1,"\u062A\u0647"],[64678,1,"\u062B\u0645"],[64679,1,"\u062C\u062D"],[64680,1,"\u062C\u0645"],[64681,1,"\u062D\u062C"],[64682,1,"\u062D\u0645"],[64683,1,"\u062E\u062C"],[64684,1,"\u062E\u0645"],[64685,1,"\u0633\u062C"],[64686,1,"\u0633\u062D"],[64687,1,"\u0633\u062E"],[64688,1,"\u0633\u0645"],[64689,1,"\u0635\u062D"],[64690,1,"\u0635\u062E"],[64691,1,"\u0635\u0645"],[64692,1,"\u0636\u062C"],[64693,1,"\u0636\u062D"],[64694,1,"\u0636\u062E"],[64695,1,"\u0636\u0645"],[64696,1,"\u0637\u062D"],[64697,1,"\u0638\u0645"],[64698,1,"\u0639\u062C"],[64699,1,"\u0639\u0645"],[64700,1,"\u063A\u062C"],[64701,1,"\u063A\u0645"],[64702,1,"\u0641\u062C"],[64703,1,"\u0641\u062D"],[64704,1,"\u0641\u062E"],[64705,1,"\u0641\u0645"],[64706,1,"\u0642\u062D"],[64707,1,"\u0642\u0645"],[64708,1,"\u0643\u062C"],[64709,1,"\u0643\u062D"],[64710,1,"\u0643\u062E"],[64711,1,"\u0643\u0644"],[64712,1,"\u0643\u0645"],[64713,1,"\u0644\u062C"],[64714,1,"\u0644\u062D"],[64715,1,"\u0644\u062E"],[64716,1,"\u0644\u0645"],[64717,1,"\u0644\u0647"],[64718,1,"\u0645\u062C"],[64719,1,"\u0645\u062D"],[64720,1,"\u0645\u062E"],[64721,1,"\u0645\u0645"],[64722,1,"\u0646\u062C"],[64723,1,"\u0646\u062D"],[64724,1,"\u0646\u062E"],[64725,1,"\u0646\u0645"],[64726,1,"\u0646\u0647"],[64727,1,"\u0647\u062C"],[64728,1,"\u0647\u0645"],[64729,1,"\u0647\u0670"],[64730,1,"\u064A\u062C"],[64731,1,"\u064A\u062D"],[64732,1,"\u064A\u062E"],[64733,1,"\u064A\u0645"],[64734,1,"\u064A\u0647"],[64735,1,"\u0626\u0645"],[64736,1,"\u0626\u0647"],[64737,1,"\u0628\u0645"],[64738,1,"\u0628\u0647"],[64739,1,"\u062A\u0645"],[64740,1,"\u062A\u0647"],[64741,1,"\u062B\u0645"],[64742,1,"\u062B\u0647"],[64743,1,"\u0633\u0645"],[64744,1,"\u0633\u0647"],[64745,1,"\u0634\u0645"],[64746,1,"\u0634\u0647"],[64747,1,"\u0643\u0644"],[64748,1,"\u0643\u0645"],[64749,1,"\u0644\u0645"],[64750,1,"\u0646\u0645"],[64751,1,"\u0646\u0647"],[64752,1,"\u064A\u0645"],[64753,1,"\u064A\u0647"],[64754,1,"\u0640\u064E\u0651"],[64755,1,"\u0640\u064F\u0651"],[64756,1,"\u0640\u0650\u0651"],[64757,1,"\u0637\u0649"],[64758,1,"\u0637\u064A"],[64759,1,"\u0639\u0649"],[64760,1,"\u0639\u064A"],[64761,1,"\u063A\u0649"],[64762,1,"\u063A\u064A"],[64763,1,"\u0633\u0649"],[64764,1,"\u0633\u064A"],[64765,1,"\u0634\u0649"],[64766,1,"\u0634\u064A"],[64767,1,"\u062D\u0649"],[64768,1,"\u062D\u064A"],[64769,1,"\u062C\u0649"],[64770,1,"\u062C\u064A"],[64771,1,"\u062E\u0649"],[64772,1,"\u062E\u064A"],[64773,1,"\u0635\u0649"],[64774,1,"\u0635\u064A"],[64775,1,"\u0636\u0649"],[64776,1,"\u0636\u064A"],[64777,1,"\u0634\u062C"],[64778,1,"\u0634\u062D"],[64779,1,"\u0634\u062E"],[64780,1,"\u0634\u0645"],[64781,1,"\u0634\u0631"],[64782,1,"\u0633\u0631"],[64783,1,"\u0635\u0631"],[64784,1,"\u0636\u0631"],[64785,1,"\u0637\u0649"],[64786,1,"\u0637\u064A"],[64787,1,"\u0639\u0649"],[64788,1,"\u0639\u064A"],[64789,1,"\u063A\u0649"],[64790,1,"\u063A\u064A"],[64791,1,"\u0633\u0649"],[64792,1,"\u0633\u064A"],[64793,1,"\u0634\u0649"],[64794,1,"\u0634\u064A"],[64795,1,"\u062D\u0649"],[64796,1,"\u062D\u064A"],[64797,1,"\u062C\u0649"],[64798,1,"\u062C\u064A"],[64799,1,"\u062E\u0649"],[64800,1,"\u062E\u064A"],[64801,1,"\u0635\u0649"],[64802,1,"\u0635\u064A"],[64803,1,"\u0636\u0649"],[64804,1,"\u0636\u064A"],[64805,1,"\u0634\u062C"],[64806,1,"\u0634\u062D"],[64807,1,"\u0634\u062E"],[64808,1,"\u0634\u0645"],[64809,1,"\u0634\u0631"],[64810,1,"\u0633\u0631"],[64811,1,"\u0635\u0631"],[64812,1,"\u0636\u0631"],[64813,1,"\u0634\u062C"],[64814,1,"\u0634\u062D"],[64815,1,"\u0634\u062E"],[64816,1,"\u0634\u0645"],[64817,1,"\u0633\u0647"],[64818,1,"\u0634\u0647"],[64819,1,"\u0637\u0645"],[64820,1,"\u0633\u062C"],[64821,1,"\u0633\u062D"],[64822,1,"\u0633\u062E"],[64823,1,"\u0634\u062C"],[64824,1,"\u0634\u062D"],[64825,1,"\u0634\u062E"],[64826,1,"\u0637\u0645"],[64827,1,"\u0638\u0645"],[[64828,64829],1,"\u0627\u064B"],[[64830,64831],2],[[64832,64847],2],[64848,1,"\u062A\u062C\u0645"],[[64849,64850],1,"\u062A\u062D\u062C"],[64851,1,"\u062A\u062D\u0645"],[64852,1,"\u062A\u062E\u0645"],[64853,1,"\u062A\u0645\u062C"],[64854,1,"\u062A\u0645\u062D"],[64855,1,"\u062A\u0645\u062E"],[[64856,64857],1,"\u062C\u0645\u062D"],[64858,1,"\u062D\u0645\u064A"],[64859,1,"\u062D\u0645\u0649"],[64860,1,"\u0633\u062D\u062C"],[64861,1,"\u0633\u062C\u062D"],[64862,1,"\u0633\u062C\u0649"],[[64863,64864],1,"\u0633\u0645\u062D"],[64865,1,"\u0633\u0645\u062C"],[[64866,64867],1,"\u0633\u0645\u0645"],[[64868,64869],1,"\u0635\u062D\u062D"],[64870,1,"\u0635\u0645\u0645"],[[64871,64872],1,"\u0634\u062D\u0645"],[64873,1,"\u0634\u062C\u064A"],[[64874,64875],1,"\u0634\u0645\u062E"],[[64876,64877],1,"\u0634\u0645\u0645"],[64878,1,"\u0636\u062D\u0649"],[[64879,64880],1,"\u0636\u062E\u0645"],[[64881,64882],1,"\u0637\u0645\u062D"],[64883,1,"\u0637\u0645\u0645"],[64884,1,"\u0637\u0645\u064A"],[64885,1,"\u0639\u062C\u0645"],[[64886,64887],1,"\u0639\u0645\u0645"],[64888,1,"\u0639\u0645\u0649"],[64889,1,"\u063A\u0645\u0645"],[64890,1,"\u063A\u0645\u064A"],[64891,1,"\u063A\u0645\u0649"],[[64892,64893],1,"\u0641\u062E\u0645"],[64894,1,"\u0642\u0645\u062D"],[64895,1,"\u0642\u0645\u0645"],[64896,1,"\u0644\u062D\u0645"],[64897,1,"\u0644\u062D\u064A"],[64898,1,"\u0644\u062D\u0649"],[[64899,64900],1,"\u0644\u062C\u062C"],[[64901,64902],1,"\u0644\u062E\u0645"],[[64903,64904],1,"\u0644\u0645\u062D"],[64905,1,"\u0645\u062D\u062C"],[64906,1,"\u0645\u062D\u0645"],[64907,1,"\u0645\u062D\u064A"],[64908,1,"\u0645\u062C\u062D"],[64909,1,"\u0645\u062C\u0645"],[64910,1,"\u0645\u062E\u062C"],[64911,1,"\u0645\u062E\u0645"],[[64912,64913],3],[64914,1,"\u0645\u062C\u062E"],[64915,1,"\u0647\u0645\u062C"],[64916,1,"\u0647\u0645\u0645"],[64917,1,"\u0646\u062D\u0645"],[64918,1,"\u0646\u062D\u0649"],[[64919,64920],1,"\u0646\u062C\u0645"],[64921,1,"\u0646\u062C\u0649"],[64922,1,"\u0646\u0645\u064A"],[64923,1,"\u0646\u0645\u0649"],[[64924,64925],1,"\u064A\u0645\u0645"],[64926,1,"\u0628\u062E\u064A"],[64927,1,"\u062A\u062C\u064A"],[64928,1,"\u062A\u062C\u0649"],[64929,1,"\u062A\u062E\u064A"],[64930,1,"\u062A\u062E\u0649"],[64931,1,"\u062A\u0645\u064A"],[64932,1,"\u062A\u0645\u0649"],[64933,1,"\u062C\u0645\u064A"],[64934,1,"\u062C\u062D\u0649"],[64935,1,"\u062C\u0645\u0649"],[64936,1,"\u0633\u062E\u0649"],[64937,1,"\u0635\u062D\u064A"],[64938,1,"\u0634\u062D\u064A"],[64939,1,"\u0636\u062D\u064A"],[64940,1,"\u0644\u062C\u064A"],[64941,1,"\u0644\u0645\u064A"],[64942,1,"\u064A\u062D\u064A"],[64943,1,"\u064A\u062C\u064A"],[64944,1,"\u064A\u0645\u064A"],[64945,1,"\u0645\u0645\u064A"],[64946,1,"\u0642\u0645\u064A"],[64947,1,"\u0646\u062D\u064A"],[64948,1,"\u0642\u0645\u062D"],[64949,1,"\u0644\u062D\u0645"],[64950,1,"\u0639\u0645\u064A"],[64951,1,"\u0643\u0645\u064A"],[64952,1,"\u0646\u062C\u062D"],[64953,1,"\u0645\u062E\u064A"],[64954,1,"\u0644\u062C\u0645"],[64955,1,"\u0643\u0645\u0645"],[64956,1,"\u0644\u062C\u0645"],[64957,1,"\u0646\u062C\u062D"],[64958,1,"\u062C\u062D\u064A"],[64959,1,"\u062D\u062C\u064A"],[64960,1,"\u0645\u062C\u064A"],[64961,1,"\u0641\u0645\u064A"],[64962,1,"\u0628\u062D\u064A"],[64963,1,"\u0643\u0645\u0645"],[64964,1,"\u0639\u062C\u0645"],[64965,1,"\u0635\u0645\u0645"],[64966,1,"\u0633\u062E\u064A"],[64967,1,"\u0646\u062C\u064A"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"\u0635\u0644\u06D2"],[65009,1,"\u0642\u0644\u06D2"],[65010,1,"\u0627\u0644\u0644\u0647"],[65011,1,"\u0627\u0643\u0628\u0631"],[65012,1,"\u0645\u062D\u0645\u062F"],[65013,1,"\u0635\u0644\u0639\u0645"],[65014,1,"\u0631\u0633\u0648\u0644"],[65015,1,"\u0639\u0644\u064A\u0647"],[65016,1,"\u0648\u0633\u0644\u0645"],[65017,1,"\u0635\u0644\u0649"],[65018,1,"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645"],[65019,1,"\u062C\u0644 \u062C\u0644\u0627\u0644\u0647"],[65020,1,"\u0631\u06CC\u0627\u0644"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,1,","],[65041,1,"\u3001"],[65042,3],[65043,1,":"],[65044,1,";"],[65045,1,"!"],[65046,1,"?"],[65047,1,"\u3016"],[65048,1,"\u3017"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"\u2014"],[65074,1,"\u2013"],[[65075,65076],1,"_"],[65077,1,"("],[65078,1,")"],[65079,1,"{"],[65080,1,"}"],[65081,1,"\u3014"],[65082,1,"\u3015"],[65083,1,"\u3010"],[65084,1,"\u3011"],[65085,1,"\u300A"],[65086,1,"\u300B"],[65087,1,"\u3008"],[65088,1,"\u3009"],[65089,1,"\u300C"],[65090,1,"\u300D"],[65091,1,"\u300E"],[65092,1,"\u300F"],[[65093,65094],2],[65095,1,"["],[65096,1,"]"],[[65097,65100],1," \u0305"],[[65101,65103],1,"_"],[65104,1,","],[65105,1,"\u3001"],[65106,3],[65107,3],[65108,1,";"],[65109,1,":"],[65110,1,"?"],[65111,1,"!"],[65112,1,"\u2014"],[65113,1,"("],[65114,1,")"],[65115,1,"{"],[65116,1,"}"],[65117,1,"\u3014"],[65118,1,"\u3015"],[65119,1,"#"],[65120,1,"&"],[65121,1,"*"],[65122,1,"+"],[65123,1,"-"],[65124,1,"<"],[65125,1,">"],[65126,1,"="],[65127,3],[65128,1,"\\"],[65129,1,"$"],[65130,1,"%"],[65131,1,"@"],[[65132,65135],3],[65136,1," \u064B"],[65137,1,"\u0640\u064B"],[65138,1," \u064C"],[65139,2],[65140,1," \u064D"],[65141,3],[65142,1," \u064E"],[65143,1,"\u0640\u064E"],[65144,1," \u064F"],[65145,1,"\u0640\u064F"],[65146,1," \u0650"],[65147,1,"\u0640\u0650"],[65148,1," \u0651"],[65149,1,"\u0640\u0651"],[65150,1," \u0652"],[65151,1,"\u0640\u0652"],[65152,1,"\u0621"],[[65153,65154],1,"\u0622"],[[65155,65156],1,"\u0623"],[[65157,65158],1,"\u0624"],[[65159,65160],1,"\u0625"],[[65161,65164],1,"\u0626"],[[65165,65166],1,"\u0627"],[[65167,65170],1,"\u0628"],[[65171,65172],1,"\u0629"],[[65173,65176],1,"\u062A"],[[65177,65180],1,"\u062B"],[[65181,65184],1,"\u062C"],[[65185,65188],1,"\u062D"],[[65189,65192],1,"\u062E"],[[65193,65194],1,"\u062F"],[[65195,65196],1,"\u0630"],[[65197,65198],1,"\u0631"],[[65199,65200],1,"\u0632"],[[65201,65204],1,"\u0633"],[[65205,65208],1,"\u0634"],[[65209,65212],1,"\u0635"],[[65213,65216],1,"\u0636"],[[65217,65220],1,"\u0637"],[[65221,65224],1,"\u0638"],[[65225,65228],1,"\u0639"],[[65229,65232],1,"\u063A"],[[65233,65236],1,"\u0641"],[[65237,65240],1,"\u0642"],[[65241,65244],1,"\u0643"],[[65245,65248],1,"\u0644"],[[65249,65252],1,"\u0645"],[[65253,65256],1,"\u0646"],[[65257,65260],1,"\u0647"],[[65261,65262],1,"\u0648"],[[65263,65264],1,"\u0649"],[[65265,65268],1,"\u064A"],[[65269,65270],1,"\u0644\u0622"],[[65271,65272],1,"\u0644\u0623"],[[65273,65274],1,"\u0644\u0625"],[[65275,65276],1,"\u0644\u0627"],[[65277,65278],3],[65279,7],[65280,3],[65281,1,"!"],[65282,1,'"'],[65283,1,"#"],[65284,1,"$"],[65285,1,"%"],[65286,1,"&"],[65287,1,"'"],[65288,1,"("],[65289,1,")"],[65290,1,"*"],[65291,1,"+"],[65292,1,","],[65293,1,"-"],[65294,1,"."],[65295,1,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,1,":"],[65307,1,";"],[65308,1,"<"],[65309,1,"="],[65310,1,">"],[65311,1,"?"],[65312,1,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,1,"["],[65340,1,"\\"],[65341,1,"]"],[65342,1,"^"],[65343,1,"_"],[65344,1,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,1,"{"],[65372,1,"|"],[65373,1,"}"],[65374,1,"~"],[65375,1,"\u2985"],[65376,1,"\u2986"],[65377,1,"."],[65378,1,"\u300C"],[65379,1,"\u300D"],[65380,1,"\u3001"],[65381,1,"\u30FB"],[65382,1,"\u30F2"],[65383,1,"\u30A1"],[65384,1,"\u30A3"],[65385,1,"\u30A5"],[65386,1,"\u30A7"],[65387,1,"\u30A9"],[65388,1,"\u30E3"],[65389,1,"\u30E5"],[65390,1,"\u30E7"],[65391,1,"\u30C3"],[65392,1,"\u30FC"],[65393,1,"\u30A2"],[65394,1,"\u30A4"],[65395,1,"\u30A6"],[65396,1,"\u30A8"],[65397,1,"\u30AA"],[65398,1,"\u30AB"],[65399,1,"\u30AD"],[65400,1,"\u30AF"],[65401,1,"\u30B1"],[65402,1,"\u30B3"],[65403,1,"\u30B5"],[65404,1,"\u30B7"],[65405,1,"\u30B9"],[65406,1,"\u30BB"],[65407,1,"\u30BD"],[65408,1,"\u30BF"],[65409,1,"\u30C1"],[65410,1,"\u30C4"],[65411,1,"\u30C6"],[65412,1,"\u30C8"],[65413,1,"\u30CA"],[65414,1,"\u30CB"],[65415,1,"\u30CC"],[65416,1,"\u30CD"],[65417,1,"\u30CE"],[65418,1,"\u30CF"],[65419,1,"\u30D2"],[65420,1,"\u30D5"],[65421,1,"\u30D8"],[65422,1,"\u30DB"],[65423,1,"\u30DE"],[65424,1,"\u30DF"],[65425,1,"\u30E0"],[65426,1,"\u30E1"],[65427,1,"\u30E2"],[65428,1,"\u30E4"],[65429,1,"\u30E6"],[65430,1,"\u30E8"],[65431,1,"\u30E9"],[65432,1,"\u30EA"],[65433,1,"\u30EB"],[65434,1,"\u30EC"],[65435,1,"\u30ED"],[65436,1,"\u30EF"],[65437,1,"\u30F3"],[65438,1,"\u3099"],[65439,1,"\u309A"],[65440,7],[65441,1,"\u1100"],[65442,1,"\u1101"],[65443,1,"\u11AA"],[65444,1,"\u1102"],[65445,1,"\u11AC"],[65446,1,"\u11AD"],[65447,1,"\u1103"],[65448,1,"\u1104"],[65449,1,"\u1105"],[65450,1,"\u11B0"],[65451,1,"\u11B1"],[65452,1,"\u11B2"],[65453,1,"\u11B3"],[65454,1,"\u11B4"],[65455,1,"\u11B5"],[65456,1,"\u111A"],[65457,1,"\u1106"],[65458,1,"\u1107"],[65459,1,"\u1108"],[65460,1,"\u1121"],[65461,1,"\u1109"],[65462,1,"\u110A"],[65463,1,"\u110B"],[65464,1,"\u110C"],[65465,1,"\u110D"],[65466,1,"\u110E"],[65467,1,"\u110F"],[65468,1,"\u1110"],[65469,1,"\u1111"],[65470,1,"\u1112"],[[65471,65473],3],[65474,1,"\u1161"],[65475,1,"\u1162"],[65476,1,"\u1163"],[65477,1,"\u1164"],[65478,1,"\u1165"],[65479,1,"\u1166"],[[65480,65481],3],[65482,1,"\u1167"],[65483,1,"\u1168"],[65484,1,"\u1169"],[65485,1,"\u116A"],[65486,1,"\u116B"],[65487,1,"\u116C"],[[65488,65489],3],[65490,1,"\u116D"],[65491,1,"\u116E"],[65492,1,"\u116F"],[65493,1,"\u1170"],[65494,1,"\u1171"],[65495,1,"\u1172"],[[65496,65497],3],[65498,1,"\u1173"],[65499,1,"\u1174"],[65500,1,"\u1175"],[[65501,65503],3],[65504,1,"\xA2"],[65505,1,"\xA3"],[65506,1,"\xAC"],[65507,1," \u0304"],[65508,1,"\xA6"],[65509,1,"\xA5"],[65510,1,"\u20A9"],[65511,3],[65512,1,"\u2502"],[65513,1,"\u2190"],[65514,1,"\u2191"],[65515,1,"\u2192"],[65516,1,"\u2193"],[65517,1,"\u25A0"],[65518,1,"\u25CB"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66e3,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\u{10428}"],[66561,1,"\u{10429}"],[66562,1,"\u{1042A}"],[66563,1,"\u{1042B}"],[66564,1,"\u{1042C}"],[66565,1,"\u{1042D}"],[66566,1,"\u{1042E}"],[66567,1,"\u{1042F}"],[66568,1,"\u{10430}"],[66569,1,"\u{10431}"],[66570,1,"\u{10432}"],[66571,1,"\u{10433}"],[66572,1,"\u{10434}"],[66573,1,"\u{10435}"],[66574,1,"\u{10436}"],[66575,1,"\u{10437}"],[66576,1,"\u{10438}"],[66577,1,"\u{10439}"],[66578,1,"\u{1043A}"],[66579,1,"\u{1043B}"],[66580,1,"\u{1043C}"],[66581,1,"\u{1043D}"],[66582,1,"\u{1043E}"],[66583,1,"\u{1043F}"],[66584,1,"\u{10440}"],[66585,1,"\u{10441}"],[66586,1,"\u{10442}"],[66587,1,"\u{10443}"],[66588,1,"\u{10444}"],[66589,1,"\u{10445}"],[66590,1,"\u{10446}"],[66591,1,"\u{10447}"],[66592,1,"\u{10448}"],[66593,1,"\u{10449}"],[66594,1,"\u{1044A}"],[66595,1,"\u{1044B}"],[66596,1,"\u{1044C}"],[66597,1,"\u{1044D}"],[66598,1,"\u{1044E}"],[66599,1,"\u{1044F}"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\u{104D8}"],[66737,1,"\u{104D9}"],[66738,1,"\u{104DA}"],[66739,1,"\u{104DB}"],[66740,1,"\u{104DC}"],[66741,1,"\u{104DD}"],[66742,1,"\u{104DE}"],[66743,1,"\u{104DF}"],[66744,1,"\u{104E0}"],[66745,1,"\u{104E1}"],[66746,1,"\u{104E2}"],[66747,1,"\u{104E3}"],[66748,1,"\u{104E4}"],[66749,1,"\u{104E5}"],[66750,1,"\u{104E6}"],[66751,1,"\u{104E7}"],[66752,1,"\u{104E8}"],[66753,1,"\u{104E9}"],[66754,1,"\u{104EA}"],[66755,1,"\u{104EB}"],[66756,1,"\u{104EC}"],[66757,1,"\u{104ED}"],[66758,1,"\u{104EE}"],[66759,1,"\u{104EF}"],[66760,1,"\u{104F0}"],[66761,1,"\u{104F1}"],[66762,1,"\u{104F2}"],[66763,1,"\u{104F3}"],[66764,1,"\u{104F4}"],[66765,1,"\u{104F5}"],[66766,1,"\u{104F6}"],[66767,1,"\u{104F7}"],[66768,1,"\u{104F8}"],[66769,1,"\u{104F9}"],[66770,1,"\u{104FA}"],[66771,1,"\u{104FB}"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\u{10597}"],[66929,1,"\u{10598}"],[66930,1,"\u{10599}"],[66931,1,"\u{1059A}"],[66932,1,"\u{1059B}"],[66933,1,"\u{1059C}"],[66934,1,"\u{1059D}"],[66935,1,"\u{1059E}"],[66936,1,"\u{1059F}"],[66937,1,"\u{105A0}"],[66938,1,"\u{105A1}"],[66939,3],[66940,1,"\u{105A3}"],[66941,1,"\u{105A4}"],[66942,1,"\u{105A5}"],[66943,1,"\u{105A6}"],[66944,1,"\u{105A7}"],[66945,1,"\u{105A8}"],[66946,1,"\u{105A9}"],[66947,1,"\u{105AA}"],[66948,1,"\u{105AB}"],[66949,1,"\u{105AC}"],[66950,1,"\u{105AD}"],[66951,1,"\u{105AE}"],[66952,1,"\u{105AF}"],[66953,1,"\u{105B0}"],[66954,1,"\u{105B1}"],[66955,3],[66956,1,"\u{105B3}"],[66957,1,"\u{105B4}"],[66958,1,"\u{105B5}"],[66959,1,"\u{105B6}"],[66960,1,"\u{105B7}"],[66961,1,"\u{105B8}"],[66962,1,"\u{105B9}"],[66963,3],[66964,1,"\u{105BB}"],[66965,1,"\u{105BC}"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67007],3],[[67008,67059],2],[[67060,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"\u02D0"],[67458,1,"\u02D1"],[67459,1,"\xE6"],[67460,1,"\u0299"],[67461,1,"\u0253"],[67462,3],[67463,1,"\u02A3"],[67464,1,"\uAB66"],[67465,1,"\u02A5"],[67466,1,"\u02A4"],[67467,1,"\u0256"],[67468,1,"\u0257"],[67469,1,"\u1D91"],[67470,1,"\u0258"],[67471,1,"\u025E"],[67472,1,"\u02A9"],[67473,1,"\u0264"],[67474,1,"\u0262"],[67475,1,"\u0260"],[67476,1,"\u029B"],[67477,1,"\u0127"],[67478,1,"\u029C"],[67479,1,"\u0267"],[67480,1,"\u0284"],[67481,1,"\u02AA"],[67482,1,"\u02AB"],[67483,1,"\u026C"],[67484,1,"\u{1DF04}"],[67485,1,"\uA78E"],[67486,1,"\u026E"],[67487,1,"\u{1DF05}"],[67488,1,"\u028E"],[67489,1,"\u{1DF06}"],[67490,1,"\xF8"],[67491,1,"\u0276"],[67492,1,"\u0277"],[67493,1,"q"],[67494,1,"\u027A"],[67495,1,"\u{1DF08}"],[67496,1,"\u027D"],[67497,1,"\u027E"],[67498,1,"\u0280"],[67499,1,"\u02A8"],[67500,1,"\u02A6"],[67501,1,"\uAB67"],[67502,1,"\u02A7"],[67503,1,"\u0288"],[67504,1,"\u2C71"],[67505,3],[67506,1,"\u028F"],[67507,1,"\u02A1"],[67508,1,"\u02A2"],[67509,1,"\u0298"],[67510,1,"\u01C0"],[67511,1,"\u01C1"],[67512,1,"\u01C2"],[67513,1,"\u{1DF0A}"],[67514,1,"\u{1DF1E}"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\u{10CC0}"],[68737,1,"\u{10CC1}"],[68738,1,"\u{10CC2}"],[68739,1,"\u{10CC3}"],[68740,1,"\u{10CC4}"],[68741,1,"\u{10CC5}"],[68742,1,"\u{10CC6}"],[68743,1,"\u{10CC7}"],[68744,1,"\u{10CC8}"],[68745,1,"\u{10CC9}"],[68746,1,"\u{10CCA}"],[68747,1,"\u{10CCB}"],[68748,1,"\u{10CCC}"],[68749,1,"\u{10CCD}"],[68750,1,"\u{10CCE}"],[68751,1,"\u{10CCF}"],[68752,1,"\u{10CD0}"],[68753,1,"\u{10CD1}"],[68754,1,"\u{10CD2}"],[68755,1,"\u{10CD3}"],[68756,1,"\u{10CD4}"],[68757,1,"\u{10CD5}"],[68758,1,"\u{10CD6}"],[68759,1,"\u{10CD7}"],[68760,1,"\u{10CD8}"],[68761,1,"\u{10CD9}"],[68762,1,"\u{10CDA}"],[68763,1,"\u{10CDB}"],[68764,1,"\u{10CDC}"],[68765,1,"\u{10CDD}"],[68766,1,"\u{10CDE}"],[68767,1,"\u{10CDF}"],[68768,1,"\u{10CE0}"],[68769,1,"\u{10CE1}"],[68770,1,"\u{10CE2}"],[68771,1,"\u{10CE3}"],[68772,1,"\u{10CE4}"],[68773,1,"\u{10CE5}"],[68774,1,"\u{10CE6}"],[68775,1,"\u{10CE7}"],[68776,1,"\u{10CE8}"],[68777,1,"\u{10CE9}"],[68778,1,"\u{10CEA}"],[68779,1,"\u{10CEB}"],[68780,1,"\u{10CEC}"],[68781,1,"\u{10CED}"],[68782,1,"\u{10CEE}"],[68783,1,"\u{10CEF}"],[68784,1,"\u{10CF0}"],[68785,1,"\u{10CF1}"],[68786,1,"\u{10CF2}"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,68927],3],[[68928,68943],2],[68944,1,"\u{10D70}"],[68945,1,"\u{10D71}"],[68946,1,"\u{10D72}"],[68947,1,"\u{10D73}"],[68948,1,"\u{10D74}"],[68949,1,"\u{10D75}"],[68950,1,"\u{10D76}"],[68951,1,"\u{10D77}"],[68952,1,"\u{10D78}"],[68953,1,"\u{10D79}"],[68954,1,"\u{10D7A}"],[68955,1,"\u{10D7B}"],[68956,1,"\u{10D7C}"],[68957,1,"\u{10D7D}"],[68958,1,"\u{10D7E}"],[68959,1,"\u{10D7F}"],[68960,1,"\u{10D80}"],[68961,1,"\u{10D81}"],[68962,1,"\u{10D82}"],[68963,1,"\u{10D83}"],[68964,1,"\u{10D84}"],[68965,1,"\u{10D85}"],[[68966,68968],3],[[68969,68973],2],[68974,2],[[68975,68997],2],[[68998,69005],3],[[69006,69007],2],[[69008,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69313],3],[[69314,69316],2],[[69317,69371],3],[69372,2],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70527],3],[[70528,70537],2],[70538,3],[70539,2],[[70540,70541],3],[70542,2],[70543,3],[[70544,70581],2],[70582,3],[[70583,70592],2],[70593,3],[70594,2],[[70595,70596],3],[70597,2],[70598,3],[[70599,70602],2],[70603,3],[[70604,70611],2],[[70612,70613],2],[70614,3],[[70615,70616],2],[[70617,70624],3],[[70625,70626],2],[[70627,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71375],3],[[71376,71395],2],[[71396,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\u{118C0}"],[71841,1,"\u{118C1}"],[71842,1,"\u{118C2}"],[71843,1,"\u{118C3}"],[71844,1,"\u{118C4}"],[71845,1,"\u{118C5}"],[71846,1,"\u{118C6}"],[71847,1,"\u{118C7}"],[71848,1,"\u{118C8}"],[71849,1,"\u{118C9}"],[71850,1,"\u{118CA}"],[71851,1,"\u{118CB}"],[71852,1,"\u{118CC}"],[71853,1,"\u{118CD}"],[71854,1,"\u{118CE}"],[71855,1,"\u{118CF}"],[71856,1,"\u{118D0}"],[71857,1,"\u{118D1}"],[71858,1,"\u{118D2}"],[71859,1,"\u{118D3}"],[71860,1,"\u{118D4}"],[71861,1,"\u{118D5}"],[71862,1,"\u{118D6}"],[71863,1,"\u{118D7}"],[71864,1,"\u{118D8}"],[71865,1,"\u{118D9}"],[71866,1,"\u{118DA}"],[71867,1,"\u{118DB}"],[71868,1,"\u{118DC}"],[71869,1,"\u{118DD}"],[71870,1,"\u{118DE}"],[71871,1,"\u{118DF}"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72639],3],[[72640,72672],2],[72673,2],[[72674,72687],3],[[72688,72697],2],[[72698,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[73562,2],[[73563,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,78943],3],[[78944,82938],2],[[82939,82943],3],[[82944,83526],2],[[83527,90367],3],[[90368,90425],2],[[90426,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93503],3],[[93504,93548],2],[[93549,93551],2],[[93552,93561],2],[[93562,93759],3],[93760,1,"\u{16E60}"],[93761,1,"\u{16E61}"],[93762,1,"\u{16E62}"],[93763,1,"\u{16E63}"],[93764,1,"\u{16E64}"],[93765,1,"\u{16E65}"],[93766,1,"\u{16E66}"],[93767,1,"\u{16E67}"],[93768,1,"\u{16E68}"],[93769,1,"\u{16E69}"],[93770,1,"\u{16E6A}"],[93771,1,"\u{16E6B}"],[93772,1,"\u{16E6C}"],[93773,1,"\u{16E6D}"],[93774,1,"\u{16E6E}"],[93775,1,"\u{16E6F}"],[93776,1,"\u{16E70}"],[93777,1,"\u{16E71}"],[93778,1,"\u{16E72}"],[93779,1,"\u{16E73}"],[93780,1,"\u{16E74}"],[93781,1,"\u{16E75}"],[93782,1,"\u{16E76}"],[93783,1,"\u{16E77}"],[93784,1,"\u{16E78}"],[93785,1,"\u{16E79}"],[93786,1,"\u{16E7A}"],[93787,1,"\u{16E7B}"],[93788,1,"\u{16E7C}"],[93789,1,"\u{16E7D}"],[93790,1,"\u{16E7E}"],[93791,1,"\u{16E7F}"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101630],3],[101631,2],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,117759],3],[[117760,117973],2],[117974,1,"a"],[117975,1,"b"],[117976,1,"c"],[117977,1,"d"],[117978,1,"e"],[117979,1,"f"],[117980,1,"g"],[117981,1,"h"],[117982,1,"i"],[117983,1,"j"],[117984,1,"k"],[117985,1,"l"],[117986,1,"m"],[117987,1,"n"],[117988,1,"o"],[117989,1,"p"],[117990,1,"q"],[117991,1,"r"],[117992,1,"s"],[117993,1,"t"],[117994,1,"u"],[117995,1,"v"],[117996,1,"w"],[117997,1,"x"],[117998,1,"y"],[117999,1,"z"],[118e3,1,"0"],[118001,1,"1"],[118002,1,"2"],[118003,1,"3"],[118004,1,"4"],[118005,1,"5"],[118006,1,"6"],[118007,1,"7"],[118008,1,"8"],[118009,1,"9"],[[118010,118015],3],[[118016,118451],2],[[118452,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\u{1D157}\u{1D165}"],[119135,1,"\u{1D158}\u{1D165}"],[119136,1,"\u{1D158}\u{1D165}\u{1D16E}"],[119137,1,"\u{1D158}\u{1D165}\u{1D16F}"],[119138,1,"\u{1D158}\u{1D165}\u{1D170}"],[119139,1,"\u{1D158}\u{1D165}\u{1D171}"],[119140,1,"\u{1D158}\u{1D165}\u{1D172}"],[[119141,119154],2],[[119155,119162],7],[[119163,119226],2],[119227,1,"\u{1D1B9}\u{1D165}"],[119228,1,"\u{1D1BA}\u{1D165}"],[119229,1,"\u{1D1B9}\u{1D165}\u{1D16E}"],[119230,1,"\u{1D1BA}\u{1D165}\u{1D16E}"],[119231,1,"\u{1D1B9}\u{1D165}\u{1D16F}"],[119232,1,"\u{1D1BA}\u{1D165}\u{1D16F}"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[12e4,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"\u0131"],[120485,1,"\u0237"],[[120486,120487],3],[120488,1,"\u03B1"],[120489,1,"\u03B2"],[120490,1,"\u03B3"],[120491,1,"\u03B4"],[120492,1,"\u03B5"],[120493,1,"\u03B6"],[120494,1,"\u03B7"],[120495,1,"\u03B8"],[120496,1,"\u03B9"],[120497,1,"\u03BA"],[120498,1,"\u03BB"],[120499,1,"\u03BC"],[120500,1,"\u03BD"],[120501,1,"\u03BE"],[120502,1,"\u03BF"],[120503,1,"\u03C0"],[120504,1,"\u03C1"],[120505,1,"\u03B8"],[120506,1,"\u03C3"],[120507,1,"\u03C4"],[120508,1,"\u03C5"],[120509,1,"\u03C6"],[120510,1,"\u03C7"],[120511,1,"\u03C8"],[120512,1,"\u03C9"],[120513,1,"\u2207"],[120514,1,"\u03B1"],[120515,1,"\u03B2"],[120516,1,"\u03B3"],[120517,1,"\u03B4"],[120518,1,"\u03B5"],[120519,1,"\u03B6"],[120520,1,"\u03B7"],[120521,1,"\u03B8"],[120522,1,"\u03B9"],[120523,1,"\u03BA"],[120524,1,"\u03BB"],[120525,1,"\u03BC"],[120526,1,"\u03BD"],[120527,1,"\u03BE"],[120528,1,"\u03BF"],[120529,1,"\u03C0"],[120530,1,"\u03C1"],[[120531,120532],1,"\u03C3"],[120533,1,"\u03C4"],[120534,1,"\u03C5"],[120535,1,"\u03C6"],[120536,1,"\u03C7"],[120537,1,"\u03C8"],[120538,1,"\u03C9"],[120539,1,"\u2202"],[120540,1,"\u03B5"],[120541,1,"\u03B8"],[120542,1,"\u03BA"],[120543,1,"\u03C6"],[120544,1,"\u03C1"],[120545,1,"\u03C0"],[120546,1,"\u03B1"],[120547,1,"\u03B2"],[120548,1,"\u03B3"],[120549,1,"\u03B4"],[120550,1,"\u03B5"],[120551,1,"\u03B6"],[120552,1,"\u03B7"],[120553,1,"\u03B8"],[120554,1,"\u03B9"],[120555,1,"\u03BA"],[120556,1,"\u03BB"],[120557,1,"\u03BC"],[120558,1,"\u03BD"],[120559,1,"\u03BE"],[120560,1,"\u03BF"],[120561,1,"\u03C0"],[120562,1,"\u03C1"],[120563,1,"\u03B8"],[120564,1,"\u03C3"],[120565,1,"\u03C4"],[120566,1,"\u03C5"],[120567,1,"\u03C6"],[120568,1,"\u03C7"],[120569,1,"\u03C8"],[120570,1,"\u03C9"],[120571,1,"\u2207"],[120572,1,"\u03B1"],[120573,1,"\u03B2"],[120574,1,"\u03B3"],[120575,1,"\u03B4"],[120576,1,"\u03B5"],[120577,1,"\u03B6"],[120578,1,"\u03B7"],[120579,1,"\u03B8"],[120580,1,"\u03B9"],[120581,1,"\u03BA"],[120582,1,"\u03BB"],[120583,1,"\u03BC"],[120584,1,"\u03BD"],[120585,1,"\u03BE"],[120586,1,"\u03BF"],[120587,1,"\u03C0"],[120588,1,"\u03C1"],[[120589,120590],1,"\u03C3"],[120591,1,"\u03C4"],[120592,1,"\u03C5"],[120593,1,"\u03C6"],[120594,1,"\u03C7"],[120595,1,"\u03C8"],[120596,1,"\u03C9"],[120597,1,"\u2202"],[120598,1,"\u03B5"],[120599,1,"\u03B8"],[120600,1,"\u03BA"],[120601,1,"\u03C6"],[120602,1,"\u03C1"],[120603,1,"\u03C0"],[120604,1,"\u03B1"],[120605,1,"\u03B2"],[120606,1,"\u03B3"],[120607,1,"\u03B4"],[120608,1,"\u03B5"],[120609,1,"\u03B6"],[120610,1,"\u03B7"],[120611,1,"\u03B8"],[120612,1,"\u03B9"],[120613,1,"\u03BA"],[120614,1,"\u03BB"],[120615,1,"\u03BC"],[120616,1,"\u03BD"],[120617,1,"\u03BE"],[120618,1,"\u03BF"],[120619,1,"\u03C0"],[120620,1,"\u03C1"],[120621,1,"\u03B8"],[120622,1,"\u03C3"],[120623,1,"\u03C4"],[120624,1,"\u03C5"],[120625,1,"\u03C6"],[120626,1,"\u03C7"],[120627,1,"\u03C8"],[120628,1,"\u03C9"],[120629,1,"\u2207"],[120630,1,"\u03B1"],[120631,1,"\u03B2"],[120632,1,"\u03B3"],[120633,1,"\u03B4"],[120634,1,"\u03B5"],[120635,1,"\u03B6"],[120636,1,"\u03B7"],[120637,1,"\u03B8"],[120638,1,"\u03B9"],[120639,1,"\u03BA"],[120640,1,"\u03BB"],[120641,1,"\u03BC"],[120642,1,"\u03BD"],[120643,1,"\u03BE"],[120644,1,"\u03BF"],[120645,1,"\u03C0"],[120646,1,"\u03C1"],[[120647,120648],1,"\u03C3"],[120649,1,"\u03C4"],[120650,1,"\u03C5"],[120651,1,"\u03C6"],[120652,1,"\u03C7"],[120653,1,"\u03C8"],[120654,1,"\u03C9"],[120655,1,"\u2202"],[120656,1,"\u03B5"],[120657,1,"\u03B8"],[120658,1,"\u03BA"],[120659,1,"\u03C6"],[120660,1,"\u03C1"],[120661,1,"\u03C0"],[120662,1,"\u03B1"],[120663,1,"\u03B2"],[120664,1,"\u03B3"],[120665,1,"\u03B4"],[120666,1,"\u03B5"],[120667,1,"\u03B6"],[120668,1,"\u03B7"],[120669,1,"\u03B8"],[120670,1,"\u03B9"],[120671,1,"\u03BA"],[120672,1,"\u03BB"],[120673,1,"\u03BC"],[120674,1,"\u03BD"],[120675,1,"\u03BE"],[120676,1,"\u03BF"],[120677,1,"\u03C0"],[120678,1,"\u03C1"],[120679,1,"\u03B8"],[120680,1,"\u03C3"],[120681,1,"\u03C4"],[120682,1,"\u03C5"],[120683,1,"\u03C6"],[120684,1,"\u03C7"],[120685,1,"\u03C8"],[120686,1,"\u03C9"],[120687,1,"\u2207"],[120688,1,"\u03B1"],[120689,1,"\u03B2"],[120690,1,"\u03B3"],[120691,1,"\u03B4"],[120692,1,"\u03B5"],[120693,1,"\u03B6"],[120694,1,"\u03B7"],[120695,1,"\u03B8"],[120696,1,"\u03B9"],[120697,1,"\u03BA"],[120698,1,"\u03BB"],[120699,1,"\u03BC"],[120700,1,"\u03BD"],[120701,1,"\u03BE"],[120702,1,"\u03BF"],[120703,1,"\u03C0"],[120704,1,"\u03C1"],[[120705,120706],1,"\u03C3"],[120707,1,"\u03C4"],[120708,1,"\u03C5"],[120709,1,"\u03C6"],[120710,1,"\u03C7"],[120711,1,"\u03C8"],[120712,1,"\u03C9"],[120713,1,"\u2202"],[120714,1,"\u03B5"],[120715,1,"\u03B8"],[120716,1,"\u03BA"],[120717,1,"\u03C6"],[120718,1,"\u03C1"],[120719,1,"\u03C0"],[120720,1,"\u03B1"],[120721,1,"\u03B2"],[120722,1,"\u03B3"],[120723,1,"\u03B4"],[120724,1,"\u03B5"],[120725,1,"\u03B6"],[120726,1,"\u03B7"],[120727,1,"\u03B8"],[120728,1,"\u03B9"],[120729,1,"\u03BA"],[120730,1,"\u03BB"],[120731,1,"\u03BC"],[120732,1,"\u03BD"],[120733,1,"\u03BE"],[120734,1,"\u03BF"],[120735,1,"\u03C0"],[120736,1,"\u03C1"],[120737,1,"\u03B8"],[120738,1,"\u03C3"],[120739,1,"\u03C4"],[120740,1,"\u03C5"],[120741,1,"\u03C6"],[120742,1,"\u03C7"],[120743,1,"\u03C8"],[120744,1,"\u03C9"],[120745,1,"\u2207"],[120746,1,"\u03B1"],[120747,1,"\u03B2"],[120748,1,"\u03B3"],[120749,1,"\u03B4"],[120750,1,"\u03B5"],[120751,1,"\u03B6"],[120752,1,"\u03B7"],[120753,1,"\u03B8"],[120754,1,"\u03B9"],[120755,1,"\u03BA"],[120756,1,"\u03BB"],[120757,1,"\u03BC"],[120758,1,"\u03BD"],[120759,1,"\u03BE"],[120760,1,"\u03BF"],[120761,1,"\u03C0"],[120762,1,"\u03C1"],[[120763,120764],1,"\u03C3"],[120765,1,"\u03C4"],[120766,1,"\u03C5"],[120767,1,"\u03C6"],[120768,1,"\u03C7"],[120769,1,"\u03C8"],[120770,1,"\u03C9"],[120771,1,"\u2202"],[120772,1,"\u03B5"],[120773,1,"\u03B8"],[120774,1,"\u03BA"],[120775,1,"\u03C6"],[120776,1,"\u03C1"],[120777,1,"\u03C0"],[[120778,120779],1,"\u03DD"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,"\u0430"],[122929,1,"\u0431"],[122930,1,"\u0432"],[122931,1,"\u0433"],[122932,1,"\u0434"],[122933,1,"\u0435"],[122934,1,"\u0436"],[122935,1,"\u0437"],[122936,1,"\u0438"],[122937,1,"\u043A"],[122938,1,"\u043B"],[122939,1,"\u043C"],[122940,1,"\u043E"],[122941,1,"\u043F"],[122942,1,"\u0440"],[122943,1,"\u0441"],[122944,1,"\u0442"],[122945,1,"\u0443"],[122946,1,"\u0444"],[122947,1,"\u0445"],[122948,1,"\u0446"],[122949,1,"\u0447"],[122950,1,"\u0448"],[122951,1,"\u044B"],[122952,1,"\u044D"],[122953,1,"\u044E"],[122954,1,"\uA689"],[122955,1,"\u04D9"],[122956,1,"\u0456"],[122957,1,"\u0458"],[122958,1,"\u04E9"],[122959,1,"\u04AF"],[122960,1,"\u04CF"],[122961,1,"\u0430"],[122962,1,"\u0431"],[122963,1,"\u0432"],[122964,1,"\u0433"],[122965,1,"\u0434"],[122966,1,"\u0435"],[122967,1,"\u0436"],[122968,1,"\u0437"],[122969,1,"\u0438"],[122970,1,"\u043A"],[122971,1,"\u043B"],[122972,1,"\u043E"],[122973,1,"\u043F"],[122974,1,"\u0441"],[122975,1,"\u0443"],[122976,1,"\u0444"],[122977,1,"\u0445"],[122978,1,"\u0446"],[122979,1,"\u0447"],[122980,1,"\u0448"],[122981,1,"\u044A"],[122982,1,"\u044B"],[122983,1,"\u0491"],[122984,1,"\u0456"],[122985,1,"\u0455"],[122986,1,"\u045F"],[122987,1,"\u04AB"],[122988,1,"\uA651"],[122989,1,"\u04B1"],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124367],3],[[124368,124410],2],[[124411,124414],3],[124415,2],[[124416,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\u{1E922}"],[125185,1,"\u{1E923}"],[125186,1,"\u{1E924}"],[125187,1,"\u{1E925}"],[125188,1,"\u{1E926}"],[125189,1,"\u{1E927}"],[125190,1,"\u{1E928}"],[125191,1,"\u{1E929}"],[125192,1,"\u{1E92A}"],[125193,1,"\u{1E92B}"],[125194,1,"\u{1E92C}"],[125195,1,"\u{1E92D}"],[125196,1,"\u{1E92E}"],[125197,1,"\u{1E92F}"],[125198,1,"\u{1E930}"],[125199,1,"\u{1E931}"],[125200,1,"\u{1E932}"],[125201,1,"\u{1E933}"],[125202,1,"\u{1E934}"],[125203,1,"\u{1E935}"],[125204,1,"\u{1E936}"],[125205,1,"\u{1E937}"],[125206,1,"\u{1E938}"],[125207,1,"\u{1E939}"],[125208,1,"\u{1E93A}"],[125209,1,"\u{1E93B}"],[125210,1,"\u{1E93C}"],[125211,1,"\u{1E93D}"],[125212,1,"\u{1E93E}"],[125213,1,"\u{1E93F}"],[125214,1,"\u{1E940}"],[125215,1,"\u{1E941}"],[125216,1,"\u{1E942}"],[125217,1,"\u{1E943}"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"\u0627"],[126465,1,"\u0628"],[126466,1,"\u062C"],[126467,1,"\u062F"],[126468,3],[126469,1,"\u0648"],[126470,1,"\u0632"],[126471,1,"\u062D"],[126472,1,"\u0637"],[126473,1,"\u064A"],[126474,1,"\u0643"],[126475,1,"\u0644"],[126476,1,"\u0645"],[126477,1,"\u0646"],[126478,1,"\u0633"],[126479,1,"\u0639"],[126480,1,"\u0641"],[126481,1,"\u0635"],[126482,1,"\u0642"],[126483,1,"\u0631"],[126484,1,"\u0634"],[126485,1,"\u062A"],[126486,1,"\u062B"],[126487,1,"\u062E"],[126488,1,"\u0630"],[126489,1,"\u0636"],[126490,1,"\u0638"],[126491,1,"\u063A"],[126492,1,"\u066E"],[126493,1,"\u06BA"],[126494,1,"\u06A1"],[126495,1,"\u066F"],[126496,3],[126497,1,"\u0628"],[126498,1,"\u062C"],[126499,3],[126500,1,"\u0647"],[[126501,126502],3],[126503,1,"\u062D"],[126504,3],[126505,1,"\u064A"],[126506,1,"\u0643"],[126507,1,"\u0644"],[126508,1,"\u0645"],[126509,1,"\u0646"],[126510,1,"\u0633"],[126511,1,"\u0639"],[126512,1,"\u0641"],[126513,1,"\u0635"],[126514,1,"\u0642"],[126515,3],[126516,1,"\u0634"],[126517,1,"\u062A"],[126518,1,"\u062B"],[126519,1,"\u062E"],[126520,3],[126521,1,"\u0636"],[126522,3],[126523,1,"\u063A"],[[126524,126529],3],[126530,1,"\u062C"],[[126531,126534],3],[126535,1,"\u062D"],[126536,3],[126537,1,"\u064A"],[126538,3],[126539,1,"\u0644"],[126540,3],[126541,1,"\u0646"],[126542,1,"\u0633"],[126543,1,"\u0639"],[126544,3],[126545,1,"\u0635"],[126546,1,"\u0642"],[126547,3],[126548,1,"\u0634"],[[126549,126550],3],[126551,1,"\u062E"],[126552,3],[126553,1,"\u0636"],[126554,3],[126555,1,"\u063A"],[126556,3],[126557,1,"\u06BA"],[126558,3],[126559,1,"\u066F"],[126560,3],[126561,1,"\u0628"],[126562,1,"\u062C"],[126563,3],[126564,1,"\u0647"],[[126565,126566],3],[126567,1,"\u062D"],[126568,1,"\u0637"],[126569,1,"\u064A"],[126570,1,"\u0643"],[126571,3],[126572,1,"\u0645"],[126573,1,"\u0646"],[126574,1,"\u0633"],[126575,1,"\u0639"],[126576,1,"\u0641"],[126577,1,"\u0635"],[126578,1,"\u0642"],[126579,3],[126580,1,"\u0634"],[126581,1,"\u062A"],[126582,1,"\u062B"],[126583,1,"\u062E"],[126584,3],[126585,1,"\u0636"],[126586,1,"\u0638"],[126587,1,"\u063A"],[126588,1,"\u066E"],[126589,3],[126590,1,"\u06A1"],[126591,3],[126592,1,"\u0627"],[126593,1,"\u0628"],[126594,1,"\u062C"],[126595,1,"\u062F"],[126596,1,"\u0647"],[126597,1,"\u0648"],[126598,1,"\u0632"],[126599,1,"\u062D"],[126600,1,"\u0637"],[126601,1,"\u064A"],[126602,3],[126603,1,"\u0644"],[126604,1,"\u0645"],[126605,1,"\u0646"],[126606,1,"\u0633"],[126607,1,"\u0639"],[126608,1,"\u0641"],[126609,1,"\u0635"],[126610,1,"\u0642"],[126611,1,"\u0631"],[126612,1,"\u0634"],[126613,1,"\u062A"],[126614,1,"\u062B"],[126615,1,"\u062E"],[126616,1,"\u0630"],[126617,1,"\u0636"],[126618,1,"\u0638"],[126619,1,"\u063A"],[[126620,126624],3],[126625,1,"\u0628"],[126626,1,"\u062C"],[126627,1,"\u062F"],[126628,3],[126629,1,"\u0648"],[126630,1,"\u0632"],[126631,1,"\u062D"],[126632,1,"\u0637"],[126633,1,"\u064A"],[126634,3],[126635,1,"\u0644"],[126636,1,"\u0645"],[126637,1,"\u0646"],[126638,1,"\u0633"],[126639,1,"\u0639"],[126640,1,"\u0641"],[126641,1,"\u0635"],[126642,1,"\u0642"],[126643,1,"\u0631"],[126644,1,"\u0634"],[126645,1,"\u062A"],[126646,1,"\u062B"],[126647,1,"\u062E"],[126648,1,"\u0630"],[126649,1,"\u0636"],[126650,1,"\u0638"],[126651,1,"\u063A"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,1,"0,"],[127234,1,"1,"],[127235,1,"2,"],[127236,1,"3,"],[127237,1,"4,"],[127238,1,"5,"],[127239,1,"6,"],[127240,1,"7,"],[127241,1,"8,"],[127242,1,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,1,"(a)"],[127249,1,"(b)"],[127250,1,"(c)"],[127251,1,"(d)"],[127252,1,"(e)"],[127253,1,"(f)"],[127254,1,"(g)"],[127255,1,"(h)"],[127256,1,"(i)"],[127257,1,"(j)"],[127258,1,"(k)"],[127259,1,"(l)"],[127260,1,"(m)"],[127261,1,"(n)"],[127262,1,"(o)"],[127263,1,"(p)"],[127264,1,"(q)"],[127265,1,"(r)"],[127266,1,"(s)"],[127267,1,"(t)"],[127268,1,"(u)"],[127269,1,"(v)"],[127270,1,"(w)"],[127271,1,"(x)"],[127272,1,"(y)"],[127273,1,"(z)"],[127274,1,"\u3014s\u3015"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"\u307B\u304B"],[127489,1,"\u30B3\u30B3"],[127490,1,"\u30B5"],[[127491,127503],3],[127504,1,"\u624B"],[127505,1,"\u5B57"],[127506,1,"\u53CC"],[127507,1,"\u30C7"],[127508,1,"\u4E8C"],[127509,1,"\u591A"],[127510,1,"\u89E3"],[127511,1,"\u5929"],[127512,1,"\u4EA4"],[127513,1,"\u6620"],[127514,1,"\u7121"],[127515,1,"\u6599"],[127516,1,"\u524D"],[127517,1,"\u5F8C"],[127518,1,"\u518D"],[127519,1,"\u65B0"],[127520,1,"\u521D"],[127521,1,"\u7D42"],[127522,1,"\u751F"],[127523,1,"\u8CA9"],[127524,1,"\u58F0"],[127525,1,"\u5439"],[127526,1,"\u6F14"],[127527,1,"\u6295"],[127528,1,"\u6355"],[127529,1,"\u4E00"],[127530,1,"\u4E09"],[127531,1,"\u904A"],[127532,1,"\u5DE6"],[127533,1,"\u4E2D"],[127534,1,"\u53F3"],[127535,1,"\u6307"],[127536,1,"\u8D70"],[127537,1,"\u6253"],[127538,1,"\u7981"],[127539,1,"\u7A7A"],[127540,1,"\u5408"],[127541,1,"\u6E80"],[127542,1,"\u6709"],[127543,1,"\u6708"],[127544,1,"\u7533"],[127545,1,"\u5272"],[127546,1,"\u55B6"],[127547,1,"\u914D"],[[127548,127551],3],[127552,1,"\u3014\u672C\u3015"],[127553,1,"\u3014\u4E09\u3015"],[127554,1,"\u3014\u4E8C\u3015"],[127555,1,"\u3014\u5B89\u3015"],[127556,1,"\u3014\u70B9\u3015"],[127557,1,"\u3014\u6253\u3015"],[127558,1,"\u3014\u76D7\u3015"],[127559,1,"\u3014\u52DD\u3015"],[127560,1,"\u3014\u6557\u3015"],[[127561,127567],3],[127568,1,"\u5F97"],[127569,1,"\u53EF"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128e3,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129211],2],[[129212,129215],3],[[129216,129217],2],[[129218,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[129673,2],[[129674,129678],3],[129679,2],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,2],[129727,2],[[129728,129730],2],[[129731,129733],2],[129734,2],[[129735,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[129756,2],[[129757,129758],3],[129759,2],[[129760,129767],2],[129768,2],[129769,2],[[129770,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],2],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,191471],3],[[191472,192093],2],[[192094,194559],3],[194560,1,"\u4E3D"],[194561,1,"\u4E38"],[194562,1,"\u4E41"],[194563,1,"\u{20122}"],[194564,1,"\u4F60"],[194565,1,"\u4FAE"],[194566,1,"\u4FBB"],[194567,1,"\u5002"],[194568,1,"\u507A"],[194569,1,"\u5099"],[194570,1,"\u50E7"],[194571,1,"\u50CF"],[194572,1,"\u349E"],[194573,1,"\u{2063A}"],[194574,1,"\u514D"],[194575,1,"\u5154"],[194576,1,"\u5164"],[194577,1,"\u5177"],[194578,1,"\u{2051C}"],[194579,1,"\u34B9"],[194580,1,"\u5167"],[194581,1,"\u518D"],[194582,1,"\u{2054B}"],[194583,1,"\u5197"],[194584,1,"\u51A4"],[194585,1,"\u4ECC"],[194586,1,"\u51AC"],[194587,1,"\u51B5"],[194588,1,"\u{291DF}"],[194589,1,"\u51F5"],[194590,1,"\u5203"],[194591,1,"\u34DF"],[194592,1,"\u523B"],[194593,1,"\u5246"],[194594,1,"\u5272"],[194595,1,"\u5277"],[194596,1,"\u3515"],[194597,1,"\u52C7"],[194598,1,"\u52C9"],[194599,1,"\u52E4"],[194600,1,"\u52FA"],[194601,1,"\u5305"],[194602,1,"\u5306"],[194603,1,"\u5317"],[194604,1,"\u5349"],[194605,1,"\u5351"],[194606,1,"\u535A"],[194607,1,"\u5373"],[194608,1,"\u537D"],[[194609,194611],1,"\u537F"],[194612,1,"\u{20A2C}"],[194613,1,"\u7070"],[194614,1,"\u53CA"],[194615,1,"\u53DF"],[194616,1,"\u{20B63}"],[194617,1,"\u53EB"],[194618,1,"\u53F1"],[194619,1,"\u5406"],[194620,1,"\u549E"],[194621,1,"\u5438"],[194622,1,"\u5448"],[194623,1,"\u5468"],[194624,1,"\u54A2"],[194625,1,"\u54F6"],[194626,1,"\u5510"],[194627,1,"\u5553"],[194628,1,"\u5563"],[[194629,194630],1,"\u5584"],[194631,1,"\u5599"],[194632,1,"\u55AB"],[194633,1,"\u55B3"],[194634,1,"\u55C2"],[194635,1,"\u5716"],[194636,1,"\u5606"],[194637,1,"\u5717"],[194638,1,"\u5651"],[194639,1,"\u5674"],[194640,1,"\u5207"],[194641,1,"\u58EE"],[194642,1,"\u57CE"],[194643,1,"\u57F4"],[194644,1,"\u580D"],[194645,1,"\u578B"],[194646,1,"\u5832"],[194647,1,"\u5831"],[194648,1,"\u58AC"],[194649,1,"\u{214E4}"],[194650,1,"\u58F2"],[194651,1,"\u58F7"],[194652,1,"\u5906"],[194653,1,"\u591A"],[194654,1,"\u5922"],[194655,1,"\u5962"],[194656,1,"\u{216A8}"],[194657,1,"\u{216EA}"],[194658,1,"\u59EC"],[194659,1,"\u5A1B"],[194660,1,"\u5A27"],[194661,1,"\u59D8"],[194662,1,"\u5A66"],[194663,1,"\u36EE"],[194664,1,"\u36FC"],[194665,1,"\u5B08"],[[194666,194667],1,"\u5B3E"],[194668,1,"\u{219C8}"],[194669,1,"\u5BC3"],[194670,1,"\u5BD8"],[194671,1,"\u5BE7"],[194672,1,"\u5BF3"],[194673,1,"\u{21B18}"],[194674,1,"\u5BFF"],[194675,1,"\u5C06"],[194676,1,"\u5F53"],[194677,1,"\u5C22"],[194678,1,"\u3781"],[194679,1,"\u5C60"],[194680,1,"\u5C6E"],[194681,1,"\u5CC0"],[194682,1,"\u5C8D"],[194683,1,"\u{21DE4}"],[194684,1,"\u5D43"],[194685,1,"\u{21DE6}"],[194686,1,"\u5D6E"],[194687,1,"\u5D6B"],[194688,1,"\u5D7C"],[194689,1,"\u5DE1"],[194690,1,"\u5DE2"],[194691,1,"\u382F"],[194692,1,"\u5DFD"],[194693,1,"\u5E28"],[194694,1,"\u5E3D"],[194695,1,"\u5E69"],[194696,1,"\u3862"],[194697,1,"\u{22183}"],[194698,1,"\u387C"],[194699,1,"\u5EB0"],[194700,1,"\u5EB3"],[194701,1,"\u5EB6"],[194702,1,"\u5ECA"],[194703,1,"\u{2A392}"],[194704,1,"\u5EFE"],[[194705,194706],1,"\u{22331}"],[194707,1,"\u8201"],[[194708,194709],1,"\u5F22"],[194710,1,"\u38C7"],[194711,1,"\u{232B8}"],[194712,1,"\u{261DA}"],[194713,1,"\u5F62"],[194714,1,"\u5F6B"],[194715,1,"\u38E3"],[194716,1,"\u5F9A"],[194717,1,"\u5FCD"],[194718,1,"\u5FD7"],[194719,1,"\u5FF9"],[194720,1,"\u6081"],[194721,1,"\u393A"],[194722,1,"\u391C"],[194723,1,"\u6094"],[194724,1,"\u{226D4}"],[194725,1,"\u60C7"],[194726,1,"\u6148"],[194727,1,"\u614C"],[194728,1,"\u614E"],[194729,1,"\u614C"],[194730,1,"\u617A"],[194731,1,"\u618E"],[194732,1,"\u61B2"],[194733,1,"\u61A4"],[194734,1,"\u61AF"],[194735,1,"\u61DE"],[194736,1,"\u61F2"],[194737,1,"\u61F6"],[194738,1,"\u6210"],[194739,1,"\u621B"],[194740,1,"\u625D"],[194741,1,"\u62B1"],[194742,1,"\u62D4"],[194743,1,"\u6350"],[194744,1,"\u{22B0C}"],[194745,1,"\u633D"],[194746,1,"\u62FC"],[194747,1,"\u6368"],[194748,1,"\u6383"],[194749,1,"\u63E4"],[194750,1,"\u{22BF1}"],[194751,1,"\u6422"],[194752,1,"\u63C5"],[194753,1,"\u63A9"],[194754,1,"\u3A2E"],[194755,1,"\u6469"],[194756,1,"\u647E"],[194757,1,"\u649D"],[194758,1,"\u6477"],[194759,1,"\u3A6C"],[194760,1,"\u654F"],[194761,1,"\u656C"],[194762,1,"\u{2300A}"],[194763,1,"\u65E3"],[194764,1,"\u66F8"],[194765,1,"\u6649"],[194766,1,"\u3B19"],[194767,1,"\u6691"],[194768,1,"\u3B08"],[194769,1,"\u3AE4"],[194770,1,"\u5192"],[194771,1,"\u5195"],[194772,1,"\u6700"],[194773,1,"\u669C"],[194774,1,"\u80AD"],[194775,1,"\u43D9"],[194776,1,"\u6717"],[194777,1,"\u671B"],[194778,1,"\u6721"],[194779,1,"\u675E"],[194780,1,"\u6753"],[194781,1,"\u{233C3}"],[194782,1,"\u3B49"],[194783,1,"\u67FA"],[194784,1,"\u6785"],[194785,1,"\u6852"],[194786,1,"\u6885"],[194787,1,"\u{2346D}"],[194788,1,"\u688E"],[194789,1,"\u681F"],[194790,1,"\u6914"],[194791,1,"\u3B9D"],[194792,1,"\u6942"],[194793,1,"\u69A3"],[194794,1,"\u69EA"],[194795,1,"\u6AA8"],[194796,1,"\u{236A3}"],[194797,1,"\u6ADB"],[194798,1,"\u3C18"],[194799,1,"\u6B21"],[194800,1,"\u{238A7}"],[194801,1,"\u6B54"],[194802,1,"\u3C4E"],[194803,1,"\u6B72"],[194804,1,"\u6B9F"],[194805,1,"\u6BBA"],[194806,1,"\u6BBB"],[194807,1,"\u{23A8D}"],[194808,1,"\u{21D0B}"],[194809,1,"\u{23AFA}"],[194810,1,"\u6C4E"],[194811,1,"\u{23CBC}"],[194812,1,"\u6CBF"],[194813,1,"\u6CCD"],[194814,1,"\u6C67"],[194815,1,"\u6D16"],[194816,1,"\u6D3E"],[194817,1,"\u6D77"],[194818,1,"\u6D41"],[194819,1,"\u6D69"],[194820,1,"\u6D78"],[194821,1,"\u6D85"],[194822,1,"\u{23D1E}"],[194823,1,"\u6D34"],[194824,1,"\u6E2F"],[194825,1,"\u6E6E"],[194826,1,"\u3D33"],[194827,1,"\u6ECB"],[194828,1,"\u6EC7"],[194829,1,"\u{23ED1}"],[194830,1,"\u6DF9"],[194831,1,"\u6F6E"],[194832,1,"\u{23F5E}"],[194833,1,"\u{23F8E}"],[194834,1,"\u6FC6"],[194835,1,"\u7039"],[194836,1,"\u701E"],[194837,1,"\u701B"],[194838,1,"\u3D96"],[194839,1,"\u704A"],[194840,1,"\u707D"],[194841,1,"\u7077"],[194842,1,"\u70AD"],[194843,1,"\u{20525}"],[194844,1,"\u7145"],[194845,1,"\u{24263}"],[194846,1,"\u719C"],[194847,1,"\u{243AB}"],[194848,1,"\u7228"],[194849,1,"\u7235"],[194850,1,"\u7250"],[194851,1,"\u{24608}"],[194852,1,"\u7280"],[194853,1,"\u7295"],[194854,1,"\u{24735}"],[194855,1,"\u{24814}"],[194856,1,"\u737A"],[194857,1,"\u738B"],[194858,1,"\u3EAC"],[194859,1,"\u73A5"],[[194860,194861],1,"\u3EB8"],[194862,1,"\u7447"],[194863,1,"\u745C"],[194864,1,"\u7471"],[194865,1,"\u7485"],[194866,1,"\u74CA"],[194867,1,"\u3F1B"],[194868,1,"\u7524"],[194869,1,"\u{24C36}"],[194870,1,"\u753E"],[194871,1,"\u{24C92}"],[194872,1,"\u7570"],[194873,1,"\u{2219F}"],[194874,1,"\u7610"],[194875,1,"\u{24FA1}"],[194876,1,"\u{24FB8}"],[194877,1,"\u{25044}"],[194878,1,"\u3FFC"],[194879,1,"\u4008"],[194880,1,"\u76F4"],[194881,1,"\u{250F3}"],[194882,1,"\u{250F2}"],[194883,1,"\u{25119}"],[194884,1,"\u{25133}"],[194885,1,"\u771E"],[[194886,194887],1,"\u771F"],[194888,1,"\u774A"],[194889,1,"\u4039"],[194890,1,"\u778B"],[194891,1,"\u4046"],[194892,1,"\u4096"],[194893,1,"\u{2541D}"],[194894,1,"\u784E"],[194895,1,"\u788C"],[194896,1,"\u78CC"],[194897,1,"\u40E3"],[194898,1,"\u{25626}"],[194899,1,"\u7956"],[194900,1,"\u{2569A}"],[194901,1,"\u{256C5}"],[194902,1,"\u798F"],[194903,1,"\u79EB"],[194904,1,"\u412F"],[194905,1,"\u7A40"],[194906,1,"\u7A4A"],[194907,1,"\u7A4F"],[194908,1,"\u{2597C}"],[[194909,194910],1,"\u{25AA7}"],[194911,1,"\u7AEE"],[194912,1,"\u4202"],[194913,1,"\u{25BAB}"],[194914,1,"\u7BC6"],[194915,1,"\u7BC9"],[194916,1,"\u4227"],[194917,1,"\u{25C80}"],[194918,1,"\u7CD2"],[194919,1,"\u42A0"],[194920,1,"\u7CE8"],[194921,1,"\u7CE3"],[194922,1,"\u7D00"],[194923,1,"\u{25F86}"],[194924,1,"\u7D63"],[194925,1,"\u4301"],[194926,1,"\u7DC7"],[194927,1,"\u7E02"],[194928,1,"\u7E45"],[194929,1,"\u4334"],[194930,1,"\u{26228}"],[194931,1,"\u{26247}"],[194932,1,"\u4359"],[194933,1,"\u{262D9}"],[194934,1,"\u7F7A"],[194935,1,"\u{2633E}"],[194936,1,"\u7F95"],[194937,1,"\u7FFA"],[194938,1,"\u8005"],[194939,1,"\u{264DA}"],[194940,1,"\u{26523}"],[194941,1,"\u8060"],[194942,1,"\u{265A8}"],[194943,1,"\u8070"],[194944,1,"\u{2335F}"],[194945,1,"\u43D5"],[194946,1,"\u80B2"],[194947,1,"\u8103"],[194948,1,"\u440B"],[194949,1,"\u813E"],[194950,1,"\u5AB5"],[194951,1,"\u{267A7}"],[194952,1,"\u{267B5}"],[194953,1,"\u{23393}"],[194954,1,"\u{2339C}"],[194955,1,"\u8201"],[194956,1,"\u8204"],[194957,1,"\u8F9E"],[194958,1,"\u446B"],[194959,1,"\u8291"],[194960,1,"\u828B"],[194961,1,"\u829D"],[194962,1,"\u52B3"],[194963,1,"\u82B1"],[194964,1,"\u82B3"],[194965,1,"\u82BD"],[194966,1,"\u82E6"],[194967,1,"\u{26B3C}"],[194968,1,"\u82E5"],[194969,1,"\u831D"],[194970,1,"\u8363"],[194971,1,"\u83AD"],[194972,1,"\u8323"],[194973,1,"\u83BD"],[194974,1,"\u83E7"],[194975,1,"\u8457"],[194976,1,"\u8353"],[194977,1,"\u83CA"],[194978,1,"\u83CC"],[194979,1,"\u83DC"],[194980,1,"\u{26C36}"],[194981,1,"\u{26D6B}"],[194982,1,"\u{26CD5}"],[194983,1,"\u452B"],[194984,1,"\u84F1"],[194985,1,"\u84F3"],[194986,1,"\u8516"],[194987,1,"\u{273CA}"],[194988,1,"\u8564"],[194989,1,"\u{26F2C}"],[194990,1,"\u455D"],[194991,1,"\u4561"],[194992,1,"\u{26FB1}"],[194993,1,"\u{270D2}"],[194994,1,"\u456B"],[194995,1,"\u8650"],[194996,1,"\u865C"],[194997,1,"\u8667"],[194998,1,"\u8669"],[194999,1,"\u86A9"],[195e3,1,"\u8688"],[195001,1,"\u870E"],[195002,1,"\u86E2"],[195003,1,"\u8779"],[195004,1,"\u8728"],[195005,1,"\u876B"],[195006,1,"\u8786"],[195007,1,"\u45D7"],[195008,1,"\u87E1"],[195009,1,"\u8801"],[195010,1,"\u45F9"],[195011,1,"\u8860"],[195012,1,"\u8863"],[195013,1,"\u{27667}"],[195014,1,"\u88D7"],[195015,1,"\u88DE"],[195016,1,"\u4635"],[195017,1,"\u88FA"],[195018,1,"\u34BB"],[195019,1,"\u{278AE}"],[195020,1,"\u{27966}"],[195021,1,"\u46BE"],[195022,1,"\u46C7"],[195023,1,"\u8AA0"],[195024,1,"\u8AED"],[195025,1,"\u8B8A"],[195026,1,"\u8C55"],[195027,1,"\u{27CA8}"],[195028,1,"\u8CAB"],[195029,1,"\u8CC1"],[195030,1,"\u8D1B"],[195031,1,"\u8D77"],[195032,1,"\u{27F2F}"],[195033,1,"\u{20804}"],[195034,1,"\u8DCB"],[195035,1,"\u8DBC"],[195036,1,"\u8DF0"],[195037,1,"\u{208DE}"],[195038,1,"\u8ED4"],[195039,1,"\u8F38"],[195040,1,"\u{285D2}"],[195041,1,"\u{285ED}"],[195042,1,"\u9094"],[195043,1,"\u90F1"],[195044,1,"\u9111"],[195045,1,"\u{2872E}"],[195046,1,"\u911B"],[195047,1,"\u9238"],[195048,1,"\u92D7"],[195049,1,"\u92D8"],[195050,1,"\u927C"],[195051,1,"\u93F9"],[195052,1,"\u9415"],[195053,1,"\u{28BFA}"],[195054,1,"\u958B"],[195055,1,"\u4995"],[195056,1,"\u95B7"],[195057,1,"\u{28D77}"],[195058,1,"\u49E6"],[195059,1,"\u96C3"],[195060,1,"\u5DB2"],[195061,1,"\u9723"],[195062,1,"\u{29145}"],[195063,1,"\u{2921A}"],[195064,1,"\u4A6E"],[195065,1,"\u4A76"],[195066,1,"\u97E0"],[195067,1,"\u{2940A}"],[195068,1,"\u4AB2"],[195069,1,"\u{29496}"],[[195070,195071],1,"\u980B"],[195072,1,"\u9829"],[195073,1,"\u{295B6}"],[195074,1,"\u98E2"],[195075,1,"\u4B33"],[195076,1,"\u9929"],[195077,1,"\u99A7"],[195078,1,"\u99C2"],[195079,1,"\u99FE"],[195080,1,"\u4BCE"],[195081,1,"\u{29B30}"],[195082,1,"\u9B12"],[195083,1,"\u9C40"],[195084,1,"\u9CFD"],[195085,1,"\u4CCE"],[195086,1,"\u4CED"],[195087,1,"\u9D67"],[195088,1,"\u{2A0CE}"],[195089,1,"\u4CF8"],[195090,1,"\u{2A105}"],[195091,1,"\u{2A20E}"],[195092,1,"\u{2A291}"],[195093,1,"\u9EBB"],[195094,1,"\u4D56"],[195095,1,"\u9EF9"],[195096,1,"\u9EFE"],[195097,1,"\u9F05"],[195098,1,"\u9F0F"],[195099,1,"\u9F16"],[195100,1,"\u9F3B"],[195101,1,"\u{2A600}"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918e3,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var UM=R((Cme,LM)=>{"use strict";LM.exports.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,deviation:6,ignored:7}});var HM=R((Ame,$M)=>{"use strict";var k3=PM(),Zn=xM(),qM=kM(),{STATUS_MAPPING:zs}=UM();function x3(t){return/[^\x00-\x7F]/u.test(t)}function GM(t){let e=0,r=qM.length-1;for(;e<=r;){let n=Math.floor((e+r)/2),o=qM[n],i=Array.isArray(o[0])?o[0][0]:o[0],s=Array.isArray(o[0])?o[0][1]:o[0];if(i<=t&&s>=t)return o.slice(1);i>t?r=n-1:e=n+1}return null}function _ne(t,{transitionalProcessing:e}){let r="";for(let n of t){let[o,i]=GM(n.codePointAt(0));switch(o){case zs.disallowed:r+=n;break;case zs.ignored:break;case zs.mapped:e&&n==="\u1E9E"?r+="ss":r+=i;break;case zs.deviation:e?r+=i:r+=n;break;case zs.valid:r+=n;break}}return r}function wne(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,transitionalProcessing:o,useSTD3ASCIIRules:i,isBidi:s}){if(t.length===0)return!0;if(t.normalize("NFC")!==t)return!1;let u=Array.from(t);if(e&&(u[2]==="-"&&u[3]==="-"||t.startsWith("-")||t.endsWith("-"))||!e&&t.startsWith("xn--")||t.includes(".")||Zn.combiningMarks.test(u[0]))return!1;for(let a of u){let c=a.codePointAt(0),[d]=GM(c);if(o){if(d!==zs.valid)return!1}else if(d!==zs.valid&&d!==zs.deviation)return!1;if(i&&c<=127&&!/^(?:[a-z]|[0-9]|-)$/u.test(a))return!1}if(n){let a=0;for(let[c,d]of u.entries())if(d==="\u200C"||d==="\u200D"){if(c>0){if(Zn.combiningClassVirama.test(u[c-1]))continue;if(d==="\u200C"){let p=u.indexOf("\u200C",c+1),m=p<0?u.slice(a):u.slice(a,p);if(Zn.validZWNJ.test(m.join(""))){a=c+1;continue}}}return!1}}if(r&&s){let a;if(Zn.bidiS1LTR.test(u[0]))a=!1;else if(Zn.bidiS1RTL.test(u[0]))a=!0;else return!1;if(a){if(!Zn.bidiS2.test(t)||!Zn.bidiS3.test(t)||Zn.bidiS4EN.test(t)&&Zn.bidiS4AN.test(t))return!1}else if(!Zn.bidiS5.test(t)||!Zn.bidiS6.test(t))return!1}return!0}function Tne(t){let e=t.map(r=>{if(r.startsWith("xn--"))try{return k3.decode(r.substring(4))}catch{return""}return r}).join(".");return Zn.bidiDomain.test(e)}function VM(t,e){let r=_ne(t,e);r=r.normalize("NFC");let n=r.split("."),o=Tne(n),i=!1;for(let[s,u]of n.entries()){let a=u,c=e.transitionalProcessing;if(a.startsWith("xn--")){if(x3(a)){i=!0;continue}try{a=k3.decode(a.substring(4))}catch{if(!e.ignoreInvalidPunycode){i=!0;continue}}n[s]=a,(a===""||!x3(a))&&(i=!0),c=!1}if(i)continue;wne(a,{...e,transitionalProcessing:c,isBidi:o})||(i=!0)}return{string:n.join("."),error:i}}function bne(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:o=!1,verifyDNSLength:i=!1,transitionalProcessing:s=!1,ignoreInvalidPunycode:u=!1}={}){let a=VM(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:o,transitionalProcessing:s,ignoreInvalidPunycode:u}),c=a.string.split(".");if(c=c.map(d=>{if(x3(d))try{return`xn--${k3.encode(d)}`}catch{a.error=!0}return d}),i){let d=c.join(".").length;(d>253||d===0)&&(a.error=!0);for(let p=0;p<c.length;++p)if(c[p].length>63||c[p].length===0){a.error=!0;break}}return a.error?null:c.join(".")}function vne(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:o=!1,transitionalProcessing:i=!1,ignoreInvalidPunycode:s=!1}={}){let u=VM(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:o,transitionalProcessing:i,ignoreInvalidPunycode:s});return{domain:u.string,error:u.error}}$M.exports={toASCII:bne,toUnicode:vne}});var U3=R((Sme,zM)=>{"use strict";function L3(t){return t>=48&&t<=57}function WM(t){return t>=65&&t<=90||t>=97&&t<=122}function One(t){return WM(t)||L3(t)}function Rne(t){return L3(t)||t>=65&&t<=70||t>=97&&t<=102}zM.exports={isASCIIDigit:L3,isASCIIAlpha:WM,isASCIIAlphanumeric:One,isASCIIHex:Rne}});var fm=R((_me,jM)=>{"use strict";var Dne=new TextEncoder,Ine=new TextDecoder("utf-8",{ignoreBOM:!0});function Mne(t){return Dne.encode(t)}function Nne(t){return Ine.decode(t)}jM.exports={utf8Encode:Mne,utf8DecodeWithoutBOM:Nne}});var hm=R((wme,eN)=>{"use strict";var{isASCIIHex:KM}=U3(),{utf8Encode:YM}=fm();function Ge(t){return t.codePointAt(0)}function Bne(t){let e=t.toString(16).toUpperCase();return e.length===1&&(e=`0${e}`),`%${e}`}function JM(t){let e=new Uint8Array(t.byteLength),r=0;for(let n=0;n<t.byteLength;++n){let o=t[n];if(o!==37)e[r++]=o;else if(o===37&&(!KM(t[n+1])||!KM(t[n+2])))e[r++]=o;else{let i=parseInt(String.fromCodePoint(t[n+1],t[n+2]),16);e[r++]=i,n+=2}}return e.slice(0,r)}function Pne(t){let e=YM(t);return JM(e)}function q3(t){return t<=31||t>126}var Fne=new Set([Ge(" "),Ge('"'),Ge("<"),Ge(">"),Ge("`")]);function xne(t){return q3(t)||Fne.has(t)}var kne=new Set([Ge(" "),Ge('"'),Ge("#"),Ge("<"),Ge(">")]);function G3(t){return q3(t)||kne.has(t)}function Lne(t){return G3(t)||t===Ge("'")}var Une=new Set([Ge("?"),Ge("`"),Ge("{"),Ge("}"),Ge("^")]);function XM(t){return G3(t)||Une.has(t)}var qne=new Set([Ge("/"),Ge(":"),Ge(";"),Ge("="),Ge("@"),Ge("["),Ge("\\"),Ge("]"),Ge("|")]);function QM(t){return XM(t)||qne.has(t)}var Gne=new Set([Ge("$"),Ge("%"),Ge("&"),Ge("+"),Ge(",")]);function Vne(t){return QM(t)||Gne.has(t)}var $ne=new Set([Ge("!"),Ge("'"),Ge("("),Ge(")"),Ge("~")]);function Hne(t){return Vne(t)||$ne.has(t)}function ZM(t,e){let r=YM(t),n="";for(let o of r)e(o)?n+=Bne(o):n+=String.fromCharCode(o);return n}function Wne(t,e){return ZM(String.fromCodePoint(t),e)}function zne(t,e,r=!1){let n="";for(let o of t)r&&o===" "?n+="+":n+=ZM(o,e);return n}eN.exports={isC0ControlPercentEncode:q3,isFragmentPercentEncode:xne,isQueryPercentEncode:G3,isSpecialQueryPercentEncode:Lne,isPathPercentEncode:XM,isUserinfoPercentEncode:QM,isURLEncodedPercentEncode:Hne,percentDecodeString:Pne,percentDecodeBytes:JM,utf8PercentEncodeString:zne,utf8PercentEncodeCodePoint:Wne}});var j3=R((Tme,Ur)=>{"use strict";var jne=HM(),ar=U3(),{utf8DecodeWithoutBOM:Kne}=fm(),{percentDecodeString:Yne,utf8PercentEncodeCodePoint:mm,utf8PercentEncodeString:gm,isC0ControlPercentEncode:oN,isFragmentPercentEncode:Jne,isQueryPercentEncode:Xne,isSpecialQueryPercentEncode:Qne,isPathPercentEncode:Zne,isUserinfoPercentEncode:H3}=hm();function re(t){return t.codePointAt(0)}var iN={ftp:21,file:null,http:80,https:443,ws:80,wss:443},be=Symbol("failure");function tN(t){return[...t].length}function rN(t,e){let r=t[e];return isNaN(r)?void 0:String.fromCodePoint(r)}function nN(t){return t==="."||t.toLowerCase()==="%2e"}function eoe(t){return t=t.toLowerCase(),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"}function toe(t,e){return ar.isASCIIAlpha(t)&&(e===re(":")||e===re("|"))}function sN(t){return t.length===2&&ar.isASCIIAlpha(t.codePointAt(0))&&(t[1]===":"||t[1]==="|")}function roe(t){return t.length===2&&ar.isASCIIAlpha(t.codePointAt(0))&&t[1]===":"}function uN(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function noe(t){return uN(t)||t.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function pm(t){return iN[t]!==void 0}function ur(t){return pm(t.scheme)}function V3(t){return!pm(t.scheme)}function aN(t){return iN[t]}function cN(t){if(t==="")return be;let e=10;if(t.length>=2&&t.charAt(0)==="0"&&t.charAt(1).toLowerCase()==="x"?(t=t.substring(2),e=16):t.length>=2&&t.charAt(0)==="0"&&(t=t.substring(1),e=8),t==="")return 0;let r=/[^0-7]/u;return e===10&&(r=/[^0-9]/u),e===16&&(r=/[^0-9A-Fa-f]/u),r.test(t)?be:parseInt(t,e)}function ooe(t){let e=t.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return be;let r=[];for(let i of e){let s=cN(i);if(s===be)return be;r.push(s)}for(let i=0;i<r.length-1;++i)if(r[i]>255)return be;if(r[r.length-1]>=256**(5-r.length))return be;let n=r.pop(),o=0;for(let i of r)n+=i*256**(3-o),++o;return n}function ioe(t){let e="",r=t;for(let n=1;n<=4;++n)e=String(r%256)+e,n!==4&&(e=`.${e}`),r=Math.floor(r/256);return e}function soe(t){let e=[0,0,0,0,0,0,0,0],r=0,n=null,o=0;if(t=Array.from(t,i=>i.codePointAt(0)),t[o]===re(":")){if(t[o+1]!==re(":"))return be;o+=2,++r,n=r}for(;o<t.length;){if(r===8)return be;if(t[o]===re(":")){if(n!==null)return be;++o,++r,n=r;continue}let i=0,s=0;for(;s<4&&ar.isASCIIHex(t[o]);)i=i*16+parseInt(rN(t,o),16),++o,++s;if(t[o]===re(".")){if(s===0||(o-=s,r>6))return be;let u=0;for(;t[o]!==void 0;){let a=null;if(u>0)if(t[o]===re(".")&&u<4)++o;else return be;if(!ar.isASCIIDigit(t[o]))return be;for(;ar.isASCIIDigit(t[o]);){let c=parseInt(rN(t,o));if(a===null)a=c;else{if(a===0)return be;a=a*10+c}if(a>255)return be;++o}e[r]=e[r]*256+a,++u,(u===2||u===4)&&++r}if(u!==4)return be;break}else if(t[o]===re(":")){if(++o,t[o]===void 0)return be}else if(t[o]!==void 0)return be;e[r]=i,++r}if(n!==null){let i=r-n;for(r=7;r!==0&&i>0;){let s=e[n+i-1];e[n+i-1]=e[r],e[r]=s,--r,--i}}else if(n===null&&r!==8)return be;return e}function uoe(t){let e="",r=loe(t),n=!1;for(let o=0;o<=7;++o)if(!(n&&t[o]===0)){if(n&&(n=!1),r===o){e+=o===0?"::":":",n=!0;continue}e+=t[o].toString(16),o!==7&&(e+=":")}return e}function $3(t,e=!1){if(t[0]==="[")return t[t.length-1]!=="]"?be:soe(t.substring(1,t.length-1));if(e)return coe(t);let r=Kne(Yne(t)),n=doe(r);return n===be?be:aoe(n)?ooe(n):n}function aoe(t){let e=t.split(".");if(e[e.length-1]===""){if(e.length===1)return!1;e.pop()}let r=e[e.length-1];return!!(cN(r)!==be||/^[0-9]+$/u.test(r))}function coe(t){return uN(t)?be:gm(t,oN)}function loe(t){let e=null,r=1,n=null,o=0;for(let i=0;i<t.length;++i)t[i]!==0?(o>r&&(e=n,r=o),n=null,o=0):(n===null&&(n=i),++o);return o>r?n:e}function W3(t){return typeof t=="number"?ioe(t):t instanceof Array?`[${uoe(t)}]`:t}function doe(t,e=!1){let r=jne.toASCII(t,{checkHyphens:e,checkBidi:!0,checkJoiners:!0,useSTD3ASCIIRules:e,transitionalProcessing:!1,verifyDNSLength:e,ignoreInvalidPunycode:!1});return r===null||!e&&(r===""||noe(r))?be:r}function foe(t){let e=0,r=t.length;for(;e<r&&!(t.charCodeAt(e)>32);++e);for(;r>e&&!(t.charCodeAt(r-1)>32);--r);return t.substring(e,r)}function hoe(t){return t.replace(/\u0009|\u000A|\u000D/ug,"")}function lN(t){let{path:e}=t;e.length!==0&&(t.scheme==="file"&&e.length===1&&moe(e[0])||e.pop())}function dN(t){return t.username!==""||t.password!==""}function poe(t){return t.host===null||t.host===""||t.scheme==="file"}function _d(t){return typeof t.path=="string"}function moe(t){return/^[A-Za-z]:$/u.test(t)}function Rt(t,e,r,n,o){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=r||"utf-8",this.stateOverride=o,this.url=n,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let s=foe(this.input);s!==this.input&&(this.parseError=!0),this.input=s}let i=hoe(this.input);for(i!==this.input&&(this.parseError=!0),this.input=i,this.state=o||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,s=>s.codePointAt(0));this.pointer<=this.input.length;++this.pointer){let s=this.input[this.pointer],u=isNaN(s)?void 0:String.fromCodePoint(s),a=this[`parse ${this.state}`](s,u);if(a){if(a===be){this.failure=!0;break}}else break}}Rt.prototype["parse scheme start"]=function(e,r){if(ar.isASCIIAlpha(e))this.buffer+=r.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,be;return!0};Rt.prototype["parse scheme"]=function(e,r){if(ar.isASCIIAlphanumeric(e)||e===re("+")||e===re("-")||e===re("."))this.buffer+=r.toLowerCase();else if(e===re(":")){if(this.stateOverride&&(ur(this.url)&&!pm(this.buffer)||!ur(this.url)&&pm(this.buffer)||(dN(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&this.url.host===""))return!1;if(this.url.scheme=this.buffer,this.stateOverride)return this.url.port===aN(this.url.scheme)&&(this.url.port=null),!1;this.buffer="",this.url.scheme==="file"?((this.input[this.pointer+1]!==re("/")||this.input[this.pointer+2]!==re("/"))&&(this.parseError=!0),this.state="file"):ur(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":ur(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===re("/")?(this.state="path or authority",++this.pointer):(this.url.path="",this.state="opaque path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,be;return!0};Rt.prototype["parse no scheme"]=function(e){return this.base===null||_d(this.base)&&e!==re("#")?be:(_d(this.base)&&e===re("#")?(this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};Rt.prototype["parse special relative or authority"]=function(e){return e===re("/")&&this.input[this.pointer+1]===re("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};Rt.prototype["parse path or authority"]=function(e){return e===re("/")?this.state="authority":(this.state="path",--this.pointer),!0};Rt.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,e===re("/")?this.state="relative slash":ur(this.url)&&e===re("\\")?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===re("?")?(this.url.query="",this.state="query"):e===re("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer)),!0};Rt.prototype["parse relative slash"]=function(e){return ur(this.url)&&(e===re("/")||e===re("\\"))?(e===re("\\")&&(this.parseError=!0),this.state="special authority ignore slashes"):e===re("/")?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};Rt.prototype["parse special authority slashes"]=function(e){return e===re("/")&&this.input[this.pointer+1]===re("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};Rt.prototype["parse special authority ignore slashes"]=function(e){return e!==re("/")&&e!==re("\\")?(this.state="authority",--this.pointer):this.parseError=!0,!0};Rt.prototype["parse authority"]=function(e,r){if(e===re("@")){this.parseError=!0,this.atFlag&&(this.buffer=`%40${this.buffer}`),this.atFlag=!0;let n=tN(this.buffer);for(let o=0;o<n;++o){let i=this.buffer.codePointAt(o);if(i===re(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let s=mm(i,H3);this.passwordTokenSeenFlag?this.url.password+=s:this.url.username+=s}this.buffer=""}else if(isNaN(e)||e===re("/")||e===re("?")||e===re("#")||ur(this.url)&&e===re("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,be;this.pointer-=tN(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=r;return!0};Rt.prototype["parse hostname"]=Rt.prototype["parse host"]=function(e,r){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===re(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,be;if(this.stateOverride==="hostname")return!1;let n=$3(this.buffer,V3(this.url));if(n===be)return be;this.url.host=n,this.buffer="",this.state="port"}else if(isNaN(e)||e===re("/")||e===re("?")||e===re("#")||ur(this.url)&&e===re("\\")){if(--this.pointer,ur(this.url)&&this.buffer==="")return this.parseError=!0,be;if(this.stateOverride&&this.buffer===""&&(dN(this.url)||this.url.port!==null))return this.parseError=!0,!1;let n=$3(this.buffer,V3(this.url));if(n===be)return be;if(this.url.host=n,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===re("[")?this.arrFlag=!0:e===re("]")&&(this.arrFlag=!1),this.buffer+=r;return!0};Rt.prototype["parse port"]=function(e,r){if(ar.isASCIIDigit(e))this.buffer+=r;else if(isNaN(e)||e===re("/")||e===re("?")||e===re("#")||ur(this.url)&&e===re("\\")||this.stateOverride){if(this.buffer!==""){let n=parseInt(this.buffer);if(n>2**16-1)return this.parseError=!0,be;this.url.port=n===aN(this.url.scheme)?null:n,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,be;return!0};var goe=new Set([re("/"),re("\\"),re("?"),re("#")]);function fN(t,e){let r=t.length-e;return r>=2&&toe(t[e],t[e+1])&&(r===2||goe.has(t[e+2]))}Rt.prototype["parse file"]=function(e){return this.url.scheme="file",this.url.host="",e===re("/")||e===re("\\")?(e===re("\\")&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===re("?")?(this.url.query="",this.state="query"):e===re("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,fN(this.input,this.pointer)?(this.parseError=!0,this.url.path=[]):lN(this.url),this.state="path",--this.pointer)):(this.state="path",--this.pointer),!0};Rt.prototype["parse file slash"]=function(e){return e===re("/")||e===re("\\")?(e===re("\\")&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(!fN(this.input,this.pointer)&&roe(this.base.path[0])&&this.url.path.push(this.base.path[0]),this.url.host=this.base.host),this.state="path",--this.pointer),!0};Rt.prototype["parse file host"]=function(e,r){if(isNaN(e)||e===re("/")||e===re("\\")||e===re("?")||e===re("#"))if(--this.pointer,!this.stateOverride&&sN(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let n=$3(this.buffer,V3(this.url));if(n===be)return be;if(n==="localhost"&&(n=""),this.url.host=n,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=r;return!0};Rt.prototype["parse path start"]=function(e){return ur(this.url)?(e===re("\\")&&(this.parseError=!0),this.state="path",e!==re("/")&&e!==re("\\")&&--this.pointer):!this.stateOverride&&e===re("?")?(this.url.query="",this.state="query"):!this.stateOverride&&e===re("#")?(this.url.fragment="",this.state="fragment"):e!==void 0?(this.state="path",e!==re("/")&&--this.pointer):this.stateOverride&&this.url.host===null&&this.url.path.push(""),!0};Rt.prototype["parse path"]=function(e){return isNaN(e)||e===re("/")||ur(this.url)&&e===re("\\")||!this.stateOverride&&(e===re("?")||e===re("#"))?(ur(this.url)&&e===re("\\")&&(this.parseError=!0),eoe(this.buffer)?(lN(this.url),e!==re("/")&&!(ur(this.url)&&e===re("\\"))&&this.url.path.push("")):nN(this.buffer)&&e!==re("/")&&!(ur(this.url)&&e===re("\\"))?this.url.path.push(""):nN(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&sN(this.buffer)&&(this.buffer=`${this.buffer[0]}:`),this.url.path.push(this.buffer)),this.buffer="",e===re("?")&&(this.url.query="",this.state="query"),e===re("#")&&(this.url.fragment="",this.state="fragment")):(e===re("%")&&(!ar.isASCIIHex(this.input[this.pointer+1])||!ar.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=mm(e,Zne)),!0};Rt.prototype["parse opaque path"]=function(e){if(e===re("?"))this.url.query="",this.state="query";else if(e===re("#"))this.url.fragment="",this.state="fragment";else if(e===re(" ")){let r=this.input[this.pointer+1];r===re("?")||r===re("#")?this.url.path+="%20":this.url.path+=" "}else!isNaN(e)&&e!==re("%")&&(this.parseError=!0),e===re("%")&&(!ar.isASCIIHex(this.input[this.pointer+1])||!ar.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path+=mm(e,oN));return!0};Rt.prototype["parse query"]=function(e,r){if((!ur(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8"),!this.stateOverride&&e===re("#")||isNaN(e)){let n=ur(this.url)?Qne:Xne;this.url.query+=gm(this.buffer,n),this.buffer="",e===re("#")&&(this.url.fragment="",this.state="fragment")}else isNaN(e)||(e===re("%")&&(!ar.isASCIIHex(this.input[this.pointer+1])||!ar.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=r);return!0};Rt.prototype["parse fragment"]=function(e){return isNaN(e)||(e===re("%")&&(!ar.isASCIIHex(this.input[this.pointer+1])||!ar.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=mm(e,Jne)),!0};function Eoe(t,e){let r=`${t.scheme}:`;return t.host!==null&&(r+="//",(t.username!==""||t.password!=="")&&(r+=t.username,t.password!==""&&(r+=`:${t.password}`),r+="@"),r+=W3(t.host),t.port!==null&&(r+=`:${t.port}`)),t.host===null&&!_d(t)&&t.path.length>1&&t.path[0]===""&&(r+="/."),r+=z3(t),t.query!==null&&(r+=`?${t.query}`),!e&&t.fragment!==null&&(r+=`#${t.fragment}`),r}function yoe(t){let e=`${t.scheme}://`;return e+=W3(t.host),t.port!==null&&(e+=`:${t.port}`),e}function z3(t){if(_d(t))return t.path;let e="";for(let r of t.path)e+=`/${r}`;return e}Ur.exports.serializeURL=Eoe;Ur.exports.serializePath=z3;Ur.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":{let e=Ur.exports.parseURL(z3(t));return e===null||e.scheme!=="http"&&e.scheme!=="https"?"null":Ur.exports.serializeURLOrigin(e)}case"ftp":case"http":case"https":case"ws":case"wss":return yoe({scheme:t.scheme,host:t.host,port:t.port});case"file":return"null";default:return"null"}};Ur.exports.basicURLParse=function(t,e){e===void 0&&(e={});let r=new Rt(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return r.failure?null:r.url};Ur.exports.setTheUsername=function(t,e){t.username=gm(e,H3)};Ur.exports.setThePassword=function(t,e){t.password=gm(e,H3)};Ur.exports.serializeHost=W3;Ur.exports.cannotHaveAUsernamePasswordPort=poe;Ur.exports.hasAnOpaquePath=_d;Ur.exports.serializeInteger=function(t){return String(t)};Ur.exports.parseURL=function(t,e){return e===void 0&&(e={}),Ur.exports.basicURLParse(t,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var K3=R((bme,CN)=>{"use strict";var{utf8Encode:Coe,utf8DecodeWithoutBOM:hN}=fm(),{percentDecodeBytes:pN,utf8PercentEncodeString:mN,isURLEncodedPercentEncode:gN}=hm();function EN(t){return t.codePointAt(0)}function Aoe(t){let e=woe(t,EN("&")),r=[];for(let n of e){if(n.length===0)continue;let o,i,s=n.indexOf(EN("="));s>=0?(o=n.slice(0,s),i=n.slice(s+1)):(o=n,i=new Uint8Array(0)),o=yN(o,43,32),i=yN(i,43,32);let u=hN(pN(o)),a=hN(pN(i));r.push([u,a])}return r}function Soe(t){return Aoe(Coe(t))}function _oe(t){let e="";for(let[r,n]of t.entries()){let o=mN(n[0],gN,!0),i=mN(n[1],gN,!0);r!==0&&(e+="&"),e+=`${o}=${i}`}return e}function woe(t,e){let r=[],n=0,o=t.indexOf(e);for(;o>=0;)r.push(t.slice(n,o)),n=o+1,o=t.indexOf(e,n);return n!==t.length&&r.push(t.slice(n)),r}function yN(t,e,r){let n=t.indexOf(e);for(;n>=0;)t[n]=r,n=t.indexOf(e,n+1);return t}CN.exports={parseUrlencodedString:Soe,serializeUrlencoded:_oe}});var _N=R(SN=>{"use strict";var AN=cm(),Em=dm();SN.convert=(t,e,{context:r="The provided value"}={})=>{if(typeof e!="function")throw new t.TypeError(r+" is not a function");function n(...o){let i=Em.tryWrapperForImpl(this),s;for(let u=0;u<o.length;u++)o[u]=Em.tryWrapperForImpl(o[u]);return s=Reflect.apply(e,i,o),s=AN.any(s,{context:r,globals:t}),s}return n.construct=(...o)=>{for(let s=0;s<o.length;s++)o[s]=Em.tryWrapperForImpl(o[s]);let i=Reflect.construct(e,o);return i=AN.any(i,{context:r,globals:t}),i},n[Em.wrapperSymbol]=e,n.objectReference=e,n}});var TN=R(wN=>{"use strict";var Y3=K3();wN.implementation=class{constructor(e,r,{doNotStripQMark:n=!1}){let o=r[0];if(this._list=[],this._url=null,!n&&typeof o=="string"&&o[0]==="?"&&(o=o.slice(1)),Array.isArray(o))for(let i of o){if(i.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([i[0],i[1]])}else if(typeof o=="object"&&Object.getPrototypeOf(o)===null)for(let i of Object.keys(o)){let s=o[i];this._list.push([i,s])}else this._list=Y3.parseUrlencodedString(o)}_updateSteps(){if(this._url!==null){let e=Y3.serializeUrlencoded(this._list);e===""&&(e=null),this._url._url.query=e}}get size(){return this._list.length}append(e,r){this._list.push([e,r]),this._updateSteps()}delete(e,r){let n=0;for(;n<this._list.length;)this._list[n][0]===e&&(r===void 0||this._list[n][1]===r)?this._list.splice(n,1):n++;this._updateSteps()}get(e){for(let r of this._list)if(r[0]===e)return r[1];return null}getAll(e){let r=[];for(let n of this._list)n[0]===e&&r.push(n[1]);return r}has(e,r){for(let n of this._list)if(n[0]===e&&(r===void 0||n[1]===r))return!0;return!1}set(e,r){let n=!1,o=0;for(;o<this._list.length;)this._list[o][0]===e?n?this._list.splice(o,1):(n=!0,this._list[o][1]=r,o++):o++;n||this._list.push([e,r]),this._updateSteps()}sort(){this._list.sort((e,r)=>e[0]<r[0]?-1:e[0]>r[0]?1:0),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return Y3.serializeUrlencoded(this._list)}}});var J3=R(We=>{"use strict";var Xr=cm(),ct=dm(),Toe=_N(),bN=ct.newObjectInRealm,Bt=ct.implSymbol,ON=ct.ctorRegistrySymbol,vN="URLSearchParams";We.is=t=>ct.isObject(t)&&ct.hasOwn(t,Bt)&&t[Bt]instanceof js.implementation;We.isImpl=t=>ct.isObject(t)&&t instanceof js.implementation;We.convert=(t,e,{context:r="The provided value"}={})=>{if(We.is(e))return ct.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URLSearchParams'.`)};We.createDefaultIterator=(t,e,r)=>{let o=t[ON]["URLSearchParams Iterator"],i=Object.create(o);return Object.defineProperty(i,ct.iterInternalSymbol,{value:{target:e,kind:r,index:0},configurable:!0}),i};function RN(t,e){let r;return e!==void 0&&(r=e.prototype),ct.isObject(r)||(r=t[ON].URLSearchParams.prototype),Object.create(r)}We.create=(t,e,r)=>{let n=RN(t);return We.setup(n,t,e,r)};We.createImpl=(t,e,r)=>{let n=We.create(t,e,r);return ct.implForWrapper(n)};We._internalSetup=(t,e)=>{};We.setup=(t,e,r=[],n={})=>(n.wrapper=t,We._internalSetup(t,e),Object.defineProperty(t,Bt,{value:new js.implementation(e,r,n),configurable:!0}),t[Bt][ct.wrapperSymbol]=t,js.init&&js.init(t[Bt]),t);We.new=(t,e)=>{let r=RN(t,e);return We._internalSetup(r,t),Object.defineProperty(r,Bt,{value:Object.create(js.implementation.prototype),configurable:!0}),r[Bt][ct.wrapperSymbol]=r,js.init&&js.init(r[Bt]),r[Bt]};var boe=new Set(["Window","Worker"]);We.install=(t,e)=>{if(!e.some(o=>boe.has(o)))return;let r=ct.initCtorRegistry(t);class n{constructor(){let i=[];{let s=arguments[0];if(s!==void 0)if(ct.isObject(s))if(s[Symbol.iterator]!==void 0)if(ct.isObject(s)){let u=[],a=s;for(let c of a){if(ct.isObject(c)){let d=[],p=c;for(let m of p)m=Xr.USVString(m,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:t}),d.push(m);c=d}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");u.push(c)}s=u}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else if(ct.isObject(s)){let u=Object.create(null);for(let a of Reflect.ownKeys(s)){let c=Object.getOwnPropertyDescriptor(s,a);if(c&&c.enumerable){let d=a;d=Xr.USVString(d,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:t});let p=s[a];p=Xr.USVString(p,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:t}),u[d]=p}}s=u}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else s=Xr.USVString(s,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:t});else s="";i.push(s)}return We.setup(Object.create(new.target.prototype),t,i)}append(i,s){let u=this!==null&&this!==void 0?this:t;if(!We.is(u))throw new t.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let a=[];{let c=arguments[0];c=Xr.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:t}),a.push(c)}{let c=arguments[1];c=Xr.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:t}),a.push(c)}return ct.tryWrapperForImpl(u[Bt].append(...a))}delete(i){let s=this!==null&&this!==void 0?this:t;if(!We.is(s))throw new t.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let u=[];{let a=arguments[0];a=Xr.USVString(a,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:t}),u.push(a)}{let a=arguments[1];a!==void 0&&(a=Xr.USVString(a,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:t})),u.push(a)}return ct.tryWrapperForImpl(s[Bt].delete(...u))}get(i){let s=this!==null&&this!==void 0?this:t;if(!We.is(s))throw new t.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let u=[];{let a=arguments[0];a=Xr.USVString(a,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:t}),u.push(a)}return s[Bt].get(...u)}getAll(i){let s=this!==null&&this!==void 0?this:t;if(!We.is(s))throw new t.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let u=[];{let a=arguments[0];a=Xr.USVString(a,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:t}),u.push(a)}return ct.tryWrapperForImpl(s[Bt].getAll(...u))}has(i){let s=this!==null&&this!==void 0?this:t;if(!We.is(s))throw new t.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let u=[];{let a=arguments[0];a=Xr.USVString(a,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:t}),u.push(a)}{let a=arguments[1];a!==void 0&&(a=Xr.USVString(a,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:t})),u.push(a)}return s[Bt].has(...u)}set(i,s){let u=this!==null&&this!==void 0?this:t;if(!We.is(u))throw new t.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let a=[];{let c=arguments[0];c=Xr.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:t}),a.push(c)}{let c=arguments[1];c=Xr.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:t}),a.push(c)}return ct.tryWrapperForImpl(u[Bt].set(...a))}sort(){let i=this!==null&&this!==void 0?this:t;if(!We.is(i))throw new t.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return ct.tryWrapperForImpl(i[Bt].sort())}toString(){let i=this!==null&&this!==void 0?this:t;if(!We.is(i))throw new t.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return i[Bt].toString()}keys(){if(!We.is(this))throw new t.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return We.createDefaultIterator(t,this,"key")}values(){if(!We.is(this))throw new t.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return We.createDefaultIterator(t,this,"value")}entries(){if(!We.is(this))throw new t.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return We.createDefaultIterator(t,this,"key+value")}forEach(i){if(!We.is(this))throw new t.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");i=Toe.convert(t,i,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let s=arguments[1],u=Array.from(this[Bt]),a=0;for(;a<u.length;){let[c,d]=u[a].map(ct.tryWrapperForImpl);i.call(s,d,c,this),u=Array.from(this[Bt]),a++}}get size(){let i=this!==null&&this!==void 0?this:t;if(!We.is(i))throw new t.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return i[Bt].size}}Object.defineProperties(n.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:n.prototype.entries,configurable:!0,writable:!0}}),r[vN]=n,r["URLSearchParams Iterator"]=Object.create(r["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),ct.define(r["URLSearchParams Iterator"],{next(){let o=this&&this[ct.iterInternalSymbol];if(!o)throw new t.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:i,kind:s,index:u}=o,a=Array.from(i[Bt]),c=a.length;if(u>=c)return bN(t,{value:void 0,done:!0});let d=a[u];return o.index=u+1,bN(t,ct.iteratorResult(d.map(ct.tryWrapperForImpl),s))}}),Object.defineProperty(t,vN,{configurable:!0,writable:!0,value:n})};var js=TN()});var NN=R(MN=>{"use strict";var st=j3(),DN=K3(),voe=J3();MN.implementation=class IN{constructor(e,[r,n]){let o=null;if(n!==void 0&&(o=st.basicURLParse(n),o===null))throw new TypeError(`Invalid base URL: ${n}`);let i=st.basicURLParse(r,{baseURL:o});if(i===null)throw new TypeError(`Invalid URL: ${r}`);let s=i.query!==null?i.query:"";this._url=i,this._query=voe.createImpl(e,[s],{doNotStripQMark:!0}),this._query._url=this}static parse(e,r,n){try{return new IN(e,[r,n])}catch{return null}}static canParse(e,r){let n=null;return!(r!==void 0&&(n=st.basicURLParse(r),n===null)||st.basicURLParse(e,{baseURL:n})===null)}get href(){return st.serializeURL(this._url)}set href(e){let r=st.basicURLParse(e);if(r===null)throw new TypeError(`Invalid URL: ${e}`);this._url=r,this._query._list.splice(0);let{query:n}=r;n!==null&&(this._query._list=DN.parseUrlencodedString(n))}get origin(){return st.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(e){st.basicURLParse(`${e}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){st.cannotHaveAUsernamePasswordPort(this._url)||st.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){st.cannotHaveAUsernamePasswordPort(this._url)||st.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?st.serializeHost(e.host):`${st.serializeHost(e.host)}:${st.serializeInteger(e.port)}`}set host(e){st.hasAnOpaquePath(this._url)||st.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":st.serializeHost(this._url.host)}set hostname(e){st.hasAnOpaquePath(this._url)||st.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":st.serializeInteger(this._url.port)}set port(e){st.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:st.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return st.serializePath(this._url)}set pathname(e){st.hasAnOpaquePath(this._url)||(this._url.path=[],st.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":`?${this._url.query}`}set search(e){let r=this._url;if(e===""){r.query=null,this._query._list=[];return}let n=e[0]==="?"?e.substring(1):e;r.query="",st.basicURLParse(n,{url:r,stateOverride:"query"}),this._query._list=DN.parseUrlencodedString(n)}get searchParams(){return this._query}get hash(){return this._url.fragment===null||this._url.fragment===""?"":`#${this._url.fragment}`}set hash(e){if(e===""){this._url.fragment=null;return}let r=e[0]==="#"?e.substring(1):e;this._url.fragment="",st.basicURLParse(r,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var FN=R(ve=>{"use strict";var wr=cm(),Qr=dm(),ze=Qr.implSymbol,Ooe=Qr.ctorRegistrySymbol,BN="URL";ve.is=t=>Qr.isObject(t)&&Qr.hasOwn(t,ze)&&t[ze]instanceof hi.implementation;ve.isImpl=t=>Qr.isObject(t)&&t instanceof hi.implementation;ve.convert=(t,e,{context:r="The provided value"}={})=>{if(ve.is(e))return Qr.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URL'.`)};function PN(t,e){let r;return e!==void 0&&(r=e.prototype),Qr.isObject(r)||(r=t[Ooe].URL.prototype),Object.create(r)}ve.create=(t,e,r)=>{let n=PN(t);return ve.setup(n,t,e,r)};ve.createImpl=(t,e,r)=>{let n=ve.create(t,e,r);return Qr.implForWrapper(n)};ve._internalSetup=(t,e)=>{};ve.setup=(t,e,r=[],n={})=>(n.wrapper=t,ve._internalSetup(t,e),Object.defineProperty(t,ze,{value:new hi.implementation(e,r,n),configurable:!0}),t[ze][Qr.wrapperSymbol]=t,hi.init&&hi.init(t[ze]),t);ve.new=(t,e)=>{let r=PN(t,e);return ve._internalSetup(r,t),Object.defineProperty(r,ze,{value:Object.create(hi.implementation.prototype),configurable:!0}),r[ze][Qr.wrapperSymbol]=r,hi.init&&hi.init(r[ze]),r[ze]};var Roe=new Set(["Window","Worker"]);ve.install=(t,e)=>{if(!e.some(o=>Roe.has(o)))return;let r=Qr.initCtorRegistry(t);class n{constructor(i){if(arguments.length<1)throw new t.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let s=[];{let u=arguments[0];u=wr.USVString(u,{context:"Failed to construct 'URL': parameter 1",globals:t}),s.push(u)}{let u=arguments[1];u!==void 0&&(u=wr.USVString(u,{context:"Failed to construct 'URL': parameter 2",globals:t})),s.push(u)}return ve.setup(Object.create(new.target.prototype),t,s)}toJSON(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return i[ze].toJSON()}get href(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'get href' called on an object that is not a valid instance of URL.");return i[ze].href}set href(i){let s=this!==null&&this!==void 0?this:t;if(!ve.is(s))throw new t.TypeError("'set href' called on an object that is not a valid instance of URL.");i=wr.USVString(i,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:t}),s[ze].href=i}toString(){let i=this;if(!ve.is(i))throw new t.TypeError("'toString' called on an object that is not a valid instance of URL.");return i[ze].href}get origin(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'get origin' called on an object that is not a valid instance of URL.");return i[ze].origin}get protocol(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return i[ze].protocol}set protocol(i){let s=this!==null&&this!==void 0?this:t;if(!ve.is(s))throw new t.TypeError("'set protocol' called on an object that is not a valid instance of URL.");i=wr.USVString(i,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:t}),s[ze].protocol=i}get username(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'get username' called on an object that is not a valid instance of URL.");return i[ze].username}set username(i){let s=this!==null&&this!==void 0?this:t;if(!ve.is(s))throw new t.TypeError("'set username' called on an object that is not a valid instance of URL.");i=wr.USVString(i,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:t}),s[ze].username=i}get password(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'get password' called on an object that is not a valid instance of URL.");return i[ze].password}set password(i){let s=this!==null&&this!==void 0?this:t;if(!ve.is(s))throw new t.TypeError("'set password' called on an object that is not a valid instance of URL.");i=wr.USVString(i,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:t}),s[ze].password=i}get host(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'get host' called on an object that is not a valid instance of URL.");return i[ze].host}set host(i){let s=this!==null&&this!==void 0?this:t;if(!ve.is(s))throw new t.TypeError("'set host' called on an object that is not a valid instance of URL.");i=wr.USVString(i,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:t}),s[ze].host=i}get hostname(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return i[ze].hostname}set hostname(i){let s=this!==null&&this!==void 0?this:t;if(!ve.is(s))throw new t.TypeError("'set hostname' called on an object that is not a valid instance of URL.");i=wr.USVString(i,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:t}),s[ze].hostname=i}get port(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'get port' called on an object that is not a valid instance of URL.");return i[ze].port}set port(i){let s=this!==null&&this!==void 0?this:t;if(!ve.is(s))throw new t.TypeError("'set port' called on an object that is not a valid instance of URL.");i=wr.USVString(i,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:t}),s[ze].port=i}get pathname(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return i[ze].pathname}set pathname(i){let s=this!==null&&this!==void 0?this:t;if(!ve.is(s))throw new t.TypeError("'set pathname' called on an object that is not a valid instance of URL.");i=wr.USVString(i,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:t}),s[ze].pathname=i}get search(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'get search' called on an object that is not a valid instance of URL.");return i[ze].search}set search(i){let s=this!==null&&this!==void 0?this:t;if(!ve.is(s))throw new t.TypeError("'set search' called on an object that is not a valid instance of URL.");i=wr.USVString(i,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:t}),s[ze].search=i}get searchParams(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return Qr.getSameObject(this,"searchParams",()=>Qr.tryWrapperForImpl(i[ze].searchParams))}get hash(){let i=this!==null&&this!==void 0?this:t;if(!ve.is(i))throw new t.TypeError("'get hash' called on an object that is not a valid instance of URL.");return i[ze].hash}set hash(i){let s=this!==null&&this!==void 0?this:t;if(!ve.is(s))throw new t.TypeError("'set hash' called on an object that is not a valid instance of URL.");i=wr.USVString(i,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:t}),s[ze].hash=i}static parse(i){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let s=[];{let u=arguments[0];u=wr.USVString(u,{context:"Failed to execute 'parse' on 'URL': parameter 1",globals:t}),s.push(u)}{let u=arguments[1];u!==void 0&&(u=wr.USVString(u,{context:"Failed to execute 'parse' on 'URL': parameter 2",globals:t})),s.push(u)}return Qr.tryWrapperForImpl(hi.implementation.parse(t,...s))}static canParse(i){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let s=[];{let u=arguments[0];u=wr.USVString(u,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:t}),s.push(u)}{let u=arguments[1];u!==void 0&&(u=wr.USVString(u,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:t})),s.push(u)}return hi.implementation.canParse(...s)}}Object.defineProperties(n.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(n,{parse:{enumerable:!0},canParse:{enumerable:!0}}),r[BN]=n,Object.defineProperty(t,BN,{configurable:!0,writable:!0,value:n}),e.includes("Window")&&Object.defineProperty(t,"webkitURL",{configurable:!0,writable:!0,value:n})};var hi=NN()});var xN=R(X3=>{"use strict";var Doe=FN(),Ioe=J3();X3.URL=Doe;X3.URLSearchParams=Ioe});var LN=R(Tr=>{"use strict";var{URL:Moe,URLSearchParams:Noe}=xN(),ko=j3(),kN=hm(),ym={Array,Object,Promise,String,TypeError};Moe.install(ym,["Window"]);Noe.install(ym,["Window"]);Tr.URL=ym.URL;Tr.URLSearchParams=ym.URLSearchParams;Tr.parseURL=ko.parseURL;Tr.basicURLParse=ko.basicURLParse;Tr.serializeURL=ko.serializeURL;Tr.serializePath=ko.serializePath;Tr.serializeHost=ko.serializeHost;Tr.serializeInteger=ko.serializeInteger;Tr.serializeURLOrigin=ko.serializeURLOrigin;Tr.setTheUsername=ko.setTheUsername;Tr.setThePassword=ko.setThePassword;Tr.cannotHaveAUsernamePasswordPort=ko.cannotHaveAUsernamePasswordPort;Tr.hasAnOpaquePath=ko.hasAnOpaquePath;Tr.percentDecodeString=kN.percentDecodeString;Tr.percentDecodeBytes=kN.percentDecodeBytes});var qN=R(eo=>{"use strict";var Boe=eo&&eo.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Poe=eo&&eo.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Foe=eo&&eo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Boe(e,t,r);return Poe(e,t),e};Object.defineProperty(eo,"__esModule",{value:!0});eo.redactConnectionString=eo.redactValidConnectionString=void 0;var UN=Foe(Q3());function xoe(t,e){var r,n;let o=t.clone(),i=(r=e?.replacementString)!==null&&r!==void 0?r:"_credentials_",s=(n=e?.redactUsernames)!==null&&n!==void 0?n:!0;if((o.username||o.password)&&s?(o.username=i,o.password=""):o.password&&(o.password=i),o.searchParams.has("authMechanismProperties")){let u=new UN.CommaAndColonSeparatedRecord(o.searchParams.get("authMechanismProperties"));u.get("AWS_SESSION_TOKEN")&&(u.set("AWS_SESSION_TOKEN",i),o.searchParams.set("authMechanismProperties",u.toString()))}return o.searchParams.has("tlsCertificateKeyFilePassword")&&o.searchParams.set("tlsCertificateKeyFilePassword",i),o.searchParams.has("proxyUsername")&&s&&o.searchParams.set("proxyUsername",i),o.searchParams.has("proxyPassword")&&o.searchParams.set("proxyPassword",i),o}eo.redactValidConnectionString=xoe;function koe(t,e){var r,n;let o=(r=e?.replacementString)!==null&&r!==void 0?r:"<credentials>",i=(n=e?.redactUsernames)!==null&&n!==void 0?n:!0,s;try{s=new UN.default(t)}catch{}if(s)return e={...e,replacementString:"___credentials___"},s.redact(e).toString().replace(/___credentials___/g,o);let u=o,a=[c=>c.replace(i?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${u}$3`),c=>c.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${u}`),c=>c.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${u}`),c=>i?c.replace(/(proxyUsername=)([^&]+)/gi,`$1${u}`):c,c=>c.replace(/(proxyPassword=)([^&]+)/gi,`$1${u}`)];for(let c of a)t=c(t);return t}eo.redactConnectionString=koe});var Q3=R(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.CommaAndColonSeparatedRecord=Qi.ConnectionString=Qi.redactConnectionString=void 0;var Loe=LN(),GN=qN();Object.defineProperty(Qi,"redactConnectionString",{enumerable:!0,get:function(){return GN.redactConnectionString}});var wd="__this_is_a_placeholder__";function Uoe(t){return t.startsWith("mongodb://")||t.startsWith("mongodb+srv://")}var qoe=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/,Cm=class extends Map{delete(e){return super.delete(this._normalizeKey(e))}get(e){return super.get(this._normalizeKey(e))}has(e){return super.has(this._normalizeKey(e))}set(e,r){return super.set(this._normalizeKey(e),r)}_normalizeKey(e){e=`${e}`;for(let r of this.keys())if(r.toLowerCase()===e.toLowerCase()){e=r;break}return e}};function Goe(t){return class extends t{append(r,n){return super.append(this._normalizeKey(r),n)}delete(r){return super.delete(this._normalizeKey(r))}get(r){return super.get(this._normalizeKey(r))}getAll(r){return super.getAll(this._normalizeKey(r))}has(r){return super.has(this._normalizeKey(r))}set(r,n){return super.set(this._normalizeKey(r),n)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(r){return Cm.prototype._normalizeKey.call(this,r)}}}var Z3=class extends Loe.URL{},Lo=class extends Error{get name(){return"MongoParseError"}},Am=class t extends Z3{constructor(e,r={}){var n;let{looseValidation:o}=r;if(!o&&!Uoe(e))throw new Lo('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let i=e.match(qoe);if(!i)throw new Lo(`Invalid connection string "${e}"`);let{protocol:s,username:u,password:a,hosts:c,rest:d}=(n=i.groups)!==null&&n!==void 0?n:{};if(!o){if(!s||!c)throw new Lo(`Protocol and host list are required in "${e}"`);try{decodeURIComponent(u??""),decodeURIComponent(a??"")}catch(E){throw new Lo(E.message)}let m=/[:/?#[\]@]/gi;if(u?.match(m))throw new Lo(`Username contains unescaped characters ${u}`);if(!u||!a){let E=e.replace(`${s}://`,"");if(E.startsWith("@")||E.startsWith(":"))throw new Lo("URI contained empty userinfo section")}if(a?.match(m))throw new Lo("Password contains unescaped characters")}let p="";typeof u=="string"&&(p+=u),typeof a=="string"&&(p+=`:${a}`),p&&(p+="@");try{super(`${s.toLowerCase()}://${p}${wd}${d}`)}catch(m){throw o&&new t(e,{...r,looseValidation:!1}),typeof m.message=="string"&&(m.message=m.message.replace(wd,c)),m}if(this._hosts=c.split(","),!o){if(this.isSRV&&this.hosts.length!==1)throw new Lo("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some(m=>m.includes(":")))throw new Lo("mongodb+srv URI cannot have port number")}this.pathname||(this.pathname="/"),Object.setPrototypeOf(this.searchParams,Goe(this.searchParams.constructor).prototype)}get host(){return wd}set host(e){throw new Error("No single host for connection string")}get hostname(){return wd}set hostname(e){throw new Error("No single host for connection string")}get port(){return""}set port(e){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(e){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(e){this._hosts=e}toString(){return super.toString().replace(wd,this.hosts.join(","))}clone(){return new t(this.toString(),{looseValidation:!0})}redact(e){return(0,GN.redactValidConnectionString)(this,e)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:e,origin:r,protocol:n,username:o,password:i,hosts:s,pathname:u,search:a,searchParams:c,hash:d}=this;return{href:e,origin:r,protocol:n,username:o,password:i,hosts:s,pathname:u,search:a,searchParams:c,hash:d}}};Qi.ConnectionString=Am;var e6=class extends Cm{constructor(e){super();for(let r of(e??"").split(",")){if(!r)continue;let n=r.indexOf(":");n===-1?this.set(r,""):this.set(r.slice(0,n),r.slice(n+1))}}toString(){return[...this].map(e=>e.join(":")).join(",")}};Qi.CommaAndColonSeparatedRecord=e6;Qi.default=Am});var bd=R(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.OpCompressedRequest=Zr.OpMsgResponse=Zr.OpMsgRequest=Zr.DocumentSequence=Zr.OpReply=Zr.OpQueryRequest=void 0;var ol=qe(),Td=ie(),t6=vd(),rl=xs(),nl=0,Voe=2,$oe=4,Hoe=8,Woe=16,zoe=32,joe=64,Koe=128,Yoe=1,Joe=2,Xoe=4,Qoe=8,Zoe=ol.BSON.onDemand.ByteUtils.encodeUTF8Into,n6=class t{constructor(e,r,n){this.moreToCome=!1;let o=`${e}.$cmd`;if(typeof e!="string")throw new Td.MongoRuntimeError("Database name must be a string for a query");if(r==null)throw new Td.MongoRuntimeError("A query document must be specified for query");if(o.indexOf("\0")!==-1)throw new Td.MongoRuntimeError("Namespace cannot contain a null character");this.databaseName=e,this.query=r,this.ns=o,this.numberToSkip=n.numberToSkip||0,this.numberToReturn=n.numberToReturn||0,this.returnFieldSelector=n.returnFieldSelector||void 0,this.requestId=n.requestId??t.getRequestId(),this.pre32Limit=n.pre32Limit,this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof n.secondaryOk=="boolean"?n.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=nl++}nextRequestId(){return nl+1}static getRequestId(){return++nl}toBin(){let e=[],r=null,n=0;this.tailable&&(n|=Voe),this.secondaryOk&&(n|=$oe),this.oplogReplay&&(n|=Hoe),this.noCursorTimeout&&(n|=Woe),this.awaitData&&(n|=zoe),this.exhaust&&(n|=joe),this.partial&&(n|=Koe),this.batchSize!==this.numberToReturn&&(this.numberToReturn=this.batchSize);let o=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);e.push(o);let i=ol.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(i),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0&&(r=ol.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),e.push(r));let s=o.length+i.length+(r?r.length:0),u=4;return o[3]=s>>24&255,o[2]=s>>16&255,o[1]=s>>8&255,o[0]=s&255,o[u+3]=this.requestId>>24&255,o[u+2]=this.requestId>>16&255,o[u+1]=this.requestId>>8&255,o[u]=this.requestId&255,u=u+4,o[u+3]=0,o[u+2]=0,o[u+1]=0,o[u]=0,u=u+4,o[u+3]=rl.OP_QUERY>>24&255,o[u+2]=rl.OP_QUERY>>16&255,o[u+1]=rl.OP_QUERY>>8&255,o[u]=rl.OP_QUERY&255,u=u+4,o[u+3]=n>>24&255,o[u+2]=n>>16&255,o[u+1]=n>>8&255,o[u]=n&255,u=u+4,u=u+o.write(this.ns,u,"utf8")+1,o[u-1]=0,o[u+3]=this.numberToSkip>>24&255,o[u+2]=this.numberToSkip>>16&255,o[u+1]=this.numberToSkip>>8&255,o[u]=this.numberToSkip&255,u=u+4,o[u+3]=this.numberToReturn>>24&255,o[u+2]=this.numberToReturn>>16&255,o[u+1]=this.numberToReturn>>8&255,o[u]=this.numberToReturn&255,u=u+4,e}};Zr.OpQueryRequest=n6;var o6=class{constructor(e,r,n,o){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=e,this.data=n,this.opts=o??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new ol.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>2**32-1)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&Yoe)!==0,this.queryFailure=(this.responseFlags&Joe)!==0,this.shardConfigStale=(this.responseFlags&Xoe)!==0,this.awaitCapable=(this.responseFlags&Qoe)!==0;for(let e=0;e<this.numberReturned;e++){let r=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index=this.index+r}return this.parsed=!0,this.sections[0]}};Zr.OpReply=o6;var $N=1,HN=2,WN=65536,Sm=class{constructor(e,r){this.field=e,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let n=Buffer.allocUnsafe(5+this.field.length+1);if(n[0]=1,Zoe(n,`${this.field}\0`,5),this.chunks.push(n),this.header=n,r)for(let o of r)this.push(o,ol.serialize(o))}push(e,r){return this.serializedDocumentsLength+=r.length,this.documents.push(e),this.chunks.push(r),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}};Zr.DocumentSequence=Sm;var _m=class t{constructor(e,r,n){if(r==null)throw new Td.MongoInvalidArgumentError("Query document must be specified for query");this.databaseName=e,this.command=r,this.command.$db=e,this.options=n??{},this.requestId=n.requestId?n.requestId:t.getRequestId(),this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checksumPresent=!1,this.moreToCome=n.moreToCome??r.writeConcern?.w===0,this.exhaustAllowed=typeof n.exhaustAllowed=="boolean"?n.exhaustAllowed:!1}toBin(){let e=[],r=0;this.checksumPresent&&(r|=$N),this.moreToCome&&(r|=HN),this.exhaustAllowed&&(r|=WN);let n=Buffer.alloc(20);e.push(n);let o=n.length,i=this.command;return o+=this.makeSections(e,i),n.writeInt32LE(o,0),n.writeInt32LE(this.requestId,4),n.writeInt32LE(0,8),n.writeInt32LE(rl.OP_MSG,12),n.writeUInt32LE(r,16),e}makeSections(e,r){let n=this.extractDocumentSequences(r),o=Buffer.allocUnsafe(1);o[0]=0;let i=this.serializeBson(r);return e.push(o),e.push(i),e.push(n),o.length+i.length+n.length}extractDocumentSequences(e){let r=[];for(let[n,o]of Object.entries(e))o instanceof Sm&&(r.push(o.toBin()),delete e[n]);return r.length>0?Buffer.concat(r):Buffer.alloc(0)}serializeBson(e){return ol.serialize(e,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return nl=nl+1&2147483647,nl}};Zr.OpMsgRequest=_m;var i6=class{constructor(e,r,n,o){this.index=0,this.sections=[],this.parsed=!1,this.raw=e,this.data=n,this.opts=o??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.responseFlags=n.readInt32LE(0),this.checksumPresent=(this.responseFlags&$N)!==0,this.moreToCome=(this.responseFlags&HN)!==0,this.exhaustAllowed=(this.responseFlags&WN)!==0,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];for(this.index=4;this.index<this.data.length;){let e=this.data.readUInt8(this.index++);if(e===0){let r=this.data.readUInt32LE(this.index),n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index+=r}else if(e===1)throw new Td.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}};Zr.OpMsgResponse=i6;var r6=16,VN=9,s6=class{constructor(e,r){this.command=e,this.options={zlibCompressionLevel:r.zlibCompressionLevel,agreedCompressor:r.agreedCompressor}}static canCompress(e){let r=e instanceof _m?e.command:e.query,n=Object.keys(r)[0];return!t6.uncompressibleCommands.has(n)}async toBin(){let e=Buffer.concat(this.command.toBin()),r=e.slice(r6),n=e.readInt32LE(12),o=await(0,t6.compress)(this.options,r),i=Buffer.alloc(r6);i.writeInt32LE(r6+VN+o.length,0),i.writeInt32LE(this.command.requestId,4),i.writeInt32LE(0,8),i.writeInt32LE(rl.OP_COMPRESSED,12);let s=Buffer.alloc(VN);return s.writeInt32LE(n,0),s.writeInt32LE(r.length,4),s.writeUInt8(t6.Compressor[this.options.agreedCompressor],8),[i,s,o]}};Zr.OpCompressedRequest=s6});var vd=R(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.uncompressibleCommands=cr.Compressor=void 0;cr.compress=oie;cr.decompress=YN;cr.compressCommand=iie;cr.decompressResponse=sie;var zN=require("util"),wm=require("zlib"),eie=Mt(),jN=Fo(),a6=ie(),il=bd(),u6=xs();cr.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});cr.uncompressibleCommands=new Set([eie.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var tie=3,rie=(0,zN.promisify)(wm.inflate.bind(wm)),nie=(0,zN.promisify)(wm.deflate.bind(wm)),Ks,aa=null;function KN(){if(aa==null){let t=(0,jN.getSnappy)();if("kModuleError"in t)throw t.kModuleError;aa=t}return aa}async function oie(t,e){let r={};switch(t.agreedCompressor){case"snappy":return aa??=KN(),await aa.compress(e);case"zstd":{if(JN(),"kModuleError"in Ks)throw Ks.kModuleError;return await Ks.compress(e,tie)}case"zlib":return t.zlibCompressionLevel&&(r.level=t.zlibCompressionLevel),await nie(e,r);default:throw new a6.MongoInvalidArgumentError(`Unknown compressor ${t.agreedCompressor} failed to compress`)}}async function YN(t,e){if(t!==cr.Compressor.snappy&&t!==cr.Compressor.zstd&&t!==cr.Compressor.zlib&&t!==cr.Compressor.none)throw new a6.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${t})`);switch(t){case cr.Compressor.snappy:return aa??=KN(),await aa.uncompress(e,{asBuffer:!0});case cr.Compressor.zstd:{if(JN(),"kModuleError"in Ks)throw Ks.kModuleError;return await Ks.decompress(e)}case cr.Compressor.zlib:return await rie(e);default:return e}}function JN(){Ks||(Ks=(0,jN.getZstdLibrary)())}var Od=16;async function iie(t,e){let n=await(e.agreedCompressor==="none"||!il.OpCompressedRequest.canCompress(t)?t:new il.OpCompressedRequest(t,{agreedCompressor:e.agreedCompressor??"none",zlibCompressionLevel:e.zlibCompressionLevel??0})).toBin();return Buffer.concat(n)}async function sie(t){let e={length:t.readInt32LE(0),requestId:t.readInt32LE(4),responseTo:t.readInt32LE(8),opCode:t.readInt32LE(12)};if(e.opCode!==u6.OP_COMPRESSED){let u=e.opCode===u6.OP_MSG?il.OpMsgResponse:il.OpReply,a=t.subarray(Od);return new u(t,e,a)}let r={...e,fromCompressed:!0,opCode:t.readInt32LE(Od),length:t.readInt32LE(Od+4)},n=t[Od+8],o=t.slice(Od+9),i=r.opCode===u6.OP_MSG?il.OpMsgResponse:il.OpReply,s=await YN(n,o);if(s.length!==r.length)throw new a6.MongoDecompressionError("Message body and message header must be the same length");return new i(t,r,s)}});var l6=R(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.hmacSha256Hook=Wt.hmacSha512Hook=Wt.aes256CtrDecryptHook=Wt.aes256CtrEncryptHook=Wt.aes256CbcDecryptHook=Wt.aes256CbcEncryptHook=void 0;Wt.makeAES256Hook=Dd;Wt.randomHook=uie;Wt.sha256Hook=aie;Wt.makeHmacHook=c6;Wt.signRsaSha256Hook=cie;var Rd=require("crypto");function Dd(t,e){return function(r,n,o,i){let s;try{let u=Rd[t](e,r,n);u.setAutoPadding(!1),s=u.update(o);let a=u.final();a.length>0&&(s=Buffer.concat([s,a]))}catch(u){return u}return s.copy(i),s.length}}function uie(t,e){try{Rd.randomFillSync(t,0,e)}catch(r){return r}return e}function aie(t,e){let r;try{r=Rd.createHash("sha256").update(t).digest()}catch(n){return n}return r.copy(e),r.length}function c6(t){return(e,r,n)=>{let o;try{o=Rd.createHmac(t,e).update(r).digest()}catch(i){return i}return o.copy(n),o.length}}function cie(t,e,r){let n;try{let o=Rd.createSign("sha256WithRSAEncryption"),i=Buffer.from(`-----BEGIN PRIVATE KEY-----
${t.toString("base64")}
-----END PRIVATE KEY-----
`);n=o.update(e).end().sign(i)}catch(o){return o}return n.copy(r),n.length}Wt.aes256CbcEncryptHook=Dd("createCipheriv","aes-256-cbc");Wt.aes256CbcDecryptHook=Dd("createDecipheriv","aes-256-cbc");Wt.aes256CtrEncryptHook=Dd("createCipheriv","aes-256-ctr");Wt.aes256CtrDecryptHook=Dd("createDecipheriv","aes-256-ctr");Wt.hmacSha512Hook=c6("sha512");Wt.hmacSha256Hook=c6("sha256")});var sl=R(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.MongoCryptKMSRequestNetworkTimeoutError=en.MongoCryptAzureKMSRequestError=en.MongoCryptCreateEncryptedCollectionError=en.MongoCryptCreateDataKeyError=en.MongoCryptInvalidArgumentError=en.MongoCryptError=void 0;var lie=ie(),Ys=class extends lie.MongoError{constructor(e,r={}){super(e,r)}get name(){return"MongoCryptError"}};en.MongoCryptError=Ys;var d6=class extends Ys{constructor(e){super(e)}get name(){return"MongoCryptInvalidArgumentError"}};en.MongoCryptInvalidArgumentError=d6;var f6=class extends Ys{constructor(e,{cause:r}){super(`Unable to complete creating data keys: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateDataKeyError"}};en.MongoCryptCreateDataKeyError=f6;var h6=class extends Ys{constructor(e,{cause:r}){super(`Unable to create collection: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateEncryptedCollectionError"}};en.MongoCryptCreateEncryptedCollectionError=h6;var p6=class extends Ys{constructor(e,r){super(e),this.body=r}get name(){return"MongoCryptAzureKMSRequestError"}};en.MongoCryptAzureKMSRequestError=p6;var m6=class extends Ys{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}};en.MongoCryptKMSRequestNetworkTimeoutError=m6});var C6=R(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.LegacyAWSTemporaryCredentialProvider=Js.AWSSDKCredentialProvider=Js.AWSTemporaryCredentialProvider=void 0;var die=Fo(),fie=ie(),Tm=de(),hie="http://169.254.170.2",g6="http://169.254.169.254",XN="/latest/meta-data/iam/security-credentials",Zi=class t{static get awsSDK(){return t._awsSDK??=(0,die.getAwsCredentialProvider)(),t._awsSDK}static get isAWSSDKInstalled(){return!("kModuleError"in t.awsSDK)}};Js.AWSTemporaryCredentialProvider=Zi;var E6=class extends Zi{constructor(e){super(),e&&(this._provider=e)}get provider(){if("kModuleError"in Zi.awsSDK)throw Zi.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:e="",AWS_REGION:r=""}=process.env;e=e.toLowerCase(),r=r.toLowerCase();let n=r.length!==0&&e.length!==0,i=e==="regional"||e==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(r);return this._provider=n&&i?Zi.awsSDK.fromNodeProviderChain({clientConfig:{region:r}}):Zi.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let e=await this.provider();return{AccessKeyId:e.accessKeyId,SecretAccessKey:e.secretAccessKey,Token:e.sessionToken,Expiration:e.expiration}}catch(e){throw new fie.MongoAWSError(e.message,{cause:e})}}};Js.AWSSDKCredentialProvider=E6;var y6=class extends Zi{async getCredentials(){if(process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI)return await(0,Tm.request)(`${hie}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`);let e=await(0,Tm.request)(`${g6}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}}),r=await(0,Tm.request)(`${g6}/${XN}`,{json:!1,headers:{"X-aws-ec2-metadata-token":e}});return await(0,Tm.request)(`${g6}/${XN}/${r}`,{headers:{"X-aws-ec2-metadata-token":e}})}};Js.LegacyAWSTemporaryCredentialProvider=y6});var QN=R(A6=>{"use strict";Object.defineProperty(A6,"__esModule",{value:!0});A6.loadAWSCredentials=mie;var pie=C6();async function mie(t,e){let r=new pie.AWSSDKCredentialProvider(e),{SecretAccessKey:n="",AccessKeyId:o="",Token:i}=await r.getCredentials(),s={secretAccessKey:n,accessKeyId:o};return i!=null&&(s.sessionToken=i),{...t,aws:s}}});var S6=R(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.tokenCache=tn.AzureCredentialCache=tn.AZURE_BASE_URL=void 0;tn.addAzureParams=ZN;tn.prepareRequest=eB;tn.fetchAzureKMSToken=tB;tn.loadAzureCredentials=Aie;var gie=ie(),Eie=de(),ul=sl(),yie=6e3;tn.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";var bm=class{constructor(){this.cachedToken=null}async getToken(){return(this.cachedToken==null||this.needsRefresh(this.cachedToken))&&(this.cachedToken=await this._getToken()),{accessToken:this.cachedToken.accessToken}}needsRefresh(e){return e.expiresOnTimestamp-Date.now()<=yie}resetCache(){this.cachedToken=null}_getToken(){return tB()}};tn.AzureCredentialCache=bm;tn.tokenCache=new bm;async function Cie(t){let{status:e,body:r}=t,n=(()=>{try{return JSON.parse(r)}catch{throw new ul.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(e!==200)throw new ul.MongoCryptAzureKMSRequestError("Unable to complete request.",n);if(!n.access_token)throw new ul.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!n.expires_in)throw new ul.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let o=Number(n.expires_in)*1e3;if(Number.isNaN(o))throw new ul.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:n.access_token,expiresOnTimestamp:Date.now()+o}}function ZN(t,e,r){return t.searchParams.append("api-version","2018-02-01"),t.searchParams.append("resource",e),r&&t.searchParams.append("client_id",r),t}function eB(t){let e=new URL(t.url?.toString()??tn.AZURE_BASE_URL);return ZN(e,"https://vault.azure.net"),{headers:{...t.headers,"Content-Type":"application/json",Metadata:!0},url:e}}async function tB(t={}){let{headers:e,url:r}=eB(t);try{let n=await(0,Eie.get)(r,{headers:e});return await Cie(n)}catch(n){throw n instanceof gie.MongoNetworkTimeoutError?new ul.MongoCryptAzureKMSRequestError(`[Azure KMS] ${n.message}`):n}}async function Aie(t){let e=await tn.tokenCache.getToken();return{...t,azure:e}}});var rB=R(_6=>{"use strict";Object.defineProperty(_6,"__esModule",{value:!0});_6.loadGCPCredentials=_ie;var Sie=Fo();async function _ie(t){let e=(0,Sie.getGcpMetadata)();if("kModuleError"in e)return t;let{access_token:r}=await e.instance({property:"service-accounts/default/token"});return{...t,gcp:{accessToken:r}}}});var w6=R(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.isEmptyCredentials=vm;Om.refreshKMSCredentials=vie;var wie=QN(),Tie=S6(),bie=rB();function vm(t,e){let r=e[t];return r==null?!1:typeof r=="object"&&Object.keys(r).length===0}async function vie(t,e){let r=t;return vm("aws",t)&&(r=await(0,wie.loadAWSCredentials)(r,e?.aws)),vm("gcp",t)&&(r=await(0,bie.loadGCPCredentials)(r)),vm("azure",t)&&(r=await(0,Tie.loadAzureCredentials)(r)),r}});var b6=R(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});Rm.StateMachine=void 0;var nB=require("fs/promises"),Oie=require("net"),Rie=require("tls"),es=qe(),oB=lr(),Die=Fo(),Iie=ie(),iB=$t(),Xs=de(),Mie=Dm(),Qs=sl(),Id=null;function Nie(){if(Id==null){let t=(0,Die.getSocks)();if("kModuleError"in t)throw t.kModuleError;Id=t}return Id}var ca=0,uB=1,aB=2,cB=3,lB=7,dB=4,fB=5,hB=6,Bie=443,Pie=new Map([[ca,"MONGOCRYPT_CTX_ERROR"],[uB,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[aB,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[cB,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[lB,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[dB,"MONGOCRYPT_CTX_NEED_KMS"],[fB,"MONGOCRYPT_CTX_READY"],[hB,"MONGOCRYPT_CTX_DONE"]]),Fie=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames"];function sB(t){process.env.MONGODB_CRYPT_DEBUG&&console.error(t)}var xie,T6=class{constructor(e,r=(0,es.pluckBSONSerializeOptions)(e)){this.options=e,this.bsonOptions=r}async execute(e,r,n){let o=e._keyVaultNamespace,i=e._keyVaultClient,s=e._metaDataClient,u=e._mongocryptdClient,a=e._mongocryptdManager,c=null,d=()=>r.status,p=()=>r.state;for(;p()!==hB&&p()!==ca;)switch(n.signal?.throwIfAborted(),sB(`[context#${r.id}] ${Pie.get(p())||p()}`),p()){case uB:{let m=(0,es.deserialize)(r.nextMongoOperation());if(!s)throw new Qs.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let E=this.fetchCollectionInfo(s,r.ns,m,n);for await(let y of E)if(r.addMongoOperationResponse((0,es.serialize)(y)),p()===ca)break;if(p()===ca)break;r.finishMongoOperation();break}case aB:{let m=r.nextMongoOperation();if(p()===ca)break;if(!u)throw new Qs.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let E=a?await a.withRespawn(this.markCommand.bind(this,u,r.ns,m,n)):await this.markCommand(u,r.ns,m,n);r.addMongoOperationResponse(E),r.finishMongoOperation();break}case cB:{let m=r.nextMongoOperation(),E=await this.fetchKeys(i,o,m,n);E.length===0&&(c=xie??=(0,es.serialize)({v:[]}));for(let y of E)r.addMongoOperationResponse((0,es.serialize)(y));r.finishMongoOperation();break}case lB:{let m=await e.askForKMSCredentials();r.provideKMSProviders((0,es.serialize)(m));break}case dB:{await Promise.all(this.requests(r,n)),r.finishKMSRequests();break}case fB:{let m=r.finalize();if(p()===ca){let E=d().message||"Finalization error";throw new Qs.MongoCryptError(E)}c=m;break}default:throw new Qs.MongoCryptError(`Unknown state: ${p()}`)}if(p()===ca||c==null){let m=d().message;throw m||sB("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message."),new Qs.MongoCryptError(m??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return c}async kmsRequest(e,r){let n=e.endpoint.split(":"),o=n[1]!=null?Number.parseInt(n[1],10):Bie,i={host:n[0],servername:n[0],port:o,...(0,Mie.autoSelectSocketOptions)(this.options.socketOptions||{})},s=e.message,u=new Xs.BufferPool,a,c;function d(){for(let A of[c,a])A&&A.destroy()}function p(A){return new Qs.MongoCryptError("KMS request failed",{cause:A})}function m(){return new Qs.MongoCryptError("KMS request closed")}let E=this.options.tlsOptions;if(E){let A=e.kmsProvider,S=E[A];if(S){let b=this.validateTlsOptions(A,S);if(b)throw b;try{await this.setTlsOptions(S,i)}catch(P){throw p(P)}}}let y;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){a=new Oie.Socket;let{promise:P,reject:B,resolve:v}=(0,Xs.promiseWithResolvers)();a.once("error",O=>B(p(O))).once("close",()=>B(m())).once("connect",()=>v());let I={...i,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};a.connect(I),await P;try{Id??=Nie(),i.socket=(await Id.SocksClient.createConnection({existing_socket:a,command:"connect",destination:{host:i.host,port:i.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(O){throw p(O)}}c=Rie.connect(i,()=>{c.write(s)});let{promise:A,reject:S,resolve:b}=(0,Xs.promiseWithResolvers)();y=(0,Xs.addAbortListener)(r?.signal,function(){d(),S(this.reason)}),c.once("error",P=>S(p(P))).once("close",()=>S(m())).on("data",P=>{for(u.append(P);e.bytesNeeded>0&&u.length;){let B=Math.min(e.bytesNeeded,u.length);e.addResponse(u.read(B))}e.bytesNeeded<=0&&b()}),await(r?.timeoutContext?.csotEnabled()?Promise.all([A,iB.Timeout.expires(r.timeoutContext?.remainingTimeMS)]):A)}catch(A){throw A instanceof iB.TimeoutError?new Iie.MongoOperationTimeoutError("KMS request timed out"):A}finally{d(),y?.[Xs.kDispose]()}}*requests(e,r){for(let n=e.nextKMSRequest();n!=null;n=e.nextKMSRequest())yield this.kmsRequest(n,r)}validateTlsOptions(e,r){let n=Object.keys(r);for(let o of Fie)if(n.includes(o))return new Qs.MongoCryptError(`Insecure TLS options prohibited for ${e}: ${o}`)}async setTlsOptions(e,r){if(e.secureContext&&(r.secureContext=e.secureContext),e.tlsCertificateKeyFile){let n=await nB.readFile(e.tlsCertificateKeyFile);r.cert=r.key=n}e.tlsCAFile&&(r.ca=await nB.readFile(e.tlsCAFile)),e.tlsCertificateKeyFilePassword&&(r.passphrase=e.tlsCertificateKeyFilePassword)}fetchCollectionInfo(e,r,n,o){let{db:i}=Xs.MongoDBCollectionNamespace.fromString(r);return e.db(i).listCollections(n,{promoteLongs:!1,promoteValues:!1,timeoutContext:o?.timeoutContext&&new oB.CursorTimeoutContext(o?.timeoutContext,Symbol()),signal:o?.signal,nameOnly:!1})}async markCommand(e,r,n,o){let{db:i}=Xs.MongoDBCollectionNamespace.fromString(r),s={promoteLongs:!1,promoteValues:!1},u=(0,es.deserialize)(n,s),a={timeoutMS:void 0,signal:void 0};o?.timeoutContext?.csotEnabled()&&(a.timeoutMS=o.timeoutContext.remainingTimeMS),o?.signal&&(a.signal=o.signal);let c=await e.db(i).command(u,{...s,...a});return(0,es.serialize)(c,this.bsonOptions)}fetchKeys(e,r,n,o){let{db:i,collection:s}=Xs.MongoDBCollectionNamespace.fromString(r),u={timeoutContext:void 0,signal:void 0};return o?.timeoutContext!=null&&(u.timeoutContext=new oB.CursorTimeoutContext(o.timeoutContext,Symbol())),o?.signal!=null&&(u.signal=o.signal),e.db(i).collection(s,{readConcern:{level:"majority"}}).find((0,es.deserialize)(n),u).toArray()}};Rm.StateMachine=T6});var Dm=R(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});Bd.ClientEncryption=void 0;Bd.autoSelectSocketOptions=Nd;var qr=qe(),kie=Fo(),Md=$t(),rn=de(),Lie=l6(),Zs=sl(),pB=w6(),Im=b6(),v6=class t{static getMongoCrypt(){let e=(0,kie.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){this._client=e,this._proxyOptions=r.proxyOptions??{},this._tlsOptions=r.tlsOptions??{},this._kmsProviders=r.kmsProviders||{};let{timeoutMS:n}=(0,rn.resolveTimeoutOptions)(e,r);if(this._timeoutMS=n,this._credentialProviders=r.credentialProviders,r.credentialProviders?.aws&&!(0,pB.isEmptyCredentials)("aws",this._kmsProviders))throw new Zs.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(r.keyVaultNamespace==null)throw new Zs.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let o={...r,cryptoCallbacks:Lie,kmsProviders:Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,qr.serialize)(this._kmsProviders)};this._keyVaultNamespace=r.keyVaultNamespace,this._keyVaultClient=r.keyVaultClient||e;let i=t.getMongoCrypt();this._mongoCrypt=new i(o)}async createDataKey(e,r={}){if(r.keyAltNames&&!Array.isArray(r.keyAltNames))throw new Zs.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof r.keyAltNames}.`);let n;r.keyAltNames&&r.keyAltNames.length>0&&(n=r.keyAltNames.map((E,y)=>{if(typeof E!="string")throw new Zs.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${y} was of type ${typeof E}`);return(0,qr.serialize)({keyAltName:E})}));let o;r.keyMaterial&&(o=(0,qr.serialize)({keyMaterial:r.keyMaterial}));let i=(0,qr.serialize)({provider:e,...r.masterKey}),s=this._mongoCrypt.makeDataKeyContext(i,{keyAltNames:n,keyMaterial:o}),u=new Im.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:Nd(this._client.s.options)}),a=r?.timeoutContext??Md.TimeoutContext.create((0,rn.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),c=(0,qr.deserialize)(await u.execute(this,s,{timeoutContext:a})),{db:d,collection:p}=rn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:m}=await this._keyVaultClient.db(d).collection(p).insertOne(c,{writeConcern:{w:"majority"},timeoutMS:a?.csotEnabled()?a?.getRemainingTimeMSOrThrow():void 0});return m}async rewrapManyDataKey(e,r){let n;if(r){let E=Object.assign({provider:r.provider},r.masterKey);n=(0,qr.serialize)(E)}let o=(0,qr.serialize)(e),i=this._mongoCrypt.makeRewrapManyDataKeyContext(o,n),s=new Im.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:Nd(this._client.s.options)}),u=Md.TimeoutContext.create((0,rn.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),{v:a}=(0,qr.deserialize)(await s.execute(this,i,{timeoutContext:u}));if(a.length===0)return{};let{db:c,collection:d}=rn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),p=a.map(E=>({updateOne:{filter:{_id:E._id},update:{$set:{masterKey:E.masterKey,keyMaterial:E.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(c).collection(d).bulkWrite(p,{writeConcern:{w:"majority"},timeoutMS:u.csotEnabled()?u?.remainingTimeMS:void 0})}}async deleteKey(e){let{db:r,collection:n}=rn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).deleteOne({_id:e},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:e,collection:r}=rn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(e).collection(r).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(e){let{db:r,collection:n}=rn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({_id:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(e){let{db:r,collection:n}=rn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({keyAltNames:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(e,r){let{db:n,collection:o}=rn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(n).collection(o).findOneAndUpdate({_id:e},{$addToSet:{keyAltNames:r}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(e,r){let{db:n,collection:o}=rn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),i=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[r]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",r]}}}]}}}];return await this._keyVaultClient.db(n).collection(o).findOneAndUpdate({_id:e},i,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(e,r,n){let{provider:o,masterKey:i,createCollectionOptions:{encryptedFields:{...s},...u}}=n,a=this._timeoutMS!=null?Md.TimeoutContext.create((0,rn.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(s.fields)){let c=s.fields.map(async m=>m==null||typeof m!="object"||m.keyId!=null?m:{...m,keyId:await this.createDataKey(o,{masterKey:i,timeoutContext:a?.csotEnabled()?a?.clone():void 0})}),d=await Promise.allSettled(c);s.fields=d.map((m,E)=>m.status==="fulfilled"?m.value:s.fields[E]);let p=d.find(m=>m.status==="rejected");if(p!=null)throw new Zs.MongoCryptCreateDataKeyError(s,{cause:p.reason})}try{return{collection:await e.createCollection(r,{...u,encryptedFields:s,timeoutMS:a?.csotEnabled()?a?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:s}}catch(c){throw new Zs.MongoCryptCreateEncryptedCollectionError(s,{cause:c})}}async encrypt(e,r){return await this._encrypt(e,!1,r)}async encryptExpression(e,r){return await this._encrypt(e,!0,r)}async decrypt(e){let r=(0,qr.serialize)({v:e}),n=this._mongoCrypt.makeExplicitDecryptionContext(r),o=new Im.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:Nd(this._client.s.options)}),i=this._timeoutMS!=null?Md.TimeoutContext.create((0,rn.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:s}=(0,qr.deserialize)(await o.execute(this,n,{timeoutContext:i}));return s}async askForKMSCredentials(){return await(0,pB.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}async _encrypt(e,r,n){let{algorithm:o,keyId:i,keyAltName:s,contentionFactor:u,queryType:a,rangeOptions:c,textOptions:d}=n,p={expressionMode:r,algorithm:o};if(i&&(p.keyId=i.buffer),s){if(i)throw new Zs.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof s!="string")throw new Zs.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof s}`);p.keyAltName=(0,qr.serialize)({keyAltName:s})}(typeof u=="number"||typeof u=="bigint")&&(p.contentionFactor=u),typeof a=="string"&&(p.queryType=a),typeof c=="object"&&(p.rangeOptions=(0,qr.serialize)(c)),typeof d=="object"&&(p.textOptions=(0,qr.serialize)(d));let m=(0,qr.serialize)({v:e}),E=new Im.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:Nd(this._client.s.options)}),y=this._mongoCrypt.makeExplicitEncryptionContext(m,p),A=this._timeoutMS!=null?Md.TimeoutContext.create((0,rn.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:S}=(0,qr.deserialize)(await E.execute(this,y,{timeoutContext:A}));return S}};Bd.ClientEncryption=v6;function Nd(t){let e={autoSelectFamily:!0};return"autoSelectFamily"in t&&(e.autoSelectFamily=t.autoSelectFamily),"autoSelectFamilyAttemptTimeout"in t&&(e.autoSelectFamilyAttemptTimeout=t.autoSelectFamilyAttemptTimeout),e}});var mB=R(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});Nm.MongocryptdManager=void 0;var Uie=ie(),Mm=class t{constructor(e={}){this.spawnPath="",this.spawnArgs=[],this.uri=typeof e.mongocryptdURI=="string"&&e.mongocryptdURI.length>0?e.mongocryptdURI:t.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!e.mongocryptdBypassSpawn,Object.hasOwn(e,"mongocryptdSpawnPath")&&e.mongocryptdSpawnPath&&(this.spawnPath=e.mongocryptdSpawnPath),Object.hasOwn(e,"mongocryptdSpawnArgs")&&Array.isArray(e.mongocryptdSpawnArgs)&&(this.spawnArgs=this.spawnArgs.concat(e.mongocryptdSpawnArgs)),this.spawnArgs.filter(r=>typeof r=="string").every(r=>r.indexOf("--idleShutdownTimeoutSecs")<0)&&this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let e=this.spawnPath||"mongocryptd",{spawn:r}=require("child_process");this._child=r(e,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(e){try{return await e()}catch(n){if(!(n instanceof Uie.MongoNetworkTimeoutError&&!this.bypassSpawn))throw n}return await this.spawn(),await e()}};Nm.MongocryptdManager=Mm;Mm.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"});var I6=R(al=>{"use strict";var AB;Object.defineProperty(al,"__esModule",{value:!0});al.AutoEncrypter=al.AutoEncryptionLoggerLevel=void 0;var gB=require("net"),Pd=qe(),qie=Mt(),Gie=Fo(),O6=ie(),Vie=eu(),$ie=de(),R6=Dm(),Hie=l6(),EB=sl(),Wie=mB(),yB=w6(),CB=b6();al.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});var D6=class t{static getMongoCrypt(){let e=(0,Gie.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){if(this[AB]=!1,this._client=e,this._bypassEncryption=r.bypassAutoEncryption===!0,this._keyVaultNamespace=r.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=r.keyVaultClient||e,this._metaDataClient=r.metadataClient||e,this._proxyOptions=r.proxyOptions||{},this._tlsOptions=r.tlsOptions||{},this._kmsProviders=r.kmsProviders||{},this._credentialProviders=r.credentialProviders,r.credentialProviders?.aws&&!(0,yB.isEmptyCredentials)("aws",this._kmsProviders))throw new EB.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let n={enableMultipleCollinfo:!0,cryptoCallbacks:Hie};r.schemaMap&&(n.schemaMap=Buffer.isBuffer(r.schemaMap)?r.schemaMap:(0,Pd.serialize)(r.schemaMap)),r.encryptedFieldsMap&&(n.encryptedFieldsMap=Buffer.isBuffer(r.encryptedFieldsMap)?r.encryptedFieldsMap:(0,Pd.serialize)(r.encryptedFieldsMap)),n.kmsProviders=Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,Pd.serialize)(this._kmsProviders),r.options?.logger&&(n.logger=r.options.logger),r.extraOptions&&r.extraOptions.cryptSharedLibPath&&(n.cryptSharedLibPath=r.extraOptions.cryptSharedLibPath),r.bypassQueryAnalysis&&(n.bypassQueryAnalysis=r.bypassQueryAnalysis),r.keyExpirationMS!=null&&(n.keyExpirationMS=r.keyExpirationMS),this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!r.bypassQueryAnalysis,r.extraOptions&&r.extraOptions.cryptSharedLibSearchPaths?n.cryptSharedLibSearchPaths=r.extraOptions.cryptSharedLibSearchPaths:this._bypassMongocryptdAndCryptShared||(n.cryptSharedLibSearchPaths=["$SYSTEM"]);let o=t.getMongoCrypt();if(this._mongocrypt=new o(n),this._contextCounter=0,r.extraOptions&&r.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new EB.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new Wie.MongocryptdManager(r.extraOptions);let i={serverSelectionTimeoutMS:1e4};(r.extraOptions==null||typeof r.extraOptions.mongocryptdURI!="string")&&!gB.getDefaultAutoSelectFamily&&(i.family=4),gB.getDefaultAutoSelectFamily&&Object.assign(i,(0,R6.autoSelectSocketOptions)(this._client.s?.options??{})),this._mongocryptdClient=new Vie.MongoClient(this._mongocryptdManager.uri,i)}}async init(){if(!(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)){if(!this._mongocryptdManager)throw new O6.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new O6.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");this._mongocryptdManager.bypassSpawn||await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(e){throw new O6.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:e})}}}async close(){await this._mongocryptdClient?.close()}async encrypt(e,r,n={}){if(n.signal?.throwIfAborted(),this._bypassEncryption)return r;let o=Buffer.isBuffer(r)?r:(0,Pd.serialize)(r,n),i=this._mongocrypt.makeEncryptionContext($ie.MongoDBCollectionNamespace.fromString(e).db,o);i.id=this._contextCounter++,i.ns=e,i.document=r;let s=new CB.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,R6.autoSelectSocketOptions)(this._client.s.options)});return(0,Pd.deserialize)(await s.execute(this,i,n),{promoteValues:!1,promoteLongs:!1})}async decrypt(e,r={}){r.signal?.throwIfAborted();let n=this._mongocrypt.makeDecryptionContext(e);return n.id=this._contextCounter++,await new CB.StateMachine({...r,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,R6.autoSelectSocketOptions)(this._client.s.options)}).execute(this,n,r)}async askForKMSCredentials(){return await(0,yB.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}};al.AutoEncrypter=D6;AB=qie.kDecorateResult});var _B=R(Bm=>{"use strict";Object.defineProperty(Bm,"__esModule",{value:!0});Bm.Encrypter=void 0;var zie=I6(),jie=Mt(),Kie=Fo(),SB=ie(),Yie=eu(),M6=class{constructor(e,r,n){if(typeof n.autoEncryption!="object")throw new SB.MongoInvalidArgumentError('Option "autoEncryption" must be specified');this.internalClient=null,this.bypassAutoEncryption=!!n.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,n.maxPoolSize===0&&n.autoEncryption.keyVaultClient==null?n.autoEncryption.keyVaultClient=e:n.autoEncryption.keyVaultClient==null&&(n.autoEncryption.keyVaultClient=this.getInternalClient(e,r,n)),this.bypassAutoEncryption?n.autoEncryption.metadataClient=void 0:n.maxPoolSize===0?n.autoEncryption.metadataClient=e:n.autoEncryption.metadataClient=this.getInternalClient(e,r,n),n.proxyHost&&(n.autoEncryption.proxyOptions={proxyHost:n.proxyHost,proxyPort:n.proxyPort,proxyUsername:n.proxyUsername,proxyPassword:n.proxyPassword}),this.autoEncrypter=new zie.AutoEncrypter(e,n.autoEncryption)}getInternalClient(e,r,n){let o=this.internalClient;if(o==null){let i={};for(let s of[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)])["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(s)||Reflect.set(i,s,Reflect.get(n,s));i.minPoolSize=0,o=new Yie.MongoClient(r,i),this.internalClient=o;for(let s of jie.MONGO_CLIENT_EVENTS)for(let u of e.listeners(s))o.on(s,u);e.on("newListener",(s,u)=>{o?.on(s,u)}),this.needsConnecting=!0}return o}async connectInternalClient(){let e=this.internalClient;this.needsConnecting&&e!=null&&(this.needsConnecting=!1,await e.connect())}async close(e){let r;try{await this.autoEncrypter.close()}catch(o){r=o}let n=this.internalClient;if(n!=null&&e!==n)return await n.close();if(r!=null)throw r}static checkForMongoCrypt(){let e=(0,Kie.getMongoDBClientEncryption)();if("kModuleError"in e)throw new SB.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:e.kModuleError,dependencyName:"mongodb-client-encryption"})}};Bm.Encrypter=M6});var N6=R(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});Pm.ConnectionPoolMetrics=void 0;var cl=class t{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}markPinned(e){e===t.TXN?this.txnConnections+=1:e===t.CURSOR?this.cursorConnections+=1:this.otherConnections+=1}markUnpinned(e){e===t.TXN?this.txnConnections-=1:e===t.CURSOR?this.cursorConnections-=1:this.otherConnections-=1}info(e){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${e}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}};Pm.ConnectionPoolMetrics=cl;cl.TXN="txn";cl.CURSOR="cursor";cl.OTHER="other"});var P6=R(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.Transaction=Oe.TxnState=void 0;Oe.isTransactionCommand=rse;var wB=ie(),Jie=Do(),Xie=tr(),Qie=Fr();Oe.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var Zie={[Oe.TxnState.NO_TRANSACTION]:[Oe.TxnState.NO_TRANSACTION,Oe.TxnState.STARTING_TRANSACTION],[Oe.TxnState.STARTING_TRANSACTION]:[Oe.TxnState.TRANSACTION_IN_PROGRESS,Oe.TxnState.TRANSACTION_COMMITTED,Oe.TxnState.TRANSACTION_COMMITTED_EMPTY,Oe.TxnState.TRANSACTION_ABORTED],[Oe.TxnState.TRANSACTION_IN_PROGRESS]:[Oe.TxnState.TRANSACTION_IN_PROGRESS,Oe.TxnState.TRANSACTION_COMMITTED,Oe.TxnState.TRANSACTION_ABORTED],[Oe.TxnState.TRANSACTION_COMMITTED]:[Oe.TxnState.TRANSACTION_COMMITTED,Oe.TxnState.TRANSACTION_COMMITTED_EMPTY,Oe.TxnState.STARTING_TRANSACTION,Oe.TxnState.NO_TRANSACTION],[Oe.TxnState.TRANSACTION_ABORTED]:[Oe.TxnState.STARTING_TRANSACTION,Oe.TxnState.NO_TRANSACTION],[Oe.TxnState.TRANSACTION_COMMITTED_EMPTY]:[Oe.TxnState.TRANSACTION_COMMITTED_EMPTY,Oe.TxnState.NO_TRANSACTION]},ese=new Set([Oe.TxnState.STARTING_TRANSACTION,Oe.TxnState.TRANSACTION_IN_PROGRESS]),tse=new Set([Oe.TxnState.TRANSACTION_COMMITTED,Oe.TxnState.TRANSACTION_COMMITTED_EMPTY,Oe.TxnState.TRANSACTION_ABORTED]),B6=class{constructor(e){e=e??{},this.state=Oe.TxnState.NO_TRANSACTION,this.options={};let r=Qie.WriteConcern.fromOptions(e);if(r){if(r.w===0)throw new wB.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=r}e.readConcern&&(this.options.readConcern=Jie.ReadConcern.fromOptions(e)),e.readPreference&&(this.options.readPreference=Xie.ReadPreference.fromOptions(e)),e.maxCommitTimeMS&&(this.options.maxTimeMS=e.maxCommitTimeMS),this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===Oe.TxnState.STARTING_TRANSACTION}get isActive(){return ese.has(this.state)}get isCommitted(){return tse.has(this.state)}transition(e){let r=Zie[this.state];if(r&&r.includes(e)){this.state=e,(this.state===Oe.TxnState.NO_TRANSACTION||this.state===Oe.TxnState.STARTING_TRANSACTION||this.state===Oe.TxnState.TRANSACTION_ABORTED)&&this.unpinServer();return}throw new wB.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${e}]`)}pinServer(e){this.isActive&&(this._pinnedServer=e)}unpinServer(){this._pinnedServer=void 0}};Oe.Transaction=B6;function rse(t){return!!(t.commitTransaction||t.abortTransaction)}});var dl=R(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.ServerSessionPool=Uo.ServerSession=Uo.ClientSession=void 0;Uo.maybeClearPinnedConnection=km;Uo.applySession=use;Uo.updateSessionFromResponse=ase;var xm=qe(),Lm=N6(),vB=Mt(),_e=ie(),nse=On(),Fm=rr(),F6=cd(),ose=Do(),x6=tr(),ise=fl(),L6=Tn(),k6=$t(),ut=P6(),dr=de(),ll=Fr(),Um=class t extends nse.TypedEventEmitter{constructor(e,r,n,o){if(super(),this.timeoutContext=null,this.on("error",dr.noop),e==null)throw new _e.MongoRuntimeError("ClientSession requires a MongoClient");if(r==null||!(r instanceof qm))throw new _e.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(n=n??{},this.snapshotEnabled=n.snapshot===!0,n.causalConsistency===!0&&this.snapshotEnabled)throw new _e.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=e,this.sessionPool=r,this.hasEnded=!1,this.clientOptions=o,this.timeoutMS=n.defaultTimeoutMS??e.s.options?.timeoutMS,this.explicit=!!n.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let i=this.explicit&&n.snapshot!==!0;this.supports={causalConsistency:n.causalConsistency??i},this.clusterTime=n.initialClusterTime,this.operationTime=void 0,this.owner=n.owner,this.defaultTransactionOptions={...n.defaultTransactionOptions},this.transaction=new ut.Transaction}get id(){return this.serverSession?.id}get serverSession(){let e=this._serverSession;if(e==null){if(this.explicit)throw new _e.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new _e.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");e=this.sessionPool.acquire(),this._serverSession=e}return e}get loadBalanced(){return this.client.topology?.description.type===L6.TopologyType.LoadBalanced}pin(e){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=e,e.emit(vB.PINNED,this.inTransaction()?Lm.ConnectionPoolMetrics.TXN:Lm.ConnectionPoolMetrics.CURSOR)}unpin(e){if(this.loadBalanced)return km(this,e);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession(e){try{this.inTransaction()&&await this.abortTransaction({...e,throwTimeout:!0})}catch(r){if(r.name==="MongoOperationTimeoutError")throw r;(0,dr.squashError)(r)}finally{if(!this.hasEnded){let r=this.serverSession;r!=null&&(this.sessionPool.release(r),this._serverSession=new Fd(r)),this.hasEnded=!0,this.emit("ended",this)}km(this,{force:!0,...e})}}async asyncDispose(){await this.endSession({force:!0})}advanceOperationTime(e){if(this.operationTime==null){this.operationTime=e;return}e.greaterThan(this.operationTime)&&(this.operationTime=e)}advanceClusterTime(e){if(!e||typeof e!="object")throw new _e.MongoInvalidArgumentError("input cluster time must be an object");if(!e.clusterTime||e.clusterTime._bsontype!=="Timestamp")throw new _e.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!e.signature||e.signature.hash?._bsontype!=="Binary"||typeof e.signature.keyId!="bigint"&&typeof e.signature.keyId!="number"&&e.signature.keyId?._bsontype!=="Long")throw new _e.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');(0,L6._advanceClusterTime)(this,e)}equals(e){return!(e instanceof t)||this.id==null||e.id==null?!1:dr.ByteUtils.equals(this.id.id.buffer,e.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction(e){if(this.snapshotEnabled)throw new _e.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new _e.MongoTransactionError("Transaction already in progress");this.isPinned&&this.transaction.isCommitted&&this.unpin(),this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new ut.Transaction({readConcern:e?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:e?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:e?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:e?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(ut.TxnState.STARTING_TRANSACTION)}async commitTransaction(e){if(this.transaction.state===ut.TxnState.NO_TRANSACTION)throw new _e.MongoTransactionError("No transaction started");if(this.transaction.state===ut.TxnState.STARTING_TRANSACTION||this.transaction.state===ut.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(ut.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===ut.TxnState.TRANSACTION_ABORTED)throw new _e.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let r={commitTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,o=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(o!=null)if(n==null&&this.timeoutContext==null)ll.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...o});else{let u=Object.keys(o);(u.length>2||!u.includes("wtimeoutMS")&&!u.includes("wTimeoutMS"))&&ll.WriteConcern.apply(r,{...o,wtimeoutMS:void 0})}(this.transaction.state===ut.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)&&(n==null&&this.timeoutContext==null?ll.WriteConcern.apply(r,{wtimeoutMS:1e4,...o,w:"majority"}):ll.WriteConcern.apply(r,{w:"majority",...o,wtimeoutMS:void 0})),typeof this.transaction.options.maxTimeMS=="number"&&(r.maxTimeMS=this.transaction.options.maxTimeMS),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let i=new F6.RunCommandOperation(new dr.MongoDBNamespace("admin"),r,{session:this,readPreference:x6.ReadPreference.primary,bypassPinningCheck:!0}),s=this.timeoutContext??(typeof n=="number"?k6.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:n}):null);try{await(0,Fm.executeOperation)(this.client,i,s),this.commitAttempted=void 0;return}catch(u){if(this.commitAttempted=!0,u instanceof _e.MongoError&&(0,_e.isRetryableWriteError)(u)){ll.WriteConcern.apply(r,{wtimeoutMS:1e4,...o,w:"majority"}),this.unpin({force:!0});try{await(0,Fm.executeOperation)(this.client,new F6.RunCommandOperation(new dr.MongoDBNamespace("admin"),r,{session:this,readPreference:x6.ReadPreference.primary,bypassPinningCheck:!0}),s);return}catch(a){throw bB(a)&&a.addErrorLabel(_e.MongoErrorLabel.UnknownTransactionCommitResult),TB(a)&&this.unpin({error:a}),a}}throw bB(u)&&u.addErrorLabel(_e.MongoErrorLabel.UnknownTransactionCommitResult),TB(u)&&this.unpin({error:u}),u}finally{this.transaction.transition(ut.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(e){if(this.transaction.state===ut.TxnState.NO_TRANSACTION)throw new _e.MongoTransactionError("No transaction started");if(this.transaction.state===ut.TxnState.STARTING_TRANSACTION){this.transaction.transition(ut.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===ut.TxnState.TRANSACTION_ABORTED)throw new _e.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===ut.TxnState.TRANSACTION_COMMITTED||this.transaction.state===ut.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new _e.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let r={abortTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,o=n!=null?k6.TimeoutContext.create({timeoutMS:n,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,i=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;i!=null&&n==null&&ll.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...i}),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let s=new F6.RunCommandOperation(new dr.MongoDBNamespace("admin"),r,{session:this,readPreference:x6.ReadPreference.primary,bypassPinningCheck:!0});try{await(0,Fm.executeOperation)(this.client,s,o),this.unpin();return}catch(u){if(this.unpin(),u.name==="MongoRuntimeError"||e?.throwTimeout&&u.name==="MongoOperationTimeoutError")throw u;if(u instanceof _e.MongoError&&(0,_e.isRetryableWriteError)(u))try{await(0,Fm.executeOperation)(this.client,s,o);return}catch(a){if(a.name==="MongoRuntimeError"||e?.throwTimeout&&a.name==="MongoOperationTimeoutError")throw a}}finally{this.transaction.transition(ut.TxnState.TRANSACTION_ABORTED),this.loadBalanced&&km(this,{force:!1})}}toBSON(){throw new _e.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(e,r){let o=r?.timeoutMS??this.timeoutMS??null;this.timeoutContext=o!=null?k6.TimeoutContext.create({timeoutMS:o,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let i=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:(0,dr.now)(),s=!1,u;try{for(;!s;){this.startTransaction(r);try{let a=e(this);if(!(0,dr.isPromiseLike)(a))throw new _e.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(u=await a,this.transaction.state===ut.TxnState.NO_TRANSACTION||this.transaction.state===ut.TxnState.TRANSACTION_COMMITTED||this.transaction.state===ut.TxnState.TRANSACTION_ABORTED)return u}catch(a){if(!(a instanceof _e.MongoError)||a instanceof _e.MongoInvalidArgumentError)throw await this.abortTransaction(),a;if((this.transaction.state===ut.TxnState.STARTING_TRANSACTION||this.transaction.state===ut.TxnState.TRANSACTION_IN_PROGRESS)&&await this.abortTransaction(),a.hasErrorLabel(_e.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,dr.now)()-i<12e4))continue;throw a}for(;!s;)try{await this.commitTransaction(),s=!0}catch(a){if(!Gm(a)&&a.hasErrorLabel(_e.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||(0,dr.now)()-i<12e4))continue;if(a.hasErrorLabel(_e.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,dr.now)()-i<12e4))break;throw a}}return u}finally{this.timeoutContext=null}}};Uo.ClientSession=Um;(0,ise.configureResourceManagement)(Um.prototype);var sse=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function TB(t){if(t instanceof _e.MongoError){if((0,_e.isRetryableWriteError)(t)||t instanceof _e.MongoWriteConcernError||Gm(t)){if(OB(t))return!0}else if(t.hasErrorLabel(_e.MongoErrorLabel.TransientTransactionError))return!0}return!1}function bB(t){let e=(0,_e.isRetryableWriteError)(t);return e||=t instanceof _e.MongoWriteConcernError,e||=Gm(t),e&&=OB(t),e}function OB(t){let e=t instanceof _e.MongoServerError&&t.codeName&&sse.has(t.codeName);return Gm(t)||!e&&t.code!==_e.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&t.code!==_e.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function km(t,e){let r=t.pinnedConnection,n=e?.error;if(t.inTransaction()&&n&&n instanceof _e.MongoError&&n.hasErrorLabel(_e.MongoErrorLabel.TransientTransactionError))return;let o=t.client.topology;if(r&&o!=null){let s=Array.from(o.s.servers.values())[0];(e?.error==null||e?.force)&&(s.pool.checkIn(r),t.pinnedConnection=void 0,r.emit(vB.UNPINNED,t.transaction.state!==ut.TxnState.NO_TRANSACTION?Lm.ConnectionPoolMetrics.TXN:Lm.ConnectionPoolMetrics.CURSOR),e?.forceClear&&s.pool.clear({serviceId:r.serviceId}))}}function Gm(t){return t==null||!(t instanceof _e.MongoServerError)?!1:t.code===_e.MONGODB_ERROR_CODES.MaxTimeMSExpired||t.writeConcernError?.code===_e.MONGODB_ERROR_CODES.MaxTimeMSExpired}var Fd=class{constructor(e){if(e!=null){let r=Buffer.allocUnsafe(16);r.set(e.id.id.buffer),this.id={id:new xm.Binary(r,e.id.id.sub_type)},this.lastUse=e.lastUse,this.txnNumber=e.txnNumber,this.isDirty=e.isDirty;return}this.id={id:new xm.Binary((0,dr.uuidV4)(),xm.Binary.SUBTYPE_UUID)},this.lastUse=(0,dr.now)(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(e){return Math.round((0,dr.calculateDurationInMs)(this.lastUse)%864e5%36e5/6e4)>e-1}};Uo.ServerSession=Fd;var qm=class{constructor(e){if(e==null)throw new _e.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=e,this.sessions=new dr.List}acquire(){let e=this.client.topology?.logicalSessionTimeoutMinutes??10,r=null;for(;this.sessions.length>0;){let n=this.sessions.shift();if(n!=null&&(this.client.topology?.loadBalanced||!n.hasTimedOut(e))){r=n;break}}return r==null&&(r=new Fd),r}release(e){let r=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!r&&this.sessions.unshift(e),!!r&&(this.sessions.prune(n=>n.hasTimedOut(r)),!e.hasTimedOut(r))){if(e.isDirty)return;this.sessions.unshift(e)}}};Uo.ServerSessionPool=qm;function use(t,e,r){if(t.hasEnded)return new _e.MongoExpiredSessionError;let n=t.serverSession;if(n==null)return new _e.MongoRuntimeError("Unable to acquire server session");if(r.writeConcern?.w===0)return t&&t.explicit?new _e.MongoAPIError("Cannot have explicit session with unacknowledged writes"):void 0;n.lastUse=(0,dr.now)(),e.lsid=n.id;let o=t.inTransaction()||(0,ut.isTransactionCommand)(e);if((r.willRetryWrite||o)&&(n.txnNumber+=t.txnNumberIncrement,t.txnNumberIncrement=0,e.txnNumber=xm.Long.fromNumber(n.txnNumber)),!o){t.transaction.state!==ut.TxnState.NO_TRANSACTION&&t.transaction.transition(ut.TxnState.NO_TRANSACTION),t.supports.causalConsistency&&t.operationTime&&(0,dr.commandSupportsReadConcern)(e)?(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime})):t.snapshotEnabled&&(e.readConcern=e.readConcern||{level:ose.ReadConcernLevel.snapshot},t.snapshotTime!=null&&Object.assign(e.readConcern,{atClusterTime:t.snapshotTime}));return}if(e.autocommit=!1,t.transaction.state===ut.TxnState.STARTING_TRANSACTION){t.transaction.transition(ut.TxnState.TRANSACTION_IN_PROGRESS),e.startTransaction=!0;let s=t.transaction.options.readConcern||t?.clientOptions?.readConcern;s&&(e.readConcern=s),t.supports.causalConsistency&&t.operationTime&&(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime}))}}function ase(t,e){if(e.$clusterTime&&(0,L6._advanceClusterTime)(t,e.$clusterTime),e.operationTime&&t&&t.supports.causalConsistency&&t.advanceOperationTime(e.operationTime),e.recoveryToken&&t&&t.inTransaction()&&(t.transaction._recoveryToken=e.recoveryToken),t?.snapshotEnabled&&t.snapshotTime==null){let r=e.atClusterTime;r&&(t.snapshotTime=r)}}});var j6=R(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.SENSITIVE_COMMANDS=to.CommandFailedEvent=to.CommandSucceededEvent=to.CommandStartedEvent=void 0;var xd=Mt(),IB=de(),U6=bd(),q6=class{constructor(e,r,n){this.name=xd.COMMAND_STARTED;let o=W6(r),i=$6(o),{address:s,connectionId:u,serviceId:a}=z6(e);to.SENSITIVE_COMMANDS.has(i)&&(this.commandObj={},this.commandObj[i]=!0),this.address=s,this.connectionId=u,this.serviceId=a,this.requestId=r.requestId,this.databaseName=r.databaseName,this.commandName=i,this.command=H6(i,o,o),this.serverConnectionId=n}get hasServiceId(){return!!this.serviceId}};to.CommandStartedEvent=q6;var G6=class{constructor(e,r,n,o,i){this.name=xd.COMMAND_SUCCEEDED;let s=W6(r),u=$6(s),{address:a,connectionId:c,serviceId:d}=z6(e);this.address=a,this.connectionId=c,this.serviceId=d,this.requestId=r.requestId,this.commandName=u,this.duration=(0,IB.calculateDurationInMs)(o),this.reply=H6(u,s,dse(n)),this.serverConnectionId=i,this.databaseName=r.databaseName}get hasServiceId(){return!!this.serviceId}};to.CommandSucceededEvent=G6;var V6=class{constructor(e,r,n,o,i){this.name=xd.COMMAND_FAILED;let s=W6(r),u=$6(s),{address:a,connectionId:c,serviceId:d}=z6(e);this.address=a,this.connectionId=c,this.serviceId=d,this.requestId=r.requestId,this.commandName=u,this.duration=(0,IB.calculateDurationInMs)(o),this.failure=H6(u,s,n),this.serverConnectionId=i,this.databaseName=r.databaseName}get hasServiceId(){return!!this.serviceId}};to.CommandFailedEvent=V6;to.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var cse=new Set(["hello",xd.LEGACY_HELLO_COMMAND,xd.LEGACY_HELLO_COMMAND_CAMEL_CASE]),$6=t=>Object.keys(t)[0],lse=t=>t.ns.split(".")[1],H6=(t,e,r)=>to.SENSITIVE_COMMANDS.has(t)||cse.has(t)&&e.speculativeAuthenticate?{}:r,RB={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},DB={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function W6(t){if(t instanceof U6.OpMsgRequest){let n={...t.command};return n.ops instanceof U6.DocumentSequence&&(n.ops=n.ops.documents),n.nsInfo instanceof U6.DocumentSequence&&(n.nsInfo=n.nsInfo.documents),n}if(t.query?.$query){let n;return t.ns==="admin.$cmd"?n=Object.assign({},t.query.$query):(n={find:lse(t)},Object.keys(RB).forEach(o=>{t.query[o]!=null&&(n[RB[o]]={...t.query[o]})})),Object.keys(DB).forEach(o=>{let i=o;t[i]!=null&&(n[DB[i]]=t[i])}),n}let e={},r={...t};return t.query&&(e={...t.query},r.query=e),t.query?e:r}function dse(t){return t&&(t.result?t.result:t)}function z6(t){let e;return"id"in t&&(e=t.id),{address:t.address,serviceId:t.serviceId,connectionId:e}}});var kd=R(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.ServerDescription=void 0;ml.parseServerType=MB;ml.compareTopologyVersion=NB;var hl=qe(),fse=ie(),pl=de(),kt=Tn(),hse=new Set([kt.ServerType.RSPrimary,kt.ServerType.Standalone,kt.ServerType.Mongos,kt.ServerType.LoadBalancer]),pse=new Set([kt.ServerType.RSPrimary,kt.ServerType.RSSecondary,kt.ServerType.Mongos,kt.ServerType.Standalone,kt.ServerType.LoadBalancer]),K6=class{constructor(e,r,n={}){if(e==null||e==="")throw new fse.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof e=="string"?pl.HostAddress.fromString(e).toString():e.toString(),this.type=MB(r,n),this.hosts=r?.hosts?.map(o=>o.toLowerCase())??[],this.passives=r?.passives?.map(o=>o.toLowerCase())??[],this.arbiters=r?.arbiters?.map(o=>o.toLowerCase())??[],this.tags=r?.tags??{},this.minWireVersion=r?.minWireVersion??0,this.maxWireVersion=r?.maxWireVersion??0,this.roundTripTime=n?.roundTripTime??-1,this.minRoundTripTime=n?.minRoundTripTime??0,this.lastUpdateTime=(0,pl.now)(),this.lastWriteDate=r?.lastWrite?.lastWriteDate??0,this.error=n.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??r?.topologyVersion??null,this.setName=r?.setName??null,this.setVersion=r?.setVersion??null,this.electionId=r?.electionId??null,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=r?.maxMessageSizeBytes??null,this.maxWriteBatchSize=r?.maxWriteBatchSize??null,this.maxBsonObjectSize=r?.maxBsonObjectSize??null,this.primary=r?.primary??null,this.me=r?.me?.toLowerCase()??null,this.$clusterTime=r?.$clusterTime??null,this.iscryptd=!!r?.iscryptd}get hostAddress(){return pl.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===kt.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return pse.has(this.type)}get isWritable(){return hse.has(this.type)}get host(){let e=`:${this.port}`.length;return this.address.slice(0,-e)}get port(){let e=this.address.split(":").pop();return e?Number.parseInt(e,10):27017}equals(e){let r=this.topologyVersion===e?.topologyVersion||NB(this.topologyVersion,e?.topologyVersion)===0,n=this.electionId!=null&&e?.electionId!=null?(0,pl.compareObjectId)(this.electionId,e.electionId)===0:this.electionId===e?.electionId;return e!=null&&e.iscryptd===this.iscryptd&&(0,pl.errorStrictEqual)(this.error,e.error)&&this.type===e.type&&this.minWireVersion===e.minWireVersion&&(0,pl.arrayStrictEqual)(this.hosts,e.hosts)&&mse(this.tags,e.tags)&&this.setName===e.setName&&this.setVersion===e.setVersion&&n&&this.primary===e.primary&&this.logicalSessionTimeoutMinutes===e.logicalSessionTimeoutMinutes&&r}};ml.ServerDescription=K6;function MB(t,e){return e?.loadBalanced?kt.ServerType.LoadBalancer:!t||!t.ok?kt.ServerType.Unknown:t.isreplicaset?kt.ServerType.RSGhost:t.msg&&t.msg==="isdbgrid"?kt.ServerType.Mongos:t.setName?t.hidden?kt.ServerType.RSOther:t.isWritablePrimary?kt.ServerType.RSPrimary:t.secondary?kt.ServerType.RSSecondary:t.arbiterOnly?kt.ServerType.RSArbiter:kt.ServerType.RSOther:kt.ServerType.Standalone}function mse(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(o=>e[o]===t[o])}function NB(t,e){if(t==null||e==null||!t.processId.equals(e.processId))return-1;let r=typeof t.counter=="bigint"?hl.Long.fromBigInt(t.counter):hl.Long.isLong(t.counter)?t.counter:hl.Long.fromNumber(t.counter),n=typeof e.counter=="bigint"?hl.Long.fromBigInt(e.counter):hl.Long.isLong(e.counter)?e.counter:hl.Long.fromNumber(e.counter);return r.compare(n)}});var BB=R(Vm=>{"use strict";Object.defineProperty(Vm,"__esModule",{value:!0});Vm.StreamDescription=void 0;var gse=qe(),Ese=Tn(),yse=kd(),Cse=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"],Y6=class{constructor(e,r){this.hello=null,this.address=e,this.type=Ese.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48e6,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes,this.loadBalanced=!!r?.loadBalanced,this.compressors=r&&r.compressors&&Array.isArray(r.compressors)?r.compressors:[],this.serverConnectionId=null}receiveResponse(e){if(e!=null){this.hello=e,this.type=(0,yse.parseServerType)(e),"connectionId"in e?this.serverConnectionId=this.parseServerConnectionID(e.connectionId):this.serverConnectionId=null;for(let r of Cse)e[r]!=null&&(this[r]=e[r]),"__nodejs_mock_server__"in e&&(this.__nodejs_mock_server__=e.__nodejs_mock_server__);e.compression&&(this.compressor=this.compressors.filter(r=>e.compression?.includes(r))[0])}}parseServerConnectionID(e){return gse.Long.isLong(e)?e.toBigInt():BigInt(e)}};Vm.StreamDescription=Y6});var PB=R(J6=>{"use strict";Object.defineProperty(J6,"__esModule",{value:!0});J6.onData=Ase;var Ld=de();function Ase(t,{timeoutContext:e,signal:r}){r?.throwIfAborted();let n=new Ld.List,o=new Ld.List,i=null,s=!1,u={next(){let E=n.shift();if(E!=null)return Promise.resolve({value:E,done:!1});if(i!=null){let b=Promise.reject(i);return i=null,b}if(s)return m();let{promise:y,resolve:A,reject:S}=(0,Ld.promiseWithResolvers)();return o.push({resolve:A,reject:S}),y},return(){return m()},throw(E){return p(E),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this},async[Symbol.asyncDispose](){await m()}};t.on("data",d),t.on("error",p);let a=(0,Ld.addAbortListener)(r,function(){p(this.reason)}),c=e?.timeoutForSocketRead;return c?.throwIfExpired(),c?.then(void 0,p),u;function d(E){let y=o.shift();y!=null?y.resolve({value:E,done:!1}):n.push(E)}function p(E){let y=o.shift();y!=null?y.reject(E):i=E,m()}function m(){t.off("data",d),t.off("error",p),a?.[Ld.kDispose](),s=!0,c?.clear();let E={value:void 0,done:s};for(let y of o)y.resolve(E);return Promise.resolve(E)}}});var Z6=R(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.TopologyDescription=void 0;var Sse=qe(),Hm=xs(),$m=ie(),X6=de(),ke=Tn(),tu=kd(),_se=Hm.MIN_SUPPORTED_SERVER_VERSION,wse=Hm.MAX_SUPPORTED_SERVER_VERSION,FB=Hm.MIN_SUPPORTED_WIRE_VERSION,xB=Hm.MAX_SUPPORTED_WIRE_VERSION,Tse=new Set([ke.ServerType.Mongos,ke.ServerType.Unknown]),kB=new Set([ke.ServerType.Mongos,ke.ServerType.Standalone]),LB=new Set([ke.ServerType.RSSecondary,ke.ServerType.RSArbiter,ke.ServerType.RSOther]),Q6=class t{constructor(e,r=null,n=null,o=null,i=null,s=null,u=null){u=u??{},this.type=e??ke.TopologyType.Unknown,this.servers=r??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=u.heartbeatFrequencyMS??0,this.localThresholdMS=u.localThresholdMS??15,this.setName=n??null,this.maxElectionId=i??null,this.maxSetVersion=o??null,this.commonWireVersion=s??0;for(let a of this.servers.values())if(!(a.type===ke.ServerType.Unknown||a.type===ke.ServerType.LoadBalancer)&&(a.minWireVersion>xB&&(this.compatible=!1,this.compatibilityError=`Server at ${a.address} requires wire version ${a.minWireVersion}, but this version of the driver only supports up to ${xB} (MongoDB ${wse})`),a.maxWireVersion<FB)){this.compatible=!1,this.compatibilityError=`Server at ${a.address} reports wire version ${a.maxWireVersion}, but this version of the driver requires at least ${FB} (MongoDB ${_se}).`;break}this.logicalSessionTimeoutMinutes=null;for(let[,a]of this.servers)if(a.isReadable){if(a.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=a.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,a.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(e,r=0){let n=e.hostnames(),o=new Set(this.servers.keys()),i=new Set(n),s=new Set;for(let a of o)i.delete(a),n.has(a)||s.add(a);if(i.size===0&&s.size===0)return this;let u=new Map(this.servers);for(let a of s)u.delete(a);if(i.size>0){if(r===0)for(let a of i)u.set(a,new tu.ServerDescription(a));else if(u.size<r){let a=(0,X6.shuffle)(i,r-u.size);for(let c of a)u.set(c,new tu.ServerDescription(c))}}return new t(this.type,u,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(e){let r=e.address,{type:n,setName:o,maxSetVersion:i,maxElectionId:s,commonWireVersion:u}=this,a=e.type,c=new Map(this.servers);if(e.maxWireVersion!==0&&(u==null?u=e.maxWireVersion:u=Math.min(u,e.maxWireVersion)),typeof e.setName=="string"&&typeof o=="string"&&e.setName!==o&&(n===ke.TopologyType.Single?e=new tu.ServerDescription(r):c.delete(r)),c.set(r,e),n===ke.TopologyType.Single)return new t(ke.TopologyType.Single,c,o,i,s,u,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(n===ke.TopologyType.Unknown&&(a===ke.ServerType.Standalone&&this.servers.size!==1?c.delete(r):n=bse(a)),n===ke.TopologyType.Sharded&&(Tse.has(a)||c.delete(r)),n===ke.TopologyType.ReplicaSetNoPrimary){if(kB.has(a)&&c.delete(r),a===ke.ServerType.RSPrimary){let d=UB(c,e,o,i,s);n=d[0],o=d[1],i=d[2],s=d[3]}else if(LB.has(a)){let d=Ose(c,e,o);n=d[0],o=d[1]}}if(n===ke.TopologyType.ReplicaSetWithPrimary)if(kB.has(a))c.delete(r),n=la(c);else if(a===ke.ServerType.RSPrimary){let d=UB(c,e,o,i,s);n=d[0],o=d[1],i=d[2],s=d[3]}else LB.has(a)?n=vse(c,e,o):n=la(c);return new t(n,c,o,i,s,u,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let e=Array.from(this.servers.values()).filter(r=>r.error);return e.length>0?e[0].error:null}get hasKnownServers(){return Array.from(this.servers.values()).some(e=>e.type!==ke.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some(e=>e.isDataBearing)}hasServer(e){return this.servers.has(e)}toJSON(){return Sse.EJSON.serialize(this)}};Wm.TopologyDescription=Q6;function bse(t){switch(t){case ke.ServerType.Standalone:return ke.TopologyType.Single;case ke.ServerType.Mongos:return ke.TopologyType.Sharded;case ke.ServerType.RSPrimary:return ke.TopologyType.ReplicaSetWithPrimary;case ke.ServerType.RSOther:case ke.ServerType.RSSecondary:return ke.TopologyType.ReplicaSetNoPrimary;default:return ke.TopologyType.Unknown}}function UB(t,e,r=null,n=null,o=null){let i=(a,c,d)=>`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${a.setVersion}, server electionId: ${a.electionId}, topology setVersion: ${c}, topology electionId: ${d}`;if(r=r||e.setName,r!==e.setName)return t.delete(e.address),[la(t),r,n,o];if(e.maxWireVersion>=17){let a=(0,X6.compareObjectId)(o,e.electionId),c=a===0,d=a===-1,p=(n??-1)<=(e.setVersion??-1);if(d||c&&p)o=e.electionId,n=e.setVersion;else return t.set(e.address,new tu.ServerDescription(e.address,void 0,{error:new $m.MongoStalePrimaryError(i(e,n,o))})),[la(t),r,n,o]}else{let a=e.electionId?e.electionId:null;if(e.setVersion&&a){if(n&&o&&(n>e.setVersion||(0,X6.compareObjectId)(o,a)>0))return t.set(e.address,new tu.ServerDescription(e.address,void 0,{error:new $m.MongoStalePrimaryError(i(e,n,o))})),[la(t),r,n,o];o=e.electionId}e.setVersion!=null&&(n==null||e.setVersion>n)&&(n=e.setVersion)}for(let[a,c]of t)if(c.type===ke.ServerType.RSPrimary&&c.address!==e.address){t.set(a,new tu.ServerDescription(c.address,void 0,{error:new $m.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}e.allHosts.forEach(a=>{t.has(a)||t.set(a,new tu.ServerDescription(a))});let s=Array.from(t.keys()),u=e.allHosts;return s.filter(a=>u.indexOf(a)===-1).forEach(a=>{t.delete(a)}),[la(t),r,n,o]}function vse(t,e,r=null){if(r==null)throw new $m.MongoRuntimeError('Argument "setName" is required if connected to a replica set');return(r!==e.setName||e.me&&e.address!==e.me)&&t.delete(e.address),la(t)}function Ose(t,e,r=null){let n=ke.TopologyType.ReplicaSetNoPrimary;return r=r??e.setName,r!==e.setName?(t.delete(e.address),[n,r]):(e.allHosts.forEach(o=>{t.has(o)||t.set(o,new tu.ServerDescription(o))}),e.me&&e.address!==e.me&&t.delete(e.address),[n,r])}function la(t){for(let e of t.values())if(e.type===ke.ServerType.RSPrimary)return ke.TopologyType.ReplicaSetWithPrimary;return ke.TopologyType.ReplicaSetNoPrimary}});var GB=R(zm=>{"use strict";Object.defineProperty(zm,"__esModule",{value:!0});zm.getReadPreference=Ise;zm.isSharded=Mse;var Rse=ie(),ew=tr(),qB=Tn(),Dse=Z6();function Ise(t){let e=t?.readPreference??ew.ReadPreference.primary;if(typeof e=="string"&&(e=ew.ReadPreference.fromString(e)),!(e instanceof ew.ReadPreference))throw new Rse.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return e}function Mse(t){return t==null?!1:t.description&&t.description.type===qB.ServerType.Mongos?!0:t.description&&t.description instanceof Dse.TopologyDescription?Array.from(t.description.servers.values()).some(r=>r.type===qB.ServerType.Mongos):!1}});var Ym=R(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.CryptoConnection=ts.SizedMessageTransform=ts.Connection=void 0;ts.hasSessionSupport=qse;var Nse=require("stream"),WB=require("timers"),Bse=qe(),ru=Mt(),Tt=ie(),VB=Gs(),Pse=On(),Fse=tr(),xse=Tn(),$B=dl(),HB=$t(),Rn=de(),tw=j6(),jm=bd(),kse=BB(),Lse=vd(),Use=PB(),Ud=Ye(),rw=GB();function qse(t){return t.description.logicalSessionTimeoutMinutes!=null}function Gse(t,e){if(e.proxyHost)return e.hostAddress.toString();let{remoteAddress:r,remotePort:n}=t;return typeof r=="string"&&typeof n=="number"?Rn.HostAddress.fromHostPort(r,n).toString():(0,Rn.uuidV4)().toString("hex")}var qo=class t extends Pse.TypedEventEmitter{constructor(e,r){super(),this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",Rn.noop),this.socket=e,this.id=r.id,this.address=Gse(e,r),this.socketTimeoutMS=r.socketTimeoutMS??0,this.monitorCommands=r.monitorCommands,this.serverApi=r.serverApi,this.mongoLogger=r.mongoLogger,this.established=!1,this.description=new kse.StreamDescription(this.address,r),this.generation=r.generation,this.lastUseTime=(0,Rn.now)(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new Km({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(e){this.description.receiveResponse(e),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return(0,Rn.calculateDurationInMs)(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&(0,Rn.maxWireVersion)(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(VB.MongoLoggableComponent.COMMAND,VB.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=(0,Rn.now)()}onSocketError(e){this.onError(new Tt.MongoNetworkError(e.message,{cause:e}))}onTransformError(e){this.onError(e)}onError(e){this.cleanup(e)}onClose(){let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new Tt.MongoNetworkError(e))}onTimeout(){this.delayedTimeoutId=(0,WB.setTimeout)(()=>{let e=`connection ${this.id} to ${this.address} timed out`,r=this.hello==null;this.cleanup(new Tt.MongoNetworkTimeoutError(e,{beforeHandshake:r}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(t.PINNED),this.removeAllListeners(t.UNPINNED);let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new Tt.MongoNetworkError(e))}cleanup(e){this.closed||(this.socket.destroy(),this.error=e,this.dataEvents?.throw(e).then(void 0,Rn.squashError),this.closed=!0,this.emit(t.CLOSE))}prepareCommand(e,r,n){let o={...r},i=(0,rw.getReadPreference)(n),s=n?.session,u=this.clusterTime;if(this.serverApi){let{version:d,strict:p,deprecationErrors:m}=this.serverApi;o.apiVersion=d,p!=null&&(o.apiStrict=p),m!=null&&(o.apiDeprecationErrors=m)}if(this.hasSessionSupport&&s){s.clusterTime&&u&&s.clusterTime.clusterTime.greaterThan(u.clusterTime)&&(u=s.clusterTime);let d=(0,$B.applySession)(s,o,n);if(d)throw d}else if(s?.explicit)throw new Tt.MongoCompatibilityError("Current topology does not support sessions");u&&(o.$clusterTime=u),this.description.type!==xse.ServerType.Standalone&&(!(0,rw.isSharded)(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&n.directConnection===!0&&i?.mode==="primary"?o.$readPreference=Fse.ReadPreference.primaryPreferred.toJSON():(0,rw.isSharded)(this)&&!this.supportsOpMsg&&i?.mode!=="primary"?o={$query:o,$readPreference:i.toJSON()}:i?.mode!=="primary"&&(o.$readPreference=i.toJSON()));let a={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:i.secondaryOk(),...n};return n.timeoutContext?.addMaxTimeMSToCommand(o,n),this.supportsOpMsg?new jm.OpMsgRequest(e,o,a):new jm.OpQueryRequest(e,o,a)}async*sendWire(e,r,n){this.throwIfAborted();let o=r.socketTimeoutMS??r?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(o);try{if(await this.writeCommand(e,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:r.timeoutContext,signal:r.signal}),r.noResponse||e.moreToCome){yield Ud.MongoDBResponse.empty;return}if(this.throwIfAborted(),r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new Tt.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let i of this.readMany(r)){this.socket.setTimeout(0);let s=i.parse();yield(n??Ud.MongoDBResponse).make(s),this.throwIfAborted(),this.socket.setTimeout(o)}}finally{this.socket.setTimeout(0)}}async*sendCommand(e,r,n,o){n?.signal?.throwIfAborted();let i=this.prepareCommand(e.db,r,n),s=0;this.shouldEmitAndLogCommand&&(s=(0,Rn.now)(),this.emitAndLogCommand(this.monitorCommands,t.COMMAND_STARTED,i.databaseName,this.established,new tw.CommandStartedEvent(this,i,this.description.serverConnectionId)));let u=n.documentsReturnedIn==null||!n.raw?n:{...n,raw:!1,fieldsAsRaw:{[n.documentsReturnedIn]:!0}},a,c;try{this.throwIfAborted();for await(a of this.sendWire(i,n,o)){if(c=void 0,n.session!=null&&(0,$B.updateSessionFromResponse)(n.session,a),a.$clusterTime&&(this.clusterTime=a.$clusterTime,this.emit(t.CLUSTER_TIME_RECEIVED,a.$clusterTime)),a.ok===0)throw n.timeoutContext?.csotEnabled()&&a.isMaxTimeExpiredError?new Tt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Tt.MongoServerError(c??=a.toObject(u))}):new Tt.MongoServerError(c??=a.toObject(u));this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_SUCCEEDED,i.databaseName,this.established,new tw.CommandSucceededEvent(this,i,n.noResponse?void 0:i.moreToCome?{ok:1}:c??=a.toObject(u),s,this.description.serverConnectionId)),o==null?yield c??=a.toObject(u):yield a,this.throwIfAborted()}}catch(d){throw this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_FAILED,i.databaseName,this.established,new tw.CommandFailedEvent(this,i,d,s,this.description.serverConnectionId)),d}}async command(e,r,n={},o){this.throwIfAborted(),n.signal?.throwIfAborted();for await(let i of this.sendCommand(e,r,n,o)){if(n.timeoutContext?.csotEnabled()){if(Ud.MongoDBResponse.is(i)){if(i.isMaxTimeExpiredError)throw new Tt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Tt.MongoServerError(i.toObject())})}else if(Array.isArray(i?.writeErrors)&&i.writeErrors.some(s=>s?.code===Tt.MONGODB_ERROR_CODES.MaxTimeMSExpired)||i?.writeConcernError?.code===Tt.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new Tt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Tt.MongoServerError(i)})}return i}throw new Tt.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(e,r,n,o){(async()=>{this.throwIfAborted();for await(let s of this.sendCommand(e,r,n))o(void 0,s),this.throwIfAborted();throw new Tt.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,o)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(e,r){let n=r.agreedCompressor==="none"||!jm.OpCompressedRequest.canCompress(e)?e:new jm.OpCompressedRequest(e,{agreedCompressor:r.agreedCompressor??"none",zlibCompressionLevel:r.zlibCompressionLevel??0}),o=Buffer.concat(await n.toBin());if(r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new Tt.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");if(this.socket.write(o))return;let i=(0,Rn.once)(this.socket,"drain",r),s=r?.timeoutContext?.timeoutForSocketWrite,u=s?Promise.race([i,s]):i;try{return await u}catch(a){if(HB.TimeoutError.is(a)){let c=new Tt.MongoOperationTimeoutError("Timed out at socket write");throw this.onError(c),c}else a===r.signal?.reason&&this.onError(a);throw a}finally{s?.clear()}}async*readMany(e){try{this.dataEvents=(0,Use.onData)(this.messageStream,e),this.messageStream.resume();for await(let r of this.dataEvents){let n=await(0,Lse.decompressResponse)(r);if(yield n,!n.moreToCome)return}}catch(r){if(HB.TimeoutError.is(r)){let n=new Tt.MongoOperationTimeoutError(`Timed out during socket read (${r.duration}ms)`);throw this.dataEvents=null,this.onError(n),n}else r===e.signal?.reason&&this.onError(r);throw r}finally{this.dataEvents=null,this.messageStream.pause()}}};ts.Connection=qo;qo.COMMAND_STARTED=ru.COMMAND_STARTED;qo.COMMAND_SUCCEEDED=ru.COMMAND_SUCCEEDED;qo.COMMAND_FAILED=ru.COMMAND_FAILED;qo.CLUSTER_TIME_RECEIVED=ru.CLUSTER_TIME_RECEIVED;qo.CLOSE=ru.CLOSE;qo.PINNED=ru.PINNED;qo.UNPINNED=ru.UNPINNED;var Km=class extends Nse.Transform{constructor({connection:e}){super({writableObjectMode:!1,readableObjectMode:!0}),this.bufferPool=new Rn.BufferPool,this.connection=e}_transform(e,r,n){for(this.connection.delayedTimeoutId!=null&&((0,WB.clearTimeout)(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null),this.bufferPool.append(e);this.bufferPool.length;){let o=this.bufferPool.getInt32();if(o==null)break;if(o<0)return n(new Tt.MongoParseError(`Message size cannot be negative: ${o}`));if(o>this.bufferPool.length)break;let i=this.bufferPool.read(o);if(!this.push(i))return n(new Tt.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}n()}};ts.SizedMessageTransform=Km;var nw=class extends qo{constructor(e,r){super(e,r),this.autoEncrypter=r.autoEncrypter}async command(e,r,n,o){let{autoEncrypter:i}=this;if(!i)throw new Tt.MongoMissingDependencyError("No AutoEncrypter available for encryption",{dependencyName:"n/a"});if((0,Rn.maxWireVersion)(this)===0)return await super.command(e,r,n,o);let u=r.find||r.findAndModify?r.sort:null,a=r.createIndexes?r.indexes.map(E=>E.key):null,c=await i.encrypt(e.toString(),r,n);if(u!=null&&(r.find||r.findAndModify)&&(c.sort=u),a!=null&&r.createIndexes)for(let[E,y]of a.entries())c.indexes[E].key=y;let d=await super.command(e,c,n,o??Ud.MongoDBResponse),p=await i.decrypt(d.toBytes(),n),m=o?.make(p)??(0,Bse.deserialize)(p,n);return i[ru.kDecorateResult]&&(o==null?(0,Rn.decorateDecryptionResult)(m,d.toObject(),!0):m instanceof Ud.CursorResponse&&(m.encryptedResponse=d)),m}};ts.CryptoConnection=nw});var sw=R(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.LEGAL_TCP_SOCKET_OPTIONS=Dn.LEGAL_TLS_SOCKET_OPTIONS=void 0;Dn.connect=Wse;Dn.makeConnection=YB;Dn.performInitialHandshake=JB;Dn.prepareHandshakeDocument=XB;Dn.makeSocket=Xm;var jB=require("net"),Vse=require("tls"),KB=Mt(),$se=Fo(),bt=ie(),ow=de(),Hse=$s(),Jm=di(),zB=Ym(),gl=xs();async function Wse(t){let e=null;try{let r=await Xm(t);return e=YB(t,r),await JB(e,t),e}catch(r){throw e?.destroy(),r}}function YB(t,e){let r=t.connectionType??zB.Connection;return t.autoEncrypter&&(r=zB.CryptoConnection),new r(e,t)}function zse(t,e){let r=Number(t.maxWireVersion),n=Number(t.minWireVersion),o=!Number.isNaN(r)&&r>=gl.MIN_SUPPORTED_WIRE_VERSION,i=!Number.isNaN(n)&&n<=gl.MAX_SUPPORTED_WIRE_VERSION;if(o){if(i)return null;let u=`Server at ${e.hostAddress} reports minimum wire version ${JSON.stringify(t.minWireVersion)}, but this version of the Node.js Driver requires at most ${gl.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${gl.MAX_SUPPORTED_SERVER_VERSION})`;return new bt.MongoCompatibilityError(u)}let s=`Server at ${e.hostAddress} reports maximum wire version ${JSON.stringify(t.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${gl.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${gl.MIN_SUPPORTED_SERVER_VERSION})`;return new bt.MongoCompatibilityError(s)}async function JB(t,e){let r=e.credentials;if(r&&r.mechanism!==Jm.AuthMechanism.MONGODB_DEFAULT&&!e.authProviders.getOrCreateProvider(r.mechanism,r.mechanismProperties))throw new bt.MongoInvalidArgumentError(`AuthMechanism '${r.mechanism}' not supported`);let n=new Hse.AuthContext(t,r,e);t.authContext=n;let o=await XB(n),i={...e,raw:!1};typeof e.connectTimeoutMS=="number"&&(i.socketTimeoutMS=e.connectTimeoutMS);let s=new Date().getTime(),u=await c(o,i);"isWritablePrimary"in u||(u.isWritablePrimary=u[KB.LEGACY_HELLO_COMMAND]),u.helloOk&&(t.helloOk=!0);let a=zse(u,e);if(a)throw a;if(e.loadBalanced&&!u.serviceId)throw new bt.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.");if(t.hello=u,t.lastHelloMS=new Date().getTime()-s,!u.arbiterOnly&&r){n.response=u;let d=r.resolveAuthMechanism(u),p=e.authProviders.getOrCreateProvider(d.mechanism,d.mechanismProperties);if(!p)throw new bt.MongoInvalidArgumentError(`No AuthProvider for ${d.mechanism} defined.`);try{await p.auth(n)}catch(m){throw m instanceof bt.MongoError&&(m.addErrorLabel(bt.MongoErrorLabel.HandshakeError),(0,bt.needsRetryableWriteLabel)(m,u.maxWireVersion,t.description.type)&&m.addErrorLabel(bt.MongoErrorLabel.RetryableWriteError)),m}}t.established=!0;async function c(d,p){try{return await t.command((0,ow.ns)("admin.$cmd"),d,p)}catch(m){throw m instanceof bt.MongoError&&m.addErrorLabel(bt.MongoErrorLabel.HandshakeError),m}}}async function XB(t){let e=t.options,r=e.compressors?e.compressors:[],{serverApi:n}=t.connection,o=await e.extendedMetadata,i={[n?.version||e.loadBalanced===!0?"hello":KB.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:o,compression:r};e.loadBalanced===!0&&(i.loadBalanced=!0);let s=t.credentials;if(s){if(s.mechanism===Jm.AuthMechanism.MONGODB_DEFAULT&&s.username){i.saslSupportedMechs=`${s.source}.${s.username}`;let a=t.options.authProviders.getOrCreateProvider(Jm.AuthMechanism.MONGODB_SCRAM_SHA256,s.mechanismProperties);if(!a)throw new bt.MongoInvalidArgumentError(`No AuthProvider for ${Jm.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await a.prepare(i,t)}let u=t.options.authProviders.getOrCreateProvider(s.mechanism,s.mechanismProperties);if(!u)throw new bt.MongoInvalidArgumentError(`No AuthProvider for ${s.mechanism} defined.`);return await u.prepare(i,t)}return i}Dn.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];Dn.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function iw(t){let e=t.hostAddress;if(!e)throw new bt.MongoInvalidArgumentError('Option "hostAddress" is required');let r={};for(let n of Dn.LEGAL_TCP_SOCKET_OPTIONS)t[n]!=null&&(r[n]=t[n]);if(r.keepAliveInitialDelay??=12e4,r.keepAlive=!0,r.noDelay=t.noDelay??!0,typeof e.socketPath=="string")return r.path=e.socketPath,r;if(typeof e.host=="string")return r.host=e.host,r.port=e.port,r;throw new bt.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(e)}`)}function jse(t){let e=iw(t);for(let r of Dn.LEGAL_TLS_SOCKET_OPTIONS)t[r]!=null&&(e[r]=t[r]);return t.existingSocket&&(e.socket=t.existingSocket),e.servername==null&&e.host&&!jB.isIP(e.host)&&(e.servername=e.host),e}async function Xm(t){let e=t.tls??!1,r=t.connectTimeoutMS??3e4,n=t.existingSocket,o;if(t.proxyHost!=null)return await Yse({...t,connectTimeoutMS:r});if(e){let c=Vse.connect(jse(t));typeof c.disableRenegotiation=="function"&&c.disableRenegotiation(),o=c}else n?o=n:o=jB.createConnection(iw(t));o.setTimeout(r);let i=null,{promise:s,resolve:u,reject:a}=(0,ow.promiseWithResolvers)();if(n)u(o);else{let c=performance.now(),d=e?"secureConnect":"connect";o.once(d,()=>u(o)).once("error",p=>a(new bt.MongoNetworkError(bt.MongoError.buildErrorMessage(p),{cause:p}))).once("timeout",()=>{a(new bt.MongoNetworkTimeoutError(`Socket '${d}' timed out after ${performance.now()-c|0}ms (connectTimeoutMS: ${r})`))}).once("close",()=>a(new bt.MongoNetworkError(`Socket closed after ${performance.now()-c|0} during connection establishment`))),t.cancellationToken!=null&&(i=()=>a(new bt.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-c|0}`)),t.cancellationToken.once("cancel",i))}try{return o=await s,o}catch(c){throw o.destroy(),c}finally{o.setTimeout(0),i!=null&&t.cancellationToken?.removeListener("cancel",i)}}var qd=null;function Kse(){if(qd==null){let t=(0,$se.getSocks)();if("kModuleError"in t)throw t.kModuleError;qd=t}return qd}async function Yse(t){let e=ow.HostAddress.fromHostPort(t.proxyHost??"",t.proxyPort??1080),r=await Xm({...t,hostAddress:e,tls:!1,proxyHost:void 0}),n=iw(t);if(typeof n.host!="string"||typeof n.port!="number")throw new bt.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");qd??=Kse();let o;try{o=(await qd.SocksClient.createConnection({existing_socket:r,timeout:t.connectTimeoutMS,command:"connect",destination:{host:n.host,port:n.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:t.proxyUsername||void 0,password:t.proxyPassword||void 0}})).socket}catch(i){throw new bt.MongoNetworkError(bt.MongoError.buildErrorMessage(i),{cause:i})}return await Xm({...t,existingSocket:o,proxyHost:void 0})}});var Qm=R(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.ServerHeartbeatFailedEvent=Lt.ServerHeartbeatSucceededEvent=Lt.ServerHeartbeatStartedEvent=Lt.TopologyClosedEvent=Lt.TopologyOpeningEvent=Lt.TopologyDescriptionChangedEvent=Lt.ServerClosedEvent=Lt.ServerOpeningEvent=Lt.ServerDescriptionChangedEvent=void 0;var rs=Mt(),uw=class{constructor(e,r,n,o){this.name=rs.SERVER_DESCRIPTION_CHANGED,this.topologyId=e,this.address=r,this.previousDescription=n,this.newDescription=o}};Lt.ServerDescriptionChangedEvent=uw;var aw=class{constructor(e,r){this.name=rs.SERVER_OPENING,this.topologyId=e,this.address=r}};Lt.ServerOpeningEvent=aw;var cw=class{constructor(e,r){this.name=rs.SERVER_CLOSED,this.topologyId=e,this.address=r}};Lt.ServerClosedEvent=cw;var lw=class{constructor(e,r,n){this.name=rs.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=e,this.previousDescription=r,this.newDescription=n}};Lt.TopologyDescriptionChangedEvent=lw;var dw=class{constructor(e){this.name=rs.TOPOLOGY_OPENING,this.topologyId=e}};Lt.TopologyOpeningEvent=dw;var fw=class{constructor(e){this.name=rs.TOPOLOGY_CLOSED,this.topologyId=e}};Lt.TopologyClosedEvent=fw;var hw=class{constructor(e,r){this.name=rs.SERVER_HEARTBEAT_STARTED,this.connectionId=e,this.awaited=r}};Lt.ServerHeartbeatStartedEvent=hw;var pw=class{constructor(e,r,n,o){this.name=rs.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=e,this.duration=r,this.reply=n??{},this.awaited=o}};Lt.ServerHeartbeatSucceededEvent=pw;var mw=class{constructor(e,r,n,o){this.name=rs.SERVER_HEARTBEAT_FAILED,this.connectionId=e,this.duration=r,this.failure=n,this.awaited=o}};Lt.ServerHeartbeatFailedEvent=mw});var Rw=R(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.ConnectionPoolClearedEvent=gt.ConnectionCheckedInEvent=gt.ConnectionCheckedOutEvent=gt.ConnectionCheckOutFailedEvent=gt.ConnectionCheckOutStartedEvent=gt.ConnectionClosedEvent=gt.ConnectionReadyEvent=gt.ConnectionCreatedEvent=gt.ConnectionPoolClosedEvent=gt.ConnectionPoolReadyEvent=gt.ConnectionPoolCreatedEvent=gt.ConnectionPoolMonitoringEvent=void 0;var Go=Mt(),Ow=de(),nn=class{constructor(e){this.time=new Date,this.address=e.address}};gt.ConnectionPoolMonitoringEvent=nn;var gw=class extends nn{constructor(e){super(e),this.name=Go.CONNECTION_POOL_CREATED;let{maxConnecting:r,maxPoolSize:n,minPoolSize:o,maxIdleTimeMS:i,waitQueueTimeoutMS:s}=e.options;this.options={maxConnecting:r,maxPoolSize:n,minPoolSize:o,maxIdleTimeMS:i,waitQueueTimeoutMS:s}}};gt.ConnectionPoolCreatedEvent=gw;var Ew=class extends nn{constructor(e){super(e),this.name=Go.CONNECTION_POOL_READY}};gt.ConnectionPoolReadyEvent=Ew;var yw=class extends nn{constructor(e){super(e),this.name=Go.CONNECTION_POOL_CLOSED}};gt.ConnectionPoolClosedEvent=yw;var Cw=class extends nn{constructor(e,r){super(e),this.name=Go.CONNECTION_CREATED,this.connectionId=r.id}};gt.ConnectionCreatedEvent=Cw;var Aw=class extends nn{constructor(e,r,n){super(e),this.name=Go.CONNECTION_READY,this.durationMS=(0,Ow.now)()-n,this.connectionId=r.id}};gt.ConnectionReadyEvent=Aw;var Sw=class extends nn{constructor(e,r,n,o){super(e),this.name=Go.CONNECTION_CLOSED,this.connectionId=r.id,this.reason=n,this.serviceId=r.serviceId,this.error=o??null}};gt.ConnectionClosedEvent=Sw;var _w=class extends nn{constructor(e){super(e),this.name=Go.CONNECTION_CHECK_OUT_STARTED}};gt.ConnectionCheckOutStartedEvent=_w;var ww=class extends nn{constructor(e,r,n,o){super(e),this.name=Go.CONNECTION_CHECK_OUT_FAILED,this.durationMS=(0,Ow.now)()-n,this.reason=r,this.error=o}};gt.ConnectionCheckOutFailedEvent=ww;var Tw=class extends nn{constructor(e,r,n){super(e),this.name=Go.CONNECTION_CHECKED_OUT,this.durationMS=(0,Ow.now)()-n,this.connectionId=r.id}};gt.ConnectionCheckedOutEvent=Tw;var bw=class extends nn{constructor(e,r){super(e),this.name=Go.CONNECTION_CHECKED_IN,this.connectionId=r.id}};gt.ConnectionCheckedInEvent=bw;var vw=class extends nn{constructor(e,r={}){super(e),this.name=Go.CONNECTION_POOL_CLEARED,this.serviceId=r.serviceId,this.interruptInUseConnections=r.interruptInUseConnections}};gt.ConnectionPoolClearedEvent=vw});var Nw=R(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});pi.WaitQueueTimeoutError=pi.PoolClearedOnNetworkError=pi.PoolClearedError=pi.PoolClosedError=void 0;var Zm=ie(),Dw=class extends Zm.MongoDriverError{constructor(e){super("Attempted to check out a connection from closed connection pool"),this.address=e.address}get name(){return"MongoPoolClosedError"}};pi.PoolClosedError=Dw;var eg=class extends Zm.MongoNetworkError{constructor(e,r){let n=r||`Connection pool for ${e.address} was cleared because another operation failed with: "${e.serverError?.message}"`;super(n,e.serverError?{cause:e.serverError}:void 0),this.address=e.address,this.addErrorLabel(Zm.MongoErrorLabel.PoolRequstedRetry)}get name(){return"MongoPoolClearedError"}};pi.PoolClearedError=eg;var Iw=class extends eg{constructor(e){super(e,`Connection to ${e.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}};pi.PoolClearedOnNetworkError=Iw;var Mw=class extends Zm.MongoDriverError{constructor(e,r){super(e),this.address=r}get name(){return"MongoWaitQueueTimeoutError"}};pi.WaitQueueTimeoutError=Mw});var ZB=R(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.ConnectionPool=hr.PoolState=void 0;var El=require("timers"),ro=Mt(),Vo=ie(),QB=On(),Jse=$t(),ns=de(),Xse=sw(),tg=Ym(),fr=Rw(),yl=Nw(),Qse=N6();hr.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});var on=class t extends QB.TypedEventEmitter{constructor(e,r){if(super(),this.on("error",ns.noop),this.options=Object.freeze({connectionType:tg.Connection,...r,maxPoolSize:r.maxPoolSize??100,minPoolSize:r.minPoolSize??0,maxConnecting:r.maxConnecting??2,maxIdleTimeMS:r.maxIdleTimeMS??0,waitQueueTimeoutMS:r.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:r.minPoolSizeCheckFrequencyMS??100,autoEncrypter:r.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new Vo.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=hr.PoolState.paused,this.server=e,this.connections=new ns.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=(0,ns.makeCounter)(1),this.cancellationToken=new QB.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new ns.List,this.metrics=new Qse.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(t.CONNECTION_POOL_CREATED,new fr.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===hr.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){this.poolState===hr.PoolState.paused&&(this.poolState=hr.PoolState.ready,this.emitAndLog(t.CONNECTION_POOL_READY,new fr.ConnectionPoolReadyEvent(this)),(0,El.clearTimeout)(this.minPoolSizeTimer),this.ensureMinPoolSize())}async checkOut(e){let r=(0,ns.now)();this.emitAndLog(t.CONNECTION_CHECK_OUT_STARTED,new fr.ConnectionCheckOutStartedEvent(this));let{promise:n,resolve:o,reject:i}=(0,ns.promiseWithResolvers)(),s=e.timeoutContext.connectionCheckoutTimeout,u={resolve:o,reject:i,cancelled:!1,checkoutTime:r},a=(0,ns.addAbortListener)(e.signal,function(){u.cancelled=!0,i(this.reason)});this.waitQueue.push(u),process.nextTick(()=>this.processWaitQueue());try{return s?.throwIfExpired(),await(s?Promise.race([n,s]):n)}catch(c){if(Jse.TimeoutError.is(c)){s?.clear(),u.cancelled=!0,this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new fr.ConnectionCheckOutFailedEvent(this,"timeout",u.checkoutTime));let d=new yl.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);throw e.timeoutContext.csotEnabled()?new Vo.MongoOperationTimeoutError("Timed out during connection checkout",{cause:d}):d}throw c}finally{a?.[ns.kDispose](),s?.clear()}}checkIn(e){if(!this.checkedOut.has(e))return;let r=this.closed,n=this.connectionIsStale(e),o=!!(r||n||e.closed);if(o||(e.markAvailable(),this.connections.unshift(e)),this.checkedOut.delete(e),this.emitAndLog(t.CONNECTION_CHECKED_IN,new fr.ConnectionCheckedInEvent(this,e)),o){let i=e.closed?"error":r?"poolClosed":"stale";this.destroyConnection(e,i)}process.nextTick(()=>this.processWaitQueue())}clear(e={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:i}=e;if(!i)throw new Vo.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let s=i.toHexString(),u=this.serviceGenerations.get(s);if(u==null)throw new Vo.MongoRuntimeError("Service generations are required in load balancer mode.");this.serviceGenerations.set(s,u+1),this.emitAndLog(t.CONNECTION_POOL_CLEARED,new fr.ConnectionPoolClearedEvent(this,{serviceId:i}));return}let r=e.interruptInUseConnections??!1,n=this.generation;this.generation+=1;let o=this.poolState===hr.PoolState.paused;this.poolState=hr.PoolState.paused,this.clearMinPoolSizeTimer(),o||this.emitAndLog(t.CONNECTION_POOL_CLEARED,new fr.ConnectionPoolClearedEvent(this,{interruptInUseConnections:r})),r&&process.nextTick(()=>this.interruptInUseConnections(n)),this.processWaitQueue()}interruptInUseConnections(e){for(let r of this.checkedOut)r.generation<=e&&r.onError(new yl.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let e of this.checkedOut)e.onError(new Vo.MongoClientClosedError)}close(){if(!this.closed){this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return=="function"&&this.connectionCounter.return(void 0),this.poolState=hr.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let e of this.connections)this.emitAndLog(t.CONNECTION_CLOSED,new fr.ConnectionClosedEvent(this,e,"poolClosed")),e.destroy();this.connections.clear(),this.emitAndLog(t.CONNECTION_POOL_CLOSED,new fr.ConnectionPoolClosedEvent(this))}}async reauthenticate(e){let r=e.authContext;if(!r)throw new Vo.MongoRuntimeError("No auth context found on connection.");let n=r.credentials;if(!n)throw new Vo.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let o=n.resolveAuthMechanism(e.hello),i=this.server.topology.client.s.authProviders.getOrCreateProvider(o.mechanism,o.mechanismProperties);if(!i)throw new Vo.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${n.mechanism}`);await i.reauth(r)}clearMinPoolSizeTimer(){let e=this.minPoolSizeTimer;e&&(0,El.clearTimeout)(e)}destroyConnection(e,r){this.emitAndLog(t.CONNECTION_CLOSED,new fr.ConnectionClosedEvent(this,e,r)),e.destroy()}connectionIsStale(e){let r=e.serviceId;if(this.loadBalanced&&r){let n=r.toHexString(),o=this.serviceGenerations.get(n);return e.generation!==o}return e.generation!==this.generation}connectionIsIdle(e){return!!(this.options.maxIdleTimeMS&&e.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(e){let r=this.connectionIsStale(e),n=this.connectionIsIdle(e);if(!r&&!n&&!e.closed)return!1;let o=e.closed?"error":r?"stale":"idle";return this.destroyConnection(e,o),!0}createConnection(e){let r={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders,extendedMetadata:this.server.topology.client.options.extendedMetadata};this.pending++;let n=(0,ns.now)();this.emitAndLog(t.CONNECTION_CREATED,new fr.ConnectionCreatedEvent(this,{id:r.id})),(0,Xse.connect)(r).then(o=>{if(this.poolState!==hr.PoolState.ready){this.pending--,o.destroy(),e(this.closed?new yl.PoolClosedError(this):new yl.PoolClearedError(this));return}for(let i of[...ro.APM_EVENTS,tg.Connection.CLUSTER_TIME_RECEIVED])o.on(i,s=>this.emit(i,s));if(this.loadBalanced){o.on(tg.Connection.PINNED,s=>this.metrics.markPinned(s)),o.on(tg.Connection.UNPINNED,s=>this.metrics.markUnpinned(s));let i=o.serviceId;if(i){let s,u=i.toHexString();(s=this.serviceGenerations.get(u))?o.generation=s:(this.serviceGenerations.set(u,0),o.generation=0)}}o.markAvailable(),this.emitAndLog(t.CONNECTION_READY,new fr.ConnectionReadyEvent(this,o,n)),this.pending--,e(void 0,o)},o=>{this.pending--,this.server.handleError(o),this.emitAndLog(t.CONNECTION_CLOSED,new fr.ConnectionClosedEvent(this,{id:r.id,serviceId:void 0},"error",o)),(o instanceof Vo.MongoNetworkError||o instanceof Vo.MongoServerError)&&(o.connectionGeneration=r.generation),e(o??new Vo.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let e=this.options.minPoolSize;this.poolState===hr.PoolState.ready&&(this.connections.prune(r=>this.destroyConnectionIfPerished(r)),this.totalConnectionCount<e&&this.pendingConnectionCount<this.options.maxConnecting?this.createConnection((r,n)=>{!r&&n&&(this.connections.push(n),process.nextTick(()=>this.processWaitQueue())),this.poolState===hr.PoolState.ready&&((0,El.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,El.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS))}):((0,El.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,El.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)))}processWaitQueue(){if(this.processingWaitQueue)return;for(this.processingWaitQueue=!0;this.waitQueueSize;){let n=this.waitQueue.first();if(!n){this.waitQueue.shift();continue}if(n.cancelled){this.waitQueue.shift();continue}if(this.poolState!==hr.PoolState.ready){let i=this.closed?"poolClosed":"connectionError",s=this.closed?new yl.PoolClosedError(this):new yl.PoolClearedError(this);this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new fr.ConnectionCheckOutFailedEvent(this,i,n.checkoutTime,s)),this.waitQueue.shift(),n.reject(s);continue}if(!this.availableConnectionCount)break;let o=this.connections.shift();if(!o)break;this.destroyConnectionIfPerished(o)||(this.checkedOut.add(o),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new fr.ConnectionCheckedOutEvent(this,o,n.checkoutTime)),this.waitQueue.shift(),n.resolve(o))}let{maxPoolSize:e,maxConnecting:r}=this.options;for(;this.waitQueueSize>0&&this.pendingConnectionCount<r&&(e===0||this.totalConnectionCount<e);){let n=this.waitQueue.shift();!n||n.cancelled||this.createConnection((o,i)=>{n.cancelled?!o&&i&&this.connections.push(i):o?(this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new fr.ConnectionCheckOutFailedEvent(this,"connectionError",n.checkoutTime,o)),n.reject(o)):i&&(this.checkedOut.add(i),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new fr.ConnectionCheckedOutEvent(this,i,n.checkoutTime)),n.resolve(i)),process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}};hr.ConnectionPool=on;on.CONNECTION_POOL_CREATED=ro.CONNECTION_POOL_CREATED;on.CONNECTION_POOL_CLOSED=ro.CONNECTION_POOL_CLOSED;on.CONNECTION_POOL_CLEARED=ro.CONNECTION_POOL_CLEARED;on.CONNECTION_POOL_READY=ro.CONNECTION_POOL_READY;on.CONNECTION_CREATED=ro.CONNECTION_CREATED;on.CONNECTION_READY=ro.CONNECTION_READY;on.CONNECTION_CLOSED=ro.CONNECTION_CLOSED;on.CONNECTION_CHECK_OUT_STARTED=ro.CONNECTION_CHECK_OUT_STARTED;on.CONNECTION_CHECK_OUT_FAILED=ro.CONNECTION_CHECK_OUT_FAILED;on.CONNECTION_CHECKED_OUT=ro.CONNECTION_CHECKED_OUT;on.CONNECTION_CHECKED_IN=ro.CONNECTION_CHECKED_IN});var kw=R(rg=>{"use strict";Object.defineProperty(rg,"__esModule",{value:!0});rg.Server=void 0;var Zse=Ym(),eue=ZB(),tue=Nw(),mi=Mt(),At=ie(),rue=On(),nue=ad(),Fw=P6(),da=de(),eP=Fr(),lt=Tn(),oue=Lw(),xw=kd(),iue=td(),Gd=(0,da.makeStateMachine)({[lt.STATE_CLOSED]:[lt.STATE_CLOSED,lt.STATE_CONNECTING],[lt.STATE_CONNECTING]:[lt.STATE_CONNECTING,lt.STATE_CLOSING,lt.STATE_CONNECTED,lt.STATE_CLOSED],[lt.STATE_CONNECTED]:[lt.STATE_CONNECTED,lt.STATE_CLOSING,lt.STATE_CLOSED],[lt.STATE_CLOSING]:[lt.STATE_CLOSING,lt.STATE_CLOSED]}),$o=class t extends rue.TypedEventEmitter{constructor(e,r,n){super(),this.on("error",da.noop),this.serverApi=n.serverApi;let o={hostAddress:r.hostAddress,...n};this.topology=e,this.pool=new eue.ConnectionPool(this,o),this.s={description:r,options:n,state:lt.STATE_CLOSED,operationCount:0};for(let i of[...mi.CMAP_EVENTS,...mi.APM_EVENTS])this.pool.on(i,s=>this.emit(i,s));if(this.pool.on(Zse.Connection.CLUSTER_TIME_RECEIVED,i=>{this.clusterTime=i}),this.loadBalanced){this.monitor=null;return}this.monitor=new oue.Monitor(this,this.s.options);for(let i of mi.HEARTBEAT_EVENTS)this.monitor.on(i,s=>this.emit(i,s));this.monitor.on("resetServer",i=>Bw(this,i)),this.monitor.on(t.SERVER_HEARTBEAT_SUCCEEDED,i=>{this.emit(t.DESCRIPTION_RECEIVED,new xw.ServerDescription(this.description.hostAddress,i.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===lt.STATE_CONNECTING&&(Gd(this,lt.STATE_CONNECTED),this.emit(t.CONNECT,this))})}get clusterTime(){return this.topology.clusterTime}set clusterTime(e){this.topology.clusterTime=e}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter}get loadBalanced(){return this.topology.description.type===lt.TopologyType.LoadBalanced}connect(){this.s.state===lt.STATE_CLOSED&&(Gd(this,lt.STATE_CONNECTING),this.loadBalanced?(Gd(this,lt.STATE_CONNECTED),this.emit(t.CONNECT,this)):this.monitor?.connect())}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){this.s.state!==lt.STATE_CLOSED&&(Gd(this,lt.STATE_CLOSING),this.loadBalanced||this.monitor?.close(),this.pool.close(),Gd(this,lt.STATE_CLOSED),this.emit("closed"))}requestCheck(){this.loadBalanced||this.monitor?.requestCheck()}async command(e,r){if(this.s.state===lt.STATE_CLOSING||this.s.state===lt.STATE_CLOSED)throw new At.MongoServerClosedError;let n=e.session,o=n?.pinnedConnection;if(this.incrementOperationCount(),o==null)try{o=await this.pool.checkOut({timeoutContext:r,signal:e.options.signal})}catch(p){throw this.decrementOperationCount(),p instanceof tue.PoolClearedError||this.handleError(p),p}let i=null,s=()=>{if(this.decrementOperationCount(),n?.pinnedConnection!==o)if(i!=null){let p=()=>{this.pool.checkIn(o)};i.then(p,p)}else this.pool.checkIn(o)},u;try{u=e.buildCommand(o,n)}catch(p){throw s(),p}let a=e.buildOptions(r),c=e.ns;this.loadBalanced&&sue(u,n)&&!n?.pinnedConnection&&n?.pin(o),a.directConnection=this.topology.s.options.directConnection,e instanceof nue.AggregateOperation&&e.hasWriteStage&&(0,da.maxWireVersion)(o)<iue.MIN_SECONDARY_WRITE_WIRE_VERSION&&delete a.readPreference,this.description.iscryptd&&(a.omitMaxTimeMS=!0);try{try{let p=await o.command(c,u,a,e.SERVER_COMMAND_RESPONSE_TYPE);return(0,eP.throwIfWriteConcernError)(p),p}catch(p){throw this.decorateCommandError(o,u,a,p)}}catch(p){if(p instanceof At.MongoError&&p.code===At.MONGODB_ERROR_CODES.Reauthenticate){i=this.pool.reauthenticate(o),i.then(void 0,m=>{i=null,(0,da.squashError)(m)}),await(0,da.abortable)(i,a),i=null;try{let m=await o.command(c,u,a,e.SERVER_COMMAND_RESPONSE_TYPE);return(0,eP.throwIfWriteConcernError)(m),m}catch(m){throw this.decorateCommandError(o,u,a,m)}}else throw p}finally{s()}}handleError(e,r){if(!(e instanceof At.MongoError)||e.connectionGeneration&&e.connectionGeneration<this.pool.generation)return;let o=e instanceof At.MongoNetworkError&&!(e instanceof At.MongoNetworkTimeoutError),i=e instanceof At.MongoNetworkError&&e.beforeHandshake,s=e.hasErrorLabel(At.MongoErrorLabel.HandshakeError);if(o||i||s)this.loadBalanced?r&&this.pool.clear({serviceId:r.serviceId}):(e.addErrorLabel(At.MongoErrorLabel.ResetPool),Bw(this,e));else if((0,At.isSDAMUnrecoverableError)(e)&&aue(this,e)){let u=(0,At.isNodeShuttingDownError)(e);this.loadBalanced&&r&&u&&this.pool.clear({serviceId:r.serviceId}),this.loadBalanced||(u&&e.addErrorLabel(At.MongoErrorLabel.ResetPool),Bw(this,e),process.nextTick(()=>this.requestCheck()))}}decorateCommandError(e,r,n,o){if(typeof o!="object"||o==null||!("name"in o))throw new At.MongoRuntimeError("An unexpected error type: "+typeof o);if(o.name==="AbortError"&&"cause"in o&&o.cause instanceof At.MongoError&&(o=o.cause),!(o instanceof At.MongoError)||uue(this.pool,e))return o;let i=n?.session;return o instanceof At.MongoNetworkError?(i&&!i.hasEnded&&i.serverSession&&(i.serverSession.isDirty=!0),Pw(i,r)&&!o.hasErrorLabel(At.MongoErrorLabel.TransientTransactionError)&&o.addErrorLabel(At.MongoErrorLabel.TransientTransactionError),(tP(this.topology)||(0,Fw.isTransactionCommand)(r))&&(0,da.supportsRetryableWrites)(this)&&!Pw(i,r)&&o.addErrorLabel(At.MongoErrorLabel.RetryableWriteError)):(tP(this.topology)||(0,Fw.isTransactionCommand)(r))&&(0,At.needsRetryableWriteLabel)(o,(0,da.maxWireVersion)(this),this.description.type)&&!Pw(i,r)&&o.addErrorLabel(At.MongoErrorLabel.RetryableWriteError),i&&i.isPinned&&o.hasErrorLabel(At.MongoErrorLabel.TransientTransactionError)&&i.unpin({force:!0}),this.handleError(o,e),o}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}};rg.Server=$o;$o.SERVER_HEARTBEAT_STARTED=mi.SERVER_HEARTBEAT_STARTED;$o.SERVER_HEARTBEAT_SUCCEEDED=mi.SERVER_HEARTBEAT_SUCCEEDED;$o.SERVER_HEARTBEAT_FAILED=mi.SERVER_HEARTBEAT_FAILED;$o.CONNECT=mi.CONNECT;$o.DESCRIPTION_RECEIVED=mi.DESCRIPTION_RECEIVED;$o.CLOSED=mi.CLOSED;$o.ENDED=mi.ENDED;function Bw(t,e){t.loadBalanced||(e instanceof At.MongoNetworkError&&!(e instanceof At.MongoNetworkTimeoutError)&&t.monitor?.reset(),t.emit($o.DESCRIPTION_RECEIVED,new xw.ServerDescription(t.description.hostAddress,void 0,{error:e})))}function sue(t,e){return e?e.inTransaction()||e.transaction.isCommitted&&"commitTransaction"in t||"aggregate"in t||"find"in t||"getMore"in t||"listCollections"in t||"listIndexes"in t||"bulkWrite"in t:!1}function uue(t,e){return e.serviceId?e.generation!==t.serviceGenerations.get(e.serviceId.toHexString()):e.generation!==t.generation}function aue(t,e){let r=e.topologyVersion,n=t.description.topologyVersion;return(0,xw.compareTopologyVersion)(n,r)<0}function Pw(t,e){return t&&t.inTransaction()&&!(0,Fw.isTransactionCommand)(e)}function tP(t){return t.s.options.retryWrites!==!1}});var Lw=R(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.RTTSampler=sn.MonitorInterval=sn.RTTPinger=sn.Monitor=sn.ServerMonitoringMode=void 0;var nu=require("timers"),rP=qe(),ng=sw(),cue=N3(),Uw=Mt(),Cl=ie(),lue=Gs(),nP=On(),pr=de(),mr=Tn(),Vd=Qm(),$d=kw(),Al="idle",fa="monitoring",Sl=(0,pr.makeStateMachine)({[mr.STATE_CLOSING]:[mr.STATE_CLOSING,Al,mr.STATE_CLOSED],[mr.STATE_CLOSED]:[mr.STATE_CLOSED,fa],[Al]:[Al,fa,mr.STATE_CLOSING],[fa]:[fa,Al,mr.STATE_CLOSING]}),due=new Set([mr.STATE_CLOSING,mr.STATE_CLOSED,fa]);function Hd(t){return t.s.state===mr.STATE_CLOSED||t.s.state===mr.STATE_CLOSING}sn.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});var qw=class extends nP.TypedEventEmitter{constructor(e,r){super(),this.component=lue.MongoLoggableComponent.TOPOLOGY,this.on("error",pr.noop),this.server=e,this.connection=null,this.cancellationToken=new nP.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:mr.STATE_CLOSED},this.address=e.description.address,this.options=Object.freeze({connectTimeoutMS:r.connectTimeoutMS??1e4,heartbeatFrequencyMS:r.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:r.minHeartbeatFrequencyMS??500,serverMonitoringMode:r.serverMonitoringMode}),this.isRunningInFaasEnv=(0,cue.getFAASEnv)()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new ig(10);let n=this.cancellationToken,o={id:"<monitor>",generation:e.pool.generation,cancellationToken:n,hostAddress:e.description.hostAddress,...r,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};delete o.credentials,o.autoEncrypter&&delete o.autoEncrypter,this.connectOptions=Object.freeze(o)}connect(){if(this.s.state!==mr.STATE_CLOSED)return;let e=this.options.heartbeatFrequencyMS,r=this.options.minHeartbeatFrequencyMS;this.monitorId=new Wd(iP(this),{heartbeatFrequencyMS:e,minHeartbeatFrequencyMS:r,immediate:!0})}requestCheck(){due.has(this.s.state)||this.monitorId?.wake()}reset(){let e=this.server.description.topologyVersion;if(Hd(this)||e==null)return;Sl(this,mr.STATE_CLOSING),oP(this),Sl(this,Al);let r=this.options.heartbeatFrequencyMS,n=this.options.minHeartbeatFrequencyMS;this.monitorId=new Wd(iP(this),{heartbeatFrequencyMS:r,minHeartbeatFrequencyMS:n})}close(){Hd(this)||(Sl(this,mr.STATE_CLOSING),oP(this),this.emit("close"),Sl(this,mr.STATE_CLOSED))}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(e){this.rttSampler.addSample(e)}clearRttSamples(){this.rttSampler.clear()}};sn.Monitor=qw;function oP(t){t.monitorId?.stop(),t.monitorId=void 0,t.rttPinger?.close(),t.rttPinger=void 0,t.cancellationToken.emit("cancel"),t.connection?.destroy(),t.connection=null,t.clearRttSamples()}function Gw(t,e){if(e==null)return!1;let r=t.options.serverMonitoringMode;return r===sn.ServerMonitoringMode.poll?!1:r===sn.ServerMonitoringMode.stream?!0:!t.isRunningInFaasEnv}function fue(t,e){let r,n,o=t.server.description.topologyVersion,i=Gw(t,o);t.emitAndLogHeartbeat($d.Server.SERVER_HEARTBEAT_STARTED,t.server.topology.s.id,void 0,new Vd.ServerHeartbeatStartedEvent(t.address,i));function s(c){t.connection?.destroy(),t.connection=null,t.emitAndLogHeartbeat($d.Server.SERVER_HEARTBEAT_FAILED,t.server.topology.s.id,void 0,new Vd.ServerHeartbeatFailedEvent(t.address,(0,pr.calculateDurationInMs)(r),c,n));let d=c instanceof Cl.MongoError?c:new Cl.MongoError(Cl.MongoError.buildErrorMessage(c),{cause:c});d.addErrorLabel(Cl.MongoErrorLabel.ResetPool),d instanceof Cl.MongoNetworkTimeoutError&&d.addErrorLabel(Cl.MongoErrorLabel.InterruptInUseConnections),t.emit("resetServer",d),e(c)}function u(c){"isWritablePrimary"in c||(c.isWritablePrimary=c[Uw.LEGACY_HELLO_COMMAND]);let d=i&&t.rttPinger?t.rttPinger.latestRtt??(0,pr.calculateDurationInMs)(r):(0,pr.calculateDurationInMs)(r);t.addRttSample(d),t.emitAndLogHeartbeat($d.Server.SERVER_HEARTBEAT_SUCCEEDED,t.server.topology.s.id,c.connectionId,new Vd.ServerHeartbeatSucceededEvent(t.address,d,c,i)),i?(t.emitAndLogHeartbeat($d.Server.SERVER_HEARTBEAT_STARTED,t.server.topology.s.id,void 0,new Vd.ServerHeartbeatStartedEvent(t.address,!0)),r=(0,pr.now)()):(t.rttPinger?.close(),t.rttPinger=void 0,e(void 0,c))}let{connection:a}=t;if(a&&!a.closed){let{serverApi:c,helloOk:d}=a,p=t.options.connectTimeoutMS,m=t.options.heartbeatFrequencyMS,E={[c?.version||d?"hello":Uw.LEGACY_HELLO_COMMAND]:1,...i&&o?{maxAwaitTimeMS:m,topologyVersion:hue(o)}:{}},y=i?{socketTimeoutMS:p?p+m:0,exhaustAllowed:!0}:{socketTimeoutMS:p};if(i&&t.rttPinger==null&&(t.rttPinger=new og(t)),r=(0,pr.now)(),i)return n=!0,a.exhaustCommand((0,pr.ns)("admin.$cmd"),E,y,(A,S)=>A?s(A):u(S));n=!1,a.command((0,pr.ns)("admin.$cmd"),E,y).then(u,s);return}(async()=>{let c=await(0,ng.makeSocket)(t.connectOptions),d=(0,ng.makeConnection)(t.connectOptions,c);r=(0,pr.now)();try{return await(0,ng.performInitialHandshake)(d,t.connectOptions),d}catch(p){throw d.destroy(),p}})().then(c=>{if(Hd(t)){c.destroy();return}let d=(0,pr.calculateDurationInMs)(r);t.addRttSample(d),t.connection=c,t.emitAndLogHeartbeat($d.Server.SERVER_HEARTBEAT_SUCCEEDED,t.server.topology.s.id,c.hello?.connectionId,new Vd.ServerHeartbeatSucceededEvent(t.address,d,c.hello,Gw(t,c.hello?.topologyVersion))),e(void 0,c.hello)},c=>{t.connection=null,n=!1,s(c)})}function iP(t){return e=>{if(t.s.state===fa){process.nextTick(e);return}Sl(t,fa);function r(){Hd(t)||Sl(t,Al),e()}fue(t,(n,o)=>{if(n&&t.server.description.type===mr.ServerType.Unknown)return r();Gw(t,o?.topologyVersion)&&(0,nu.setTimeout)(()=>{Hd(t)||t.monitorId?.wake()},0),r()})}}function hue(t){return{processId:t.processId,counter:rP.Long.isLong(t.counter)?t.counter:rP.Long.fromNumber(t.counter)}}var og=class{constructor(e){this.connection=void 0,this.cancellationToken=e.cancellationToken,this.closed=!1,this.monitor=e,this.latestRtt=e.latestRtt??void 0;let r=e.options.heartbeatFrequencyMS;this.monitorId=(0,nu.setTimeout)(()=>this.measureRoundTripTime(),r)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,(0,nu.clearTimeout)(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(e,r){if(this.closed){r?.destroy();return}this.connection==null&&(this.connection=r),this.latestRtt=(0,pr.calculateDurationInMs)(e),this.monitorId=(0,nu.setTimeout)(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let e=(0,pr.now)();if(this.closed)return;let r=this.connection;if(r==null){(0,ng.connect)(this.monitor.connectOptions).then(o=>{this.measureAndReschedule(e,o)},()=>{this.connection=void 0});return}let n=r.serverApi?.version||r.helloOk?"hello":Uw.LEGACY_HELLO_COMMAND;r.command((0,pr.ns)("admin.$cmd"),{[n]:1},void 0).then(()=>this.measureAndReschedule(e),()=>{this.connection?.destroy(),this.connection=void 0})}};sn.RTTPinger=og;var Wd=class{constructor(e,r={}){this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{this.stopped||(this.timerId&&(0,nu.clearTimeout)(this.timerId),this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=(0,pr.now)(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)}))},this.fn=e,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=r.heartbeatFrequencyMS??1e3,this.minHeartbeatFrequencyMS=r.minHeartbeatFrequencyMS??500,r.immediate?this._executeAndReschedule():this._reschedule(void 0)}wake(){let r=(0,pr.now)()-this.lastExecutionEnded;if(r<0)return this._executeAndReschedule();if(!this.isExecutionInProgress&&!this.isExpeditedCallToFnScheduled){if(r<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-r);return}this._executeAndReschedule()}}stop(){this.stopped=!0,this.timerId&&((0,nu.clearTimeout)(this.timerId),this.timerId=void 0),this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let e=(0,pr.now)(),r=e-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:e,timeSinceLastCall:r}}_reschedule(e){this.stopped||(this.timerId&&(0,nu.clearTimeout)(this.timerId),this.timerId=(0,nu.setTimeout)(this._executeAndReschedule,e||this.heartbeatFrequencyMS))}};sn.MonitorInterval=Wd;var ig=class{constructor(e=10){this.rttSamples=new Float64Array(e),this.length=0,this.writeIndex=0}addSample(e){this.rttSamples[this.writeIndex++]=e,this.length<this.rttSamples.length&&this.length++,this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let e=this.rttSamples[0];for(let r=1;r<this.length;r++)this.rttSamples[r]<e&&(e=this.rttSamples[r]);return e}average(){if(this.length===0)return 0;let e=0;for(let r=0;r<this.length;r++)e+=this.rttSamples[r];return e/this.length}get last(){return this.length===0?null:this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}};sn.RTTSampler=ig});var Kw=R(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.DEFAULT_OPTIONS=In.OPTIONS=void 0;In.resolveSRVRecord=_ue;In.parseOptions=Tue;var Vw=require("dns"),pue=Q3(),mue=require("url"),_l=um(),gi=di(),sP=vd(),uP=_B(),pe=ie(),sg=eu(),Ww=Gs(),$w=Do(),ou=tr(),gue=Lw(),br=de(),os=Fr(),Hw=["authSource","replicaSet","loadBalanced"],Eue="loadBalanced option only supported with a single host in the URI",yue="loadBalanced option not supported with a replicaSet option",Cue="loadBalanced option not supported when directConnection is provided";function lP(t){return async function(r){try{return await Vw.promises[t](r)}catch(n){if(n.code===Vw.TIMEOUT)return await Vw.promises[t](r);throw n}}}var Aue=lP("resolveSrv"),Sue=lP("resolveTxt");async function _ue(t){if(typeof t.srvHost!="string")throw new pe.MongoAPIError('Option "srvHost" must not be empty');let e=t.srvHost,r=Sue(e);r.then(void 0,br.squashError);let n=`_${t.srvServiceName}._tcp.${e}`,o=await Aue(n);if(o.length===0)throw new pe.MongoAPIError("No addresses found at host");for(let{name:m}of o)(0,br.checkParentDomainMatch)(m,e);let i=o.map(m=>br.HostAddress.fromString(`${m.name}:${m.port??27017}`));zw(i,t,!0);let s;try{s=await r}catch(m){if(m.code!=="ENODATA"&&m.code!=="ENOTFOUND")throw m;return i}if(s.length>1)throw new pe.MongoParseError("Multiple text records not allowed");let u=new mue.URLSearchParams(s[0].join(""));if([...u.keys()].some(m=>!Hw.includes(m)))throw new pe.MongoParseError(`Text record may only set any of: ${Hw.join(", ")}`);if(Hw.some(m=>u.get(m)===""))throw new pe.MongoParseError("Cannot have empty URI params in DNS TXT Record");let c=u.get("authSource")??void 0,d=u.get("replicaSet")??void 0,p=u.get("loadBalanced")??void 0;if(!t.userSpecifiedAuthSource&&c&&t.credentials&&!gi.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(t.credentials.mechanism)&&(t.credentials=_l.MongoCredentials.merge(t.credentials,{source:c})),!t.userSpecifiedReplicaSet&&d&&(t.replicaSet=d),p==="true"&&(t.loadBalanced=!0),t.replicaSet&&t.srvMaxHosts>0)throw new pe.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return zw(i,t,!0),i}function wue(t){if(!t)return;let e=(r,n)=>{if(t.has(r)&&t.has(n))throw new pe.MongoAPIError(`The '${r}' option cannot be used with the '${n}' option`)};e("tlsInsecure","tlsAllowInvalidCertificates"),e("tlsInsecure","tlsAllowInvalidHostnames")}function is(t,e){if(typeof e=="boolean")return e;switch(e){case"true":return!0;case"false":return!1;default:throw new pe.MongoParseError(`${t} must be either "true" or "false"`)}}function jw(t,e){let r=(0,br.parseInteger)(e);if(r!=null)return r;throw new pe.MongoParseError(`Expected ${t} to be stringified int value, got: ${e}`)}function zd(t,e){let r=jw(t,e);if(r<0)throw new pe.MongoParseError(`${t} can only be a positive int value, got: ${e}`);return r}function*aP(t){if(t==="")return;let e=t.split(",");for(let r of e){let[n,o]=r.split(/:(.*)/);if(o==null)throw new pe.MongoParseError("Cannot have undefined values in key value pairs");yield[n,o]}}var wl=class extends Map{constructor(e=[]){super(e.map(([r,n])=>[r.toLowerCase(),n]))}has(e){return super.has(e.toLowerCase())}get(e){return super.get(e.toLowerCase())}set(e,r){return super.set(e.toLowerCase(),r)}delete(e){return super.delete(e.toLowerCase())}};function Tue(t,e=void 0,r={}){if(e!=null&&!(e instanceof sg.MongoClient)&&(r=e,e=void 0),r.useBigInt64&&typeof r.promoteLongs=="boolean"&&!r.promoteLongs)throw new pe.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(r.useBigInt64&&typeof r.promoteValues=="boolean"&&!r.promoteValues)throw new pe.MongoAPIError("Must request either bigint or Long for int64 deserialization");let n=new pue.default(t),{hosts:o,isSRV:i}=n,s=Object.create(null);s.hosts=i?[]:o.map(br.HostAddress.fromString);let u=new wl;if(n.pathname!=="/"&&n.pathname!==""){let y=decodeURIComponent(n.pathname[0]==="/"?n.pathname.slice(1):n.pathname);y&&u.set("dbName",[y])}if(n.username!==""){let y={username:decodeURIComponent(n.username)};typeof n.password=="string"&&(y.password=decodeURIComponent(n.password)),u.set("auth",[y])}for(let y of n.searchParams.keys()){let A=n.searchParams.getAll(y),S=/readPreferenceTags/i.test(y);if(!S&&A.length>1)throw new pe.MongoInvalidArgumentError(`URI option "${y}" cannot appear more than once in the connection string`);if(!S&&A.includes(""))throw new pe.MongoAPIError(`URI option "${y}" cannot be specified with no value`);u.has(y)||u.set(y,A)}let a=new wl(Object.entries(r).filter(([,y])=>y!=null));if(u.has("serverApi"))throw new pe.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let c=u.get("authMechanismProperties");if(c){for(let y of c)if(/(^|,)ALLOWED_HOSTS:/.test(y))throw new pe.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(a.has("loadBalanced"))throw new pe.MongoParseError("loadBalanced is only a valid option in the URI");let d=new wl,p=new Set([...u.keys(),...a.keys()]);for(let y of p){let A=[],S=a.get(y);S!=null&&A.push(S);let b=u.get(y)??[];A.push(...b),d.set(y,A)}if(d.has("tls")||d.has("ssl")){let y=(d.get("tls")||[]).concat(d.get("ssl")||[]).map(is.bind(null,"tls/ssl"));if(new Set(y).size!==1)throw new pe.MongoParseError("All values of tls/ssl must be the same.")}wue(d);let m=(0,br.setDifference)(p,Array.from(Object.keys(In.OPTIONS)).map(y=>y.toLowerCase()));if(m.size!==0){let y=m.size>1?"options":"option",A=m.size>1?"are":"is";throw new pe.MongoParseError(`${y} ${Array.from(m).join(", ")} ${A} not supported`)}for(let[y,A]of Object.entries(In.OPTIONS)){let S=d.get(y);if(!S||S.length===0)In.DEFAULT_OPTIONS.has(y)&&cP(s,y,A,[In.DEFAULT_OPTIONS.get(y)]);else{let{deprecated:b}=A;if(b){let P=typeof b=="string"?`: ${b}`:"";(0,br.emitWarning)(`${y} is a deprecated option${P}`)}cP(s,y,A,S)}}if(s.credentials){let y=s.credentials.mechanism===gi.AuthMechanism.MONGODB_GSSAPI,A=s.credentials.mechanism===gi.AuthMechanism.MONGODB_X509,S=s.credentials.mechanism===gi.AuthMechanism.MONGODB_AWS,b=s.credentials.mechanism===gi.AuthMechanism.MONGODB_OIDC;if((y||A)&&d.has("authSource")&&s.credentials.source!=="$external")throw new pe.MongoParseError(`authMechanism ${s.credentials.mechanism} requires an authSource of '$external'`);if(!(y||A||S||b)&&s.dbName&&!d.has("authSource")&&(s.credentials=_l.MongoCredentials.merge(s.credentials,{source:s.dbName})),S&&s.credentials.username&&!s.credentials.password)throw new pe.MongoMissingCredentialsError(`When using ${s.credentials.mechanism} password must be set when a username is specified`);s.credentials.validate(),s.credentials.password===""&&s.credentials.username===""&&s.credentials.mechanism===gi.AuthMechanism.MONGODB_DEFAULT&&Object.keys(s.credentials.mechanismProperties).length===0&&delete s.credentials}if(s.dbName||(s.dbName="test"),zw(o,s,i),e&&s.autoEncryption&&(uP.Encrypter.checkForMongoCrypt(),s.encrypter=new uP.Encrypter(e,t,r),s.autoEncrypter=s.encrypter.autoEncrypter),s.userSpecifiedAuthSource=a.has("authSource")||u.has("authSource"),s.userSpecifiedReplicaSet=a.has("replicaSet")||u.has("replicaSet"),i){if(s.srvHost=o[0],s.directConnection)throw new pe.MongoAPIError("SRV URI does not support directConnection");if(s.srvMaxHosts>0&&typeof s.replicaSet=="string")throw new pe.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let y=!a.has("tls")&&!u.has("tls"),A=!a.has("ssl")&&!u.has("ssl");y&&A&&(s.tls=!0)}else if(u.has("srvMaxHosts")||a.has("srvMaxHosts")||u.has("srvServiceName")||a.has("srvServiceName"))throw new pe.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(s.directConnection&&s.hosts.length!==1)throw new pe.MongoParseError("directConnection option requires exactly one host");if(!s.proxyHost&&(s.proxyPort||s.proxyUsername||s.proxyPassword))throw new pe.MongoParseError("Must specify proxyHost if other proxy options are passed");if(s.proxyUsername&&!s.proxyPassword||!s.proxyUsername&&s.proxyPassword)throw new pe.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map(y=>u.get(y)??[]).some(y=>y.length>1))throw new pe.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return s.mongoLoggerOptions=Ww.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:s.mongodbLogPath,mongodbLogComponentSeverities:s.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:s.mongodbLogMaxDocumentLength}),s}function zw(t,e,r){if(e.loadBalanced){if(t.length>1)throw new pe.MongoParseError(Eue);if(e.replicaSet)throw new pe.MongoParseError(yue);if(e.directConnection)throw new pe.MongoParseError(Cue);if(r&&e.srvMaxHosts>0)throw new pe.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}}function cP(t,e,r,n){let{target:o,type:i,transform:s}=r,u=o??e;switch(i){case"boolean":t[u]=is(u,n[0]);break;case"int":t[u]=jw(u,n[0]);break;case"uint":t[u]=zd(u,n[0]);break;case"string":if(n[0]==null)break;t[u]=String(n[0]);break;case"record":if(!(0,br.isRecord)(n[0]))throw new pe.MongoParseError(`${u} must be an object`);t[u]=n[0];break;case"any":t[u]=n[0];break;default:{if(!s)throw new pe.MongoParseError("Descriptors missing a type must define a transform");let a=s({name:u,options:t,values:n});t[u]=a;break}}}In.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:t,options:e,values:[r]}){if(!(0,br.isRecord)(r,["username","password"]))throw new pe.MongoParseError(`${t} must be an object with 'username' and 'password' properties`);return _l.MongoCredentials.merge(e.credentials,{username:r.username,password:r.password})}},authMechanism:{target:"credentials",transform({options:t,values:[e]}){let r=Object.values(gi.AuthMechanism),[n]=r.filter(s=>s.match(RegExp(String.raw`\b${e}\b`,"i")));if(!n)throw new pe.MongoParseError(`authMechanism one of ${r}, got ${e}`);let o=t.credentials?.source;(n===gi.AuthMechanism.MONGODB_PLAIN||gi.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(n))&&(o="$external");let i=t.credentials?.password;return n===gi.AuthMechanism.MONGODB_X509&&i===""&&(i=void 0),_l.MongoCredentials.merge(t.credentials,{mechanism:n,source:o,password:i})}},authMechanismProperties:{target:"credentials",transform({options:t,values:e}){let r=Object.create(null);for(let n of e)if(typeof n=="string")for(let[o,i]of aP(n))try{r[o]=is(o,i)}catch{r[o]=i}else{if(!(0,br.isRecord)(n))throw new pe.MongoParseError("AuthMechanismProperties must be an object");r={...n}}return _l.MongoCredentials.merge(t.credentials,{mechanismProperties:r})}},authSource:{target:"credentials",transform({options:t,values:[e]}){let r=String(e);return _l.MongoCredentials.merge(t.credentials,{source:r})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[t]}){let e=typeof t=="string"?{version:t}:t,r=e&&e.version;if(!r)throw new pe.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(sg.ServerApiVersion).join('", "')}"]`);if(!Object.values(sg.ServerApiVersion).some(n=>n===r))throw new pe.MongoParseError(`Invalid server API version=${r}; must be in the following enum: ["${Object.values(sg.ServerApiVersion).join('", "')}"]`);return e}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:t}){let e=new Set;for(let r of t){let n=typeof r=="string"?r.split(","):r;if(!Array.isArray(n))throw new pe.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let o of n)if(Object.keys(sP.Compressor).includes(String(o)))e.add(String(o));else throw new pe.MongoInvalidArgumentError(`${o} is not a valid compression mechanism. Must be one of: ${Object.keys(sP.Compressor)}.`)}return[...e]}},connectTimeoutMS:{default:3e4,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:t,values:[e]}){let r=jw(t,e);if(r===4||r===6)return r;throw new pe.MongoParseError(`Option 'family' must be 4 or 6 got ${r}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=os.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,fsync:is(t,r)}});if(!n)throw new pe.MongoParseError(`Unable to make a writeConcern from fsync=${r}`);return n}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=os.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:is(t,r)}});if(!n)throw new pe.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},journal:{target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=os.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:is(t,r)}});if(!n)throw new pe.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:t,values:[e]}){let r=zd(t,e);if(r===0)throw new pe.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return r}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:t,options:e,values:[r]}){let n=zd(t,r);return e.readPreference?ou.ReadPreference.fromOptions({readPreference:{...e.readPreference,maxStalenessSeconds:n}}):new ou.ReadPreference("secondary",void 0,{maxStalenessSeconds:n})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[t],options:e}){return{...e.driverInfo,name:String(t)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:br.DEFAULT_PK_FACTORY,transform({values:[t]}){if((0,br.isRecord)(t,["createPk"])&&typeof t.createPk=="function")return t;throw new pe.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${t}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[t],options:e}){if(t instanceof $w.ReadConcern||(0,br.isRecord)(t,["level"]))return $w.ReadConcern.fromOptions({...e.readConcern,...t});throw new pe.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(t)}`)}},readConcernLevel:{target:"readConcern",transform({values:[t],options:e}){return $w.ReadConcern.fromOptions({...e.readConcern,level:t})}},readPreference:{default:ou.ReadPreference.primary,transform({values:[t],options:e}){if(t instanceof ou.ReadPreference)return ou.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if((0,br.isRecord)(t,["mode"])){let r=ou.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if(r)return r;throw new pe.MongoParseError(`Cannot make read preference from ${JSON.stringify(t)}`)}if(typeof t=="string"){let r={hedge:e.readPreference?.hedge,maxStalenessSeconds:e.readPreference?.maxStalenessSeconds};return new ou.ReadPreference(t,e.readPreference?.tags,r)}throw new pe.MongoParseError(`Unknown ReadPreference value: ${t}`)}},readPreferenceTags:{target:"readPreference",transform({values:t,options:e}){let r=Array.isArray(t[0])?t[0]:t,n=[];for(let o of r){let i=Object.create(null);if(typeof o=="string")for(let[s,u]of aP(o))i[s]=u;if((0,br.isRecord)(o))for(let[s,u]of Object.entries(o))i[s]=u;n.push(i)}return ou.ReadPreference.fromOptions({readPreference:e.readPreference,readPreferenceTags:n})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[t]}){if(!Object.values(gue.ServerMonitoringMode).includes(t))throw new pe.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return t}},serverSelectionTimeoutMS:{default:3e4,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:t,values:[e]}){return!is(t,e)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:t,values:[e]}){return is(t,e)?()=>{}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:t,options:e,values:[r]}){let n=is(t,r);return n?(e.checkServerIdentity=()=>{},e.rejectUnauthorized=!1):(e.checkServerIdentity=e.tlsAllowInvalidHostnames?()=>{}:void 0,e.rejectUnauthorized=!e.tlsAllowInvalidCertificates),n}},w:{target:"writeConcern",transform({values:[t],options:e}){return os.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[t],options:e}){if((0,br.isRecord)(t)||t instanceof os.WriteConcern)return os.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,...t}});if(t==="majority"||typeof t=="number")return os.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}});throw new pe.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(t)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[t],options:e}){let r=os.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeout:zd("wtimeout",t)}});if(r)return r;throw new pe.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[t],options:e}){let r=os.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeoutMS:zd("wtimeoutMS",t)}});if(r)return r;throw new pe.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[t]}){if(!(typeof t=="string"&&["stderr","stdout"].includes(t)||t&&typeof t=="object"&&"write"in t&&typeof t.write=="function"))throw new pe.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return t}},mongodbLogComponentSeverities:{transform({values:[t]}){if(typeof t!="object"||!t)throw new pe.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[e,r]of Object.entries(t)){if(typeof r!="string"||typeof e!="string")throw new pe.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(Ww.MongoLoggableComponent).some(n=>n===e)&&e!=="default")throw new pe.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${e}`);if(!Object.values(Ww.SeverityLevel).some(n=>n===r))throw new pe.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${r} as a value for ${e}`)}return t}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},useNewUrlParser:{type:"boolean",deprecated:"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},useUnifiedTopology:{type:"boolean",deprecated:"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},__skipPingOnConnect:{type:"boolean"}};In.DEFAULT_OPTIONS=new wl(Object.entries(In.OPTIONS).filter(([,t])=>t.default!=null).map(([t,e])=>[t,e.default]))});var dP=R(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});ag.ListCollectionsOperation=void 0;var Yw=Ye(),bue=de(),vue=Ot(),jd=ot(),ug=class extends vue.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Yw.CursorResponse,this.options={...n},delete this.options.writeConcern,this.db=e,this.filter=r,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize=="number"&&(this.batchSize=this.options.batchSize),this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?Yw.ExplainedCursorResponse:Yw.CursorResponse}get commandName(){return"listCollections"}buildCommandDocument(e){let r={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};return(0,bue.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(r.comment=this.options.comment),r}handleOk(e){return e}};ag.ListCollectionsOperation=ug;(0,jd.defineAspects)(ug,[jd.Aspect.READ_OPERATION,jd.Aspect.RETRYABLE,jd.Aspect.CURSOR_CREATING,jd.Aspect.SUPPORTS_RAW_DATA])});var Xw=R(cg=>{"use strict";Object.defineProperty(cg,"__esModule",{value:!0});cg.ListCollectionsCursor=void 0;var Oue=rr(),Rue=dP(),Due=lr(),Jw=class t extends Due.AbstractCursor{constructor(e,r,n){super(e.client,e.s.namespace,n),this.parent=e,this.filter=r,this.options=n}clone(){return new t(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new Rue.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:e,signal:this.signal}),n=await(0,Oue.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};cg.ListCollectionsCursor=Jw});var hP=R(lg=>{"use strict";Object.defineProperty(lg,"__esModule",{value:!0});lg.RunCommandCursor=void 0;var Tl=ie(),fP=rr(),Iue=w3(),Mue=cd(),Nue=de(),Bue=lr(),Qw=class extends Bue.AbstractCursor{setComment(e){return this.getMoreOptions.comment=e,this}setMaxTimeMS(e){return this.getMoreOptions.maxAwaitTimeMS=e,this}setBatchSize(e){return this.getMoreOptions.batchSize=e,this}clone(){throw new Tl.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(e){throw new Tl.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(e,r){throw new Tl.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(e){throw new Tl.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(e){throw new Tl.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(e,r,n={}){super(e.client,(0,Nue.ns)(e.namespace),n),this.getMoreOptions={},this.db=e,this.command=Object.freeze({...r})}async _initialize(e){let r=new Mue.RunCursorCommandOperation(this.db.s.namespace,this.command,{...this.cursorOptions,session:e,readPreference:this.cursorOptions.readPreference}),n=await(0,fP.executeOperation)(this.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}async getMore(e){if(!this.session)throw new Tl.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let r=new Iue.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await(0,fP.executeOperation)(this.client,r,this.timeoutContext)}};lg.RunCommandCursor=Qw});var Kd=R(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.ListIndexesOperation=iu.DropIndexOperation=iu.CreateIndexesOperation=void 0;var Zw=Ye(),Pue=ie(),e4=de(),t4=Ot(),Ho=ot(),Fue=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function xue(t){return typeof t=="number"||t==="2d"||t==="2dsphere"||t==="text"||t==="geoHaystack"}function kue(t){return Array.isArray(t)&&t.length===2&&xue(t[1])}function Lue(t){let e=new Map,r=!Array.isArray(t)||kue(t)?[t]:t;for(let n of r)if(typeof n=="string")e.set(n,1);else if(Array.isArray(n))e.set(n[0],n[1]??1);else if(n instanceof Map)for(let[o,i]of n)e.set(o,i);else if((0,e4.isObject)(n))for(let[o,i]of Object.entries(n))e.set(o,i);return e}function Uue(t){let e=Object.entries(t).filter(([r])=>Fue.has(r));return Object.fromEntries(e.map(([r,n])=>r==="version"?["v",n]:[r,n]))}var dg=class t extends t4.CommandOperation{constructor(e,r,n,o){super(e,o),this.SERVER_COMMAND_RESPONSE_TYPE=Zw.MongoDBResponse,this.options=o??{},this.options.collation=void 0,this.collectionName=r,this.indexes=n.map(i=>{let s=i.key instanceof Map?i.key:new Map(Object.entries(i.key)),u=i.name??Array.from(s).flat().join("_");return{...Uue(i),name:u,key:s}}),this.ns=e.s.namespace}static fromIndexDescriptionArray(e,r,n,o){return new t(e,r,n,o)}static fromIndexSpecification(e,r,n,o={}){let i=Lue(n),s={...o,key:i};return new t(e,r,[s],o)}get commandName(){return"createIndexes"}buildCommandDocument(e){let r=this.options,n=this.indexes,o=(0,e4.maxWireVersion)(e),i={createIndexes:this.collectionName,indexes:n};if(r.commitQuorum!=null){if(o<9)throw new Pue.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");i.commitQuorum=r.commitQuorum}return i}handleOk(e){return this.indexes.map(n=>n.name||"")}};iu.CreateIndexesOperation=dg;var fg=class extends t4.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Zw.MongoDBResponse,this.options=n??{},this.collection=e,this.indexName=r,this.ns=e.fullNamespace}get commandName(){return"dropIndexes"}buildCommandDocument(e){return{dropIndexes:this.collection.collectionName,index:this.indexName}}};iu.DropIndexOperation=fg;var hg=class extends t4.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Zw.CursorResponse,this.options={...r},delete this.options.writeConcern,this.collectionNamespace=e.s.namespace}get commandName(){return"listIndexes"}buildCommandDocument(e){let r=(0,e4.maxWireVersion)(e),n=this.options.batchSize?{batchSize:this.options.batchSize}:{},o={listIndexes:this.collectionNamespace.collection,cursor:n};return r>=9&&this.options.comment!==void 0&&(o.comment=this.options.comment),o}handleOk(e){return e}};iu.ListIndexesOperation=hg;(0,Ho.defineAspects)(hg,[Ho.Aspect.READ_OPERATION,Ho.Aspect.RETRYABLE,Ho.Aspect.CURSOR_CREATING,Ho.Aspect.SUPPORTS_RAW_DATA]);(0,Ho.defineAspects)(dg,[Ho.Aspect.WRITE_OPERATION,Ho.Aspect.SUPPORTS_RAW_DATA]);(0,Ho.defineAspects)(fg,[Ho.Aspect.WRITE_OPERATION,Ho.Aspect.SUPPORTS_RAW_DATA])});var gP=R(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.CreateCollectionOperation=void 0;Yd.createCollections=Yue;var pP=xs(),que=Ye(),Gue=vl(),Vue=ie(),$ue=$t(),Hue=de(),Wue=Ot(),r4=rr(),zue=Kd(),mP=ot(),jue=new Set(["w","wtimeout","timeoutMS","j","fsync","autoIndexId","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),Kue="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.",bl=class extends Wue.CommandOperation{constructor(e,r,n={}){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=que.MongoDBResponse,this.options=n,this.db=e,this.name=r}get commandName(){return"create"}buildCommandDocument(e,r){let n=([o,i])=>i!=null&&typeof i!="function"&&!jue.has(o);return{create:this.name,...Object.fromEntries(Object.entries(this.options).filter(n))}}handleOk(e){return new Gue.Collection(this.db,this.name,this.options)}};Yd.CreateCollectionOperation=bl;async function Yue(t,e,r){let n=$ue.TimeoutContext.create({session:r.session,serverSelectionTimeoutMS:t.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.client.s.options.waitQueueTimeoutMS,timeoutMS:r.timeoutMS}),o=r.encryptedFields??t.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${t.databaseName}.${e}`];if(o){class s extends bl{buildCommandDocument(d,p){if(!d.description.loadBalanced&&(0,Hue.maxWireVersion)(d)<pP.MIN_SUPPORTED_QE_WIRE_VERSION)throw new Vue.MongoCompatibilityError(`${Kue} The minimum server version required is ${pP.MIN_SUPPORTED_QE_SERVER_VERSION}`);return super.buildCommandDocument(d,p)}}let u=o.escCollection??`enxcol_.${e}.esc`,a=o.ecocCollection??`enxcol_.${e}.ecoc`;for(let c of[u,a]){let d=new s(t,c,{clusteredIndex:{key:{_id:1},unique:!0},session:r.session});await(0,r4.executeOperation)(t.client,d,n)}r.encryptedFields||(r={...r,encryptedFields:o})}let i=await(0,r4.executeOperation)(t.client,new bl(t,e,r),n);if(o){let s=zue.CreateIndexesOperation.fromIndexSpecification(t,e,{__safeContent__:1},{session:r.session});await(0,r4.executeOperation)(t.client,s,n)}return i}(0,mP.defineAspects)(bl,[mP.Aspect.WRITE_OPERATION])});var AP=R(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.DropDatabaseOperation=ha.DropCollectionOperation=void 0;ha.dropCollections=eae;var Jue=gg(),yP=Ye(),Xue=lr(),Que=ie(),Zue=$t(),CP=Ot(),EP=rr(),pg=ot(),Ol=class extends CP.CommandOperation{constructor(e,r,n={}){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=yP.MongoDBResponse,this.options=n,this.name=r}get commandName(){return"drop"}buildCommandDocument(e,r){return{drop:this.name}}handleOk(e){return!0}};ha.DropCollectionOperation=Ol;async function eae(t,e,r){let n=Zue.TimeoutContext.create({session:r.session,serverSelectionTimeoutMS:t.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.client.s.options.waitQueueTimeoutMS,timeoutMS:r.timeoutMS}),o=t.client.s.options.autoEncryption?.encryptedFieldsMap,i=r.encryptedFields??o?.[`${t.databaseName}.${e}`];if(!i&&o&&(i=(await t.listCollections({name:e},{nameOnly:!1,session:r.session,timeoutContext:new Xue.CursorTimeoutContext(n,Symbol())}).toArray())?.[0]?.options?.encryptedFields),i){let s=i.escCollection||`enxcol_.${e}.esc`,u=i.ecocCollection||`enxcol_.${e}.ecoc`;for(let a of[s,u]){let c=new Ol(t,a,r);try{await(0,EP.executeOperation)(t.client,c,n)}catch(d){if(!(d instanceof Jue.MongoServerError)||d.code!==Que.MONGODB_ERROR_CODES.NamespaceNotFound)throw d}}}return await(0,EP.executeOperation)(t.client,new Ol(t,e,r),n)}var mg=class extends CP.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=yP.MongoDBResponse,this.options=r}get commandName(){return"dropDatabase"}buildCommandDocument(e,r){return{dropDatabase:1}}handleOk(e){return!0}};ha.DropDatabaseOperation=mg;(0,pg.defineAspects)(Ol,[pg.Aspect.WRITE_OPERATION]);(0,pg.defineAspects)(mg,[pg.Aspect.WRITE_OPERATION])});var _P=R(Eg=>{"use strict";Object.defineProperty(Eg,"__esModule",{value:!0});Eg.ProfilingLevelOperation=void 0;var tae=qe(),rae=Ye(),SP=ie(),nae=Ot(),n4=class extends rae.MongoDBResponse{get was(){return this.get("was",tae.BSONType.int,!0)}},o4=class extends nae.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=n4,this.options=r}get commandName(){return"profile"}buildCommandDocument(e){return{profile:-1}}handleOk(e){if(e.ok===1){let r=e.was;if(r===0)return"off";if(r===1)return"slow_only";if(r===2)return"all";throw new SP.MongoUnexpectedServerResponseError(`Illegal profiling level value ${r}`)}else throw new SP.MongoUnexpectedServerResponseError("Error with profile command")}};Eg.ProfilingLevelOperation=o4});var i4=R(Cg=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});Cg.RenameOperation=void 0;var oae=Ye(),iae=vl(),sae=de(),uae=Ot(),wP=ot(),yg=class extends uae.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=oae.MongoDBResponse,this.collection=e,this.newName=r,this.options=n,this.ns=new sae.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}buildCommandDocument(e,r){let n=this.collection.namespace,o=this.collection.s.namespace.withCollection(this.newName).toString(),i=typeof this.options.dropTarget=="boolean"?this.options.dropTarget:!1;return{renameCollection:n,to:o,dropTarget:i}}handleOk(e){return new iae.Collection(this.collection.db,this.newName,this.collection.s.options)}};Cg.RenameOperation=yg;(0,wP.defineAspects)(yg,[wP.Aspect.WRITE_OPERATION])});var u4=R(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.SetProfilingLevelOperation=Ei.ProfilingLevel=void 0;var aae=Ye(),cae=ie(),lae=de(),dae=Ot(),fae=new Set(["off","slow_only","all"]);Ei.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});var s4=class extends dae.CommandOperation{constructor(e,r,n){switch(super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=aae.MongoDBResponse,this.options=n,r){case Ei.ProfilingLevel.off:this.profile=0;break;case Ei.ProfilingLevel.slowOnly:this.profile=1;break;case Ei.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=r}get commandName(){return"profile"}buildCommandDocument(e){let r=this.level;if(!fae.has(r))throw new cae.MongoInvalidArgumentError(`Profiling level must be one of "${(0,lae.enumToString)(Ei.ProfilingLevel)}"`);return{profile:this.profile}}handleOk(e){return this.level}};Ei.SetProfilingLevelOperation=s4});var bP=R(Sg=>{"use strict";Object.defineProperty(Sg,"__esModule",{value:!0});Sg.DbStatsOperation=void 0;var hae=Ye(),pae=Ot(),TP=ot(),Ag=class extends pae.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=hae.MongoDBResponse,this.options=r}get commandName(){return"dbStats"}buildCommandDocument(e){let r={dbStats:!0};return this.options.scale!=null&&(r.scale=this.options.scale),r}};Sg.DbStatsOperation=Ag;(0,TP.defineAspects)(Ag,[TP.Aspect.READ_OPERATION])});var wg=R(_g=>{"use strict";Object.defineProperty(_g,"__esModule",{value:!0});_g.Db=void 0;var mae=t3(),vP=qe(),gae=pa(),OP=vl(),Rl=Mt(),Eae=Jd(),yae=Xw(),Cae=hP(),RP=ie(),Aae=gP(),DP=AP(),su=rr(),Sae=Kd(),_ae=_P(),wae=J_(),Tae=i4(),bae=cd(),vae=u4(),Oae=bP(),Rae=Do(),IP=tr(),nr=de(),Dae=Fr(),Iae=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"],ss=class{constructor(e,r,n){if(n=n??{},n=(0,nr.filterOptions)(n,Iae),typeof r=="string"&&r.includes("."))throw new RP.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:n,readPreference:IP.ReadPreference.fromOptions(n),bsonOptions:(0,vP.resolveBSONOptions)(n,e),pkFactory:n?.pkFactory??nr.DEFAULT_PK_FACTORY,readConcern:Rae.ReadConcern.fromOptions(n),writeConcern:Dae.WriteConcern.fromOptions(n),namespace:new nr.MongoDBNamespace(r)},this.client=e}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.client.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(e,r){return r=(0,nr.resolveOptions)(this,r),await(0,Aae.createCollections)(this,e,r)}async command(e,r){return await(0,su.executeOperation)(this.client,new bae.RunCommandOperation(this.s.namespace,e,(0,nr.resolveOptions)(void 0,{...(0,vP.resolveBSONOptions)(r),timeoutMS:r?.timeoutMS??this.timeoutMS,session:r?.session,readPreference:r?.readPreference,signal:r?.signal})))}aggregate(e=[],r){return new Eae.AggregationCursor(this.client,this.s.namespace,e,(0,nr.resolveOptions)(this,r))}admin(){return new mae.Admin(this)}collection(e,r={}){if(typeof r=="function")throw new RP.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new OP.Collection(this,e,(0,nr.resolveOptions)(this,r))}async stats(e){return await(0,su.executeOperation)(this.client,new Oae.DbStatsOperation(this,(0,nr.resolveOptions)(this,e)))}listCollections(e={},r={}){return new yae.ListCollectionsCursor(this,e,(0,nr.resolveOptions)(this,r))}async renameCollection(e,r,n){return await(0,su.executeOperation)(this.client,new Tae.RenameOperation(this.collection(e),r,(0,nr.resolveOptions)(void 0,{...n,new_collection:!0,readPreference:IP.ReadPreference.primary})))}async dropCollection(e,r){return r=(0,nr.resolveOptions)(this,r),await(0,DP.dropCollections)(this,e,r)}async dropDatabase(e){return await(0,su.executeOperation)(this.client,new DP.DropDatabaseOperation(this,(0,nr.resolveOptions)(this,e)))}async collections(e){return e=(0,nr.resolveOptions)(this,e),(await this.listCollections({},{...e,nameOnly:!0}).toArray()).filter(({name:n})=>!n.includes("$")).map(({name:n})=>new OP.Collection(this,n,this.s.options))}async createIndex(e,r,n){return(await(0,su.executeOperation)(this.client,Sae.CreateIndexesOperation.fromIndexSpecification(this,e,r,n)))[0]}async removeUser(e,r){return await(0,su.executeOperation)(this.client,new wae.RemoveUserOperation(this,e,(0,nr.resolveOptions)(this,r)))}async setProfilingLevel(e,r){return await(0,su.executeOperation)(this.client,new vae.SetProfilingLevelOperation(this,e,(0,nr.resolveOptions)(this,r)))}async profilingLevel(e){return await(0,su.executeOperation)(this.client,new _ae.ProfilingLevelOperation(this,(0,nr.resolveOptions)(this,e)))}async indexInformation(e,r){return await this.collection(e).indexInformation((0,nr.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new gae.ChangeStream(this,e,(0,nr.resolveOptions)(this,r))}runCursorCommand(e,r){return new Cae.RunCommandCursor(this,e,r)}};_g.Db=ss;ss.SYSTEM_NAMESPACE_COLLECTION=Rl.SYSTEM_NAMESPACE_COLLECTION;ss.SYSTEM_INDEX_COLLECTION=Rl.SYSTEM_INDEX_COLLECTION;ss.SYSTEM_PROFILE_COLLECTION=Rl.SYSTEM_PROFILE_COLLECTION;ss.SYSTEM_USER_COLLECTION=Rl.SYSTEM_USER_COLLECTION;ss.SYSTEM_COMMAND_COLLECTION=Rl.SYSTEM_COMMAND_COLLECTION;ss.SYSTEM_JS_COLLECTION=Rl.SYSTEM_JS_COLLECTION});var MP=R(Tg=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0});Tg.MongoDBAWS=void 0;var a4=qe(),c4=Fo(),Il=ie(),Dl=de(),Mae=$s(),l4=C6(),Nae=um(),Bae=di(),Pae=110,d4={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},f4=class extends Mae.AuthProvider{constructor(e){super(),this.credentialProvider=e,this.credentialFetcher=l4.AWSTemporaryCredentialProvider.isAWSSDKInstalled?new l4.AWSSDKCredentialProvider(e):new l4.LegacyAWSTemporaryCredentialProvider}async auth(e){let{connection:r}=e;if(!e.credentials)throw new Il.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in c4.aws4)throw c4.aws4.kModuleError;let{sign:n}=c4.aws4;if((0,Dl.maxWireVersion)(r)<9)throw new Il.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");e.credentials.username||(e.credentials=await Fae(e.credentials,this.credentialFetcher));let{credentials:o}=e,i=o.username,s=o.password,u=o.mechanismProperties.AWS_SESSION_TOKEN,a=i&&s&&u?{accessKeyId:i,secretAccessKey:s,sessionToken:u}:i&&s?{accessKeyId:i,secretAccessKey:s}:void 0,c=o.source,d=await(0,Dl.randomBytes)(32),p={saslStart:1,mechanism:"MONGODB-AWS",payload:a4.serialize({r:d,p:Pae},d4)},m=await r.command((0,Dl.ns)(`${c}.$cmd`),p,void 0),E=a4.deserialize(m.payload.buffer,d4),y=E.h,A=E.s.buffer;if(A.length!==64)throw new Il.MongoRuntimeError(`Invalid server nonce length ${A.length}, expected 64`);if(!Dl.ByteUtils.equals(A.subarray(0,d.byteLength),d))throw new Il.MongoRuntimeError("Server nonce does not begin with client nonce");if(y.length<1||y.length>255||y.indexOf("..")!==-1)throw new Il.MongoRuntimeError(`Server returned an invalid host: "${y}"`);let S="Action=GetCallerIdentity&Version=2011-06-15",b=n({method:"POST",host:y,region:xae(E.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":S.length,"X-MongoDB-Server-Nonce":Dl.ByteUtils.toBase64(A),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:S},a),P={a:b.headers.Authorization,d:b.headers["X-Amz-Date"]};u&&(P.t=u);let B={saslContinue:1,conversationId:m.conversationId,payload:a4.serialize(P,d4)};await r.command((0,Dl.ns)(`${c}.$cmd`),B,void 0)}};Tg.MongoDBAWS=f4;async function Fae(t,e){function r(o){if(!o.AccessKeyId||!o.SecretAccessKey)throw new Il.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new Nae.MongoCredentials({username:o.AccessKeyId,password:o.SecretAccessKey,source:t.source,mechanism:Bae.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:o.Token}})}let n=await e.getCredentials();return r(n)}function xae(t){let e=t.split(".");return e.length===1||e[1]==="amazonaws"?"us-east-1":e[1]}});var BP=R(bg=>{"use strict";Object.defineProperty(bg,"__esModule",{value:!0});bg.finishCommandDocument=kae;bg.startCommandDocument=Lae;var Ml=qe(),NP=di();function kae(t,e){return e!=null?{saslContinue:1,conversationId:e,payload:new Ml.Binary(Ml.BSON.serialize({jwt:t}))}:{saslStart:1,mechanism:NP.AuthMechanism.MONGODB_OIDC,payload:new Ml.Binary(Ml.BSON.serialize({jwt:t}))}}function Lae(t){let e={};return t.username&&(e.n=t.username),{saslStart:1,autoAuthorize:1,mechanism:NP.AuthMechanism.MONGODB_OIDC,payload:new Ml.Binary(Ml.BSON.serialize(e))}}});var g4=R(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.CallbackWorkflow=uu.AUTOMATED_TIMEOUT_MS=uu.HUMAN_TIMEOUT_MS=void 0;var Uae=require("timers/promises"),qae=ie(),PP=de(),h4=BP();uu.HUMAN_TIMEOUT_MS=3e5;uu.AUTOMATED_TIMEOUT_MS=6e4;var Gae=["accessToken","expiresInSeconds","refreshToken"],Vae="User provided OIDC callbacks must return a valid object with an accessToken.",p4=100,m4=class{constructor(e,r){this.cache=e,this.callback=this.withLock(r),this.lastExecutionTime=Date.now()-p4}async speculativeAuth(e,r){if(this.cache.hasAccessToken){let n=this.cache.getAccessToken();e.accessToken=n;let o=(0,h4.finishCommandDocument)(n);return o.db=r.source,{speculativeAuthenticate:o}}return{}}async reauthenticate(e,r){this.cache.hasAccessToken&&(e.accessToken===this.cache.getAccessToken()?(this.cache.removeAccessToken(),delete e.accessToken):e.accessToken=this.cache.getAccessToken()),await this.execute(e,r)}async startAuthentication(e,r,n){let o;return n?.speculativeAuthenticate?o=n.speculativeAuthenticate:o=await e.command((0,PP.ns)(r.source),(0,h4.startCommandDocument)(r),void 0),o}async finishAuthentication(e,r,n,o){await e.command((0,PP.ns)(r.source),(0,h4.finishCommandDocument)(n,o),void 0)}async executeAndValidateCallback(e){let r=await this.callback(e);if($ae(r))throw new qae.MongoMissingCredentialsError(Vae);return r}withLock(e){let r=Promise.resolve();return async n=>(await r,r=r.catch(()=>null).then(async()=>{let o=Date.now()-this.lastExecutionTime;return o<=p4&&await(0,Uae.setTimeout)(p4-o,{signal:n.timeoutContext}),this.lastExecutionTime=Date.now(),await e(n)}),await r)}};uu.CallbackWorkflow=m4;function $ae(t){return t==null||typeof t!="object"||!("accessToken"in t)?!0:!Object.getOwnPropertyNames(t).every(e=>Gae.includes(e))}});var A4=R(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});vg.AutomatedCallbackWorkflow=void 0;var E4=ie(),FP=$t(),Hae=Og(),y4=g4(),C4=class extends y4.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let o=this.cache.getAccessToken();e.accessToken||(e.accessToken=o);try{return await this.finishAuthentication(e,r,o)}catch(i){if(i instanceof E4.MongoError&&i.code===E4.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(e,r);throw i}}let n=await this.fetchAccessToken(r);this.cache.put(n),e.accessToken=n.accessToken,await this.finishAuthentication(e,r,n.accessToken)}async fetchAccessToken(e){let r=new AbortController,n={timeoutContext:r.signal,version:Hae.OIDC_VERSION};e.username&&(n.username=e.username),e.mechanismProperties.TOKEN_RESOURCE&&(n.tokenAudience=e.mechanismProperties.TOKEN_RESOURCE);let o=FP.Timeout.expires(y4.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(n),o])}catch(i){throw FP.TimeoutError.is(i)?(r.abort(),new E4.MongoOIDCError(`OIDC callback timed out after ${y4.AUTOMATED_TIMEOUT_MS}ms.`)):i}finally{o.clear()}}};vg.AutomatedCallbackWorkflow=C4});var kP=R(Rg=>{"use strict";Object.defineProperty(Rg,"__esModule",{value:!0});Rg.callback=void 0;var xP=S6(),S4=ie(),Wae=de(),zae=Object.freeze({Metadata:"true",Accept:"application/json"}),jae="Azure endpoint did not return a value with only access_token and expires_in properties",Kae="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",Yae=async t=>{let e=t.tokenAudience,r=t.username;if(!e)throw new S4.MongoAzureError(Kae);let n=await Jae(e,r);if(!Xae(n))throw new S4.MongoAzureError(jae);return n};Rg.callback=Yae;async function Jae(t,e){let r=new URL(xP.AZURE_BASE_URL);(0,xP.addAzureParams)(r,t,e);let n=await(0,Wae.get)(r,{headers:zae});if(n.status!==200)throw new S4.MongoAzureError(`Status code ${n.status} returned from the Azure endpoint. Response body: ${n.body}`);let o=JSON.parse(n.body);return{accessToken:o.access_token,expiresInSeconds:Number(o.expires_in)}}function Xae(t){return t==null||typeof t!="object"?!1:"accessToken"in t&&typeof t.accessToken=="string"&&"expiresInSeconds"in t&&typeof t.expiresInSeconds=="number"}});var UP=R(Dg=>{"use strict";Object.defineProperty(Dg,"__esModule",{value:!0});Dg.callback=void 0;var LP=ie(),Qae=de(),Zae="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",ece=Object.freeze({"Metadata-Flavor":"Google"}),tce="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",rce=async t=>{let e=t.tokenAudience;if(!e)throw new LP.MongoGCPError(tce);return await nce(e)};Dg.callback=rce;async function nce(t){let e=new URL(Zae);e.searchParams.append("audience",t);let r=await(0,Qae.get)(e,{headers:ece});if(r.status!==200)throw new LP.MongoGCPError(`Status code ${r.status} returned from the GCP endpoint. Response body: ${r.body}`);return{accessToken:r.body}}});var VP=R(Ig=>{"use strict";Object.defineProperty(Ig,"__esModule",{value:!0});Ig.callback=void 0;var oce=require("fs/promises"),ice="/var/run/secrets/kubernetes.io/serviceaccount/token",qP="AZURE_FEDERATED_TOKEN_FILE",GP="AWS_WEB_IDENTITY_TOKEN_FILE",sce=async()=>{let t;return process.env[qP]?t=process.env[qP]:process.env[GP]?t=process.env[GP]:t=ice,{accessToken:await(0,oce.readFile)(t,"utf8")}};Ig.callback=sce});var w4=R(Mg=>{"use strict";Object.defineProperty(Mg,"__esModule",{value:!0});Mg.TokenCache=void 0;var uce=ie(),Xd=class extends uce.MongoDriverError{},_4=class{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new Xd("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new Xd("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new Xd("Attempted to get IDP information when none exists.");return this.idpInfo}put(e,r){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expiresInSeconds=e.expiresInSeconds,r&&(this.idpInfo=r)}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}};Mg.TokenCache=_4});var $P=R(Ng=>{"use strict";Object.defineProperty(Ng,"__esModule",{value:!0});Ng.callback=void 0;var ace=require("fs"),cce=ie(),lce="OIDC_TOKEN_FILE must be set in the environment.",dce=async()=>{let t=process.env.OIDC_TOKEN_FILE;if(!t)throw new cce.MongoAWSError(lce);return{accessToken:await ace.promises.readFile(t,"utf8")}};Ng.callback=dce});var Og=R(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.MongoDBOIDC=no.OIDC_WORKFLOWS=no.OIDC_VERSION=void 0;var WP=ie(),fce=$s(),Bg=A4(),hce=kP(),pce=UP(),mce=VP(),Pg=w4(),gce=$P(),Ece="AuthContext must provide credentials.";no.OIDC_VERSION=1;no.OIDC_WORKFLOWS=new Map;no.OIDC_WORKFLOWS.set("test",()=>new Bg.AutomatedCallbackWorkflow(new Pg.TokenCache,gce.callback));no.OIDC_WORKFLOWS.set("azure",()=>new Bg.AutomatedCallbackWorkflow(new Pg.TokenCache,hce.callback));no.OIDC_WORKFLOWS.set("gcp",()=>new Bg.AutomatedCallbackWorkflow(new Pg.TokenCache,pce.callback));no.OIDC_WORKFLOWS.set("k8s",()=>new Bg.AutomatedCallbackWorkflow(new Pg.TokenCache,mce.callback));var T4=class extends fce.AuthProvider{constructor(e){if(super(),!e)throw new WP.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=e}async auth(e){let{connection:r,reauthenticating:n,response:o}=e;if(o?.speculativeAuthenticate?.done&&!n)return;let i=HP(e);n?await this.workflow.reauthenticate(r,i):await this.workflow.execute(r,i,o)}async prepare(e,r){let{connection:n}=r,o=HP(r),i=await this.workflow.speculativeAuth(n,o);return{...e,...i}}};no.MongoDBOIDC=T4;function HP(t){let{credentials:e}=t;if(!e)throw new WP.MongoMissingCredentialsError(Ece);return e}});var jP=R(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});Fg.HumanCallbackWorkflow=void 0;var yce=qe(),Qd=ie(),zP=$t(),Cce=Og(),b4=g4(),v4=class extends b4.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let u=this.cache.getAccessToken();e.accessToken=u;try{return await this.finishAuthentication(e,r,u)}catch(a){if(a instanceof Qd.MongoError&&a.code===Qd.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete e.accessToken,await this.execute(e,r);throw a}}if(this.cache.hasRefreshToken){let u=this.cache.getRefreshToken(),a=await this.fetchAccessToken(this.cache.getIdpInfo(),r,u);this.cache.put(a),e.accessToken=a.accessToken;try{return await this.finishAuthentication(e,r,a.accessToken)}catch(c){if(c instanceof Qd.MongoError&&c.code===Qd.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete e.accessToken,await this.execute(e,r);throw c}}let n=await this.startAuthentication(e,r),o=n.conversationId,i=yce.BSON.deserialize(n.payload.buffer),s=await this.fetchAccessToken(i,r);return this.cache.put(s,i),e.accessToken=s.accessToken,await this.finishAuthentication(e,r,s.accessToken,o)}async fetchAccessToken(e,r,n){let o=new AbortController,i={timeoutContext:o.signal,version:Cce.OIDC_VERSION,idpInfo:e};r.username&&(i.username=r.username),n&&(i.refreshToken=n);let s=zP.Timeout.expires(b4.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(i),s])}catch(u){throw zP.TimeoutError.is(u)?(o.abort(),new Qd.MongoOIDCError(`OIDC callback timed out after ${b4.HUMAN_TIMEOUT_MS}ms.`)):u}finally{s.clear()}}};Fg.HumanCallbackWorkflow=v4});var KP=R(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.Plain=void 0;var Ace=qe(),Sce=ie(),_ce=de(),wce=$s(),O4=class extends wce.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(!n)throw new Sce.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:o,password:i}=n,u={saslStart:1,mechanism:"PLAIN",payload:new Ace.Binary(Buffer.from(`\0${o}\0${i}`)),autoAuthorize:1};await r.command((0,_ce.ns)("$external.$cmd"),u,void 0)}};xg.Plain=O4});var QP=R((Lge,XP)=>{"use strict";var YP=t=>t.codePointAt(0),Tce=t=>t[0],bce=t=>t[t.length-1];function JP(t){let e=[],r=t.length;for(let n=0;n<r;n+=1){let o=t.charCodeAt(n);if(o>=55296&&o<=56319&&r>n+1){let i=t.charCodeAt(n+1);if(i>=56320&&i<=57343){e.push((o-55296)*1024+i-56320+65536),n+=1;continue}}e.push(o)}return e}function Zd({unassigned_code_points:t,commonly_mapped_to_nothing:e,non_ASCII_space_characters:r,prohibited_characters:n,bidirectional_r_al:o,bidirectional_l:i},s,u={}){let a=r,c=e;if(typeof s!="string")throw new TypeError("Expected string.");if(s.length===0)return"";let d=JP(s).map(P=>a.get(P)?32:P).filter(P=>!c.get(P)),p=String.fromCodePoint.apply(null,d).normalize("NFKC"),m=JP(p);if(m.some(P=>n.get(P)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(u.allowUnassigned!==!0&&m.some(B=>t.get(B)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5");let y=m.some(P=>o.get(P)),A=m.some(P=>i.get(P));if(y&&A)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let S=o.get(YP(Tce(p))),b=o.get(YP(bce(p)));if(y&&!(S&&b))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return p}Zd.saslprep=Zd;Zd.default=Zd;XP.exports=Zd});var tF=R((Uge,eF)=>{eF.exports=us;function us(t,e){if(!(this instanceof us))return new us(t,e);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=t||1024,this.deduplicate=e?e.deduplicate:null,this.zeros=this.deduplicate?kg(this.deduplicate.length):null}us.prototype.updated=function(t){for(;this.deduplicate&&t.buffer[t.deduplicate]===this.deduplicate[t.deduplicate];)if(t.deduplicate++,t.deduplicate===this.deduplicate.length){t.deduplicate=0,t.buffer.equals&&t.buffer.equals(this.deduplicate)&&(t.buffer=this.deduplicate);break}t.updated||!this.updates||(t.updated=!0,this.updates.push(t))};us.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var t=this.updates.pop();return t.updated=!1,t};us.prototype._array=function(t,e){if(t>=this.maxPages){if(e)return;vce(this,t)}Dce(t,this.path);for(var r=this.pages,n=this.level;n>0;n--){var o=this.path[n],i=r[o];if(!i){if(e)return;i=r[o]=new Array(32768)}r=i}return r};us.prototype.get=function(t,e){var r=this._array(t,e),n=this.path[0],o=r&&r[n];return!o&&!e&&(o=r[n]=new ZP(t,kg(this.pageSize)),t>=this.length&&(this.length=t+1)),o&&o.buffer===this.deduplicate&&this.deduplicate&&!e&&(o.buffer=Rce(o.buffer),o.deduplicate=0),o};us.prototype.set=function(t,e){var r=this._array(t,!1),n=this.path[0];if(t>=this.length&&(this.length=t+1),!e||this.zeros&&e.equals&&e.equals(this.zeros)){r[n]=void 0;return}this.deduplicate&&e.equals&&e.equals(this.deduplicate)&&(e=this.deduplicate);var o=r[n],i=Oce(e,this.pageSize);o?o.buffer=i:r[n]=new ZP(t,i)};us.prototype.toBuffer=function(){for(var t=new Array(this.length),e=kg(this.pageSize),r=0;r<t.length;)for(var n=this._array(r,!0),o=0;o<32768&&r<t.length;o++)t[r++]=n&&n[o]?n[o].buffer:e;return Buffer.concat(t)};function vce(t,e){for(;t.maxPages<e;){var r=t.pages;t.pages=new Array(32768),t.pages[0]=r,t.level++,t.maxPages*=32768}}function Oce(t,e){if(t.length===e)return t;if(t.length>e)return t.slice(0,e);var r=kg(e);return t.copy(r),r}function kg(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function Rce(t){var e=Buffer.allocUnsafe?Buffer.allocUnsafe(t.length):new Buffer(t.length);return t.copy(e),e}function ZP(t,e){this.offset=t*e.length,this.buffer=e,this.updated=!1,this.deduplicate=0}function Dce(t,e){t=(t-(e[0]=t&32767))/32768,t=(t-(e[1]=t&32767))/32768,e[3]=(t-(e[2]=t&32767))/32768&32767}});var nF=R((qge,rF)=>{var Ice=tF();rF.exports=au;function au(t){if(!(this instanceof au))return new au(t);if(t||(t={}),Buffer.isBuffer(t)&&(t={buffer:t}),this.pageOffset=t.pageOffset||0,this.pageSize=t.pageSize||1024,this.pages=t.pages||Ice(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!Nce(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!t.trackUpdates,this._pageMask=this.pageSize-1,t.buffer){for(var e=0;e<t.buffer.length;e+=this.pageSize)this.pages.set(e/this.pageSize,t.buffer.slice(e,e+this.pageSize));this.byteLength=t.buffer.length,this.length=8*this.byteLength}}au.prototype.get=function(t){var e=t&7,r=(t-e)/8;return!!(this.getByte(r)&128>>e)};au.prototype.getByte=function(t){var e=t&this._pageMask,r=(t-e)/this.pageSize,n=this.pages.get(r,!0);return n?n.buffer[e+this.pageOffset]:0};au.prototype.set=function(t,e){var r=t&7,n=(t-r)/8,o=this.getByte(n);return this.setByte(n,e?o|128>>r:o&(255^128>>r))};au.prototype.toBuffer=function(){for(var t=Mce(this.pages.length*this.pageSize),e=0;e<this.pages.length;e++){var r=this.pages.get(e,!0),n=e*this.pageSize;r&&r.buffer.copy(t,n,this.pageOffset,this.pageOffset+this.pageSize)}return t};au.prototype.setByte=function(t,e){var r=t&this._pageMask,n=(t-r)/this.pageSize,o=this.pages.get(n,!1);return r+=this.pageOffset,o.buffer[r]===e?!1:(o.buffer[r]=e,t>=this.byteLength&&(this.byteLength=t+1,this.length=this.byteLength*8),this._trackUpdates&&this.pages.updated(o),!0)};function Mce(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function Nce(t){return!(t&t-1)}});var oF=R(ef=>{"use strict";var Bce=ef&&ef.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ef,"__esModule",{value:!0});ef.createMemoryCodePoints=Fce;var Pce=Bce(nF());function Fce(t){let e=0;function r(){let c=t.readUInt32BE(e);e+=4;let d=t.slice(e,e+c);return e+=c,(0,Pce.default)({buffer:d})}let n=r(),o=r(),i=r(),s=r(),u=r(),a=r();return{unassigned_code_points:n,commonly_mapped_to_nothing:o,non_ASCII_space_characters:i,prohibited_characters:s,bidirectional_r_al:u,bidirectional_l:a}}});var iF=R(R4=>{"use strict";Object.defineProperty(R4,"__esModule",{value:!0});var xce=require("zlib");R4.default=(0,xce.gunzipSync)(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var aF=R((D4,uF)=>{"use strict";var sF=D4&&D4.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},kce=sF(QP()),Lce=oF(),Uce=sF(iF()),qce=(0,Lce.createMemoryCodePoints)(Uce.default);function tf(t,e){return(0,kce.default)(qce,t,e)}tf.saslprep=tf;tf.default=tf;uF.exports=tf});var mF=R(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.ScramSHA256=Nl.ScramSHA1=void 0;var Gce=aF(),ma=require("crypto"),I4=qe(),Wo=ie(),qg=de(),Vce=$s(),cF=di(),Gg=class extends Vce.AuthProvider{constructor(e){super(),this.cryptoMethod=e||"sha1"}async prepare(e,r){let n=this.cryptoMethod,o=r.credentials;if(!o)throw new Wo.MongoMissingCredentialsError("AuthContext must provide credentials.");let i=await(0,qg.randomBytes)(24);return r.nonce=i,{...e,speculativeAuthenticate:{...hF(n,o,i),db:o.source}}}async auth(e){let{reauthenticating:r,response:n}=e;return n?.speculativeAuthenticate&&!r?await pF(this.cryptoMethod,n.speculativeAuthenticate,e):await $ce(this.cryptoMethod,e)}};function dF(t){return t.replace("=","=3D").replace(",","=2C")}function fF(t,e){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(t,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(e.toString("base64"),"utf8")])}function hF(t,e,r){let n=dF(e.username);return{saslStart:1,mechanism:t==="sha1"?cF.AuthMechanism.MONGODB_SCRAM_SHA1:cF.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new I4.Binary(Buffer.concat([Buffer.from("n,,","utf8"),fF(n,r)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function $ce(t,e){let{connection:r,credentials:n}=e;if(!n)throw new Wo.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!e.nonce)throw new Wo.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let o=e.nonce,i=n.source,s=hF(t,n,o),u=await r.command((0,qg.ns)(`${i}.$cmd`),s,void 0);await pF(t,u,e)}async function pF(t,e,r){let n=r.connection,o=r.credentials;if(!o)throw new Wo.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!r.nonce)throw new Wo.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let i=r.nonce,s=o.source,u=dF(o.username),a=o.password,c=t==="sha256"?(0,Gce.saslprep)(a):Hce(u,a),d=Buffer.isBuffer(e.payload)?new I4.Binary(e.payload):e.payload,p=lF(d),m=parseInt(p.i,10);if(m&&m<4096)throw new Wo.MongoRuntimeError(`Server returned an invalid iteration count ${m}`);let E=p.s,y=p.r;if(y.startsWith("nonce"))throw new Wo.MongoRuntimeError(`Server returned an invalid nonce: ${y}`);let A=`c=biws,r=${y}`,S=Yce(c,Buffer.from(E,"base64"),m,t),b=Lg(t,S,"Client Key"),P=Lg(t,S,"Server Key"),B=zce(t,b),v=[fF(u,i),d.toString("utf8"),A].join(","),I=Lg(t,B,v),O=`p=${Wce(b,I)}`,z=[A,O].join(","),Z=Lg(t,P,v),M={saslContinue:1,conversationId:e.conversationId,payload:new I4.Binary(Buffer.from(z))},V=await n.command((0,qg.ns)(`${s}.$cmd`),M,void 0),Y=lF(V.payload);if(!Jce(Buffer.from(Y.v,"base64"),Z))throw new Wo.MongoRuntimeError("Server returned an invalid signature");if(V.done!==!1)return;let te={saslContinue:1,conversationId:V.conversationId,payload:Buffer.alloc(0)};await n.command((0,qg.ns)(`${s}.$cmd`),te,void 0)}function lF(t){let e=t.toString("utf8"),r={},n=e.split(",");for(let o=0;o<n.length;o++){let i=(n[o].match(/^([^=]*)=(.*)$/)??[]).slice(1);r[i[0]]=i[1]}return r}function Hce(t,e){if(typeof t!="string")throw new Wo.MongoInvalidArgumentError("Username must be a string");if(typeof e!="string")throw new Wo.MongoInvalidArgumentError("Password must be a string");if(e.length===0)throw new Wo.MongoInvalidArgumentError("Password cannot be empty");let r;try{r=ma.createHash("md5")}catch(n){throw ma.getFips()?new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode"):n}return r.update(`${t}:mongo:${e}`,"utf8"),r.digest("hex")}function Wce(t,e){Buffer.isBuffer(t)||(t=Buffer.from(t)),Buffer.isBuffer(e)||(e=Buffer.from(e));let r=Math.max(t.length,e.length),n=[];for(let o=0;o<r;o+=1)n.push(t[o]^e[o]);return Buffer.from(n).toString("base64")}function zce(t,e){return ma.createHash(t).update(e).digest()}function Lg(t,e,r){return ma.createHmac(t,e).update(r).digest()}var Ug={},M4=0;function jce(){Ug={},M4=0}var Kce={sha256:32,sha1:20};function Yce(t,e,r,n){let o=[t,e.toString("base64"),r].join("_");if(Ug[o]!=null)return Ug[o];let i=ma.pbkdf2Sync(t,e,r,Kce[n],n);return M4>=200&&jce(),Ug[o]=i,M4+=1,i}function Jce(t,e){if(t.length!==e.length)return!1;if(typeof ma.timingSafeEqual=="function")return ma.timingSafeEqual(t,e);let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var N4=class extends Gg{constructor(){super("sha1")}};Nl.ScramSHA1=N4;var B4=class extends Gg{constructor(){super("sha256")}};Nl.ScramSHA256=B4});var yF=R(Vg=>{"use strict";Object.defineProperty(Vg,"__esModule",{value:!0});Vg.X509=void 0;var gF=ie(),Xce=de(),Qce=$s(),P4=class extends Qce.AuthProvider{async prepare(e,r){let{credentials:n}=r;if(!n)throw new gF.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...e,speculativeAuthenticate:EF(n)}}async auth(e){let r=e.connection,n=e.credentials;if(!n)throw new gF.MongoMissingCredentialsError("AuthContext must provide credentials.");e.response?.speculativeAuthenticate||await r.command((0,Xce.ns)("$external.$cmd"),EF(n),void 0)}};Vg.X509=P4;function EF(t){let e={authenticate:1,mechanism:"MONGODB-X509"};return t.username&&(e.user=t.username),e}});var k4=R($g=>{"use strict";Object.defineProperty($g,"__esModule",{value:!0});$g.MongoClientAuthProviders=void 0;var Zce=sm(),ele=MP(),SF=Og(),tle=A4(),rle=jP(),CF=w4(),nle=KP(),cu=di(),AF=mF(),ole=yF(),x4=ie(),ile=new Map([[cu.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:t})=>new ele.MongoDBAWS(t)],[cu.AuthMechanism.MONGODB_CR,()=>{throw new x4.MongoInvalidArgumentError("MONGODB-CR is no longer a supported auth mechanism in MongoDB 4.0+")}],[cu.AuthMechanism.MONGODB_GSSAPI,()=>new Zce.GSSAPI],[cu.AuthMechanism.MONGODB_OIDC,t=>new SF.MongoDBOIDC(sle(t))],[cu.AuthMechanism.MONGODB_PLAIN,()=>new nle.Plain],[cu.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new AF.ScramSHA1],[cu.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new AF.ScramSHA256],[cu.AuthMechanism.MONGODB_X509,()=>new ole.X509]]),F4=class{constructor(){this.existingProviders=new Map}getOrCreateProvider(e,r){let n=this.existingProviders.get(e);if(n)return n;let o=ile.get(e);if(!o)throw new x4.MongoInvalidArgumentError(`authMechanism ${e} not supported`);let i=o(r);return this.existingProviders.set(e,i),i}};$g.MongoClientAuthProviders=F4;function sle(t){if(t.OIDC_HUMAN_CALLBACK)return new rle.HumanCallbackWorkflow(new CF.TokenCache,t.OIDC_HUMAN_CALLBACK);if(t.OIDC_CALLBACK)return new tle.AutomatedCallbackWorkflow(new CF.TokenCache,t.OIDC_CALLBACK);{let e=t.ENVIRONMENT,r=SF.OIDC_WORKFLOWS.get(e)?.();if(!r)throw new x4.MongoInvalidArgumentError(`Could not load workflow for environment ${t.ENVIRONMENT}`);return r}}});var L4=R(Wg=>{"use strict";Object.defineProperty(Wg,"__esModule",{value:!0});Wg.ClientBulkWriteOperation=void 0;var ule=Ye(),ale=de(),cle=Ot(),ga=ot(),Hg=class extends cle.CommandOperation{get commandName(){return"bulkWrite"}constructor(e,r){super(void 0,r),this.SERVER_COMMAND_RESPONSE_TYPE=ule.ClientBulkWriteCursorResponse,this.commandBuilder=e,this.options=r,this.ns=new ale.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}handleOk(e){return e}buildCommandDocument(e,r){let n=this.commandBuilder.buildBatch(e.description.maxMessageSizeBytes,e.description.maxWriteBatchSize,e.description.maxBsonObjectSize);return this.canRetryWrite||(this.options.willRetryWrite=!1),n}};Wg.ClientBulkWriteOperation=Hg;(0,ga.defineAspects)(Hg,[ga.Aspect.WRITE_OPERATION,ga.Aspect.SKIP_COLLATION,ga.Aspect.CURSOR_CREATING,ga.Aspect.RETRYABLE,ga.Aspect.COMMAND_BATCHING,ga.Aspect.SUPPORTS_RAW_DATA])});var wF=R(zg=>{"use strict";Object.defineProperty(zg,"__esModule",{value:!0});zg.ClientBulkWriteCursor=void 0;var lle=L4(),dle=rr(),_F=de(),fle=lr(),U4=class t extends fle.AbstractCursor{constructor(e,r,n={}){super(e,new _F.MongoDBNamespace("admin","$cmd"),n),this.commandBuilder=r,this.clientBulkWriteOptions=n}get response(){return this.cursorResponse?this.cursorResponse:null}get operations(){return this.commandBuilder.lastOperations}clone(){let e=(0,_F.mergeOptions)({},this.clientBulkWriteOptions);return delete e.session,new t(this.client,this.commandBuilder,{...e})}async _initialize(e){let r=new lle.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:e}),n=await(0,dle.executeOperation)(this.client,r,this.timeoutContext);return this.cursorResponse=n,{server:r.server,session:e,response:n}}};zg.ClientBulkWriteCursor=U4});var DF=R(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.buildReplaceOneOperation=vt.buildUpdateManyOperation=vt.buildUpdateOneOperation=vt.buildDeleteManyOperation=vt.buildDeleteOneOperation=vt.buildInsertOneOperation=vt.ClientBulkWriteCommandBuilder=void 0;vt.buildOperation=$4;var q4=qe(),TF=bd(),rf=ie(),vF=Wc(),H4=de(),bF=1e3,V4=class{constructor(e,r,n){this.models=e,this.options=r,this.pkFactory=n??H4.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){return"verboseResults"in this.options?!this.options.verboseResults:!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(e,r,n){this.isBatchRetryable=!0;let o=0,i=0,s=this.baseCommand(),u=new Map;for(this.previousModelIndex=this.currentModelIndex;this.currentModelIndex<this.models.length;){let a=this.models[this.currentModelIndex],c=a.namespace,d=u.get(c);if((a.name==="deleteMany"||a.name==="updateMany")&&(this.isBatchRetryable=!1),d!=null){let p=$4(a,d,this.pkFactory,this.options),m;try{m=q4.BSON.serialize(p)}catch(E){throw new rf.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:E})}if(G4("ops",m,n),o+m.length<e&&s.ops.documents.length<r)o=bF+s.ops.push(p,m),this.currentModelIndex++;else break}else{u.set(c,i);let p={ns:c},m=$4(a,i,this.pkFactory,this.options),E,y;try{E=q4.BSON.serialize(p),y=q4.BSON.serialize(m)}catch(A){throw new rf.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:A})}if(G4("nsInfo",E,n),G4("ops",y,n),o+E.length+y.length<e&&s.ops.documents.length<r)o=bF+s.nsInfo.push(p,E)+s.ops.push(m,y),i++,this.currentModelIndex++;else break}}return this.lastOperations=s.ops.documents,s}baseCommand(){let e={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new TF.DocumentSequence("ops"),nsInfo:new TF.DocumentSequence("nsInfo")};return this.options.bypassDocumentValidation!=null&&(e.bypassDocumentValidation=this.options.bypassDocumentValidation),this.options.let&&(e.let=this.options.let),this.options.comment!==void 0&&(e.comment=this.options.comment),e}};vt.ClientBulkWriteCommandBuilder=V4;function G4(t,e,r){if(e.length>r)throw new rf.MongoInvalidArgumentError(`Client bulk write operation ${t} of length ${e.length} exceeds the max bson object size of ${r}`)}var hle=(t,e,r)=>{let n={insert:e,document:t.document};return n.document._id=t.document._id??r.createPk(),n};vt.buildInsertOneOperation=hle;var ple=(t,e)=>OF(t,e,!1);vt.buildDeleteOneOperation=ple;var mle=(t,e)=>OF(t,e,!0);vt.buildDeleteManyOperation=mle;function OF(t,e,r){let n={delete:e,multi:r,filter:t.filter};return t.hint&&(n.hint=t.hint),t.collation&&(n.collation=t.collation),n}var gle=(t,e,r)=>RF(t,e,!1,r);vt.buildUpdateOneOperation=gle;var Ele=(t,e,r)=>RF(t,e,!0,r);vt.buildUpdateManyOperation=Ele;function yle(t,e){if(!(0,H4.hasAtomicOperators)(t,e))throw new rf.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function RF(t,e,r,n){yle(t.update,n);let o={update:e,multi:r,filter:t.filter,updateMods:t.update};return t.hint&&(o.hint=t.hint),t.upsert&&(o.upsert=t.upsert),t.arrayFilters&&(o.arrayFilters=t.arrayFilters),t.collation&&(o.collation=t.collation),!r&&"sort"in t&&t.sort!=null&&(o.sort=(0,vF.formatSort)(t.sort)),o}var Cle=(t,e)=>{if((0,H4.hasAtomicOperators)(t.replacement))throw new rf.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let r={update:e,multi:!1,filter:t.filter,updateMods:t.replacement};return t.hint&&(r.hint=t.hint),t.upsert&&(r.upsert=t.upsert),t.collation&&(r.collation=t.collation),t.sort!=null&&(r.sort=(0,vF.formatSort)(t.sort)),r};vt.buildReplaceOneOperation=Cle;function $4(t,e,r,n){switch(t.name){case"insertOne":return(0,vt.buildInsertOneOperation)(t,e,r);case"deleteOne":return(0,vt.buildDeleteOneOperation)(t,e);case"deleteMany":return(0,vt.buildDeleteManyOperation)(t,e);case"updateOne":return(0,vt.buildUpdateOneOperation)(t,e,n);case"updateMany":return(0,vt.buildUpdateManyOperation)(t,e,n);case"replaceOne":return(0,vt.buildReplaceOneOperation)(t,e)}}});var IF=R(jg=>{"use strict";Object.defineProperty(jg,"__esModule",{value:!0});jg.ClientBulkWriteResultsMerger=void 0;var Ale=gg(),Sle=ie(),_le={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},W4=class{static unacknowledged(){return _le}constructor(e){this.options=e,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},e.verboseResults&&(this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map)}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(e){let r;try{for await(let n of e)if(n.ok===1)this.options.verboseResults&&this.processDocument(e,n);else if(this.options.ordered){let o=new Sle.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw o.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg}),o.partialResult=this.result,o}else this.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg})}catch(n){if(n instanceof Ale.MongoWriteConcernError){let o=n.result;if(r={insertedCount:o.nInserted,upsertedCount:o.nUpserted,matchedCount:o.nMatched,modifiedCount:o.nModified,deletedCount:o.nDeleted,writeConcernError:o.writeConcernError},this.options.verboseResults&&o.cursor.firstBatch)for(let i of o.cursor.firstBatch)i.ok===1&&this.processDocument(e,i)}else throw n}finally{if(e.response){let n=e.response;this.incrementCounts(n)}this.currentBatchOffset+=e.operations.length}if(r){let n=r.writeConcernError;this.incrementCounts(r),this.writeConcernErrors.push({code:n.code,message:n.errmsg})}return this.result}processDocument(e,r){let n=e.operations[r.idx];if("insert"in n&&this.result.insertResults?.set(r.idx+this.currentBatchOffset,{insertedId:n.document._id}),"update"in n){let o={matchedCount:r.n,modifiedCount:r.nModified??0,didUpsert:r.upserted!=null};r.upserted&&(o.upsertedId=r.upserted._id),this.result.updateResults?.set(r.idx+this.currentBatchOffset,o)}"delete"in n&&this.result.deleteResults?.set(r.idx+this.currentBatchOffset,{deletedCount:r.n})}incrementCounts(e){this.result.insertedCount+=e.insertedCount,this.result.upsertedCount+=e.upsertedCount,this.result.matchedCount+=e.matchedCount,this.result.modifiedCount+=e.modifiedCount,this.result.deletedCount+=e.deletedCount}};jg.ClientBulkWriteResultsMerger=W4});var BF=R(Kg=>{"use strict";Object.defineProperty(Kg,"__esModule",{value:!0});Kg.ClientBulkWriteExecutor=void 0;var MF=lr(),wle=wF(),Ea=ie(),Tle=$t(),ble=de(),vle=Fr(),Ole=rr(),Rle=L4(),Dle=DF(),NF=IF(),z4=class{constructor(e,r,n){if(r.length===0)throw new Ea.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=e,this.operations=r,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...n},this.options.writeConcern||(this.options.writeConcern=vle.WriteConcern.fromOptions(this.client.s.options)),this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new Ea.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new Ea.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let e=this.client.s.options.pkFactory,r=new Dle.ClientBulkWriteCommandBuilder(this.operations,this.options,e),n=(0,ble.resolveTimeoutOptions)(this.client,this.options),o=Tle.TimeoutContext.create(n);if(this.options.writeConcern?.w===0){for(;r.hasNextBatch();){let i=new Rle.ClientBulkWriteOperation(r,this.options);await(0,Ole.executeOperation)(this.client,i,o)}return NF.ClientBulkWriteResultsMerger.unacknowledged()}else{let i=new NF.ClientBulkWriteResultsMerger(this.options);for(;r.hasNextBatch();){let s=new MF.CursorTimeoutContext(o,Symbol()),u={...this.options,timeoutContext:s,...n.timeoutMS!=null&&{timeoutMode:MF.CursorTimeoutMode.LIFETIME}},a=new wle.ClientBulkWriteCursor(this.client,r,u);try{await i.merge(a)}catch(c){if(c instanceof Ea.MongoServerError&&!(c instanceof Ea.MongoClientBulkWriteError)){let d=new Ea.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw d.cause=c,d.partialResult=i.bulkWriteResult,d}else throw c}}if(i.writeConcernErrors.length>0||i.writeErrors.size>0){let s=new Ea.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw s.writeConcernErrors=i.writeConcernErrors,s.writeErrors=i.writeErrors,s.partialResult=i.bulkWriteResult,s}return i.bulkWriteResult}}};Kg.ClientBulkWriteExecutor=z4});var X4=R(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.WaitingForSuitableServerEvent=oo.ServerSelectionSucceededEvent=oo.ServerSelectionFailedEvent=oo.ServerSelectionStartedEvent=oo.ServerSelectionEvent=void 0;var Ile=de(),Yg=Mt(),ya=class{constructor(e,r,n){this.selector=e,this.operation=n,this.topologyDescription=r}};oo.ServerSelectionEvent=ya;var j4=class extends ya{constructor(e,r,n){super(e,r,n),this.name=Yg.SERVER_SELECTION_STARTED,this.message="Server selection started"}};oo.ServerSelectionStartedEvent=j4;var K4=class extends ya{constructor(e,r,n,o){super(e,r,o),this.name=Yg.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=n}};oo.ServerSelectionFailedEvent=K4;var Y4=class extends ya{constructor(e,r,n,o){super(e,r,o),this.name=Yg.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:i,port:s}=Ile.HostAddress.fromString(n).toHostPort();this.serverHost=i,this.serverPort=s}};oo.ServerSelectionSucceededEvent=Y4;var J4=class extends ya{constructor(e,r,n,o){super(e,r,o),this.name=Yg.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=n}};oo.WaitingForSuitableServerEvent=J4});var Z4=R(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.SrvPoller=Bl.SrvPollingEvent=void 0;var Mle=require("dns"),Q4=require("timers"),Nle=ie(),Ble=On(),nf=de(),Jg=class{constructor(e){this.srvRecords=e}hostnames(){return new Set(this.srvRecords.map(e=>nf.HostAddress.fromSrvRecord(e).toString()))}};Bl.SrvPollingEvent=Jg;var Xg=class t extends Ble.TypedEventEmitter{constructor(e){if(super(),this.on("error",nf.noop),!e||!e.srvHost)throw new Nle.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=e.srvHost,this.srvMaxHosts=e.srvMaxHosts??0,this.srvServiceName=e.srvServiceName??"mongodb",this.rescanSrvIntervalMS=6e4,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){this._timeout||this.schedule()}stop(){this._timeout&&((0,Q4.clearTimeout)(this._timeout),this.generation+=1,this._timeout=void 0)}schedule(){this._timeout&&(0,Q4.clearTimeout)(this._timeout),this._timeout=(0,Q4.setTimeout)(()=>{this._poll().then(void 0,nf.squashError)},this.intervalMS)}success(e){this.haMode=!1,this.schedule(),this.emit(t.SRV_RECORD_DISCOVERY,new Jg(e))}failure(){this.haMode=!0,this.schedule()}async _poll(){let e=this.generation,r;try{r=await Mle.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(e!==this.generation)return;let n=[];for(let o of r)try{(0,nf.checkParentDomainMatch)(o.name,this.srvHost),n.push(o)}catch(i){(0,nf.squashError)(i)}if(!n.length){this.failure();return}this.success(n)}};Bl.SrvPoller=Xg;Xg.SRV_RECORD_DISCOVERY="srvRecordDiscovery"});var GF=R(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.ServerCapabilities=Pl.Topology=void 0;var Ple=Kw(),an=Mt(),yi=ie(),St=Gs(),Fle=On(),of=tr(),eT=$t(),un=de(),Re=Tn(),lu=Qm(),PF=kw(),rT=kd(),tT=td(),du=X4(),Qg=Z4(),FF=Z6(),xle=0,sf=(0,un.makeStateMachine)({[Re.STATE_CLOSED]:[Re.STATE_CLOSED,Re.STATE_CONNECTING],[Re.STATE_CONNECTING]:[Re.STATE_CONNECTING,Re.STATE_CLOSING,Re.STATE_CONNECTED,Re.STATE_CLOSED],[Re.STATE_CONNECTED]:[Re.STATE_CONNECTED,Re.STATE_CLOSING,Re.STATE_CLOSED],[Re.STATE_CLOSING]:[Re.STATE_CLOSING,Re.STATE_CLOSED]}),vr=class t extends Fle.TypedEventEmitter{constructor(e,r,n){super(),this.on("error",un.noop),this.client=e,n=n??{hosts:[un.HostAddress.fromString("localhost:27017")],...Object.fromEntries(Ple.DEFAULT_OPTIONS.entries())},typeof r=="string"?r=[un.HostAddress.fromString(r)]:Array.isArray(r)||(r=[r]);let o=[];for(let c of r)if(typeof c=="string")o.push(un.HostAddress.fromString(c));else if(c instanceof un.HostAddress)o.push(c);else throw new yi.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(c)}`);let i=kle(n),s=xle++,u=n.srvMaxHosts==null||n.srvMaxHosts===0||n.srvMaxHosts>=o.length?o:(0,un.shuffle)(o,n.srvMaxHosts),a=new Map;for(let c of u)a.set(c.toString(),new rT.ServerDescription(c));this.waitQueue=new un.List,this.s={id:s,options:n,seedlist:o,state:Re.STATE_CLOSED,description:new FF.TopologyDescription(i,a,n.replicaSet,void 0,void 0,void 0,n),serverSelectionTimeoutMS:n.serverSelectionTimeoutMS,heartbeatFrequencyMS:n.heartbeatFrequencyMS,minHeartbeatFrequencyMS:n.minHeartbeatFrequencyMS,servers:new Map,credentials:n?.credentials,clusterTime:void 0,detectShardedTopology:c=>this.detectShardedTopology(c),detectSrvRecords:c=>this.detectSrvRecords(c)},this.mongoLogger=e.mongoLogger,this.component="topology",n.srvHost&&!n.loadBalanced&&(this.s.srvPoller=n.srvPoller??new Qg.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:n.srvHost,srvMaxHosts:n.srvMaxHosts,srvServiceName:n.srvServiceName}),this.on(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology)),this.connectionLock=void 0}detectShardedTopology(e){let r=e.previousDescription.type,n=e.newDescription.type,o=r!==Re.TopologyType.Sharded&&n===Re.TopologyType.Sharded,s=!!this.s.srvPoller?.listeners(Qg.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);o&&!s&&(this.s.srvPoller?.on(Qg.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start())}detectSrvRecords(e){let r=this.s.description;this.s.description=this.s.description.updateFromSrvPollingEvent(e,this.s.options.srvMaxHosts),this.s.description!==r&&(xF(this),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new lu.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description)))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}get capabilities(){return new Zg(this.lastHello())}async connect(e){this.connectionLock??=this._connect(e);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(e){if(e=e??{},this.s.state===Re.STATE_CONNECTED)return this;sf(this,Re.STATE_CONNECTING),this.emitAndLog(t.TOPOLOGY_OPENING,new lu.TopologyOpeningEvent(this.s.id)),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new lu.TopologyDescriptionChangedEvent(this.s.id,new FF.TopologyDescription(Re.TopologyType.Unknown),this.s.description));let r=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(r.map(u=>[u.address,UF(this,u)])),this.s.options.loadBalanced)for(let u of r){let a=new rT.ServerDescription(u.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(a)}let n=this.client.s.options.serverSelectionTimeoutMS,o=e.readPreference??of.ReadPreference.primary,i=eT.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),s={operationName:"handshake",...e,timeoutContext:i};try{let u=await this.selectServer((0,tT.readPreferenceServerSelector)(o),s);if(!(this.s.options.__skipPingOnConnect===!0)&&this.s.credentials){let c=await u.pool.checkOut({timeoutContext:i});return u.pool.checkIn(c),sf(this,Re.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this}return sf(this,Re.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this}catch(u){throw this.close(),u}}closeCheckedOutConnections(){for(let e of this.s.servers.values())return e.closeCheckedOutConnections()}close(){if(!(this.s.state===Re.STATE_CLOSED||this.s.state===Re.STATE_CLOSING)){for(let e of this.s.servers.values())LF(e,this);this.s.servers.clear(),sf(this,Re.STATE_CLOSING),qF(this.waitQueue,new yi.MongoTopologyClosedError),this.s.srvPoller&&(this.s.srvPoller.stop(),this.s.srvPoller.removeListener(Qg.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords)),this.removeListener(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),sf(this,Re.STATE_CLOSED),this.emitAndLog(t.TOPOLOGY_CLOSED,new lu.TopologyClosedEvent(this.s.id))}}async selectServer(e,r){let n;if(typeof e!="function")if(typeof e=="string")n=(0,tT.readPreferenceServerSelector)(of.ReadPreference.fromString(e));else{let E;e instanceof of.ReadPreference?E=e:(of.ReadPreference.translate(r),E=r.readPreference||of.ReadPreference.primary),n=(0,tT.readPreferenceServerSelector)(E)}else n=e;r={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...r},this.client.mongoLogger?.willLog(St.MongoLoggableComponent.SERVER_SELECTION,St.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(St.MongoLoggableComponent.SERVER_SELECTION,new du.ServerSelectionStartedEvent(e,this.description,r.operationName));let o;r.timeoutContext?o=r.timeoutContext.serverSelectionTimeout:o=eT.Timeout.expires(r.serverSelectionTimeoutMS??0);let i=this.description.type===Re.TopologyType.Sharded,s=r.session,u=s&&s.transaction;if(i&&u&&u.server)return this.client.mongoLogger?.willLog(St.MongoLoggableComponent.SERVER_SELECTION,St.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(St.MongoLoggableComponent.SERVER_SELECTION,new du.ServerSelectionSucceededEvent(e,this.description,u.server.pool.address,r.operationName)),r.timeoutContext?.clearServerSelectionTimeout&&o?.clear(),u.server;let{promise:a,resolve:c,reject:d}=(0,un.promiseWithResolvers)(),p={serverSelector:n,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:u,resolve:c,reject:d,cancelled:!1,startTime:(0,un.now)(),operationName:r.operationName,waitingLogged:!1,previousServer:r.previousServer},m=(0,un.addAbortListener)(r.signal,function(){p.cancelled=!0,d(this.reason)});this.waitQueue.push(p),kF(this);try{o?.throwIfExpired();let E=await(o?Promise.race([a,o]):a);return r.timeoutContext?.csotEnabled()&&E.description.minRoundTripTime!==0&&(r.timeoutContext.minRoundTripTime=E.description.minRoundTripTime),E}catch(E){if(eT.TimeoutError.is(E)){p.cancelled=!0;let y=new yi.MongoServerSelectionError(`Server selection timed out after ${o?.duration} ms`,this.description);throw this.client.mongoLogger?.willLog(St.MongoLoggableComponent.SERVER_SELECTION,St.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(St.MongoLoggableComponent.SERVER_SELECTION,new du.ServerSelectionFailedEvent(e,this.description,y,r.operationName)),r.timeoutContext?.csotEnabled()?new yi.MongoOperationTimeoutError("Timed out during server selection",{cause:y}):y}throw E}finally{m?.[un.kDispose](),r.timeoutContext?.clearServerSelectionTimeout&&o?.clear()}}serverUpdateHandler(e){if(!this.s.description.hasServer(e.address)||Lle(this.s.description,e))return;let r=this.s.description,n=this.s.description.servers.get(e.address);if(!n)return;let o=e.$clusterTime;o&&(0,Re._advanceClusterTime)(this,o);let i=n&&n.equals(e);if(this.s.description=this.s.description.update(e),this.s.description.compatibilityError){this.emit(t.ERROR,new yi.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!i){let s=this.s.description.servers.get(e.address);s&&this.emit(t.SERVER_DESCRIPTION_CHANGED,new lu.ServerDescriptionChangedEvent(this.s.id,e.address,n,s))}xF(this,e),this.waitQueue.length>0&&kF(this),i||this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new lu.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description))}auth(e,r){typeof e=="function"&&(r=e,e=void 0),typeof r=="function"&&r(void 0,!0)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===Re.STATE_CONNECTED}isDestroyed(){return this.s.state===Re.STATE_CLOSED}lastHello(){let e=Array.from(this.description.servers.values());return e.length===0?{}:e.filter(o=>o.type!==Re.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(e){this.s.clusterTime=e}};Pl.Topology=vr;vr.SERVER_OPENING=an.SERVER_OPENING;vr.SERVER_CLOSED=an.SERVER_CLOSED;vr.SERVER_DESCRIPTION_CHANGED=an.SERVER_DESCRIPTION_CHANGED;vr.TOPOLOGY_OPENING=an.TOPOLOGY_OPENING;vr.TOPOLOGY_CLOSED=an.TOPOLOGY_CLOSED;vr.TOPOLOGY_DESCRIPTION_CHANGED=an.TOPOLOGY_DESCRIPTION_CHANGED;vr.ERROR=an.ERROR;vr.OPEN=an.OPEN;vr.CONNECT=an.CONNECT;vr.CLOSE=an.CLOSE;vr.TIMEOUT=an.TIMEOUT;function LF(t,e){for(let r of an.LOCAL_SERVER_EVENTS)t.removeAllListeners(r);t.close(),e.emitAndLog(vr.SERVER_CLOSED,new lu.ServerClosedEvent(e.s.id,t.description.address));for(let r of an.SERVER_RELAY_EVENTS)t.removeAllListeners(r)}function kle(t){return t?.directConnection?Re.TopologyType.Single:t?.replicaSet?Re.TopologyType.ReplicaSetNoPrimary:t?.loadBalanced?Re.TopologyType.LoadBalanced:Re.TopologyType.Unknown}function UF(t,e){t.emitAndLog(vr.SERVER_OPENING,new lu.ServerOpeningEvent(t.s.id,e.address));let r=new PF.Server(t,e,t.s.options);for(let n of an.SERVER_RELAY_EVENTS)r.on(n,o=>t.emit(n,o));return r.on(PF.Server.DESCRIPTION_RECEIVED,n=>t.serverUpdateHandler(n)),r.connect(),r}function xF(t,e){if(e&&t.s.servers.has(e.address)){let r=t.s.servers.get(e.address);if(r){if(r.s.description=e,e.error instanceof yi.MongoError&&e.error.hasErrorLabel(yi.MongoErrorLabel.ResetPool)){let n=e.error.hasErrorLabel(yi.MongoErrorLabel.InterruptInUseConnections);r.pool.clear({interruptInUseConnections:n})}else if(e.error==null){let n=t.s.description.type;(e.isDataBearing||e.type!==Re.ServerType.Unknown&&n===Re.TopologyType.Single)&&r.pool.ready()}}}for(let r of t.description.servers.values())if(!t.s.servers.has(r.address)){let n=UF(t,r);t.s.servers.set(r.address,n)}for(let r of t.s.servers){let n=r[0];if(t.description.hasServer(n)||!t.s.servers.has(n))continue;let o=t.s.servers.get(n);t.s.servers.delete(n),o&&LF(o,t)}}function qF(t,e){for(;t.length;){let r=t.shift();r&&(r.cancelled||(r.mongoLogger?.willLog(St.MongoLoggableComponent.SERVER_SELECTION,St.SeverityLevel.DEBUG)&&r.mongoLogger?.debug(St.MongoLoggableComponent.SERVER_SELECTION,new du.ServerSelectionFailedEvent(r.serverSelector,r.topologyDescription,e,r.operationName)),r.reject(e)))}}function kF(t){if(t.s.state===Re.STATE_CLOSED){qF(t.waitQueue,new yi.MongoTopologyClosedError);return}let e=t.description.type===Re.TopologyType.Sharded,r=Array.from(t.description.servers.values()),n=t.waitQueue.length;for(let o=0;o<n;++o){let i=t.waitQueue.shift();if(!i||i.cancelled)continue;let s;try{let c=i.serverSelector,d=i.previousServer;s=c?c(t.description,r,d?[d]:[]):r}catch(c){t.client.mongoLogger?.willLog(St.MongoLoggableComponent.SERVER_SELECTION,St.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(St.MongoLoggableComponent.SERVER_SELECTION,new du.ServerSelectionFailedEvent(i.serverSelector,t.description,c,i.operationName)),i.reject(c);continue}let u;if(s.length===0){i.waitingLogged||(t.client.mongoLogger?.willLog(St.MongoLoggableComponent.SERVER_SELECTION,St.SeverityLevel.INFORMATIONAL)&&t.client.mongoLogger?.info(St.MongoLoggableComponent.SERVER_SELECTION,new du.WaitingForSuitableServerEvent(i.serverSelector,t.description,t.s.serverSelectionTimeoutMS!==0?t.s.serverSelectionTimeoutMS-((0,un.now)()-i.startTime):-1,i.operationName)),i.waitingLogged=!0),t.waitQueue.push(i);continue}else if(s.length===1)u=t.s.servers.get(s[0].address);else{let c=(0,un.shuffle)(s,2),d=t.s.servers.get(c[0].address),p=t.s.servers.get(c[1].address);u=d&&p&&d.s.operationCount<p.s.operationCount?d:p}if(!u){let c=new yi.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",t.description);t.client.mongoLogger?.willLog(St.MongoLoggableComponent.SERVER_SELECTION,St.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(St.MongoLoggableComponent.SERVER_SELECTION,new du.ServerSelectionFailedEvent(i.serverSelector,t.description,c,i.operationName)),i.reject(c);return}let a=i.transaction;e&&a&&a.isActive&&u&&a.pinServer(u),t.client.mongoLogger?.willLog(St.MongoLoggableComponent.SERVER_SELECTION,St.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(St.MongoLoggableComponent.SERVER_SELECTION,new du.ServerSelectionSucceededEvent(i.serverSelector,i.topologyDescription,u.pool.address,i.operationName)),i.resolve(u)}if(t.waitQueue.length>0)for(let[,o]of t.s.servers)process.nextTick(function(){return o.requestCheck()})}function Lle(t,e){let n=t.servers.get(e.address)?.topologyVersion;return(0,rT.compareTopologyVersion)(n,e.topologyVersion)>0}var Zg=class{constructor(e){this.minWireVersion=e.minWireVersion||0,this.maxWireVersion=e.maxWireVersion||0}get hasAggregationCursor(){return!0}get hasWriteCommands(){return!0}get hasTextSearch(){return!0}get hasAuthCommands(){return!0}get hasListCollectionsCommand(){return!0}get hasListIndexesCommand(){return!0}get supportsSnapshotReads(){return this.maxWireVersion>=13}get commandsTakeWriteConcern(){return!0}get commandsTakeCollation(){return!0}};Pl.ServerCapabilities=Zg});var eu=R(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.MongoClient=Fl.ServerApiVersion=void 0;var nT=require("fs"),Ule=qe(),qle=pa(),Gle=um(),Vle=di(),oT=N3(),$le=Ye(),VF=Kw(),Hle=Mt(),Wle=wg(),iT=ie(),zle=k4(),$F=Gs(),jle=On(),Kle=BF(),Yle=rr(),Jle=ot(),HF=tr(),Xle=fl(),Qle=td(),WF=GF(),zF=dl(),zt=de();Fl.ServerApiVersion=Object.freeze({v1:"1"});var e2=class extends jle.TypedEventEmitter{constructor(e,r){super(),this.driverInfoList=[],this.on("error",zt.noop),this.options=(0,VF.parseOptions)(e,this,r),this.appendMetadata(this.options.driverInfo);let n=Object.values(this.options.mongoLoggerOptions.componentSeverities).some(i=>i!==$F.SeverityLevel.OFF);this.mongoLogger=n?new $F.MongoLogger(this.options.mongoLoggerOptions):void 0;let o=this;this.s={url:e,bsonOptions:(0,Ule.resolveBSONOptions)(this.options),namespace:(0,zt.ns)("admin"),hasBeenClosed:!1,sessionPool:new zF.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new zle.MongoClientAuthProviders,get options(){return o.options},get readConcern(){return o.options.readConcern},get writeConcern(){return o.options.writeConcern},get readPreference(){return o.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async asyncDispose(){await this.close()}appendMetadata(e){this.driverInfoList.some(n=>(0,oT.isDriverInfoEqual)(n,e))||(this.driverInfoList.push(e),this.options.metadata=(0,oT.makeClientMetadata)(this.driverInfoList,this.options),this.options.extendedMetadata=(0,oT.addContainerMetadata)(this.options.metadata).then(void 0,zt.squashError).then(n=>n??{}))}checkForNonGenuineHosts(){let e=this.options.hosts.filter(i=>(0,zt.isHostMatch)(zt.DOCUMENT_DB_CHECK,i.host)),r=(0,zt.isHostMatch)(zt.DOCUMENT_DB_CHECK,this.options.srvHost),n=this.options.hosts.filter(i=>(0,zt.isHostMatch)(zt.COSMOS_DB_CHECK,i.host)),o=(0,zt.isHostMatch)(zt.COSMOS_DB_CHECK,this.options.srvHost);e.length!==0||r?this.mongoLogger?.info("client",zt.DOCUMENT_DB_MSG):(n.length!==0||o)&&this.mongoLogger?.info("client",zt.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands(e){this.options.monitorCommands=e}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(e,r){if(this.autoEncrypter)throw new iT.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new Kle.ClientBulkWriteExecutor(this,e,(0,zt.resolveOptions)(this,r)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let e=this.options;if(e.tls&&(typeof e.tlsCAFile=="string"&&(e.ca??=await nT.promises.readFile(e.tlsCAFile)),typeof e.tlsCRLFile=="string"&&(e.crl??=await nT.promises.readFile(e.tlsCRLFile)),typeof e.tlsCertificateKeyFile=="string"&&(!e.key||!e.cert))){let n=await nT.promises.readFile(e.tlsCertificateKeyFile);e.key??=n,e.cert??=n}if(typeof e.srvHost=="string"){let n=await(0,VF.resolveSRVRecord)(e);for(let[o,i]of n.entries())e.hosts[o]=i}if(e.credentials?.mechanism===Vle.AuthMechanism.MONGODB_OIDC){let n=e.credentials?.mechanismProperties?.ALLOWED_HOSTS||Gle.DEFAULT_ALLOWED_HOSTS;if(!!!e.credentials?.mechanismProperties?.ENVIRONMENT){for(let i of e.hosts)if(!(0,zt.hostMatchesWildcards)(i.toHostPort().host,n))throw new iT.MongoInvalidArgumentError(`Host '${i}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${n.join(",")}'`)}}this.topology=new WF.Topology(this,e.hosts,e),this.topology.once(WF.Topology.OPEN,()=>this.emit("open",this));for(let n of Hle.MONGO_CLIENT_EVENTS)this.topology.on(n,(...o)=>this.emit(n,...o));let r=async()=>{try{await this.topology?.connect(e)}catch(n){throw this.topology?.close(),n}};return this.autoEncrypter?(await this.autoEncrypter?.init(),await r(),await e.encrypter.connectInternalClient()):await r(),this}async close(e=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let e=Array.from(this.s.activeCursors,c=>c.close());this.s.activeCursors.clear(),await Promise.all(e);let r=Array.from(this.s.activeSessions,c=>c.endSession());if(this.s.activeSessions.clear(),await Promise.all(r),this.topology==null)return;let n=(0,Qle.readPreferenceServerSelector)(HF.ReadPreference.primaryPreferred),o=this.topology.description,i=Array.from(o.servers.values());if(n(o,i).length!==0){let c=Array.from(this.s.sessionPool.sessions,({id:d})=>d);if(c.length!==0)try{class d extends Jle.AbstractOperation{constructor(){super(...arguments),this.ns=zt.MongoDBNamespace.fromString("admin.$cmd"),this.SERVER_COMMAND_RESPONSE_TYPE=$le.MongoDBResponse}buildCommand(m,E){return{endSessions:c}}buildOptions(m){return{timeoutContext:m,readPreference:HF.ReadPreference.primaryPreferred,noResponse:!0}}get commandName(){return"endSessions"}}await(0,Yle.executeOperation)(this,new d)}catch(d){(0,zt.squashError)(d)}}let u=this.topology;this.topology=void 0,u.close();let{encrypter:a}=this.options;a&&await a.close(this)}db(e,r){r=r??{},e||(e=this.s.options.dbName);let n=Object.assign({},this.options,r);return new Wle.Db(this,e,n)}static async connect(e,r){return await new this(e,r).connect()}startSession(e){let r=new zF.ClientSession(this,this.s.sessionPool,{explicit:!0,...e},this.options);return this.s.activeSessions.add(r),r.once("ended",()=>{this.s.activeSessions.delete(r)}),r}async withSession(e,r){let n={owner:Symbol(),...typeof e=="object"?e:{}},o=typeof e=="function"?e:r;if(o==null)throw new iT.MongoInvalidArgumentError("Missing required callback parameter");let i=this.startSession(n);try{return await o(i)}finally{try{await i.endSession()}catch(s){(0,zt.squashError)(s)}}}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new qle.ChangeStream(this,e,(0,zt.resolveOptions)(this,r))}};Fl.MongoClient=e2;(0,Xle.configureResourceManagement)(e2.prototype)});var fl=R(t2=>{"use strict";Object.defineProperty(t2,"__esModule",{value:!0});t2.configureResourceManagement=uf;t2.configureExplicitResourceManagement=Zle;function uf(t){Symbol.asyncDispose&&Object.defineProperty(t,Symbol.asyncDispose,{value:async function(){await this.asyncDispose()},enumerable:!1,configurable:!0,writable:!0})}function Zle(){let{MongoClient:t}=eu(),{ClientSession:e}=dl(),{AbstractCursor:r}=lr(),{ChangeStream:n}=pa();uf(t.prototype),uf(e.prototype),uf(r.prototype),uf(n.prototype)}});var lr=R(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.CursorTimeoutContext=Dt.AbstractCursor=Dt.CursorTimeoutMode=Dt.CURSOR_FLAGS=void 0;var JF=require("stream"),xl=qe(),jt=ie(),e1e=On(),jF=rr(),t1e=w3(),r1e=sM(),KF=Do(),r2=tr(),n1e=fl(),o1e=dl(),sT=$t(),Mn=de();Dt.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function YF(){this.client.s.activeCursors.delete(this)}Dt.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});var af=class extends e1e.TypedEventEmitter{constructor(e,r,n={}){if(super(),this.documents=null,this.hasEmittedClose=!1,this.on("error",Mn.noop),!e.s.isMongoClient)throw new jt.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=e,this.cursorNamespace=r,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:n.readPreference&&n.readPreference instanceof r2.ReadPreference?n.readPreference:r2.ReadPreference.primary,...(0,xl.pluckBSONSerializeOptions)(n),timeoutMS:n?.timeoutContext?.csotEnabled()?n.timeoutContext.timeoutMS:n.timeoutMS,tailable:n.tailable,awaitData:n.awaitData},this.cursorOptions.timeoutMS!=null)if(n.timeoutMode==null)if(n.tailable){if(n.awaitData&&n.maxAwaitTimeMS!=null&&n.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new jt.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor");this.cursorOptions.timeoutMode=Dt.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=Dt.CursorTimeoutMode.LIFETIME;else{if(n.tailable&&n.timeoutMode===Dt.CursorTimeoutMode.LIFETIME)throw new jt.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=n.timeoutMode}else if(n.timeoutMode!=null)throw new jt.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===Dt.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let o=KF.ReadConcern.fromOptions(n);o&&(this.cursorOptions.readConcern=o),typeof n.batchSize=="number"&&(this.cursorOptions.batchSize=n.batchSize),n.comment!==void 0&&(this.cursorOptions.comment=n.comment),typeof n.maxTimeMS=="number"&&(this.cursorOptions.maxTimeMS=n.maxTimeMS),typeof n.maxAwaitTimeMS=="number"&&(this.cursorOptions.maxAwaitTimeMS=n.maxAwaitTimeMS),this.cursorSession=n.session??null,this.deserializationOptions={...this.cursorOptions,validation:{utf8:n?.enableUtf8Validation!==!1}},this.timeoutContext=n.timeoutContext,this.signal=n.signal,this.abortListener=(0,Mn.addAbortListener)(this.signal,()=>{this.close().then(void 0,Mn.squashError)}),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(e){this.cursorSession=e}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async asyncDispose(){await this.close()}trackCursor(){this.cursorClient.s.activeCursors.add(this),this.listeners("close").includes(YF)||this.once("close",YF)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(e){let r=[],n=Math.min(e??this.documents?.length??0,this.documents?.length??0);for(let o=0;o<n;o++){let i=this.documents?.shift(this.deserializationOptions);i!=null&&r.push(i)}return r}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),!this.closed)try{for(;;){if(this.isKilled||this.closed||this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let e=await this.next();if(e===null)return;yield e,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch(e){(0,Mn.squashError)(e)}}}stream(e){let r=new uT(this),n=(0,Mn.addAbortListener)(this.signal,function(){r.destroy(this.reason)});if(r.once("end",()=>{n?.[Mn.kDispose]()}),e?.transform){let o=e.transform,i=r.pipe(new JF.Transform({objectMode:!0,highWaterMark:1,transform(s,u,a){try{let c=o(s);a(void 0,c)}catch(c){a(c)}}}));return r.on("error",s=>i.emit("error",s)),i}return r}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===xl.Long.ZERO)return!1;this.cursorOptions.timeoutMode===Dt.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===Dt.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===xl.Long.ZERO)throw new jt.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===Dt.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===Dt.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===xl.Long.ZERO)throw new jt.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===Dt.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;if(await this.fetchBatch(),e=this.documents?.shift(this.deserializationOptions),e!=null)return this.transform!=null?await this.transformDocument(e):e}finally{this.cursorOptions.timeoutMode===Dt.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async forEach(e){if(this.signal?.throwIfAborted(),typeof e!="function")throw new jt.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let r of this)if(e(r)===!1)break}async close(e){await this.cleanup(e?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let e=[];for await(let r of this){e.push(r);let n=this.readBufferedDocuments();if(this.transform!=null)for(let o of n)e.push(await this.transformDocument(o));else e.push(...n)}return e}addCursorFlag(e,r){if(this.throwIfInitialized(),!Dt.CURSOR_FLAGS.includes(e))throw new jt.MongoInvalidArgumentError(`Flag ${e} is not one of ${Dt.CURSOR_FLAGS}`);if(typeof r!="boolean")throw new jt.MongoInvalidArgumentError(`Flag ${e} must be a boolean value`);return this.cursorOptions[e]=r,this}map(e){this.throwIfInitialized();let r=this.transform;return r?this.transform=n=>e(r(n)):this.transform=e,this}withReadPreference(e){if(this.throwIfInitialized(),e instanceof r2.ReadPreference)this.cursorOptions.readPreference=e;else if(typeof e=="string")this.cursorOptions.readPreference=r2.ReadPreference.fromString(e);else throw new jt.MongoInvalidArgumentError(`Invalid read preference: ${e}`);return this}withReadConcern(e){this.throwIfInitialized();let r=KF.ReadConcern.fromOptions({readConcern:e});return r&&(this.cursorOptions.readConcern=r),this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new jt.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=e,this}batchSize(e){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new jt.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof e!="number")throw new jt.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=e,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new jt.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");this.initialized&&(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession?.explicit===!1&&(this.cursorSession.hasEnded||this.cursorSession.endSession().then(void 0,Mn.squashError),this.cursorSession=null))}async getMore(e){if(this.cursorId==null)throw new jt.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new jt.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");if(this.cursorSession==null)throw new jt.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let r={...this.cursorOptions,session:this.cursorSession,batchSize:e},n=new t1e.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,r);return await(0,jF.executeOperation)(this.cursorClient,n,this.timeoutContext)}async cursorInit(){this.cursorOptions.timeoutMS!=null&&(this.timeoutContext??=new cf(sT.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this));try{this.cursorSession??=this.cursorClient.startSession({owner:this,explicit:!1});let e=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let r=e.response;this.selectedServer=e.server,this.cursorId=r.id,this.cursorNamespace=r.ns??this.namespace,this.documents=r,this.initialized=!0}catch(e){throw this.initialized=!0,await this.cleanup(void 0,e),e}this.isDead&&await this.cleanup()}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null&&(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead))return;let e=this.cursorOptions.batchSize||1e3;try{let r=await this.getMore(e);this.cursorId=r.id,this.documents=r}catch(r){try{await this.cleanup(void 0,r)}catch(n){(0,Mn.squashError)(n)}throw r}this.isDead&&await this.cleanup()}async cleanup(e,r){this.abortListener?.[Mn.kDispose](),this.isClosed=!0;let n=()=>e!=null?(this.timeoutContext?.clear(),new cf(sT.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:e}),this)):this.timeoutContext?.refreshed();await(async s=>{try{await s()}finally{this.emitClose()}})(async()=>{let s=this.cursorSession;if(s)try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!s.hasEnded){this.isKilled=!0;let u=this.cursorId;this.cursorId=xl.Long.ZERO,await(0,jF.executeOperation)(this.cursorClient,new r1e.KillCursorsOperation(u,this.cursorNamespace,this.selectedServer,{session:s}),n())}}catch(u){(0,Mn.squashError)(u)}finally{s.owner===this&&await s.endSession({error:r}),s.inTransaction()||(0,o1e.maybeClearPinnedConnection)(s,{error:r})}})}emitClose(){try{!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed)&&this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(e){if(this.transform==null)return e;try{let r=this.transform(e);if(r===null){let n="Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.";throw new jt.MongoAPIError(n)}return r}catch(r){try{await this.close()}catch(n){(0,Mn.squashError)(n)}throw r}}throwIfInitialized(){if(this.initialized)throw new jt.MongoCursorInUseError}};Dt.AbstractCursor=af;af.CLOSE="close";var uT=class extends JF.Readable{constructor(e){super({objectMode:!0,autoDestroy:!1,highWaterMark:1}),this._readInProgress=!1,this._cursor=e}_read(e){this._readInProgress||(this._readInProgress=!0,this._readNext())}_destroy(e,r){this._cursor.close().then(()=>r(e),n=>r(n))}_readNext(){if(this._cursor.id===xl.Long.ZERO){this.push(null);return}this._cursor.next().then(e=>{if(e==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,Mn.squashError);else{if(this.push(e))return this._readNext();this._readInProgress=!1}},e=>e.message.match(/server is closed/)?(this._cursor.close().then(void 0,Mn.squashError),this.push(null)):e.message.match(/operation was interrupted/)?this.push(null):this.destroy(e)).catch(e=>{this._readInProgress=!1,this.destroy(e)})}};(0,n1e.configureResourceManagement)(af.prototype);var cf=class t extends sT.TimeoutContext{constructor(e,r){super(),this.timeoutContext=e,this.owner=r}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new t(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(e,r){this.timeoutContext.addMaxTimeMSToCommand(e,r)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}};Dt.CursorTimeoutContext=cf});var o2=R(n2=>{"use strict";Object.defineProperty(n2,"__esModule",{value:!0});n2.ExplainableCursor=void 0;var i1e=lr(),aT=class extends i1e.AbstractCursor{resolveExplainTimeoutOptions(e,r){let n,o;return e==null&&r==null?(n=void 0,o=void 0):e!=null&&r==null?(n=typeof e!="object"||"verbosity"in e?e:void 0,o=typeof e=="object"&&"timeoutMS"in e?e:void 0):(n=e,o=r),{timeout:o,explain:n}}};n2.ExplainableCursor=aT});var Jd=R(i2=>{"use strict";Object.defineProperty(i2,"__esModule",{value:!0});i2.AggregationCursor=void 0;var cT=ie(),XF=ud(),QF=ad(),ZF=rr(),s1e=de(),ex=lr(),u1e=o2(),lT=class t extends u1e.ExplainableCursor{constructor(e,r,n=[],o={}){super(e,r,o),this.pipeline=n,this.aggregateOptions=o;let i=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===ex.CursorTimeoutMode.ITERATION&&(i?.$merge!=null||i?.$out!=null))throw new cT.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let e=(0,s1e.mergeOptions)({},this.aggregateOptions);return delete e.session,new t(this.client,this.namespace,this.pipeline,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.aggregateOptions,...this.cursorOptions,session:e,signal:this.signal};if(r.explain)try{(0,XF.validateExplainTimeoutOptions)(r,XF.Explain.fromOptions(r))}catch{throw new cT.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let n=new QF.AggregateOperation(this.namespace,this.pipeline,r),o=await(0,ZF.executeOperation)(this.client,n,this.timeoutContext);return{server:n.server,session:e,response:o}}async explain(e,r){let{explain:n,timeout:o}=this.resolveExplainTimeoutOptions(e,r);return(await(0,ZF.executeOperation)(this.client,new QF.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...o,explain:n??!0}))).shift(this.deserializationOptions)}addStage(e){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===ex.CursorTimeoutMode.ITERATION&&(e.$out!=null||e.$merge!=null))throw new cT.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(e),this}group(e){return this.addStage({$group:e})}limit(e){return this.addStage({$limit:e})}match(e){return this.addStage({$match:e})}out(e){return this.addStage({$out:e})}project(e){return this.addStage({$project:e})}lookup(e){return this.addStage({$lookup:e})}redact(e){return this.addStage({$redact:e})}skip(e){return this.addStage({$skip:e})}sort(e){return this.addStage({$sort:e})}unwind(e){return this.addStage({$unwind:e})}geoNear(e){return this.addStage({$geoNear:e})}};i2.AggregationCursor=lT});var dT=R(a2=>{"use strict";Object.defineProperty(a2,"__esModule",{value:!0});a2.CountOperation=void 0;var a1e=Ye(),c1e=Ot(),s2=ot(),u2=class extends c1e.CommandOperation{constructor(e,r,n){super({s:{namespace:e}},n),this.SERVER_COMMAND_RESPONSE_TYPE=a1e.MongoDBResponse,this.options=n,this.collectionName=e.collection,this.query=r}get commandName(){return"count"}buildCommandDocument(e,r){let n=this.options,o={count:this.collectionName,query:this.query};return typeof n.limit=="number"&&(o.limit=n.limit),typeof n.skip=="number"&&(o.skip=n.skip),n.hint!=null&&(o.hint=n.hint),typeof n.maxTimeMS=="number"&&(o.maxTimeMS=n.maxTimeMS),o}handleOk(e){return e.getNumber("n")??0}};a2.CountOperation=u2;(0,s2.defineAspects)(u2,[s2.Aspect.READ_OPERATION,s2.Aspect.RETRYABLE,s2.Aspect.SUPPORTS_RAW_DATA])});var tx=R(l2=>{"use strict";Object.defineProperty(l2,"__esModule",{value:!0});l2.FindOperation=void 0;var fT=Ye(),l1e=ie(),d1e=Wc(),f1e=de(),h1e=Ot(),kl=ot(),c2=class extends h1e.CommandOperation{constructor(e,r={},n={}){if(super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=fT.CursorResponse,this.options={...n},delete this.options.writeConcern,this.ns=e,typeof r!="object"||Array.isArray(r))throw new l1e.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=r!=null&&r._bsontype==="ObjectId"?{_id:r}:r,this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?fT.ExplainedCursorResponse:fT.CursorResponse}get commandName(){return"find"}buildOptions(e){return{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:this.session,timeoutContext:e}}handleOk(e){return e}buildCommandDocument(){return p1e(this.ns,this.filter,this.options)}};l2.FindOperation=c2;function p1e(t,e,r){let n={find:t.collection,filter:e};if(r.sort&&(n.sort=(0,d1e.formatSort)(r.sort)),r.projection){let o=r.projection;o&&Array.isArray(o)&&(o=o.length?o.reduce((i,s)=>(i[s]=1,i),{}):{_id:1}),n.projection=o}return r.hint&&(n.hint=(0,f1e.normalizeHintField)(r.hint)),typeof r.skip=="number"&&(n.skip=r.skip),typeof r.limit=="number"&&(r.limit<0?(n.limit=-r.limit,n.singleBatch=!0):n.limit=r.limit),typeof r.batchSize=="number"&&(r.batchSize<0?n.limit=-r.batchSize:r.batchSize===r.limit?n.batchSize=r.batchSize+1:n.batchSize=r.batchSize),typeof r.singleBatch=="boolean"&&(n.singleBatch=r.singleBatch),r.comment!==void 0&&(n.comment=r.comment),r.max&&(n.max=r.max),r.min&&(n.min=r.min),typeof r.returnKey=="boolean"&&(n.returnKey=r.returnKey),typeof r.showRecordId=="boolean"&&(n.showRecordId=r.showRecordId),typeof r.tailable=="boolean"&&(n.tailable=r.tailable),typeof r.oplogReplay=="boolean"&&(n.oplogReplay=r.oplogReplay),typeof r.timeout=="boolean"?n.noCursorTimeout=!r.timeout:typeof r.noCursorTimeout=="boolean"&&(n.noCursorTimeout=r.noCursorTimeout),typeof r.awaitData=="boolean"&&(n.awaitData=r.awaitData),typeof r.allowPartialResults=="boolean"&&(n.allowPartialResults=r.allowPartialResults),typeof r.allowDiskUse=="boolean"&&(n.allowDiskUse=r.allowDiskUse),r.let&&(n.let=r.let),n}(0,kl.defineAspects)(c2,[kl.Aspect.READ_OPERATION,kl.Aspect.RETRYABLE,kl.Aspect.EXPLAINABLE,kl.Aspect.CURSOR_CREATING,kl.Aspect.SUPPORTS_RAW_DATA])});var ET=R(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.FindCursor=Ll.FLAGS=void 0;var m1e=Ye(),io=ie(),rx=ud(),g1e=dT(),hT=rr(),nx=tx(),pT=Wc(),mT=de(),E1e=o2();Ll.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];var gT=class t extends E1e.ExplainableCursor{constructor(e,r,n={},o={}){super(e,r,o),this.numReturned=0,this.cursorFilter=n,this.findOptions=o,o.sort!=null&&(this.findOptions.sort=(0,pT.formatSort)(o.sort))}clone(){let e=(0,mT.mergeOptions)({},this.findOptions);return delete e.session,new t(this.client,this.namespace,this.cursorFilter,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.findOptions,...this.cursorOptions,session:e,signal:this.signal};if(r.explain)try{(0,rx.validateExplainTimeoutOptions)(r,rx.Explain.fromOptions(r))}catch{throw new io.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let n=new nx.FindOperation(this.namespace,this.cursorFilter,r),o=await(0,hT.executeOperation)(this.client,n,this.timeoutContext);return this.numReturned=o.batchSize,{server:n.server,session:e,response:o}}async getMore(e){let r=this.numReturned;if(r){let o=this.findOptions.limit;if(e=o&&o>0&&r+e>o?o-r:e,e<=0){try{await this.close()}catch(i){(0,mT.squashError)(i)}return m1e.CursorResponse.emptyGetMore}}let n=await super.getMore(e);return this.numReturned=this.numReturned+n.batchSize,n}async count(e){if((0,mT.emitWarningOnce)("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof e=="boolean")throw new io.MongoInvalidArgumentError("Invalid first parameter to count");return await(0,hT.executeOperation)(this.client,new g1e.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...e}))}async explain(e,r){let{explain:n,timeout:o}=this.resolveExplainTimeoutOptions(e,r);return(await(0,hT.executeOperation)(this.client,new nx.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...o,explain:n??!0}))).shift(this.deserializationOptions)}filter(e){return this.throwIfInitialized(),this.cursorFilter=e,this}hint(e){return this.throwIfInitialized(),this.findOptions.hint=e,this}min(e){return this.throwIfInitialized(),this.findOptions.min=e,this}max(e){return this.throwIfInitialized(),this.findOptions.max=e,this}returnKey(e){return this.throwIfInitialized(),this.findOptions.returnKey=e,this}showRecordId(e){return this.throwIfInitialized(),this.findOptions.showRecordId=e,this}addQueryModifier(e,r){if(this.throwIfInitialized(),e[0]!=="$")throw new io.MongoInvalidArgumentError(`${e} is not a valid query modifier`);switch(e.substr(1)){case"comment":this.findOptions.comment=r;break;case"explain":this.findOptions.explain=r;break;case"hint":this.findOptions.hint=r;break;case"max":this.findOptions.max=r;break;case"maxTimeMS":this.findOptions.maxTimeMS=r;break;case"min":this.findOptions.min=r;break;case"orderby":this.findOptions.sort=(0,pT.formatSort)(r);break;case"query":this.cursorFilter=r;break;case"returnKey":this.findOptions.returnKey=r;break;case"showDiskLoc":this.findOptions.showRecordId=r;break;default:throw new io.MongoInvalidArgumentError(`Invalid query modifier: ${e}`)}return this}comment(e){return this.throwIfInitialized(),this.findOptions.comment=e,this}maxAwaitTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new io.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=e,this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new io.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=e,this}project(e){return this.throwIfInitialized(),this.findOptions.projection=e,this}sort(e,r){if(this.throwIfInitialized(),this.findOptions.tailable)throw new io.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=(0,pT.formatSort)(e,r),this}allowDiskUse(e=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new io.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');return e?(this.findOptions.allowDiskUse=!0,this):(this.findOptions.allowDiskUse=!1,this)}collation(e){return this.throwIfInitialized(),this.findOptions.collation=e,this}limit(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new io.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof e!="number")throw new io.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=e,this}skip(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new io.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof e!="number")throw new io.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=e,this}};Ll.FindCursor=gT});var CT=R(d2=>{"use strict";Object.defineProperty(d2,"__esModule",{value:!0});d2.ListIndexesCursor=void 0;var y1e=rr(),C1e=Kd(),A1e=lr(),yT=class t extends A1e.AbstractCursor{constructor(e,r){super(e.client,e.s.namespace,r),this.parent=e,this.options=r}clone(){return new t(this.parent,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new C1e.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:e}),n=await(0,y1e.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};d2.ListIndexesCursor=yT});var ox=R(f2=>{"use strict";Object.defineProperty(f2,"__esModule",{value:!0});f2.ListSearchIndexesCursor=void 0;var S1e=Jd(),AT=class extends S1e.AggregationCursor{constructor({fullNamespace:e,client:r},n,o={}){let i=n==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:n}}];super(r,e,i,o)}};f2.ListSearchIndexesCursor=AT});var ix=R(p2=>{"use strict";Object.defineProperty(p2,"__esModule",{value:!0});p2.DistinctOperation=void 0;var _1e=Ye(),w1e=Ot(),lf=ot(),h2=class extends w1e.CommandOperation{constructor(e,r,n,o){super(e,o),this.SERVER_COMMAND_RESPONSE_TYPE=_1e.MongoDBResponse,this.options=o??{},this.collection=e,this.key=r,this.query=n}get commandName(){return"distinct"}buildCommandDocument(e){let r={distinct:this.collection.collectionName,key:this.key,query:this.query};return this.options.comment!==void 0&&(r.comment=this.options.comment),this.options.hint!=null&&(r.hint=this.options.hint),r}handleOk(e){return this.explain?e.toObject(this.bsonOptions):e.toObject(this.bsonOptions).values}};p2.DistinctOperation=h2;(0,lf.defineAspects)(h2,[lf.Aspect.READ_OPERATION,lf.Aspect.RETRYABLE,lf.Aspect.EXPLAINABLE,lf.Aspect.SUPPORTS_RAW_DATA])});var sx=R(g2=>{"use strict";Object.defineProperty(g2,"__esModule",{value:!0});g2.EstimatedDocumentCountOperation=void 0;var T1e=Ye(),b1e=Ot(),df=ot(),m2=class extends b1e.CommandOperation{constructor(e,r={}){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=T1e.MongoDBResponse,this.options=r,this.collectionName=e.collectionName}get commandName(){return"count"}buildCommandDocument(e,r){let n={count:this.collectionName};return typeof this.options.maxTimeMS=="number"&&(n.maxTimeMS=this.options.maxTimeMS),this.options.comment!==void 0&&(n.comment=this.options.comment),n}handleOk(e){return e.getNumber("n")??0}};g2.EstimatedDocumentCountOperation=m2;(0,df.defineAspects)(m2,[df.Aspect.READ_OPERATION,df.Aspect.RETRYABLE,df.Aspect.CURSOR_CREATING,df.Aspect.SUPPORTS_RAW_DATA])});var TT=R(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.FindOneAndUpdateOperation=Nn.FindOneAndReplaceOperation=Nn.FindOneAndDeleteOperation=Nn.FindAndModifyOperation=Nn.ReturnDocument=void 0;var v1e=Ye(),fu=ie(),O1e=tr(),R1e=Wc(),E2=de(),D1e=Ot(),ff=ot();Nn.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function ux(t,e){return t.new=e.returnDocument===Nn.ReturnDocument.AFTER,t.upsert=e.upsert===!0,e.bypassDocumentValidation===!0&&(t.bypassDocumentValidation=e.bypassDocumentValidation),t}var Ca=class extends D1e.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=v1e.MongoDBResponse,this.options=n,this.readPreference=O1e.ReadPreference.primary,this.collection=e,this.query=r}get commandName(){return"findAndModify"}buildCommandDocument(e,r){let n=this.options,o={findAndModify:this.collection.collectionName,query:this.query,remove:!1,new:!1,upsert:!1};n.includeResultMetadata??=!1;let i=(0,R1e.formatSort)(n.sort);if(i&&(o.sort=i),n.projection&&(o.fields=n.projection),n.maxTimeMS&&(o.maxTimeMS=n.maxTimeMS),n.writeConcern&&(o.writeConcern=n.writeConcern),n.let&&(o.let=n.let),n.comment!==void 0&&(o.comment=n.comment),(0,E2.decorateWithCollation)(o,n),n.hint){if(this.writeConcern?.w===0&&(0,E2.maxWireVersion)(e)<9)throw new fu.MongoCompatibilityError("hint for the findAndModify command is only supported on MongoDB 4.4+");o.hint=n.hint}return o}handleOk(e){let r=super.handleOk(e);return this.options.includeResultMetadata?r:r.value??null}};Nn.FindAndModifyOperation=Ca;var ST=class extends Ca{constructor(e,r,n){if(r==null||typeof r!="object")throw new fu.MongoInvalidArgumentError('Argument "filter" must be an object');super(e,r,n)}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.remove=!0,n}};Nn.FindOneAndDeleteOperation=ST;var _T=class extends Ca{constructor(e,r,n,o){if(r==null||typeof r!="object")throw new fu.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new fu.MongoInvalidArgumentError('Argument "replacement" must be an object');if((0,E2.hasAtomicOperators)(n))throw new fu.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(e,r,o),this.replacement=n}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.update=this.replacement,ux(n,this.options),n}};Nn.FindOneAndReplaceOperation=_T;var wT=class extends Ca{constructor(e,r,n,o){if(r==null||typeof r!="object")throw new fu.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new fu.MongoInvalidArgumentError('Argument "update" must be an object');if(!(0,E2.hasAtomicOperators)(n,o))throw new fu.MongoInvalidArgumentError("Update document requires atomic operators");super(e,r,o),this.update=n,this.options=o}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.update=this.update,ux(n,this.options),this.options.arrayFilters&&(n.arrayFilters=this.options.arrayFilters),n}};Nn.FindOneAndUpdateOperation=wT;(0,ff.defineAspects)(Ca,[ff.Aspect.WRITE_OPERATION,ff.Aspect.RETRYABLE,ff.Aspect.EXPLAINABLE,ff.Aspect.SUPPORTS_RAW_DATA])});var ax=R(y2=>{"use strict";Object.defineProperty(y2,"__esModule",{value:!0});y2.CreateSearchIndexesOperation=void 0;var I1e=Ye(),M1e=ot(),bT=class extends M1e.AbstractOperation{constructor(e,r){super(),this.SERVER_COMMAND_RESPONSE_TYPE=I1e.MongoDBResponse,this.collection=e,this.descriptions=r,this.ns=e.fullNamespace}get commandName(){return"createSearchIndexes"}buildCommand(e,r){return{createSearchIndexes:this.collection.fullNamespace.collection,indexes:this.descriptions}}handleOk(e){return super.handleOk(e).indexesCreated.map(r=>r.name)}buildOptions(e){return{session:this.session,timeoutContext:e}}};y2.CreateSearchIndexesOperation=bT});var lx=R(C2=>{"use strict";Object.defineProperty(C2,"__esModule",{value:!0});C2.DropSearchIndexOperation=void 0;var N1e=Ye(),cx=ie(),B1e=ot(),vT=class extends B1e.AbstractOperation{constructor(e,r){super(),this.SERVER_COMMAND_RESPONSE_TYPE=N1e.MongoDBResponse,this.collection=e,this.name=r,this.ns=e.fullNamespace}get commandName(){return"dropSearchIndex"}buildCommand(e,r){let o={dropSearchIndex:this.collection.fullNamespace.collection};return typeof this.name=="string"&&(o.name=this.name),o}handleOk(e){}buildOptions(e){return{session:this.session,timeoutContext:e}}handleError(e){if(!(e instanceof cx.MongoServerError&&e.code===cx.MONGODB_ERROR_CODES.NamespaceNotFound))throw e}};C2.DropSearchIndexOperation=vT});var dx=R(A2=>{"use strict";Object.defineProperty(A2,"__esModule",{value:!0});A2.UpdateSearchIndexOperation=void 0;var P1e=Ye(),F1e=ot(),OT=class extends F1e.AbstractOperation{constructor(e,r,n){super(),this.SERVER_COMMAND_RESPONSE_TYPE=P1e.MongoDBResponse,this.collection=e,this.name=r,this.definition=n,this.ns=e.fullNamespace}get commandName(){return"updateSearchIndex"}buildCommand(e,r){return{updateSearchIndex:this.collection.fullNamespace.collection,name:this.name,definition:this.definition}}handleOk(e){}buildOptions(e){return{session:this.session,timeoutContext:e}}};A2.UpdateSearchIndexOperation=OT});var vl=R(_2=>{"use strict";Object.defineProperty(_2,"__esModule",{value:!0});_2.Collection=void 0;var x1e=qe(),k1e=p3(),L1e=g3(),U1e=pa(),q1e=Jd(),G1e=ET(),V1e=CT(),$1e=ox(),Ul=ie(),H1e=dT(),fx=n3(),W1e=ix(),z1e=sx(),Pt=rr(),RT=TT(),S2=Kd(),j1e=o3(),K1e=i4(),Y1e=ax(),J1e=lx(),X1e=dx(),DT=u3(),Q1e=Do(),IT=tr(),et=de(),hx=Fr(),MT=class{constructor(e,r,n){this.db=e,this.s={db:e,options:n,namespace:new et.MongoDBCollectionNamespace(e.databaseName,r),pkFactory:e.options?.pkFactory??et.DEFAULT_PK_FACTORY,readPreference:IT.ReadPreference.fromOptions(n),bsonOptions:(0,x1e.resolveBSONOptions)(n,e),readConcern:Q1e.ReadConcern.fromOptions(n),writeConcern:hx.WriteConcern.fromOptions(n)},this.client=e.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){return this.s.readConcern==null?this.db.readConcern:this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.db.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern==null?this.db.writeConcern:this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(e){this.s.collectionHint=(0,et.normalizeHintField)(e)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(e,r){return await(0,Pt.executeOperation)(this.client,new j1e.InsertOneOperation(this,e,(0,et.resolveOptions)(this,r)))}async insertMany(e,r){if(!Array.isArray(e))throw new Ul.MongoInvalidArgumentError('Argument "docs" must be an array of documents');r=(0,et.resolveOptions)(this,r??{});let n=hx.WriteConcern.fromOptions(r)?.w!==0;try{let o=await this.bulkWrite(e.map(i=>({insertOne:{document:i}})),r);return{acknowledged:n,insertedCount:o.insertedCount,insertedIds:o.insertedIds}}catch(o){throw o&&o.message==="Operation must be an object with an operation key"?new Ul.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values"):o}}async bulkWrite(e,r){if(!Array.isArray(e))throw new Ul.MongoInvalidArgumentError('Argument "operations" must be an array of documents');r=(0,et.resolveOptions)(this,r??{}),this.client.topology!=null||await(0,Pt.autoConnect)(this.client);let o=r.ordered===!1?this.initializeUnorderedBulkOp(r):this.initializeOrderedBulkOp(r);for(let i of e)o.raw(i);return await o.execute({...r})}async updateOne(e,r,n){return await(0,Pt.executeOperation)(this.client,new DT.UpdateOneOperation(this.s.namespace,e,r,(0,et.resolveOptions)(this,n)))}async replaceOne(e,r,n){return await(0,Pt.executeOperation)(this.client,new DT.ReplaceOneOperation(this.s.namespace,e,r,(0,et.resolveOptions)(this,n)))}async updateMany(e,r,n){return await(0,Pt.executeOperation)(this.client,new DT.UpdateManyOperation(this.s.namespace,e,r,(0,et.resolveOptions)(this,n)))}async deleteOne(e={},r={}){return await(0,Pt.executeOperation)(this.client,new fx.DeleteOneOperation(this.s.namespace,e,(0,et.resolveOptions)(this,r)))}async deleteMany(e={},r={}){return await(0,Pt.executeOperation)(this.client,new fx.DeleteManyOperation(this.s.namespace,e,(0,et.resolveOptions)(this,r)))}async rename(e,r){return await(0,Pt.executeOperation)(this.client,new K1e.RenameOperation(this,e,(0,et.resolveOptions)(void 0,{...r,readPreference:IT.ReadPreference.PRIMARY})))}async drop(e){return await this.db.dropCollection(this.collectionName,e)}async findOne(e={},r={}){let{batchSize:n,noCursorTimeout:o,...i}=r;i.singleBatch=!0;let s=this.find(e,i).limit(1),u=await s.next();return await s.close(),u}find(e={},r={}){return new G1e.FindCursor(this.client,this.s.namespace,e,(0,et.resolveOptions)(this,r))}async options(e){e=(0,et.resolveOptions)(this,e);let[r]=await this.db.listCollections({name:this.collectionName},{...e,nameOnly:!1}).toArray();if(r==null||r.options==null)throw new Ul.MongoAPIError(`collection ${this.namespace} not found`);return r.options}async isCapped(e){let{capped:r}=await this.options(e);return!!r}async createIndex(e,r){return(await(0,Pt.executeOperation)(this.client,S2.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,e,(0,et.resolveOptions)(this,r))))[0]}async createIndexes(e,r){return await(0,Pt.executeOperation)(this.client,S2.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,e,(0,et.resolveOptions)(this,{...r,maxTimeMS:void 0})))}async dropIndex(e,r){return await(0,Pt.executeOperation)(this.client,new S2.DropIndexOperation(this,e,{...(0,et.resolveOptions)(this,r),readPreference:IT.ReadPreference.primary}))}async dropIndexes(e){try{return await(0,Pt.executeOperation)(this.client,new S2.DropIndexOperation(this,"*",(0,et.resolveOptions)(this,e))),!0}catch(r){if(r instanceof Ul.MongoOperationTimeoutError)throw r;return!1}}listIndexes(e){return new V1e.ListIndexesCursor(this,(0,et.resolveOptions)(this,e))}async indexExists(e,r){let n=Array.isArray(e)?e:[e],o=new Set(await this.listIndexes(r).map(({name:i})=>i).toArray());return n.every(i=>o.has(i))}async indexInformation(e){return await this.indexes({...e,full:e?.full??!1})}async estimatedDocumentCount(e){return await(0,Pt.executeOperation)(this.client,new z1e.EstimatedDocumentCountOperation(this,(0,et.resolveOptions)(this,e)))}async countDocuments(e={},r={}){let n=[];n.push({$match:e}),typeof r.skip=="number"&&n.push({$skip:r.skip}),typeof r.limit=="number"&&n.push({$limit:r.limit}),n.push({$group:{_id:1,n:{$sum:1}}});let o=this.aggregate(n,r),i=await o.next();return await o.close(),i?.n??0}async distinct(e,r={},n={}){return await(0,Pt.executeOperation)(this.client,new W1e.DistinctOperation(this,e,r,(0,et.resolveOptions)(this,n)))}async indexes(e){let r=await this.listIndexes(e).toArray();return e?.full??!0?r:Object.fromEntries(r.map(({name:i,key:s})=>[i,Object.entries(s)]))}async findOneAndDelete(e,r){return await(0,Pt.executeOperation)(this.client,new RT.FindOneAndDeleteOperation(this,e,(0,et.resolveOptions)(this,r)))}async findOneAndReplace(e,r,n){return await(0,Pt.executeOperation)(this.client,new RT.FindOneAndReplaceOperation(this,e,r,(0,et.resolveOptions)(this,n)))}async findOneAndUpdate(e,r,n){return await(0,Pt.executeOperation)(this.client,new RT.FindOneAndUpdateOperation(this,e,r,(0,et.resolveOptions)(this,n)))}aggregate(e=[],r){if(!Array.isArray(e))throw new Ul.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new q1e.AggregationCursor(this.client,this.s.namespace,e,(0,et.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new U1e.ChangeStream(this,e,(0,et.resolveOptions)(this,r))}initializeUnorderedBulkOp(e){return new L1e.UnorderedBulkOperation(this,(0,et.resolveOptions)(this,e))}initializeOrderedBulkOp(e){return new k1e.OrderedBulkOperation(this,(0,et.resolveOptions)(this,e))}async count(e={},r={}){return await(0,Pt.executeOperation)(this.client,new H1e.CountOperation(this.fullNamespace,e,(0,et.resolveOptions)(this,r)))}listSearchIndexes(e,r){r=typeof e=="object"?e:r??{};let n=e==null||typeof e=="object"?null:e;return new $1e.ListSearchIndexesCursor(this,n,r)}async createSearchIndex(e){let[r]=await this.createSearchIndexes([e]);return r}async createSearchIndexes(e){return await(0,Pt.executeOperation)(this.client,new Y1e.CreateSearchIndexesOperation(this,e))}async dropSearchIndex(e){return await(0,Pt.executeOperation)(this.client,new J1e.DropSearchIndexOperation(this,e))}async updateSearchIndex(e,r){return await(0,Pt.executeOperation)(this.client,new X1e.UpdateSearchIndexOperation(this,e,r))}};_2.Collection=MT});var PT=R(w2=>{"use strict";Object.defineProperty(w2,"__esModule",{value:!0});w2.ChangeStreamCursor=void 0;var NT=pa(),px=Mt(),Z1e=ad(),ede=rr(),mx=de(),tde=lr(),BT=class t extends tde.AbstractCursor{constructor(e,r,n=[],o={}){super(e,r,{...o,tailable:!0,awaitData:!0}),this.pipeline=n,this.changeStreamCursorOptions=o,this._resumeToken=null,this.startAtOperationTime=o.startAtOperationTime??null,o.startAfter?this.resumeToken=o.startAfter:o.resumeAfter&&(this.resumeToken=o.resumeAfter)}set resumeToken(e){this._resumeToken=e,this.emit(NT.ChangeStream.RESUME_TOKEN_CHANGED,e)}get resumeToken(){return this._resumeToken}get resumeOptions(){let e={...this.changeStreamCursorOptions};for(let r of["resumeAfter","startAfter","startAtOperationTime"])delete e[r];return this.resumeToken!=null?this.changeStreamCursorOptions.startAfter&&!this.hasReceived?e.startAfter=this.resumeToken:e.resumeAfter=this.resumeToken:this.startAtOperationTime!=null&&(e.startAtOperationTime=this.startAtOperationTime),e}cacheResumeToken(e){this.bufferedCount()===0&&this.postBatchResumeToken?this.resumeToken=this.postBatchResumeToken:this.resumeToken=e,this.hasReceived=!0}_processBatch(e){let{postBatchResumeToken:r}=e;r&&(this.postBatchResumeToken=r,e.batchSize===0&&(this.resumeToken=r))}clone(){return new t(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(e){let r=new Z1e.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:e}),n=await(0,ede.executeOperation)(e.client,r,this.timeoutContext),o=r.server;return this.maxWireVersion=(0,mx.maxWireVersion)(o),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null&&(this.startAtOperationTime=n.operationTime),this._processBatch(n),this.emit(px.INIT,n),this.emit(px.RESPONSE),{server:o,session:e,response:n}}async getMore(e){let r=await super.getMore(e);return this.maxWireVersion=(0,mx.maxWireVersion)(this.server),this._processBatch(r),this.emit(NT.ChangeStream.MORE,r),this.emit(NT.ChangeStream.RESPONSE),r}};w2.ChangeStreamCursor=BT});var pa=R(b2=>{"use strict";Object.defineProperty(b2,"__esModule",{value:!0});b2.ChangeStream=void 0;var rde=vl(),zo=Mt(),nde=lr(),ode=PT(),ide=wg(),or=ie(),sde=eu(),ude=On(),ade=fl(),cde=$t(),Ci=de(),lde=["resumeAfter","startAfter","startAtOperationTime","fullDocument","fullDocumentBeforeChange","showExpandedEvents"],Aa={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},dde=[zo.RESUME_TOKEN_CHANGED,zo.END,zo.CLOSE],fde="A change stream document has been received that lacks a resume token (_id).",T2="ChangeStream is closed",so=class t extends ude.TypedEventEmitter{async asyncDispose(){await this.close()}constructor(e,r=[],n={}){super(),this.pipeline=r,this.options={...n};let o;if(delete this.options.writeConcern,e instanceof rde.Collection)this.type=Aa.COLLECTION,o=e.s.db.client.options.serverSelectionTimeoutMS;else if(e instanceof ide.Db)this.type=Aa.DATABASE,o=e.client.options.serverSelectionTimeoutMS;else if(e instanceof sde.MongoClient)this.type=Aa.CLUSTER,o=e.options.serverSelectionTimeoutMS;else throw new or.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");this.contextOwner=Symbol(),this.parent=e,this.namespace=e.s.namespace,!this.options.readPreference&&e.readPreference&&(this.options.readPreference=e.readPreference),this.cursor=this._createChangeStreamCursor(n),this.isClosed=!1,this.mode=!1,this.on("newListener",i=>{i==="change"&&this.cursor&&this.listenerCount("change")===0&&this._streamEvents(this.cursor)}),this.on("removeListener",i=>{i==="change"&&this.listenerCount("change")===0&&this.cursor&&this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null&&(this.timeoutContext=new cde.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:o}))}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{return await this.cursor.hasNext()}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof or.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Ci.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.next();return this._processChange(e??null)}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof or.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Ci.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.tryNext();return e?this._processChange(e):null}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof or.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Ci.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(!this.closed)try{for(;;)yield await this.next()}finally{try{await this.close()}catch(e){(0,Ci.squashError)(e)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let e=this.cursor;try{await e.close()}finally{this._endStream()}}stream(e){if(this.closed)throw new or.MongoChangeStreamError(T2);return this.streamOptions=e,this.cursor.stream(e)}_setIsEmitter(){if(this.mode==="iterator")throw new or.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new or.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor(e){let r=(0,Ci.filterOptions)(e,lde);this.type===Aa.CLUSTER&&(r.allChangesForCluster=!0);let n=[{$changeStream:r},...this.pipeline],o=this.type===Aa.CLUSTER?this.parent:this.type===Aa.DATABASE?this.parent.client:this.type===Aa.COLLECTION?this.parent.client:null;if(o==null)throw new or.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let i=new ode.ChangeStreamCursor(o,this.namespace,n,{...e,timeoutContext:this.timeoutContext?new nde.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let s of dde)i.on(s,u=>this.emit(s,u));return this.listenerCount(t.CHANGE)>0&&this._streamEvents(i),i}_closeEmitterModeWithError(e){this.emit(t.ERROR,e),this.close().then(void 0,Ci.squashError)}_streamEvents(e){this._setIsEmitter();let r=this.cursorStream??e.stream();this.cursorStream=r,r.on("data",n=>{try{let o=this._processChange(n);this.emit(t.CHANGE,o)}catch(o){this.emit(t.ERROR,o)}this.timeoutContext?.refresh()}),r.on("error",n=>this._processErrorStreamMode(n,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange(e){if(this.isClosed)throw new or.MongoAPIError(T2);if(e==null)throw new or.MongoRuntimeError(T2);if(e&&!e._id)throw new or.MongoChangeStreamError(fde);return this.cursor.cacheResumeToken(e._id),this.options.startAtOperationTime=void 0,e}_processErrorStreamMode(e,r){this.isClosed||(r&&((0,or.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof or.MongoOperationTimeoutError)?(this._endStream(),this.cursor.close().then(()=>this._resume(e),n=>((0,Ci.squashError)(n),this._resume(e))).then(()=>{e instanceof or.MongoOperationTimeoutError&&this.emit(t.ERROR,e)},()=>this._closeEmitterModeWithError(e))):this._closeEmitterModeWithError(e))}async _processErrorIteratorMode(e,r){if(this.isClosed)throw new or.MongoAPIError(T2);if(r&&((0,or.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof or.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(n){(0,Ci.squashError)(n)}if(await this._resume(e),e instanceof or.MongoOperationTimeoutError)throw e}else{try{await this.close()}catch(n){(0,Ci.squashError)(n)}throw e}}async _resume(e){this.timeoutContext?.refresh();let r=(0,Ci.getTopology)(this.parent);try{await r.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),e}}};b2.ChangeStream=so;so.RESPONSE=zo.RESPONSE;so.MORE=zo.MORE;so.INIT=zo.INIT;so.CLOSE=zo.CLOSE;so.CHANGE=zo.CHANGE;so.END=zo.END;so.ERROR=zo.ERROR;so.RESUME_TOKEN_CHANGED=zo.RESUME_TOKEN_CHANGED;(0,ade.configureResourceManagement)(so.prototype)});var FT=R(v2=>{"use strict";Object.defineProperty(v2,"__esModule",{value:!0});v2.GridFSBucketReadStream=void 0;var hde=require("stream"),pde=lr(),Bn=ie(),mde=$t(),hf=class extends hde.Readable{constructor(e,r,n,o,i){super({emitClose:!0}),this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:e,expected:0,files:r,filter:o,init:!1,expectedEnd:0,options:{start:0,end:0,...i},readPreference:n,timeoutContext:i?.timeoutMS!=null?new mde.CSOTTimeoutContext({timeoutMS:i.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){this.destroyed||yde(this,()=>gde(this))}start(e=0){return gx(this),this.s.options.start=e,this}end(e=0){return gx(this),this.s.options.end=e,this}async abort(){this.push(null),this.destroy();let e=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:e})}};v2.GridFSBucketReadStream=hf;hf.FILE="file";function gx(t){if(t.s.init)throw new Bn.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function gde(t){if(t.destroyed||!t.s.cursor||!t.s.file)return;let e=r=>{if(t.destroyed)return;if(!r){t.push(null),t.s.cursor?.close().then(void 0,p=>t.destroy(p));return}if(!t.s.file)return;let n=t.s.file.length-t.s.bytesRead,o=t.s.expected++,i=Math.min(t.s.file.chunkSize,n);if(r.n>o)return t.destroy(new Bn.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${r.n}, expected: ${o}`));if(r.n<o)return t.destroy(new Bn.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected: ${o}`));let s=Buffer.isBuffer(r.data)?r.data:r.data.buffer;if(s.byteLength!==i)return n<=0?t.destroy(new Bn.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected file length ${t.s.file.length} bytes but already read ${t.s.bytesRead} bytes`)):t.destroy(new Bn.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${s.byteLength}, expected: ${i}`));if(t.s.bytesRead+=s.byteLength,s.byteLength===0)return t.push(null);let u=null,a=null;t.s.bytesToSkip!=null&&(u=t.s.bytesToSkip,t.s.bytesToSkip=0);let c=o===t.s.expectedEnd-1,d=t.s.options.end-t.s.bytesToSkip;c&&t.s.bytesToTrim!=null?a=t.s.file.chunkSize-t.s.bytesToTrim:t.s.options.end&&d<r.data.byteLength&&(a=d),(u!=null||a!=null)&&(s=s.slice(u||0,a||s.byteLength)),t.push(s)};t.s.cursor.next().then(e,r=>{t.destroyed||t.destroy(r)})}function Ede(t){let e={};t.s.readPreference&&(e.readPreference=t.s.readPreference),t.s.options&&t.s.options.sort&&(e.sort=t.s.options.sort),t.s.options&&t.s.options.skip&&(e.skip=t.s.options.skip);let r=o=>{if(t.destroyed)return;if(!o){let a=`FileNotFound: file ${t.s.filter._id?t.s.filter._id.toString():t.s.filter.filename} was not found`,c=new Bn.MongoRuntimeError(a);return c.code="ENOENT",t.destroy(c)}if(o.length<=0){t.push(null);return}if(t.destroyed){t.destroy();return}try{t.s.bytesToSkip=Cde(t,o,t.s.options)}catch(u){return t.destroy(u)}let i={files_id:o._id};if(t.s.options&&t.s.options.start!=null){let u=Math.floor(t.s.options.start/o.chunkSize);u>0&&(i.n={$gte:u})}let s;try{s=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(u){return t.destroy(u)}t.s.cursor=t.s.chunks.find(i,{timeoutMode:t.s.options.timeoutMS!=null?pde.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:s}).sort({n:1}),t.s.readPreference&&t.s.cursor.withReadPreference(t.s.readPreference),t.s.expectedEnd=Math.ceil(o.length/o.chunkSize),t.s.file=o;try{t.s.bytesToTrim=Ade(t,o,t.s.cursor,t.s.options)}catch(u){return t.destroy(u)}t.emit(hf.FILE,o)},n;try{n=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(o){t.destroyed||t.destroy(o);return}e.timeoutMS=n,t.s.files.findOne(t.s.filter,e).then(r,o=>{t.destroyed||t.destroy(o)})}function yde(t,e){if(t.s.file)return e();t.s.init||(Ede(t),t.s.init=!0),t.once("file",()=>{e()})}function Cde(t,e,r){if(r&&r.start!=null){if(r.start>e.length)throw new Bn.MongoInvalidArgumentError(`Stream start (${r.start}) must not be more than the length of the file (${e.length})`);if(r.start<0)throw new Bn.MongoInvalidArgumentError(`Stream start (${r.start}) must not be negative`);if(r.end!=null&&r.end<r.start)throw new Bn.MongoInvalidArgumentError(`Stream start (${r.start}) must not be greater than stream end (${r.end})`);return t.s.bytesRead=Math.floor(r.start/e.chunkSize)*e.chunkSize,t.s.expected=Math.floor(r.start/e.chunkSize),r.start-t.s.bytesRead}throw new Bn.MongoInvalidArgumentError("Start option must be defined")}function Ade(t,e,r,n){if(n&&n.end!=null){if(n.end>e.length)throw new Bn.MongoInvalidArgumentError(`Stream end (${n.end}) must not be more than the length of the file (${e.length})`);if(n.start==null||n.start<0)throw new Bn.MongoInvalidArgumentError(`Stream end (${n.end}) must not be negative`);let o=n.start!=null?Math.floor(n.start/e.chunkSize):0;return r.limit(Math.ceil(n.end/e.chunkSize)-o),t.s.expectedEnd=Math.ceil(n.end/e.chunkSize),Math.ceil(n.end/e.chunkSize)*e.chunkSize-n.end}throw new Bn.MongoInvalidArgumentError("End option must be defined")}});var LT=R(R2=>{"use strict";Object.defineProperty(R2,"__esModule",{value:!0});R2.GridFSBucketWriteStream=void 0;var Sde=require("stream"),yx=qe(),Cx=lr(),jo=ie(),_de=$t(),Ex=de(),wde=Fr(),xT=class extends Sde.Writable{constructor(e,r,n){super(),this.gridFSFile=null,n=n??{},this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=r,this.files=e.s._filesCollection,this.options=n,this.writeConcern=wde.WriteConcern.fromOptions(n)||e.s.options.writeConcern,this.done=!1,this.id=n.id?n.id:new yx.ObjectId,this.chunkSizeBytes=n.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},n.timeoutMS!=null&&(this.timeoutContext=new _de.CSOTTimeoutContext({timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:(0,Ex.resolveTimeoutOptions)(this.bucket.s.db.client,{}).serverSelectionTimeoutMS}))}_construct(e){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,bde(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),e()},r=>{if(r instanceof jo.MongoOperationTimeoutError)return Sa(this,r,e);(0,Ex.squashError)(r),e()});else return process.nextTick(e)}_write(e,r,n){Ode(this,e,r,n)}_final(e){if(this.state.streamEnd)return process.nextTick(e);this.state.streamEnd=!0,Rde(this,e)}async abort(){if(this.state.streamEnd)throw new jo.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new jo.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let e=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:e})}};R2.GridFSBucketWriteStream=xT;function Sa(t,e,r){if(t.state.errored){process.nextTick(r);return}t.state.errored=!0,process.nextTick(r,e)}function Ax(t,e,r){return{_id:new yx.ObjectId,files_id:t,n:e,data:r}}async function Tde(t){let e={files_id:1,n:1},r;r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let n;try{n=await t.chunks.listIndexes({timeoutMode:r!=null?Cx.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:r}).toArray()}catch(i){if(i instanceof jo.MongoError&&i.code===jo.MONGODB_ERROR_CODES.NamespaceNotFound)n=[];else throw i}n.find(i=>Object.keys(i.key).length===2&&i.key.files_id===1&&i.key.n===1)||(r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.chunks.createIndex(e,{...t.writeConcern,background:!0,unique:!0,timeoutMS:r}))}function kT(t,e){if(t.done)return process.nextTick(e);if(t.state.streamEnd&&t.state.outstandingRequests===0&&!t.state.errored){t.done=!0;let r=vde(t.id,t.length,t.chunkSizeBytes,t.filename,t.options.contentType,t.options.aliases,t.options.metadata);if(O2(t,e))return;let n=t.timeoutContext?.remainingTimeMS;if(n!=null&&n<=0)return Sa(t,new jo.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);t.files.insertOne(r,{writeConcern:t.writeConcern,timeoutMS:n}).then(()=>{t.gridFSFile=r,e()},o=>Sa(t,o,e));return}process.nextTick(e)}async function bde(t){let e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);if(await t.files.findOne({},{projection:{_id:1},timeoutMS:e})!=null)return;let n={filename:1,uploadDate:1},o;e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let i={timeoutMode:e!=null?Cx.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:e};try{o=await t.files.listIndexes(i).toArray()}catch(u){if(u instanceof jo.MongoError&&u.code===jo.MONGODB_ERROR_CODES.NamespaceNotFound)o=[];else throw u}o.find(u=>Object.keys(u.key).length===2&&u.key.filename===1&&u.key.uploadDate===1)||(e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.files.createIndex(n,{background:!1,timeoutMS:e})),await Tde(t)}function vde(t,e,r,n,o,i,s){let u={_id:t,length:e,chunkSize:r,uploadDate:new Date,filename:n};return o&&(u.contentType=o),i&&(u.aliases=i),s&&(u.metadata=s),u}function Ode(t,e,r,n){if(O2(t,n))return;let o=Buffer.isBuffer(e)?e:Buffer.from(e,r);if(t.length+=o.length,t.pos+o.length<t.chunkSizeBytes){o.copy(t.bufToStore,t.pos),t.pos+=o.length,process.nextTick(n);return}let i=o.length,s=t.chunkSizeBytes-t.pos,u=Math.min(s,o.length),a=0;for(;i>0;){let c=o.length-i;o.copy(t.bufToStore,t.pos,c,c+u),t.pos+=u,s-=u;let d;if(s===0){d=Ax(t.id,t.n,Buffer.from(t.bufToStore));let p=t.timeoutContext?.remainingTimeMS;if(p!=null&&p<=0)return Sa(t,new jo.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),n);if(++t.state.outstandingRequests,++a,O2(t,n))return;t.chunks.insertOne(d,{writeConcern:t.writeConcern,timeoutMS:p}).then(()=>{--t.state.outstandingRequests,--a,a||kT(t,n)},m=>Sa(t,m,n)),s=t.chunkSizeBytes,t.pos=0,++t.n}i-=u,u=Math.min(s,i)}}function Rde(t,e){if(t.pos===0)return kT(t,e);let r=Buffer.alloc(t.pos);t.bufToStore.copy(r,0,0,t.pos);let n=Ax(t.id,t.n,r);if(O2(t,e))return;let o=t.timeoutContext?.remainingTimeMS;if(o!=null&&o<=0)return Sa(t,new jo.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);++t.state.outstandingRequests,t.chunks.insertOne(n,{writeConcern:t.writeConcern,timeoutMS:o}).then(()=>{--t.state.outstandingRequests,kT(t,e)},i=>Sa(t,i,e))}function O2(t,e){return t.state.aborted?(process.nextTick(e,new jo.MongoAPIError("Stream has been aborted")),!0):!1}});var Tx=R(M2=>{"use strict";Object.defineProperty(M2,"__esModule",{value:!0});M2.GridFSBucket=void 0;var UT=ie(),Dde=On(),Sx=$t(),D2=de(),Ide=Fr(),_x=FT(),wx=LT(),Mde={bucketName:"fs",chunkSizeBytes:255*1024},I2=class extends Dde.TypedEventEmitter{constructor(e,r){super(),this.on("error",D2.noop),this.setMaxListeners(0);let n=(0,D2.resolveOptions)(e,{...Mde,...r,writeConcern:Ide.WriteConcern.fromOptions(r)});this.s={db:e,options:n,_chunksCollection:e.collection(n.bucketName+".chunks"),_filesCollection:e.collection(n.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(e,r){return new wx.GridFSBucketWriteStream(this,e,{timeoutMS:this.s.options.timeoutMS,...r})}openUploadStreamWithId(e,r,n){return new wx.GridFSBucketWriteStream(this,r,{timeoutMS:this.s.options.timeoutMS,...n,id:e})}openDownloadStream(e,r){return new _x.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:e},{timeoutMS:this.s.options.timeoutMS,...r})}async delete(e,r){let{timeoutMS:n}=(0,D2.resolveOptions)(this.s.db,r),o;n&&(o=new Sx.CSOTTimeoutContext({timeoutMS:n,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS}));let{deletedCount:i}=await this.s._filesCollection.deleteOne({_id:e},{timeoutMS:o?.remainingTimeMS}),s=o?.remainingTimeMS;if(s!=null&&s<=0)throw new UT.MongoOperationTimeoutError(`Timed out after ${n}ms`);if(await this.s._chunksCollection.deleteMany({files_id:e},{timeoutMS:s}),i===0)throw new UT.MongoRuntimeError(`File not found for id ${e}`)}find(e={},r={}){return this.s._filesCollection.find(e,r)}openDownloadStreamByName(e,r){let n={uploadDate:-1},o;return r&&r.revision!=null&&(r.revision>=0?(n={uploadDate:1},o=r.revision):o=-r.revision-1),new _x.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:e},{timeoutMS:this.s.options.timeoutMS,...r,sort:n,skip:o})}async rename(e,r,n){let o={_id:e},i={$set:{filename:r}},{matchedCount:s}=await this.s._filesCollection.updateOne(o,i,n);if(s===0)throw new UT.MongoRuntimeError(`File with id ${e} not found`)}async drop(e){let{timeoutMS:r}=(0,D2.resolveOptions)(this.s.db,e),n;if(r&&(n=new Sx.CSOTTimeoutContext({timeoutMS:r,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS})),n){await this.s._filesCollection.drop({timeoutMS:n.remainingTimeMS});let o=n.getRemainingTimeMSOrThrow(`Timed out after ${r}ms`);await this.s._chunksCollection.drop({timeoutMS:o})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}};M2.GridFSBucket=I2;I2.INDEX="index"});var gg=R(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.MongoRuntimeError=T.MongoParseError=T.MongoOperationTimeoutError=T.MongoOIDCError=T.MongoNotConnectedError=T.MongoNetworkTimeoutError=T.MongoNetworkError=T.MongoMissingDependencyError=T.MongoMissingCredentialsError=T.MongoKerberosError=T.MongoInvalidArgumentError=T.MongoGridFSStreamError=T.MongoGridFSChunkError=T.MongoGCPError=T.MongoExpiredSessionError=T.MongoError=T.MongoDriverError=T.MongoDecompressionError=T.MongoCursorInUseError=T.MongoCursorExhaustedError=T.MongoCompatibilityError=T.MongoClientClosedError=T.MongoClientBulkWriteExecutionError=T.MongoClientBulkWriteError=T.MongoClientBulkWriteCursorError=T.MongoChangeStreamError=T.MongoBatchReExecutionError=T.MongoAzureError=T.MongoAWSError=T.MongoAPIError=T.ExplainableCursor=T.ChangeStreamCursor=T.ClientEncryption=T.MongoBulkWriteError=T.UUID=T.Timestamp=T.ObjectId=T.MinKey=T.MaxKey=T.Long=T.Int32=T.Double=T.Decimal128=T.DBRef=T.Code=T.BSONType=T.BSONSymbol=T.BSONRegExp=T.Binary=T.BSON=void 0;T.CommandFailedEvent=T.WriteConcern=T.ReadPreference=T.ReadConcern=T.TopologyType=T.ServerType=T.ReadPreferenceMode=T.ReadConcernLevel=T.ProfilingLevel=T.ReturnDocument=T.SeverityLevel=T.MongoLoggableComponent=T.ServerApiVersion=T.ExplainVerbosity=T.MongoErrorLabel=T.CursorTimeoutMode=T.CURSOR_FLAGS=T.Compressor=T.AuthMechanism=T.GSSAPICanonicalizationValue=T.AutoEncryptionLoggerLevel=T.BatchType=T.UnorderedBulkOperation=T.OrderedBulkOperation=T.MongoClient=T.ListIndexesCursor=T.ListCollectionsCursor=T.GridFSBucketWriteStream=T.GridFSBucketReadStream=T.GridFSBucket=T.FindCursor=T.Db=T.Collection=T.ClientSession=T.ChangeStream=T.CancellationToken=T.AggregationCursor=T.Admin=T.AbstractCursor=T.configureExplicitResourceManagement=T.MongoWriteConcernError=T.MongoUnexpectedServerResponseError=T.MongoTransactionError=T.MongoTopologyClosedError=T.MongoTailableCursorError=T.MongoSystemError=T.MongoStalePrimaryError=T.MongoServerSelectionError=T.MongoServerError=T.MongoServerClosedError=void 0;T.MongoClientAuthProviders=T.MongoCryptKMSRequestNetworkTimeoutError=T.MongoCryptInvalidArgumentError=T.MongoCryptError=T.MongoCryptCreateEncryptedCollectionError=T.MongoCryptCreateDataKeyError=T.MongoCryptAzureKMSRequestError=T.SrvPollingEvent=T.WaitingForSuitableServerEvent=T.ServerSelectionSucceededEvent=T.ServerSelectionStartedEvent=T.ServerSelectionFailedEvent=T.ServerSelectionEvent=T.TopologyOpeningEvent=T.TopologyDescriptionChangedEvent=T.TopologyClosedEvent=T.ServerOpeningEvent=T.ServerHeartbeatSucceededEvent=T.ServerHeartbeatStartedEvent=T.ServerHeartbeatFailedEvent=T.ServerDescriptionChangedEvent=T.ServerClosedEvent=T.ConnectionReadyEvent=T.ConnectionPoolReadyEvent=T.ConnectionPoolMonitoringEvent=T.ConnectionPoolCreatedEvent=T.ConnectionPoolClosedEvent=T.ConnectionPoolClearedEvent=T.ConnectionCreatedEvent=T.ConnectionClosedEvent=T.ConnectionCheckOutStartedEvent=T.ConnectionCheckOutFailedEvent=T.ConnectionCheckedOutEvent=T.ConnectionCheckedInEvent=T.CommandSucceededEvent=T.CommandStartedEvent=void 0;var Nde=t3();Object.defineProperty(T,"Admin",{enumerable:!0,get:function(){return Nde.Admin}});var Bde=p3();Object.defineProperty(T,"OrderedBulkOperation",{enumerable:!0,get:function(){return Bde.OrderedBulkOperation}});var Pde=g3();Object.defineProperty(T,"UnorderedBulkOperation",{enumerable:!0,get:function(){return Pde.UnorderedBulkOperation}});var Fde=pa();Object.defineProperty(T,"ChangeStream",{enumerable:!0,get:function(){return Fde.ChangeStream}});var xde=vl();Object.defineProperty(T,"Collection",{enumerable:!0,get:function(){return xde.Collection}});var kde=lr();Object.defineProperty(T,"AbstractCursor",{enumerable:!0,get:function(){return kde.AbstractCursor}});var Lde=Jd();Object.defineProperty(T,"AggregationCursor",{enumerable:!0,get:function(){return Lde.AggregationCursor}});var Ude=ET();Object.defineProperty(T,"FindCursor",{enumerable:!0,get:function(){return Ude.FindCursor}});var qde=Xw();Object.defineProperty(T,"ListCollectionsCursor",{enumerable:!0,get:function(){return qde.ListCollectionsCursor}});var Gde=CT();Object.defineProperty(T,"ListIndexesCursor",{enumerable:!0,get:function(){return Gde.ListIndexesCursor}});var Vde=wg();Object.defineProperty(T,"Db",{enumerable:!0,get:function(){return Vde.Db}});var $de=Tx();Object.defineProperty(T,"GridFSBucket",{enumerable:!0,get:function(){return $de.GridFSBucket}});var Hde=FT();Object.defineProperty(T,"GridFSBucketReadStream",{enumerable:!0,get:function(){return Hde.GridFSBucketReadStream}});var Wde=LT();Object.defineProperty(T,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return Wde.GridFSBucketWriteStream}});var zde=eu();Object.defineProperty(T,"MongoClient",{enumerable:!0,get:function(){return zde.MongoClient}});var jde=On();Object.defineProperty(T,"CancellationToken",{enumerable:!0,get:function(){return jde.CancellationToken}});var Kde=dl();Object.defineProperty(T,"ClientSession",{enumerable:!0,get:function(){return Kde.ClientSession}});var Yde=qe();Object.defineProperty(T,"BSON",{enumerable:!0,get:function(){return Yde.BSON}});var Gr=qe();Object.defineProperty(T,"Binary",{enumerable:!0,get:function(){return Gr.Binary}});Object.defineProperty(T,"BSONRegExp",{enumerable:!0,get:function(){return Gr.BSONRegExp}});Object.defineProperty(T,"BSONSymbol",{enumerable:!0,get:function(){return Gr.BSONSymbol}});Object.defineProperty(T,"BSONType",{enumerable:!0,get:function(){return Gr.BSONType}});Object.defineProperty(T,"Code",{enumerable:!0,get:function(){return Gr.Code}});Object.defineProperty(T,"DBRef",{enumerable:!0,get:function(){return Gr.DBRef}});Object.defineProperty(T,"Decimal128",{enumerable:!0,get:function(){return Gr.Decimal128}});Object.defineProperty(T,"Double",{enumerable:!0,get:function(){return Gr.Double}});Object.defineProperty(T,"Int32",{enumerable:!0,get:function(){return Gr.Int32}});Object.defineProperty(T,"Long",{enumerable:!0,get:function(){return Gr.Long}});Object.defineProperty(T,"MaxKey",{enumerable:!0,get:function(){return Gr.MaxKey}});Object.defineProperty(T,"MinKey",{enumerable:!0,get:function(){return Gr.MinKey}});Object.defineProperty(T,"ObjectId",{enumerable:!0,get:function(){return Gr.ObjectId}});Object.defineProperty(T,"Timestamp",{enumerable:!0,get:function(){return Gr.Timestamp}});Object.defineProperty(T,"UUID",{enumerable:!0,get:function(){return Gr.UUID}});var Jde=md();Object.defineProperty(T,"MongoBulkWriteError",{enumerable:!0,get:function(){return Jde.MongoBulkWriteError}});var Xde=Dm();Object.defineProperty(T,"ClientEncryption",{enumerable:!0,get:function(){return Xde.ClientEncryption}});var Qde=PT();Object.defineProperty(T,"ChangeStreamCursor",{enumerable:!0,get:function(){return Qde.ChangeStreamCursor}});var Zde=o2();Object.defineProperty(T,"ExplainableCursor",{enumerable:!0,get:function(){return Zde.ExplainableCursor}});var De=ie();Object.defineProperty(T,"MongoAPIError",{enumerable:!0,get:function(){return De.MongoAPIError}});Object.defineProperty(T,"MongoAWSError",{enumerable:!0,get:function(){return De.MongoAWSError}});Object.defineProperty(T,"MongoAzureError",{enumerable:!0,get:function(){return De.MongoAzureError}});Object.defineProperty(T,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return De.MongoBatchReExecutionError}});Object.defineProperty(T,"MongoChangeStreamError",{enumerable:!0,get:function(){return De.MongoChangeStreamError}});Object.defineProperty(T,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return De.MongoClientBulkWriteCursorError}});Object.defineProperty(T,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return De.MongoClientBulkWriteError}});Object.defineProperty(T,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return De.MongoClientBulkWriteExecutionError}});Object.defineProperty(T,"MongoClientClosedError",{enumerable:!0,get:function(){return De.MongoClientClosedError}});Object.defineProperty(T,"MongoCompatibilityError",{enumerable:!0,get:function(){return De.MongoCompatibilityError}});Object.defineProperty(T,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return De.MongoCursorExhaustedError}});Object.defineProperty(T,"MongoCursorInUseError",{enumerable:!0,get:function(){return De.MongoCursorInUseError}});Object.defineProperty(T,"MongoDecompressionError",{enumerable:!0,get:function(){return De.MongoDecompressionError}});Object.defineProperty(T,"MongoDriverError",{enumerable:!0,get:function(){return De.MongoDriverError}});Object.defineProperty(T,"MongoError",{enumerable:!0,get:function(){return De.MongoError}});Object.defineProperty(T,"MongoExpiredSessionError",{enumerable:!0,get:function(){return De.MongoExpiredSessionError}});Object.defineProperty(T,"MongoGCPError",{enumerable:!0,get:function(){return De.MongoGCPError}});Object.defineProperty(T,"MongoGridFSChunkError",{enumerable:!0,get:function(){return De.MongoGridFSChunkError}});Object.defineProperty(T,"MongoGridFSStreamError",{enumerable:!0,get:function(){return De.MongoGridFSStreamError}});Object.defineProperty(T,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return De.MongoInvalidArgumentError}});Object.defineProperty(T,"MongoKerberosError",{enumerable:!0,get:function(){return De.MongoKerberosError}});Object.defineProperty(T,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return De.MongoMissingCredentialsError}});Object.defineProperty(T,"MongoMissingDependencyError",{enumerable:!0,get:function(){return De.MongoMissingDependencyError}});Object.defineProperty(T,"MongoNetworkError",{enumerable:!0,get:function(){return De.MongoNetworkError}});Object.defineProperty(T,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return De.MongoNetworkTimeoutError}});Object.defineProperty(T,"MongoNotConnectedError",{enumerable:!0,get:function(){return De.MongoNotConnectedError}});Object.defineProperty(T,"MongoOIDCError",{enumerable:!0,get:function(){return De.MongoOIDCError}});Object.defineProperty(T,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return De.MongoOperationTimeoutError}});Object.defineProperty(T,"MongoParseError",{enumerable:!0,get:function(){return De.MongoParseError}});Object.defineProperty(T,"MongoRuntimeError",{enumerable:!0,get:function(){return De.MongoRuntimeError}});Object.defineProperty(T,"MongoServerClosedError",{enumerable:!0,get:function(){return De.MongoServerClosedError}});Object.defineProperty(T,"MongoServerError",{enumerable:!0,get:function(){return De.MongoServerError}});Object.defineProperty(T,"MongoServerSelectionError",{enumerable:!0,get:function(){return De.MongoServerSelectionError}});Object.defineProperty(T,"MongoStalePrimaryError",{enumerable:!0,get:function(){return De.MongoStalePrimaryError}});Object.defineProperty(T,"MongoSystemError",{enumerable:!0,get:function(){return De.MongoSystemError}});Object.defineProperty(T,"MongoTailableCursorError",{enumerable:!0,get:function(){return De.MongoTailableCursorError}});Object.defineProperty(T,"MongoTopologyClosedError",{enumerable:!0,get:function(){return De.MongoTopologyClosedError}});Object.defineProperty(T,"MongoTransactionError",{enumerable:!0,get:function(){return De.MongoTransactionError}});Object.defineProperty(T,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return De.MongoUnexpectedServerResponseError}});Object.defineProperty(T,"MongoWriteConcernError",{enumerable:!0,get:function(){return De.MongoWriteConcernError}});var efe=fl();Object.defineProperty(T,"configureExplicitResourceManagement",{enumerable:!0,get:function(){return efe.configureExplicitResourceManagement}});var tfe=md();Object.defineProperty(T,"BatchType",{enumerable:!0,get:function(){return tfe.BatchType}});var rfe=I6();Object.defineProperty(T,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return rfe.AutoEncryptionLoggerLevel}});var nfe=sm();Object.defineProperty(T,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return nfe.GSSAPICanonicalizationValue}});var ofe=di();Object.defineProperty(T,"AuthMechanism",{enumerable:!0,get:function(){return ofe.AuthMechanism}});var ife=vd();Object.defineProperty(T,"Compressor",{enumerable:!0,get:function(){return ife.Compressor}});var bx=lr();Object.defineProperty(T,"CURSOR_FLAGS",{enumerable:!0,get:function(){return bx.CURSOR_FLAGS}});Object.defineProperty(T,"CursorTimeoutMode",{enumerable:!0,get:function(){return bx.CursorTimeoutMode}});var sfe=ie();Object.defineProperty(T,"MongoErrorLabel",{enumerable:!0,get:function(){return sfe.MongoErrorLabel}});var ufe=ud();Object.defineProperty(T,"ExplainVerbosity",{enumerable:!0,get:function(){return ufe.ExplainVerbosity}});var afe=eu();Object.defineProperty(T,"ServerApiVersion",{enumerable:!0,get:function(){return afe.ServerApiVersion}});var vx=Gs();Object.defineProperty(T,"MongoLoggableComponent",{enumerable:!0,get:function(){return vx.MongoLoggableComponent}});Object.defineProperty(T,"SeverityLevel",{enumerable:!0,get:function(){return vx.SeverityLevel}});var cfe=TT();Object.defineProperty(T,"ReturnDocument",{enumerable:!0,get:function(){return cfe.ReturnDocument}});var lfe=u4();Object.defineProperty(T,"ProfilingLevel",{enumerable:!0,get:function(){return lfe.ProfilingLevel}});var dfe=Do();Object.defineProperty(T,"ReadConcernLevel",{enumerable:!0,get:function(){return dfe.ReadConcernLevel}});var ffe=tr();Object.defineProperty(T,"ReadPreferenceMode",{enumerable:!0,get:function(){return ffe.ReadPreferenceMode}});var Ox=Tn();Object.defineProperty(T,"ServerType",{enumerable:!0,get:function(){return Ox.ServerType}});Object.defineProperty(T,"TopologyType",{enumerable:!0,get:function(){return Ox.TopologyType}});var hfe=Do();Object.defineProperty(T,"ReadConcern",{enumerable:!0,get:function(){return hfe.ReadConcern}});var pfe=tr();Object.defineProperty(T,"ReadPreference",{enumerable:!0,get:function(){return pfe.ReadPreference}});var mfe=Fr();Object.defineProperty(T,"WriteConcern",{enumerable:!0,get:function(){return mfe.WriteConcern}});var qT=j6();Object.defineProperty(T,"CommandFailedEvent",{enumerable:!0,get:function(){return qT.CommandFailedEvent}});Object.defineProperty(T,"CommandStartedEvent",{enumerable:!0,get:function(){return qT.CommandStartedEvent}});Object.defineProperty(T,"CommandSucceededEvent",{enumerable:!0,get:function(){return qT.CommandSucceededEvent}});var uo=Rw();Object.defineProperty(T,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return uo.ConnectionCheckedInEvent}});Object.defineProperty(T,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return uo.ConnectionCheckedOutEvent}});Object.defineProperty(T,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return uo.ConnectionCheckOutFailedEvent}});Object.defineProperty(T,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return uo.ConnectionCheckOutStartedEvent}});Object.defineProperty(T,"ConnectionClosedEvent",{enumerable:!0,get:function(){return uo.ConnectionClosedEvent}});Object.defineProperty(T,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return uo.ConnectionCreatedEvent}});Object.defineProperty(T,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return uo.ConnectionPoolClearedEvent}});Object.defineProperty(T,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return uo.ConnectionPoolClosedEvent}});Object.defineProperty(T,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return uo.ConnectionPoolCreatedEvent}});Object.defineProperty(T,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return uo.ConnectionPoolMonitoringEvent}});Object.defineProperty(T,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return uo.ConnectionPoolReadyEvent}});Object.defineProperty(T,"ConnectionReadyEvent",{enumerable:!0,get:function(){return uo.ConnectionReadyEvent}});var as=Qm();Object.defineProperty(T,"ServerClosedEvent",{enumerable:!0,get:function(){return as.ServerClosedEvent}});Object.defineProperty(T,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return as.ServerDescriptionChangedEvent}});Object.defineProperty(T,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return as.ServerHeartbeatFailedEvent}});Object.defineProperty(T,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return as.ServerHeartbeatStartedEvent}});Object.defineProperty(T,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return as.ServerHeartbeatSucceededEvent}});Object.defineProperty(T,"ServerOpeningEvent",{enumerable:!0,get:function(){return as.ServerOpeningEvent}});Object.defineProperty(T,"TopologyClosedEvent",{enumerable:!0,get:function(){return as.TopologyClosedEvent}});Object.defineProperty(T,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return as.TopologyDescriptionChangedEvent}});Object.defineProperty(T,"TopologyOpeningEvent",{enumerable:!0,get:function(){return as.TopologyOpeningEvent}});var pf=X4();Object.defineProperty(T,"ServerSelectionEvent",{enumerable:!0,get:function(){return pf.ServerSelectionEvent}});Object.defineProperty(T,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return pf.ServerSelectionFailedEvent}});Object.defineProperty(T,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return pf.ServerSelectionStartedEvent}});Object.defineProperty(T,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return pf.ServerSelectionSucceededEvent}});Object.defineProperty(T,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return pf.WaitingForSuitableServerEvent}});var gfe=Z4();Object.defineProperty(T,"SrvPollingEvent",{enumerable:!0,get:function(){return gfe.SrvPollingEvent}});var ql=sl();Object.defineProperty(T,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return ql.MongoCryptAzureKMSRequestError}});Object.defineProperty(T,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return ql.MongoCryptCreateDataKeyError}});Object.defineProperty(T,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return ql.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(T,"MongoCryptError",{enumerable:!0,get:function(){return ql.MongoCryptError}});Object.defineProperty(T,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return ql.MongoCryptInvalidArgumentError}});Object.defineProperty(T,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return ql.MongoCryptKMSRequestNetworkTimeoutError}});var Efe=k4();Object.defineProperty(T,"MongoClientAuthProviders",{enumerable:!0,get:function(){return Efe.MongoClientAuthProviders}})});var Dfe={};aE(Dfe,{activate:()=>Ofe,deactivate:()=>Rfe});module.exports=bL(Dfe);var Le=Xe(require("vscode"));var Yt=Xe(require("vscode")),zf="[FlowFixer:ErrorListener]",vL=new Set(["javascript","typescript","javascriptreact","typescriptreact"]),W9=[/(?<type>\w*Error):\s*(?<msg>.+?)(?:\n|\r|$)/,/Uncaught\s+(?<type>\w*Error):\s*(?<msg>.+?)(?:\n|\r|$)/,/at\s+.*?[(/](?<file>[^\s:()]+):(?<line>\d+):(?<col>\d+)/],jf=class{disposables=[];onErrorDetectedEmitter=new Yt.EventEmitter;onErrorDetected=this.onErrorDetectedEmitter.event;recentErrors=new Map;constructor(){this.disposables.push(Yt.languages.onDidChangeDiagnostics(e=>this.handleDiagnosticsChange(e))),this.disposables.push(Yt.debug.onDidReceiveDebugSessionCustomEvent(e=>{e.event==="output"&&typeof e.body?.output=="string"&&this.handleTerminalData(e.body.output)})),this.disposables.push(Yt.tasks.onDidEndTaskProcess(e=>{e.exitCode&&e.exitCode!==0&&console.log(`${zf} task exited with code ${e.exitCode}`)})),console.log(`${zf} initialized`)}async handleDiagnosticsChange(e){for(let r of e.uris){let n=Yt.workspace.textDocuments.find(s=>s.uri.toString()===r.toString());if(!n||!vL.has(n.languageId))continue;let i=Yt.languages.getDiagnostics(r).filter(s=>s.severity===Yt.DiagnosticSeverity.Error);for(let s of i){let u=await this.buildCapturedError(s.message,r.fsPath,s.range.start.line+1,n.languageId,n.getText(),"diagnostics");u&&!this.isDuplicate(u)&&(this.recentErrors.set(this.errorKey(u),Date.now()),this.onErrorDetectedEmitter.fire(u),console.log(`${zf} diagnostic error: ${u.message} at ${u.file}:${u.line}`))}}}handleTerminalData(e){let r=e.match(W9[0]);if(!r?.groups)return;let n=e.match(W9[2]),o=n?.groups?.file??"unknown",i=n?.groups?.line?parseInt(n.groups.line):1;this.resolveTerminalError(`${r.groups.type}: ${r.groups.msg}`,o,i)}async resolveTerminalError(e,r,n){let o,i=Yt.workspace.workspaceFolders;if(i)for(let c of i){let d=Yt.Uri.joinPath(c.uri,r);try{await Yt.workspace.fs.stat(d),o=d;break}catch{}}let s="",u="javascript";if(o)try{let c=await Yt.workspace.openTextDocument(o);u=c.languageId,s=this.extractContext(c.getText(),n)}catch{}let a={message:e,file:o?.fsPath??r,line:n,language:u,codeContext:s,severity:"error",source:"terminal",timestamp:Date.now()};this.isDuplicate(a)||(this.recentErrors.set(this.errorKey(a),Date.now()),this.onErrorDetectedEmitter.fire(a),console.log(`${zf} terminal error: ${e} at ${r}:${n}`))}async buildCapturedError(e,r,n,o,i,s){return{message:e,file:r,line:n,language:o,codeContext:this.extractContext(i,n),severity:"error",source:s,timestamp:Date.now()}}extractContext(e,r){let n=e.split(`
`),o=Math.max(0,r-11),i=Math.min(n.length,r+10);return n.slice(o,i).map((s,u)=>`${o+u+1} | ${s}`).join(`
`)}errorKey(e){return`${e.file}:${e.line}:${e.message}`}isDuplicate(e){let r=this.errorKey(e),n=this.recentErrors.get(r);return!!n&&Date.now()-n<2e3}dispose(){this.disposables.forEach(e=>e.dispose()),this.onErrorDetectedEmitter.dispose()}};var Ua=Xe(require("vscode"));function Oi(){}Oi.prototype={diff:function(e,r){var n,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=o.callback;typeof o=="function"&&(i=o,o={}),this.options=o;var s=this;function u(v){return i?(setTimeout(function(){i(void 0,v)},0),!0):v}e=this.castInput(e),r=this.castInput(r),e=this.removeEmpty(this.tokenize(e)),r=this.removeEmpty(this.tokenize(r));var a=r.length,c=e.length,d=1,p=a+c;o.maxEditLength&&(p=Math.min(p,o.maxEditLength));var m=(n=o.timeout)!==null&&n!==void 0?n:1/0,E=Date.now()+m,y=[{oldPos:-1,lastComponent:void 0}],A=this.extractCommon(y[0],r,e,0);if(y[0].oldPos+1>=c&&A+1>=a)return u([{value:this.join(r),count:r.length}]);var S=-1/0,b=1/0;function P(){for(var v=Math.max(S,-d);v<=Math.min(b,d);v+=2){var I=void 0,O=y[v-1],z=y[v+1];O&&(y[v-1]=void 0);var Z=!1;if(z){var M=z.oldPos-v;Z=z&&0<=M&&M<a}var V=O&&O.oldPos+1<c;if(!Z&&!V){y[v]=void 0;continue}if(!V||Z&&O.oldPos+1<z.oldPos?I=s.addToPath(z,!0,void 0,0):I=s.addToPath(O,void 0,!0,1),A=s.extractCommon(I,r,e,v),I.oldPos+1>=c&&A+1>=a)return u(OL(s,I.lastComponent,r,e,s.useLongestToken));y[v]=I,I.oldPos+1>=c&&(b=Math.min(b,v-1)),A+1>=a&&(S=Math.max(S,v+1))}d++}if(i)(function v(){setTimeout(function(){if(d>p||Date.now()>E)return i();P()||v()},0)})();else for(;d<=p&&Date.now()<=E;){var B=P();if(B)return B}},addToPath:function(e,r,n,o){var i=e.lastComponent;return i&&i.added===r&&i.removed===n?{oldPos:e.oldPos+o,lastComponent:{count:i.count+1,added:r,removed:n,previousComponent:i.previousComponent}}:{oldPos:e.oldPos+o,lastComponent:{count:1,added:r,removed:n,previousComponent:i}}},extractCommon:function(e,r,n,o){for(var i=r.length,s=n.length,u=e.oldPos,a=u-o,c=0;a+1<i&&u+1<s&&this.equals(r[a+1],n[u+1]);)a++,u++,c++;return c&&(e.lastComponent={count:c,previousComponent:e.lastComponent}),e.oldPos=u,a},equals:function(e,r){return this.options.comparator?this.options.comparator(e,r):e===r||this.options.ignoreCase&&e.toLowerCase()===r.toLowerCase()},removeEmpty:function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};function OL(t,e,r,n,o){for(var i=[],s;e;)i.push(e),s=e.previousComponent,delete e.previousComponent,e=s;i.reverse();for(var u=0,a=i.length,c=0,d=0;u<a;u++){var p=i[u];if(p.removed){if(p.value=t.join(n.slice(d,d+p.count)),d+=p.count,u&&i[u-1].added){var E=i[u-1];i[u-1]=i[u],i[u]=E}}else{if(!p.added&&o){var m=r.slice(c,c+p.count);m=m.map(function(A,S){var b=n[d+S];return b.length>A.length?b:A}),p.value=t.join(m)}else p.value=t.join(r.slice(c,c+p.count));c+=p.count,p.added||(d+=p.count)}}var y=i[a-1];return a>1&&typeof y.value=="string"&&(y.added||y.removed)&&t.equals("",y.value)&&(i[a-2].value+=y.value,i.pop()),i}var Nfe=new Oi;var z9=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,j9=/\S/,K9=new Oi;K9.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!j9.test(t)&&!j9.test(e)};K9.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<e.length-1;r++)!e[r+1]&&e[r+2]&&z9.test(e[r])&&z9.test(e[r+2])&&(e[r]+=e[r+2],e.splice(r+1,2),r--);return e};var hE=new Oi;hE.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var e=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var o=r[n];n%2&&!this.options.newlineIsToken?e[e.length-1]+=o:(this.options.ignoreWhitespace&&(o=o.trim()),e.push(o))}return e};function RL(t,e,r){return hE.diff(t,e,r)}var DL=new Oi;DL.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var IL=new Oi;IL.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Kf(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kf=function(e){return typeof e}:Kf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kf(t)}function cE(t){return ML(t)||NL(t)||BL(t)||PL()}function ML(t){if(Array.isArray(t))return lE(t)}function NL(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function BL(t,e){if(t){if(typeof t=="string")return lE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lE(t,e)}}function lE(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function PL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var FL=Object.prototype.toString,Zl=new Oi;Zl.useLongestToken=!0;Zl.tokenize=hE.tokenize;Zl.castInput=function(t){var e=this.options,r=e.undefinedReplacement,n=e.stringifyReplacer,o=n===void 0?function(i,s){return typeof s>"u"?r:s}:n;return typeof t=="string"?t:JSON.stringify(dE(t,null,null,o),o,"  ")};Zl.equals=function(t,e){return Oi.prototype.equals.call(Zl,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function dE(t,e,r,n,o){e=e||[],r=r||[],n&&(t=n(o,t));var i;for(i=0;i<e.length;i+=1)if(e[i]===t)return r[i];var s;if(FL.call(t)==="[object Array]"){for(e.push(t),s=new Array(t.length),r.push(s),i=0;i<t.length;i+=1)s[i]=dE(t[i],e,r,n,o);return e.pop(),r.pop(),s}if(t&&t.toJSON&&(t=t.toJSON()),Kf(t)==="object"&&t!==null){e.push(t),s={},r.push(s);var u=[],a;for(a in t)t.hasOwnProperty(a)&&u.push(a);for(u.sort(),i=0;i<u.length;i+=1)a=u[i],s[a]=dE(t[a],e,r,n,a);e.pop(),r.pop()}else s=t;return s}var fE=new Oi;fE.tokenize=function(t){return t.slice()};fE.join=fE.removeEmpty=function(t){return t};function xL(t,e,r,n,o,i,s){s||(s={}),typeof s.context>"u"&&(s.context=4);var u=RL(r,n,s);if(!u)return;u.push({value:"",lines:[]});function a(b){return b.map(function(P){return" "+P})}for(var c=[],d=0,p=0,m=[],E=1,y=1,A=function(P){var B=u[P],v=B.lines||B.value.replace(/\n$/,"").split(`
`);if(B.lines=v,B.added||B.removed){var I;if(!d){var O=u[P-1];d=E,p=y,O&&(m=s.context>0?a(O.lines.slice(-s.context)):[],d-=m.length,p-=m.length)}(I=m).push.apply(I,cE(v.map(function(ue){return(B.added?"+":"-")+ue}))),B.added?y+=v.length:E+=v.length}else{if(d)if(v.length<=s.context*2&&P<u.length-2){var z;(z=m).push.apply(z,cE(a(v)))}else{var Z,M=Math.min(v.length,s.context);(Z=m).push.apply(Z,cE(a(v.slice(0,M))));var V={oldStart:d,oldLines:E-d+M,newStart:p,newLines:y-p+M,lines:m};if(P>=u.length-2&&v.length<=s.context){var Y=/\n$/.test(r),te=/\n$/.test(n),le=v.length==0&&m.length>V.oldLines;!Y&&le&&r.length>0&&m.splice(V.oldLines,0,"\\ No newline at end of file"),(!Y&&!le||!te)&&m.push("\\ No newline at end of file")}c.push(V),d=0,p=0,m=[]}E+=v.length,y+=v.length}},S=0;S<u.length;S++)A(S);return{oldFileName:t,newFileName:e,oldHeader:o,newHeader:i,hunks:c}}function Y9(t){if(Array.isArray(t))return t.map(Y9).join(`
`);var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader>"u"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader>"u"?"":"	"+t.newHeader));for(var r=0;r<t.hunks.length;r++){var n=t.hunks[r];n.oldLines===0&&(n.oldStart-=1),n.newLines===0&&(n.newStart-=1),e.push("@@ -"+n.oldStart+","+n.oldLines+" +"+n.newStart+","+n.newLines+" @@"),e.push.apply(e,n.lines)}return e.join(`
`)+`
`}function kL(t,e,r,n,o,i,s){return Y9(xL(t,e,r,n,o,i,s))}function J9(t,e,r,n,o,i){return kL(t,t,e,r,n,o,i)}var La="[FlowFixer:DiffEngine]",Yf=class{disposables=[];onDiffDetectedEmitter=new Ua.EventEmitter;onDiffDetected=this.onDiffDetectedEmitter.event;beforeSaveContent=new Map;tracking=!1;trackedUri;constructor(){this.disposables.push(Ua.workspace.onWillSaveTextDocument(e=>{this.tracking&&this.captureBeforeSave(e.document)})),this.disposables.push(Ua.workspace.onDidSaveTextDocument(e=>{this.tracking&&this.computeDiff(e)})),console.log(`${La} initialized`)}startTracking(e){this.tracking=!0,this.trackedUri=e;let r=Ua.workspace.textDocuments.find(n=>n.uri.fsPath===e);r&&(this.beforeSaveContent.set(r.uri.toString(),r.getText()),console.log(`${La} captured initial snapshot for ${r.fileName}`)),console.log(`${La} now tracking changes to: ${e}`)}stopTracking(){this.tracking=!1,this.trackedUri=void 0,this.beforeSaveContent.clear(),console.log(`${La} stopped tracking`)}captureBeforeSave(e){let r=e.uri.toString();this.trackedUri&&e.uri.fsPath!==this.trackedUri||this.beforeSaveContent.has(r)||(this.beforeSaveContent.set(r,e.getText()),console.log(`${La} captured before-save state for ${e.fileName}`))}computeDiff(e){let r=e.uri.toString(),n=this.beforeSaveContent.get(r);if(n===void 0)return;let o=e.getText();if(n===o){this.beforeSaveContent.delete(r);return}let i=J9(e.fileName,n,o,"before","after"),s={file:e.fileName,language:e.languageId,beforeContent:n,afterContent:o,unifiedDiff:i,timestamp:Date.now()};this.beforeSaveContent.delete(r),this.onDiffDetectedEmitter.fire(s),console.log(`${La} diff detected in ${e.fileName}`),this.stopTracking()}dispose(){this.disposables.forEach(e=>e.dispose()),this.onDiffDetectedEmitter.dispose()}};var UL=Object.prototype.toString,qL=t=>UL.call(t)==="[object Error]",GL=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function pE(t){if(!(t&&qL(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;let{message:r,stack:n}=t;return r==="Load failed"?n===void 0||"__sentry_captured__"in t:r.startsWith("error sending request for url")?!0:GL.has(r)}function VL(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Jf(t,e,{min:r=0,allowInfinity:n=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${n?" or Infinity":""}.`);if(!n&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<r)throw new TypeError(`Expected \`${t}\` to be \u2265 ${r}.`)}}var e1=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}};function $L(t,e){let r=Math.max(1,t+1),n=e.randomize?Math.random()+1:1,o=Math.round(n*e.minTimeout*e.factor**(r-1));return o=Math.min(o,e.maxTimeout),o}function X9(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function HL({error:t,attemptNumber:e,retriesConsumed:r,startTime:n,options:o}){let i=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(i instanceof e1)throw i.originalError;let s=Number.isFinite(o.retries)?Math.max(0,o.retries-r):o.retries,u=o.maxRetryTime??Number.POSITIVE_INFINITY,a=Object.freeze({error:i,attemptNumber:e,retriesLeft:s,retriesConsumed:r});if(await o.onFailedAttempt(a),X9(n,u)<=0)throw i;let c=await o.shouldConsumeRetry(a),d=X9(n,u);if(d<=0||s<=0)throw i;if(i instanceof TypeError&&!pE(i)){if(c)throw i;return o.signal?.throwIfAborted(),!1}if(!await o.shouldRetry(a))throw i;if(!c)return o.signal?.throwIfAborted(),!1;let p=$L(r,o),m=Math.min(p,d);return o.signal?.throwIfAborted(),m>0&&await new Promise((E,y)=>{let A=()=>{clearTimeout(S),o.signal?.removeEventListener("abort",A),y(o.signal.reason)},S=setTimeout(()=>{o.signal?.removeEventListener("abort",A),E()},m);o.unref&&S.unref?.(),o.signal?.addEventListener("abort",A,{once:!0})}),o.signal?.throwIfAborted(),!0}async function mE(t,e={}){if(e={...e},VL(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??=10,e.factor??=2,e.minTimeout??=1e3,e.maxTimeout??=Number.POSITIVE_INFINITY,e.maxRetryTime??=Number.POSITIVE_INFINITY,e.randomize??=!1,e.onFailedAttempt??=()=>{},e.shouldRetry??=()=>!0,e.shouldConsumeRetry??=()=>!0,Jf("factor",e.factor,{min:0,allowInfinity:!1}),Jf("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Jf("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Jf("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),e.signal?.throwIfAborted();let r=0,n=0,o=performance.now();for(;!Number.isFinite(e.retries)||n<=e.retries;){r++;try{e.signal?.throwIfAborted();let i=await t(r);return e.signal?.throwIfAborted(),i}catch(i){await HL({error:i,attemptNumber:r,retriesConsumed:n,startTime:o,options:e})&&n++}}throw new Error("Retry attempts exhausted without throwing an error.")}var I5=Xe(nO(),1),M5=require("fs"),c0=Xe(require("fs/promises"),1),N5=require("fs/promises"),B5=require("node:stream"),P5=require("node:stream/promises");var BW=Xe(QO(),1),PW=Xe(WC(),1),FW=Xe(KC(),1),rA=Xe(Tp(),1),xW=Xe(uR(),1);var F5=Xe(require("path"),1);var LW,UW;function qW(){return{geminiUrl:LW,vertexUrl:UW}}function GW(t,e,r,n){var o,i;if(!t?.baseUrl){let s=qW();return e?(o=s.vertexUrl)!==null&&o!==void 0?o:r:(i=s.geminiUrl)!==null&&i!==void 0?i:n}return t.baseUrl}var To=class{};function ae(t,e){let r=/\{([^}]+)\}/g;return t.replace(r,(n,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){let i=e[o];return i!=null?String(i):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function f(t,e,r){for(let i=0;i<e.length-1;i++){let s=e[i];if(s.endsWith("[]")){let u=s.slice(0,-2);if(!(u in t))if(Array.isArray(r))t[u]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){let a=t[u];if(Array.isArray(r))for(let c=0;c<a.length;c++){let d=a[c];f(d,e.slice(i+1),r[c])}else for(let c of a)f(c,e.slice(i+1),r)}return}else if(s.endsWith("[0]")){let u=s.slice(0,-3);u in t||(t[u]=[{}]);let a=t[u];f(a[0],e.slice(i+1),r);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}let n=e[e.length-1],o=t[n];if(o!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===o)return;if(typeof o=="object"&&typeof r=="object"&&o!==null&&r!==null)Object.assign(o,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof r=="object"&&r!==null&&!Array.isArray(r)?Object.assign(t,r):t[n]=r}function l(t,e,r=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return r;let o=e[n];if(o.endsWith("[]")){let i=o.slice(0,-2);if(i in t){let s=t[i];return Array.isArray(s)?s.map(u=>l(u,e.slice(n+1),r)):r}else return r}else t=t[o]}return t}catch(n){if(n instanceof TypeError)return r;throw n}}function VW(t,e){for(let[r,n]of Object.entries(e)){let o=r.split("."),i=n.split("."),s=new Set,u=-1;for(let a=0;a<o.length;a++)if(o[a]==="*"){u=a;break}if(u!==-1&&i.length>u)for(let a=u;a<i.length;a++){let c=i[a];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}sA(t,o,i,0,s)}}function sA(t,e,r,n,o){if(n>=e.length||typeof t!="object"||t===null)return;let i=e[n];if(i.endsWith("[]")){let s=i.slice(0,-2),u=t;if(s in u&&Array.isArray(u[s]))for(let a of u[s])sA(a,e,r,n+1,o)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let s=t,u=Object.keys(s).filter(c=>!c.startsWith("_")&&!o.has(c)),a={};for(let c of u)a[c]=s[c];for(let[c,d]of Object.entries(a)){let p=[];for(let m of r.slice(n))m==="*"?p.push(c):p.push(m);f(s,p,d)}for(let c of u)delete s[c]}}else{let s=t;i in s&&sA(s[i],e,r,n+1,o)}}function sS(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function $W(t){let e={},r=l(t,["operationName"]);r!=null&&f(e,["operationName"],r);let n=l(t,["resourceName"]);return n!=null&&f(e,["_url","resourceName"],n),e}function HW(t){let e={},r=l(t,["name"]);r!=null&&f(e,["name"],r);let n=l(t,["metadata"]);n!=null&&f(e,["metadata"],n);let o=l(t,["done"]);o!=null&&f(e,["done"],o);let i=l(t,["error"]);i!=null&&f(e,["error"],i);let s=l(t,["response","generateVideoResponse"]);return s!=null&&f(e,["response"],zW(s)),e}function WW(t){let e={},r=l(t,["name"]);r!=null&&f(e,["name"],r);let n=l(t,["metadata"]);n!=null&&f(e,["metadata"],n);let o=l(t,["done"]);o!=null&&f(e,["done"],o);let i=l(t,["error"]);i!=null&&f(e,["error"],i);let s=l(t,["response"]);return s!=null&&f(e,["response"],jW(s)),e}function zW(t){let e={},r=l(t,["generatedSamples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>KW(s))),f(e,["generatedVideos"],i)}let n=l(t,["raiMediaFilteredCount"]);n!=null&&f(e,["raiMediaFilteredCount"],n);let o=l(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function jW(t){let e={},r=l(t,["videos"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>YW(s))),f(e,["generatedVideos"],i)}let n=l(t,["raiMediaFilteredCount"]);n!=null&&f(e,["raiMediaFilteredCount"],n);let o=l(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function KW(t){let e={},r=l(t,["video"]);return r!=null&&f(e,["video"],tz(r)),e}function YW(t){let e={},r=l(t,["_self"]);return r!=null&&f(e,["video"],rz(r)),e}function JW(t){let e={},r=l(t,["operationName"]);return r!=null&&f(e,["_url","operationName"],r),e}function XW(t){let e={},r=l(t,["operationName"]);return r!=null&&f(e,["_url","operationName"],r),e}function QW(t){let e={},r=l(t,["name"]);r!=null&&f(e,["name"],r);let n=l(t,["metadata"]);n!=null&&f(e,["metadata"],n);let o=l(t,["done"]);o!=null&&f(e,["done"],o);let i=l(t,["error"]);i!=null&&f(e,["error"],i);let s=l(t,["response"]);return s!=null&&f(e,["response"],ZW(s)),e}function ZW(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["parent"]);n!=null&&f(e,["parent"],n);let o=l(t,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function uS(t){let e={},r=l(t,["name"]);r!=null&&f(e,["name"],r);let n=l(t,["metadata"]);n!=null&&f(e,["metadata"],n);let o=l(t,["done"]);o!=null&&f(e,["done"],o);let i=l(t,["error"]);i!=null&&f(e,["error"],i);let s=l(t,["response"]);return s!=null&&f(e,["response"],ez(s)),e}function ez(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["parent"]);n!=null&&f(e,["parent"],n);let o=l(t,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function tz(t){let e={},r=l(t,["uri"]);r!=null&&f(e,["uri"],r);let n=l(t,["encodedVideo"]);n!=null&&f(e,["videoBytes"],sS(n));let o=l(t,["encoding"]);return o!=null&&f(e,["mimeType"],o),e}function rz(t){let e={},r=l(t,["gcsUri"]);r!=null&&f(e,["uri"],r);let n=l(t,["bytesBase64Encoded"]);n!=null&&f(e,["videoBytes"],sS(n));let o=l(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}var aR;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(aR||(aR={}));var cR;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(cR||(cR={}));var lR;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(lR||(lR={}));var pt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(pt||(pt={}));var dR;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(dR||(dR={}));var fR;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(fR||(fR={}));var hR;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(hR||(hR={}));var pR;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(pR||(pR={}));var mR;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(mR||(mR={}));var gR;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(gR||(gR={}));var ER;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ER||(ER={}));var yR;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(yR||(yR={}));var CR;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(CR||(CR={}));var AR;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(AR||(AR={}));var SR;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(SR||(SR={}));var _R;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(_R||(_R={}));var wR;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(wR||(wR={}));var TR;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(TR||(TR={}));var bR;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(bR||(bR={}));var vR;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(vR||(vR={}));var OR;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(OR||(OR={}));var Bp;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Bp||(Bp={}));var RR;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(RR||(RR={}));var DR;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(DR||(DR={}));var IR;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(IR||(IR={}));var uA;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(uA||(uA={}));var MR;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(MR||(MR={}));var NR;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(NR||(NR={}));var aA;(function(t){t.COLLECTION="COLLECTION"})(aA||(aA={}));var BR;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(BR||(BR={}));var PR;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(PR||(PR={}));var FR;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(FR||(FR={}));var xR;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(xR||(xR={}));var kR;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(kR||(kR={}));var LR;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(LR||(LR={}));var UR;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(UR||(UR={}));var qR;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(qR||(qR={}));var GR;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(GR||(GR={}));var VR;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(VR||(VR={}));var $R;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})($R||($R={}));var HR;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(HR||(HR={}));var WR;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(WR||(WR={}));var zR;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(zR||(zR={}));var jR;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(jR||(jR={}));var KR;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(KR||(KR={}));var YR;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(YR||(YR={}));var JR;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(JR||(JR={}));var XR;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(XR||(XR={}));var QR;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(QR||(QR={}));var ZR;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(ZR||(ZR={}));var e5;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(e5||(e5={}));var t5;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(t5||(t5={}));var r5;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(r5||(r5={}));var n5;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(n5||(n5={}));var o5;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(o5||(o5={}));var i5;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(i5||(i5={}));var Ac;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ac||(Ac={}));var qu=class{constructor(e){let r={};for(let n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}};var Lu=class{get text(){var e,r,n,o,i,s,u,a;if(((o=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1,p=[];for(let m of(a=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&a!==void 0?a:[]){for(let[E,y]of Object.entries(m))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(y!==null||y!==void 0)&&p.push(E);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,r,n,o,i,s,u,a;if(((o=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",d=[];for(let p of(a=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&a!==void 0?a:[]){for(let[m,E]of Object.entries(p))m!=="inlineData"&&(E!==null||E!==void 0)&&d.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,r,n,o,i,s,u,a;if(((o=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(a=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||a===void 0?void 0:a.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(c?.length!==0)return c}get executableCode(){var e,r,n,o,i,s,u,a,c;if(((o=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let d=(a=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||a===void 0?void 0:a.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(d?.length!==0)return(c=d?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,r,n,o,i,s,u,a,c;if(((o=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let d=(a=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||a===void 0?void 0:a.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(d?.length!==0)return(c=d?.[0])===null||c===void 0?void 0:c.output}},Pp=class{},Fp=class{},cA=class{},lA=class{},dA=class{},fA=class{},xp=class{},kp=class{},Lp=class{},hA=class{};var Up=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){let n=new t,o,i=e;return r?o=WW(i):o=HW(i),Object.assign(n,o),n}},qp=class{},Gp=class{},Vp=class{},$p=class{},pA=class{},mA=class{},gA=class{};var EA=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){let n=new t,i=QW(e);return Object.assign(n,i),n}},yA=class{},CA=class{},AA=class{},SA=class{};var Hp=class{};var _A=class{get text(){var e,r,n;let o="",i=!1,s=[];for(let u of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(let[a,c]of Object.entries(u))a!=="text"&&a!=="thought"&&c!==null&&s.push(a);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;i=!0,o+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var e,r,n;let o="",i=[];for(let s of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(let[u,a]of Object.entries(s))u!=="inlineData"&&a!==null&&i.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}};var wA=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var Wp=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){let n=new t,i=uS(e);return Object.assign(n,i),n}};function je(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function x5(t,e){let r=je(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function k5(t){return Array.isArray(t)?t.map(e=>zp(e)):[zp(t)]}function zp(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function L5(t){let e=zp(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function U5(t){let e=zp(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function s5(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function q5(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>s5(e)):[s5(t)]}function TA(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function u5(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function a5(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Cr(t){if(t==null)throw new Error("ContentUnion is required");return TA(t)?t:{role:"user",parts:q5(t)}}function aS(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{let n=Cr(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){let r=Cr(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>Cr(r)):[Cr(e)]}function zn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(u5(t)||a5(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Cr(t)]}let e=[],r=[],n=TA(t[0]);for(let o of t){let i=TA(o);if(i!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(o);else{if(u5(o)||a5(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(o)}}return n||e.push({role:"user",parts:q5(r)}),e}function nz(t,e){t.includes("null")&&(e.nullable=!0);let r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(pt).includes(r[0].toUpperCase())?r[0].toUpperCase():pt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let n of r)e.anyOf.push({type:Object.values(pt).includes(n.toUpperCase())?n.toUpperCase():pt.TYPE_UNSPECIFIED})}}function Sc(t){let e={},r=["items"],n=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&nz(t.type,e);for(let[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(pt).includes(u.toUpperCase())?u.toUpperCase():pt.TYPE_UNSPECIFIED}else if(r.includes(s))e[s]=Sc(u);else if(n.includes(s)){let a=[];for(let c of u){if(c.type=="null"){e.nullable=!0;continue}a.push(Sc(c))}e[s]=a}else if(o.includes(s)){let a={};for(let[c,d]of Object.entries(u))a[c]=Sc(d);e[s]=a}else{if(s==="additionalProperties")continue;e[s]=u}return e}function cS(t){return Sc(t)}function lS(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function dS(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function bc(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Sc(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Sc(e.response));return t}function vc(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let r of t)e.push(r);return e}function oz(t,e,r,n=1){let o=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:o?`${r}/${e}`:e}function qi(t,e){if(typeof e!="string")throw new Error("name must be a string");return oz(t,e,"cachedContents")}function G5(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ds(t){return sS(t)}function iz(t){return t!=null&&typeof t=="object"&&"name"in t}function V5(t){return t!=null&&typeof t=="object"&&"video"in t}function $5(t){return t!=null&&typeof t=="object"&&"uri"in t}function fS(t){var e;let r;if(iz(t)&&(r=t.name),!($5(t)&&(r=t.uri,r===void 0))&&!(V5(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){let o=r.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${r}`);r=o[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function H5(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function W5(t){for(let e of["models","tunedModels","publisherModels"])if(sz(t,e))return t[e];return[]}function sz(t,e){return t!==null&&typeof t=="object"&&e in t}function uz(t,e={}){let r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return r.outputSchema&&(n.responseJsonSchema=r.outputSchema),e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function az(t,e={}){let r=[],n=new Set;for(let o of t){let i=o.name;if(n.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);n.add(i);let s=uz(o,e);s.functionDeclarations&&r.push(...s.functionDeclarations)}return{functionDeclarations:r}}function z5(t,e){let r;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))r={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))r={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))r={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");r={inlinedRequests:e}}else r=e;let n=[r.gcsUri,r.bigqueryUri].filter(Boolean).length,o=[r.inlinedRequests,r.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return r}function cz(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function j5(t){if(typeof t!="object"||t===null)return{};let e=t,r=e.inlinedResponses;if(typeof r!="object"||r===null)return t;let o=r.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let i=!1;for(let s of o){if(typeof s!="object"||s===null)continue;let a=s.response;if(typeof a!="object"||a===null)continue;if(a.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Oc(t,e){let r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function K5(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function lz(t){let e={},r=l(t,["responsesFile"]);r!=null&&f(e,["fileName"],r);let n=l(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Hz(s))),f(e,["inlinedResponses"],i)}let o=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["inlinedEmbedContentResponses"],i)}return e}function dz(t){let e={},r=l(t,["predictionsFormat"]);r!=null&&f(e,["format"],r);let n=l(t,["gcsDestination","outputUriPrefix"]);n!=null&&f(e,["gcsUri"],n);let o=l(t,["bigqueryDestination","outputUri"]);return o!=null&&f(e,["bigqueryUri"],o),e}function fz(t){let e={},r=l(t,["format"]);r!=null&&f(e,["predictionsFormat"],r);let n=l(t,["gcsUri"]);n!=null&&f(e,["gcsDestination","outputUriPrefix"],n);let o=l(t,["bigqueryUri"]);if(o!=null&&f(e,["bigqueryDestination","outputUri"],o),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Mp(t){let e={},r=l(t,["name"]);r!=null&&f(e,["name"],r);let n=l(t,["metadata","displayName"]);n!=null&&f(e,["displayName"],n);let o=l(t,["metadata","state"]);o!=null&&f(e,["state"],K5(o));let i=l(t,["metadata","createTime"]);i!=null&&f(e,["createTime"],i);let s=l(t,["metadata","endTime"]);s!=null&&f(e,["endTime"],s);let u=l(t,["metadata","updateTime"]);u!=null&&f(e,["updateTime"],u);let a=l(t,["metadata","model"]);a!=null&&f(e,["model"],a);let c=l(t,["metadata","output"]);return c!=null&&f(e,["dest"],lz(j5(c))),e}function bA(t){let e={},r=l(t,["name"]);r!=null&&f(e,["name"],r);let n=l(t,["displayName"]);n!=null&&f(e,["displayName"],n);let o=l(t,["state"]);o!=null&&f(e,["state"],K5(o));let i=l(t,["error"]);i!=null&&f(e,["error"],i);let s=l(t,["createTime"]);s!=null&&f(e,["createTime"],s);let u=l(t,["startTime"]);u!=null&&f(e,["startTime"],u);let a=l(t,["endTime"]);a!=null&&f(e,["endTime"],a);let c=l(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);let d=l(t,["model"]);d!=null&&f(e,["model"],d);let p=l(t,["inputConfig"]);p!=null&&f(e,["src"],hz(p));let m=l(t,["outputConfig"]);m!=null&&f(e,["dest"],dz(j5(m)));let E=l(t,["completionStats"]);return E!=null&&f(e,["completionStats"],E),e}function hz(t){let e={},r=l(t,["instancesFormat"]);r!=null&&f(e,["format"],r);let n=l(t,["gcsSource","uris"]);n!=null&&f(e,["gcsUri"],n);let o=l(t,["bigquerySource","inputUri"]);return o!=null&&f(e,["bigqueryUri"],o),e}function pz(t,e){let r={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let n=l(e,["fileName"]);n!=null&&f(r,["fileName"],n);let o=l(e,["inlinedRequests"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>$z(t,s))),f(r,["requests","requests"],i)}return r}function mz(t){let e={},r=l(t,["format"]);r!=null&&f(e,["instancesFormat"],r);let n=l(t,["gcsUri"]);n!=null&&f(e,["gcsSource","uris"],n);let o=l(t,["bigqueryUri"]);if(o!=null&&f(e,["bigquerySource","inputUri"],o),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function gz(t){let e={},r=l(t,["data"]);if(r!=null&&f(e,["data"],r),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=l(t,["mimeType"]);return n!=null&&f(e,["mimeType"],n),e}function Ez(t,e){let r={},n=l(e,["name"]);return n!=null&&f(r,["_url","name"],Oc(t,n)),r}function yz(t,e){let r={},n=l(e,["name"]);return n!=null&&f(r,["_url","name"],Oc(t,n)),r}function Cz(t){let e={},r=l(t,["content"]);r!=null&&f(e,["content"],r);let n=l(t,["citationMetadata"]);n!=null&&f(e,["citationMetadata"],Az(n));let o=l(t,["tokenCount"]);o!=null&&f(e,["tokenCount"],o);let i=l(t,["finishReason"]);i!=null&&f(e,["finishReason"],i);let s=l(t,["avgLogprobs"]);s!=null&&f(e,["avgLogprobs"],s);let u=l(t,["groundingMetadata"]);u!=null&&f(e,["groundingMetadata"],u);let a=l(t,["index"]);a!=null&&f(e,["index"],a);let c=l(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);let d=l(t,["safetyRatings"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(E=>E)),f(e,["safetyRatings"],m)}let p=l(t,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],p),e}function Az(t){let e={},r=l(t,["citationSources"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(o=>o)),f(e,["citations"],n)}return e}function Y5(t){let e={},r=l(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Xz(i))),f(e,["parts"],o)}let n=l(t,["role"]);return n!=null&&f(e,["role"],n),e}function Sz(t,e){let r={},n=l(t,["displayName"]);if(e!==void 0&&n!=null&&f(e,["batch","displayName"],n),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function _z(t,e){let r={},n=l(t,["displayName"]);e!==void 0&&n!=null&&f(e,["displayName"],n);let o=l(t,["dest"]);return e!==void 0&&o!=null&&f(e,["outputConfig"],fz(cz(o))),r}function c5(t,e){let r={},n=l(e,["model"]);n!=null&&f(r,["_url","model"],je(t,n));let o=l(e,["src"]);o!=null&&f(r,["batch","inputConfig"],pz(t,z5(t,o)));let i=l(e,["config"]);return i!=null&&Sz(i,r),r}function wz(t,e){let r={},n=l(e,["model"]);n!=null&&f(r,["model"],je(t,n));let o=l(e,["src"]);o!=null&&f(r,["inputConfig"],mz(z5(t,o)));let i=l(e,["config"]);return i!=null&&_z(i,r),r}function Tz(t,e){let r={},n=l(t,["displayName"]);return e!==void 0&&n!=null&&f(e,["batch","displayName"],n),r}function bz(t,e){let r={},n=l(e,["model"]);n!=null&&f(r,["_url","model"],je(t,n));let o=l(e,["src"]);o!=null&&f(r,["batch","inputConfig"],Nz(t,o));let i=l(e,["config"]);return i!=null&&Tz(i,r),r}function vz(t,e){let r={},n=l(e,["name"]);return n!=null&&f(r,["_url","name"],Oc(t,n)),r}function Oz(t,e){let r={},n=l(e,["name"]);return n!=null&&f(r,["_url","name"],Oc(t,n)),r}function Rz(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["name"]);n!=null&&f(e,["name"],n);let o=l(t,["done"]);o!=null&&f(e,["done"],o);let i=l(t,["error"]);return i!=null&&f(e,["error"],i),e}function Dz(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["name"]);n!=null&&f(e,["name"],n);let o=l(t,["done"]);o!=null&&f(e,["done"],o);let i=l(t,["error"]);return i!=null&&f(e,["error"],i),e}function Iz(t,e){let r={},n=l(e,["contents"]);if(n!=null){let i=aS(t,n);Array.isArray(i)&&(i=i.map(s=>s)),f(r,["requests[]","request","content"],i)}let o=l(e,["config"]);return o!=null&&(f(r,["_self"],Mz(o,r)),VW(r,{"requests[].*":"requests[].request.*"})),r}function Mz(t,e){let r={},n=l(t,["taskType"]);e!==void 0&&n!=null&&f(e,["requests[]","taskType"],n);let o=l(t,["title"]);e!==void 0&&o!=null&&f(e,["requests[]","title"],o);let i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&f(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function Nz(t,e){let r={},n=l(e,["fileName"]);n!=null&&f(r,["file_name"],n);let o=l(e,["inlinedRequests"]);return o!=null&&f(r,["requests"],Iz(t,o)),r}function Bz(t){let e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=l(t,["fileUri"]);r!=null&&f(e,["fileUri"],r);let n=l(t,["mimeType"]);return n!=null&&f(e,["mimeType"],n),e}function Pz(t){let e={},r=l(t,["id"]);r!=null&&f(e,["id"],r);let n=l(t,["args"]);n!=null&&f(e,["args"],n);let o=l(t,["name"]);if(o!=null&&f(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Fz(t){let e={},r=l(t,["allowedFunctionNames"]);r!=null&&f(e,["allowedFunctionNames"],r);let n=l(t,["mode"]);if(n!=null&&f(e,["mode"],n),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function xz(t,e,r){let n={},o=l(e,["systemInstruction"]);r!==void 0&&o!=null&&f(r,["systemInstruction"],Y5(Cr(o)));let i=l(e,["temperature"]);i!=null&&f(n,["temperature"],i);let s=l(e,["topP"]);s!=null&&f(n,["topP"],s);let u=l(e,["topK"]);u!=null&&f(n,["topK"],u);let a=l(e,["candidateCount"]);a!=null&&f(n,["candidateCount"],a);let c=l(e,["maxOutputTokens"]);c!=null&&f(n,["maxOutputTokens"],c);let d=l(e,["stopSequences"]);d!=null&&f(n,["stopSequences"],d);let p=l(e,["responseLogprobs"]);p!=null&&f(n,["responseLogprobs"],p);let m=l(e,["logprobs"]);m!=null&&f(n,["logprobs"],m);let E=l(e,["presencePenalty"]);E!=null&&f(n,["presencePenalty"],E);let y=l(e,["frequencyPenalty"]);y!=null&&f(n,["frequencyPenalty"],y);let A=l(e,["seed"]);A!=null&&f(n,["seed"],A);let S=l(e,["responseMimeType"]);S!=null&&f(n,["responseMimeType"],S);let b=l(e,["responseSchema"]);b!=null&&f(n,["responseSchema"],cS(b));let P=l(e,["responseJsonSchema"]);if(P!=null&&f(n,["responseJsonSchema"],P),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let B=l(e,["safetySettings"]);if(r!==void 0&&B!=null){let le=B;Array.isArray(le)&&(le=le.map(ue=>Qz(ue))),f(r,["safetySettings"],le)}let v=l(e,["tools"]);if(r!==void 0&&v!=null){let le=vc(v);Array.isArray(le)&&(le=le.map(ue=>ej(bc(ue)))),f(r,["tools"],le)}let I=l(e,["toolConfig"]);if(r!==void 0&&I!=null&&f(r,["toolConfig"],Zz(I)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let O=l(e,["cachedContent"]);r!==void 0&&O!=null&&f(r,["cachedContent"],qi(t,O));let z=l(e,["responseModalities"]);z!=null&&f(n,["responseModalities"],z);let Z=l(e,["mediaResolution"]);Z!=null&&f(n,["mediaResolution"],Z);let M=l(e,["speechConfig"]);if(M!=null&&f(n,["speechConfig"],lS(M)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let V=l(e,["thinkingConfig"]);V!=null&&f(n,["thinkingConfig"],V);let Y=l(e,["imageConfig"]);Y!=null&&f(n,["imageConfig"],Vz(Y));let te=l(e,["enableEnhancedCivicAnswers"]);if(te!=null&&f(n,["enableEnhancedCivicAnswers"],te),l(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return n}function kz(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["candidates"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>Cz(c))),f(e,["candidates"],a)}let o=l(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);let i=l(t,["promptFeedback"]);i!=null&&f(e,["promptFeedback"],i);let s=l(t,["responseId"]);s!=null&&f(e,["responseId"],s);let u=l(t,["usageMetadata"]);return u!=null&&f(e,["usageMetadata"],u),e}function Lz(t,e){let r={},n=l(e,["name"]);return n!=null&&f(r,["_url","name"],Oc(t,n)),r}function Uz(t,e){let r={},n=l(e,["name"]);return n!=null&&f(r,["_url","name"],Oc(t,n)),r}function qz(t){let e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=l(t,["enableWidget"]);return r!=null&&f(e,["enableWidget"],r),e}function Gz(t){let e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=l(t,["timeRangeFilter"]);return r!=null&&f(e,["timeRangeFilter"],r),e}function Vz(t){let e={},r=l(t,["aspectRatio"]);r!=null&&f(e,["aspectRatio"],r);let n=l(t,["imageSize"]);if(n!=null&&f(e,["imageSize"],n),l(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function $z(t,e){let r={},n=l(e,["model"]);n!=null&&f(r,["request","model"],je(t,n));let o=l(e,["contents"]);if(o!=null){let u=zn(o);Array.isArray(u)&&(u=u.map(a=>Y5(a))),f(r,["request","contents"],u)}let i=l(e,["metadata"]);i!=null&&f(r,["metadata"],i);let s=l(e,["config"]);return s!=null&&f(r,["request","generationConfig"],xz(t,s,l(r,["request"],{}))),r}function Hz(t){let e={},r=l(t,["response"]);r!=null&&f(e,["response"],kz(r));let n=l(t,["metadata"]);n!=null&&f(e,["metadata"],n);let o=l(t,["error"]);return o!=null&&f(e,["error"],o),e}function Wz(t,e){let r={},n=l(t,["pageSize"]);e!==void 0&&n!=null&&f(e,["_query","pageSize"],n);let o=l(t,["pageToken"]);if(e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function zz(t,e){let r={},n=l(t,["pageSize"]);e!==void 0&&n!=null&&f(e,["_query","pageSize"],n);let o=l(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);let i=l(t,["filter"]);return e!==void 0&&i!=null&&f(e,["_query","filter"],i),r}function jz(t){let e={},r=l(t,["config"]);return r!=null&&Wz(r,e),e}function Kz(t){let e={},r=l(t,["config"]);return r!=null&&zz(r,e),e}function Yz(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);let o=l(t,["operations"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Mp(s))),f(e,["batchJobs"],i)}return e}function Jz(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);let o=l(t,["batchPredictionJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>bA(s))),f(e,["batchJobs"],i)}return e}function Xz(t){let e={},r=l(t,["mediaResolution"]);r!=null&&f(e,["mediaResolution"],r);let n=l(t,["codeExecutionResult"]);n!=null&&f(e,["codeExecutionResult"],n);let o=l(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);let i=l(t,["fileData"]);i!=null&&f(e,["fileData"],Bz(i));let s=l(t,["functionCall"]);s!=null&&f(e,["functionCall"],Pz(s));let u=l(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);let a=l(t,["inlineData"]);a!=null&&f(e,["inlineData"],gz(a));let c=l(t,["text"]);c!=null&&f(e,["text"],c);let d=l(t,["thought"]);d!=null&&f(e,["thought"],d);let p=l(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);let m=l(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function Qz(t){let e={},r=l(t,["category"]);if(r!=null&&f(e,["category"],r),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let n=l(t,["threshold"]);return n!=null&&f(e,["threshold"],n),e}function Zz(t){let e={},r=l(t,["retrievalConfig"]);r!=null&&f(e,["retrievalConfig"],r);let n=l(t,["functionCallingConfig"]);return n!=null&&f(e,["functionCallingConfig"],Fz(n)),e}function ej(t){let e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=l(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);let n=l(t,["fileSearch"]);n!=null&&f(e,["fileSearch"],n);let o=l(t,["codeExecution"]);if(o!=null&&f(e,["codeExecution"],o),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let i=l(t,["functionDeclarations"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(p=>p)),f(e,["functionDeclarations"],d)}let s=l(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],qz(s));let u=l(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],Gz(u));let a=l(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);let c=l(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}var Li;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Li||(Li={}));var Ui=class{constructor(e,r,n,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,o)}init(e,r,n){var o,i;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!n||Object.keys(n).length===0?s={config:{}}:typeof n=="object"?s=Object.assign({},n):s=n,s.config&&(s.config.pageToken=r.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var vA=class extends To{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Ui(Li.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.create=async r=>(this.apiClient.isVertexAI()&&(r.config=this.formatDestination(r.src,r.config)),this.createInternal(r)),this.createEmbeddings=async r=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(r)}}createInlinedGenerateContentRequest(e){let r=c5(this.apiClient,e),n=r._url,o=ae("{model}:batchGenerateContent",n),u=r.batch.inputConfig.requests,a=u.requests,c=[];for(let d of a){let p=Object.assign({},d);if(p.systemInstruction){let m=p.systemInstruction;delete p.systemInstruction;let E=p.request;E.systemInstruction=m,p.request=E}c.push(p)}return u.requests=c,delete r.config,delete r._url,delete r._query,{path:o,body:r}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,r){let n=r?Object.assign({},r):{},o=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${o}`),n.dest===void 0){let i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?n.dest=`${i.slice(0,-6)}/dest`:n.dest=`${i}_dest_${o}`;else if(s)n.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=wz(this.apiClient,e);return u=ae("batchPredictionJobs",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s.then(d=>bA(d))}else{let c=c5(this.apiClient,e);return u=ae("{model}:batchGenerateContent",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Mp(d))}}async createEmbeddingsInternal(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=bz(this.apiClient,e);return i=ae("{model}:asyncBatchEmbedContent",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>Mp(a))}}async get(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=Uz(this.apiClient,e);return u=ae("batchPredictionJobs/{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s.then(d=>bA(d))}else{let c=Lz(this.apiClient,e);return u=ae("batches/{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Mp(d))}}async cancel(e){var r,n,o,i;let s="",u={};if(this.apiClient.isVertexAI()){let a=yz(this.apiClient,e);s=ae("batchPredictionJobs/{name}:cancel",a._url),u=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{let a=Ez(this.apiClient,e);s=ae("batches/{name}:cancel",a._url),u=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=Kz(e);return u=ae("batchPredictionJobs",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=Jz(d),m=new Hp;return Object.assign(m,p),m})}else{let c=jz(e);return u=ae("batches",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=Yz(d),m=new Hp;return Object.assign(m,p),m})}}async delete(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=Oz(this.apiClient,e);return u=ae("batchPredictionJobs/{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>Dz(d))}else{let c=vz(this.apiClient,e);return u=ae("batches/{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>Rz(d))}}};function tj(t){let e={},r=l(t,["data"]);if(r!=null&&f(e,["data"],r),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=l(t,["mimeType"]);return n!=null&&f(e,["mimeType"],n),e}function l5(t){let e={},r=l(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Tj(i))),f(e,["parts"],o)}let n=l(t,["role"]);return n!=null&&f(e,["role"],n),e}function rj(t,e){let r={},n=l(t,["ttl"]);e!==void 0&&n!=null&&f(e,["ttl"],n);let o=l(t,["expireTime"]);e!==void 0&&o!=null&&f(e,["expireTime"],o);let i=l(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);let s=l(t,["contents"]);if(e!==void 0&&s!=null){let d=zn(s);Array.isArray(d)&&(d=d.map(p=>l5(p))),f(e,["contents"],d)}let u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&f(e,["systemInstruction"],l5(Cr(u)));let a=l(t,["tools"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>vj(p))),f(e,["tools"],d)}let c=l(t,["toolConfig"]);if(e!==void 0&&c!=null&&f(e,["toolConfig"],bj(c)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function nj(t,e){let r={},n=l(t,["ttl"]);e!==void 0&&n!=null&&f(e,["ttl"],n);let o=l(t,["expireTime"]);e!==void 0&&o!=null&&f(e,["expireTime"],o);let i=l(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);let s=l(t,["contents"]);if(e!==void 0&&s!=null){let p=zn(s);Array.isArray(p)&&(p=p.map(m=>m)),f(e,["contents"],p)}let u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&f(e,["systemInstruction"],Cr(u));let a=l(t,["tools"]);if(e!==void 0&&a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>Oj(m))),f(e,["tools"],p)}let c=l(t,["toolConfig"]);e!==void 0&&c!=null&&f(e,["toolConfig"],c);let d=l(t,["kmsKeyName"]);return e!==void 0&&d!=null&&f(e,["encryption_spec","kmsKeyName"],d),r}function oj(t,e){let r={},n=l(e,["model"]);n!=null&&f(r,["model"],x5(t,n));let o=l(e,["config"]);return o!=null&&rj(o,r),r}function ij(t,e){let r={},n=l(e,["model"]);n!=null&&f(r,["model"],x5(t,n));let o=l(e,["config"]);return o!=null&&nj(o,r),r}function sj(t,e){let r={},n=l(e,["name"]);return n!=null&&f(r,["_url","name"],qi(t,n)),r}function uj(t,e){let r={},n=l(e,["name"]);return n!=null&&f(r,["_url","name"],qi(t,n)),r}function aj(t){let e={},r=l(t,["sdkHttpResponse"]);return r!=null&&f(e,["sdkHttpResponse"],r),e}function cj(t){let e={},r=l(t,["sdkHttpResponse"]);return r!=null&&f(e,["sdkHttpResponse"],r),e}function lj(t){let e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=l(t,["fileUri"]);r!=null&&f(e,["fileUri"],r);let n=l(t,["mimeType"]);return n!=null&&f(e,["mimeType"],n),e}function dj(t){let e={},r=l(t,["id"]);r!=null&&f(e,["id"],r);let n=l(t,["args"]);n!=null&&f(e,["args"],n);let o=l(t,["name"]);if(o!=null&&f(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function fj(t){let e={},r=l(t,["allowedFunctionNames"]);r!=null&&f(e,["allowedFunctionNames"],r);let n=l(t,["mode"]);if(n!=null&&f(e,["mode"],n),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function hj(t){let e={},r=l(t,["description"]);r!=null&&f(e,["description"],r);let n=l(t,["name"]);n!=null&&f(e,["name"],n);let o=l(t,["parameters"]);o!=null&&f(e,["parameters"],o);let i=l(t,["parametersJsonSchema"]);i!=null&&f(e,["parametersJsonSchema"],i);let s=l(t,["response"]);s!=null&&f(e,["response"],s);let u=l(t,["responseJsonSchema"]);if(u!=null&&f(e,["responseJsonSchema"],u),l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function pj(t,e){let r={},n=l(e,["name"]);return n!=null&&f(r,["_url","name"],qi(t,n)),r}function mj(t,e){let r={},n=l(e,["name"]);return n!=null&&f(r,["_url","name"],qi(t,n)),r}function gj(t){let e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=l(t,["enableWidget"]);return r!=null&&f(e,["enableWidget"],r),e}function Ej(t){let e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=l(t,["timeRangeFilter"]);return r!=null&&f(e,["timeRangeFilter"],r),e}function yj(t,e){let r={},n=l(t,["pageSize"]);e!==void 0&&n!=null&&f(e,["_query","pageSize"],n);let o=l(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),r}function Cj(t,e){let r={},n=l(t,["pageSize"]);e!==void 0&&n!=null&&f(e,["_query","pageSize"],n);let o=l(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),r}function Aj(t){let e={},r=l(t,["config"]);return r!=null&&yj(r,e),e}function Sj(t){let e={},r=l(t,["config"]);return r!=null&&Cj(r,e),e}function _j(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);let o=l(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["cachedContents"],i)}return e}function wj(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);let o=l(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["cachedContents"],i)}return e}function Tj(t){let e={},r=l(t,["mediaResolution"]);r!=null&&f(e,["mediaResolution"],r);let n=l(t,["codeExecutionResult"]);n!=null&&f(e,["codeExecutionResult"],n);let o=l(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);let i=l(t,["fileData"]);i!=null&&f(e,["fileData"],lj(i));let s=l(t,["functionCall"]);s!=null&&f(e,["functionCall"],dj(s));let u=l(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);let a=l(t,["inlineData"]);a!=null&&f(e,["inlineData"],tj(a));let c=l(t,["text"]);c!=null&&f(e,["text"],c);let d=l(t,["thought"]);d!=null&&f(e,["thought"],d);let p=l(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);let m=l(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function bj(t){let e={},r=l(t,["retrievalConfig"]);r!=null&&f(e,["retrievalConfig"],r);let n=l(t,["functionCallingConfig"]);return n!=null&&f(e,["functionCallingConfig"],fj(n)),e}function vj(t){let e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=l(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);let n=l(t,["fileSearch"]);n!=null&&f(e,["fileSearch"],n);let o=l(t,["codeExecution"]);if(o!=null&&f(e,["codeExecution"],o),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let i=l(t,["functionDeclarations"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(p=>p)),f(e,["functionDeclarations"],d)}let s=l(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],gj(s));let u=l(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],Ej(u));let a=l(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);let c=l(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function Oj(t){let e={},r=l(t,["retrieval"]);r!=null&&f(e,["retrieval"],r);let n=l(t,["computerUse"]);if(n!=null&&f(e,["computerUse"],n),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=l(t,["codeExecution"]);o!=null&&f(e,["codeExecution"],o);let i=l(t,["enterpriseWebSearch"]);i!=null&&f(e,["enterpriseWebSearch"],i);let s=l(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>hj(m))),f(e,["functionDeclarations"],p)}let u=l(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],u);let a=l(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],a);let c=l(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);let d=l(t,["urlContext"]);return d!=null&&f(e,["urlContext"],d),e}function Rj(t,e){let r={},n=l(t,["ttl"]);e!==void 0&&n!=null&&f(e,["ttl"],n);let o=l(t,["expireTime"]);return e!==void 0&&o!=null&&f(e,["expireTime"],o),r}function Dj(t,e){let r={},n=l(t,["ttl"]);e!==void 0&&n!=null&&f(e,["ttl"],n);let o=l(t,["expireTime"]);return e!==void 0&&o!=null&&f(e,["expireTime"],o),r}function Ij(t,e){let r={},n=l(e,["name"]);n!=null&&f(r,["_url","name"],qi(t,n));let o=l(e,["config"]);return o!=null&&Rj(o,r),r}function Mj(t,e){let r={},n=l(e,["name"]);n!=null&&f(r,["_url","name"],qi(t,n));let o=l(e,["config"]);return o!=null&&Dj(o,r),r}var OA=class extends To{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Ui(Li.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=ij(this.apiClient,e);return u=ae("cachedContents",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=oj(this.apiClient,e);return u=ae("cachedContents",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async get(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=mj(this.apiClient,e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=pj(this.apiClient,e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async delete(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=uj(this.apiClient,e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=cj(d),m=new Vp;return Object.assign(m,p),m})}else{let c=sj(this.apiClient,e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=aj(d),m=new Vp;return Object.assign(m,p),m})}}async update(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=Mj(this.apiClient,e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s.then(d=>d)}else{let c=Ij(this.apiClient,e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>d)}}async listInternal(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=Sj(e);return u=ae("cachedContents",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=wj(d),m=new $p;return Object.assign(m,p),m})}else{let c=Aj(e);return u=ae("cachedContents",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=_j(d),m=new $p;return Object.assign(m,p),m})}}};function jp(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function d5(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(t){return this instanceof we?(this.v=t,this):new we(t)}function _o(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(E){return function(y){return Promise.resolve(y).then(E,p)}}function u(E,y){n[E]&&(o[E]=function(A){return new Promise(function(S,b){i.push([E,A,S,b])>1||a(E,A)})},y&&(o[E]=y(o[E])))}function a(E,y){try{c(n[E](y))}catch(A){m(i[0][3],A)}}function c(E){E.value instanceof we?Promise.resolve(E.value.v).then(d,p):m(i[0][2],E)}function d(E){a("next",E)}function p(E){a("throw",E)}function m(E,y){E(y),i.shift(),i.length&&a(i[0][0],i[0][1])}}function wo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof d5=="function"?d5(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(s){return new Promise(function(u,a){s=t[i](s),o(u,a,s.done,s.value)})}}function o(i,s,u,a){Promise.resolve(a).then(function(c){i({value:c,done:u})},s)}}function Nj(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:J5(r)}function J5(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Bj(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function f5(t){if(t===void 0||t.length===0)return[];let e=[],r=t.length,n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{let o=[],i=!0;for(;n<r&&t[n].role==="model";)o.push(t[n]),i&&!J5(t[n])&&(i=!1),n++;i?e.push(...o):e.pop()}return e}var RA=class{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new DA(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},DA=class{constructor(e,r,n,o={},i=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),Bj(i)}async sendMessage(e){var r;await this.sendPromise;let n=Cr(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var i,s,u;let a=await o,c=(s=(i=a.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,d=a.automaticFunctionCallingHistory,p=this.getHistory(!0).length,m=[];d!=null&&(m=(u=d.slice(p))!==null&&u!==void 0?u:[]);let E=c?[c]:[];this.recordHistory(n,E,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var r;await this.sendPromise;let n=Cr(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});let i=await o;return this.processStreamResponse(i,n)}getHistory(e=!1){let r=e?f5(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){return _o(this,arguments,function*(){var o,i,s,u,a,c;let d=[];try{for(var p=!0,m=wo(e),E;E=yield we(m.next()),o=E.done,!o;p=!0){u=E.value,p=!1;let y=u;if(Nj(y)){let A=(c=(a=y.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content;A!==void 0&&d.push(A)}yield yield we(y)}}catch(y){i={error:y}}finally{try{!p&&!o&&(s=m.return)&&(yield we(s.call(m)))}finally{if(i)throw i.error}}this.recordHistory(r,d)})}recordHistory(e,r,n){let o=[];r.length>0&&r.every(i=>i.role!==void 0)?o=r:o.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...f5(n)):this.history.push(e),this.history.push(...o)}};var V1=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};function Pj(t){let e={},r=l(t,["file"]);return r!=null&&f(e,["file"],r),e}function Fj(t){let e={},r=l(t,["sdkHttpResponse"]);return r!=null&&f(e,["sdkHttpResponse"],r),e}function xj(t){let e={},r=l(t,["name"]);return r!=null&&f(e,["_url","file"],fS(r)),e}function kj(t){let e={},r=l(t,["sdkHttpResponse"]);return r!=null&&f(e,["sdkHttpResponse"],r),e}function Lj(t){let e={},r=l(t,["name"]);return r!=null&&f(e,["_url","file"],fS(r)),e}function Uj(t){let e={},r=l(t,["uris"]);return r!=null&&f(e,["uris"],r),e}function qj(t,e){let r={},n=l(t,["pageSize"]);e!==void 0&&n!=null&&f(e,["_query","pageSize"],n);let o=l(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),r}function Gj(t){let e={},r=l(t,["config"]);return r!=null&&qj(r,e),e}function Vj(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);let o=l(t,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["files"],i)}return e}function $j(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["files"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),f(e,["files"],o)}return e}var IA=class extends To{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Ui(Li.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>r)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Gj(e);return i=ae("files",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:a.headers},d})),o.then(a=>{let c=Vj(a),d=new yA;return Object.assign(d,c),d})}}async createInternal(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Pj(e);return i=ae("upload/v1beta/files",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>{let c=Fj(a),d=new CA;return Object.assign(d,c),d})}}async get(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Lj(e);return i=ae("files/{file}",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>a)}}async delete(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=xj(e);return i=ae("files/{file}",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:a.headers},d})),o.then(a=>{let c=kj(a),d=new AA;return Object.assign(d,c),d})}}async registerFilesInternal(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Uj(e);return i=ae("files:register",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>{let c=$j(a),d=new SA;return Object.assign(d,c),d})}}};function Np(t){let e={},r=l(t,["data"]);if(r!=null&&f(e,["data"],r),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=l(t,["mimeType"]);return n!=null&&f(e,["mimeType"],n),e}function Hj(t){let e={},r=l(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>sK(i))),f(e,["parts"],o)}let n=l(t,["role"]);return n!=null&&f(e,["role"],n),e}function Wj(t){let e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=l(t,["fileUri"]);r!=null&&f(e,["fileUri"],r);let n=l(t,["mimeType"]);return n!=null&&f(e,["mimeType"],n),e}function zj(t){let e={},r=l(t,["id"]);r!=null&&f(e,["id"],r);let n=l(t,["args"]);n!=null&&f(e,["args"],n);let o=l(t,["name"]);if(o!=null&&f(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function jj(t){let e={},r=l(t,["description"]);r!=null&&f(e,["description"],r);let n=l(t,["name"]);n!=null&&f(e,["name"],n);let o=l(t,["parameters"]);o!=null&&f(e,["parameters"],o);let i=l(t,["parametersJsonSchema"]);i!=null&&f(e,["parametersJsonSchema"],i);let s=l(t,["response"]);s!=null&&f(e,["response"],s);let u=l(t,["responseJsonSchema"]);if(u!=null&&f(e,["responseJsonSchema"],u),l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Kj(t){let e={},r=l(t,["modelSelectionConfig"]);r!=null&&f(e,["modelConfig"],r);let n=l(t,["responseJsonSchema"]);n!=null&&f(e,["responseJsonSchema"],n);let o=l(t,["audioTimestamp"]);o!=null&&f(e,["audioTimestamp"],o);let i=l(t,["candidateCount"]);i!=null&&f(e,["candidateCount"],i);let s=l(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);let u=l(t,["frequencyPenalty"]);u!=null&&f(e,["frequencyPenalty"],u);let a=l(t,["logprobs"]);a!=null&&f(e,["logprobs"],a);let c=l(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);let d=l(t,["mediaResolution"]);d!=null&&f(e,["mediaResolution"],d);let p=l(t,["presencePenalty"]);p!=null&&f(e,["presencePenalty"],p);let m=l(t,["responseLogprobs"]);m!=null&&f(e,["responseLogprobs"],m);let E=l(t,["responseMimeType"]);E!=null&&f(e,["responseMimeType"],E);let y=l(t,["responseModalities"]);y!=null&&f(e,["responseModalities"],y);let A=l(t,["responseSchema"]);A!=null&&f(e,["responseSchema"],A);let S=l(t,["routingConfig"]);S!=null&&f(e,["routingConfig"],S);let b=l(t,["seed"]);b!=null&&f(e,["seed"],b);let P=l(t,["speechConfig"]);P!=null&&f(e,["speechConfig"],P);let B=l(t,["stopSequences"]);B!=null&&f(e,["stopSequences"],B);let v=l(t,["temperature"]);v!=null&&f(e,["temperature"],v);let I=l(t,["thinkingConfig"]);I!=null&&f(e,["thinkingConfig"],I);let O=l(t,["topK"]);O!=null&&f(e,["topK"],O);let z=l(t,["topP"]);if(z!=null&&f(e,["topP"],z),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Yj(t){let e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=l(t,["enableWidget"]);return r!=null&&f(e,["enableWidget"],r),e}function Jj(t){let e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=l(t,["timeRangeFilter"]);return r!=null&&f(e,["timeRangeFilter"],r),e}function Xj(t,e){let r={},n=l(t,["generationConfig"]);e!==void 0&&n!=null&&f(e,["setup","generationConfig"],n);let o=l(t,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);let i=l(t,["temperature"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","temperature"],i);let s=l(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);let u=l(t,["topK"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topK"],u);let a=l(t,["maxOutputTokens"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","maxOutputTokens"],a);let c=l(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);let d=l(t,["seed"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","seed"],d);let p=l(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],dS(p));let m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);let E=l(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],E);let y=l(t,["systemInstruction"]);e!==void 0&&y!=null&&f(e,["setup","systemInstruction"],Hj(Cr(y)));let A=l(t,["tools"]);if(e!==void 0&&A!=null){let O=vc(A);Array.isArray(O)&&(O=O.map(z=>aK(bc(z)))),f(e,["setup","tools"],O)}let S=l(t,["sessionResumption"]);e!==void 0&&S!=null&&f(e,["setup","sessionResumption"],uK(S));let b=l(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&f(e,["setup","inputAudioTranscription"],b);let P=l(t,["outputAudioTranscription"]);e!==void 0&&P!=null&&f(e,["setup","outputAudioTranscription"],P);let B=l(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&f(e,["setup","realtimeInputConfig"],B);let v=l(t,["contextWindowCompression"]);e!==void 0&&v!=null&&f(e,["setup","contextWindowCompression"],v);let I=l(t,["proactivity"]);if(e!==void 0&&I!=null&&f(e,["setup","proactivity"],I),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return r}function Qj(t,e){let r={},n=l(t,["generationConfig"]);e!==void 0&&n!=null&&f(e,["setup","generationConfig"],Kj(n));let o=l(t,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);let i=l(t,["temperature"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","temperature"],i);let s=l(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);let u=l(t,["topK"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topK"],u);let a=l(t,["maxOutputTokens"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","maxOutputTokens"],a);let c=l(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);let d=l(t,["seed"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","seed"],d);let p=l(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],dS(p));let m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);let E=l(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],E);let y=l(t,["systemInstruction"]);e!==void 0&&y!=null&&f(e,["setup","systemInstruction"],Cr(y));let A=l(t,["tools"]);if(e!==void 0&&A!=null){let z=vc(A);Array.isArray(z)&&(z=z.map(Z=>cK(bc(Z)))),f(e,["setup","tools"],z)}let S=l(t,["sessionResumption"]);e!==void 0&&S!=null&&f(e,["setup","sessionResumption"],S);let b=l(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&f(e,["setup","inputAudioTranscription"],b);let P=l(t,["outputAudioTranscription"]);e!==void 0&&P!=null&&f(e,["setup","outputAudioTranscription"],P);let B=l(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&f(e,["setup","realtimeInputConfig"],B);let v=l(t,["contextWindowCompression"]);e!==void 0&&v!=null&&f(e,["setup","contextWindowCompression"],v);let I=l(t,["proactivity"]);e!==void 0&&I!=null&&f(e,["setup","proactivity"],I);let O=l(t,["explicitVadSignal"]);return e!==void 0&&O!=null&&f(e,["setup","explicitVadSignal"],O),r}function Zj(t,e){let r={},n=l(e,["model"]);n!=null&&f(r,["setup","model"],je(t,n));let o=l(e,["config"]);return o!=null&&f(r,["config"],Xj(o,r)),r}function eK(t,e){let r={},n=l(e,["model"]);n!=null&&f(r,["setup","model"],je(t,n));let o=l(e,["config"]);return o!=null&&f(r,["config"],Qj(o,r)),r}function tK(t){let e={},r=l(t,["musicGenerationConfig"]);return r!=null&&f(e,["musicGenerationConfig"],r),e}function rK(t){let e={},r=l(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(o=>o)),f(e,["weightedPrompts"],n)}return e}function nK(t){let e={},r=l(t,["media"]);if(r!=null){let c=k5(r);Array.isArray(c)&&(c=c.map(d=>Np(d))),f(e,["mediaChunks"],c)}let n=l(t,["audio"]);n!=null&&f(e,["audio"],Np(U5(n)));let o=l(t,["audioStreamEnd"]);o!=null&&f(e,["audioStreamEnd"],o);let i=l(t,["video"]);i!=null&&f(e,["video"],Np(L5(i)));let s=l(t,["text"]);s!=null&&f(e,["text"],s);let u=l(t,["activityStart"]);u!=null&&f(e,["activityStart"],u);let a=l(t,["activityEnd"]);return a!=null&&f(e,["activityEnd"],a),e}function oK(t){let e={},r=l(t,["media"]);if(r!=null){let c=k5(r);Array.isArray(c)&&(c=c.map(d=>d)),f(e,["mediaChunks"],c)}let n=l(t,["audio"]);n!=null&&f(e,["audio"],U5(n));let o=l(t,["audioStreamEnd"]);o!=null&&f(e,["audioStreamEnd"],o);let i=l(t,["video"]);i!=null&&f(e,["video"],L5(i));let s=l(t,["text"]);s!=null&&f(e,["text"],s);let u=l(t,["activityStart"]);u!=null&&f(e,["activityStart"],u);let a=l(t,["activityEnd"]);return a!=null&&f(e,["activityEnd"],a),e}function iK(t){let e={},r=l(t,["setupComplete"]);r!=null&&f(e,["setupComplete"],r);let n=l(t,["serverContent"]);n!=null&&f(e,["serverContent"],n);let o=l(t,["toolCall"]);o!=null&&f(e,["toolCall"],o);let i=l(t,["toolCallCancellation"]);i!=null&&f(e,["toolCallCancellation"],i);let s=l(t,["usageMetadata"]);s!=null&&f(e,["usageMetadata"],lK(s));let u=l(t,["goAway"]);u!=null&&f(e,["goAway"],u);let a=l(t,["sessionResumptionUpdate"]);a!=null&&f(e,["sessionResumptionUpdate"],a);let c=l(t,["voiceActivityDetectionSignal"]);c!=null&&f(e,["voiceActivityDetectionSignal"],c);let d=l(t,["voiceActivity"]);return d!=null&&f(e,["voiceActivity"],dK(d)),e}function sK(t){let e={},r=l(t,["mediaResolution"]);r!=null&&f(e,["mediaResolution"],r);let n=l(t,["codeExecutionResult"]);n!=null&&f(e,["codeExecutionResult"],n);let o=l(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);let i=l(t,["fileData"]);i!=null&&f(e,["fileData"],Wj(i));let s=l(t,["functionCall"]);s!=null&&f(e,["functionCall"],zj(s));let u=l(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);let a=l(t,["inlineData"]);a!=null&&f(e,["inlineData"],Np(a));let c=l(t,["text"]);c!=null&&f(e,["text"],c);let d=l(t,["thought"]);d!=null&&f(e,["thought"],d);let p=l(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);let m=l(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function uK(t){let e={},r=l(t,["handle"]);if(r!=null&&f(e,["handle"],r),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function aK(t){let e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=l(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);let n=l(t,["fileSearch"]);n!=null&&f(e,["fileSearch"],n);let o=l(t,["codeExecution"]);if(o!=null&&f(e,["codeExecution"],o),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let i=l(t,["functionDeclarations"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(p=>p)),f(e,["functionDeclarations"],d)}let s=l(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],Yj(s));let u=l(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],Jj(u));let a=l(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);let c=l(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function cK(t){let e={},r=l(t,["retrieval"]);r!=null&&f(e,["retrieval"],r);let n=l(t,["computerUse"]);if(n!=null&&f(e,["computerUse"],n),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=l(t,["codeExecution"]);o!=null&&f(e,["codeExecution"],o);let i=l(t,["enterpriseWebSearch"]);i!=null&&f(e,["enterpriseWebSearch"],i);let s=l(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>jj(m))),f(e,["functionDeclarations"],p)}let u=l(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],u);let a=l(t,["googleSearch"]);a!=null&&f(e,["googleSearch"],a);let c=l(t,["googleSearchRetrieval"]);c!=null&&f(e,["googleSearchRetrieval"],c);let d=l(t,["urlContext"]);return d!=null&&f(e,["urlContext"],d),e}function lK(t){let e={},r=l(t,["promptTokenCount"]);r!=null&&f(e,["promptTokenCount"],r);let n=l(t,["cachedContentTokenCount"]);n!=null&&f(e,["cachedContentTokenCount"],n);let o=l(t,["candidatesTokenCount"]);o!=null&&f(e,["responseTokenCount"],o);let i=l(t,["toolUsePromptTokenCount"]);i!=null&&f(e,["toolUsePromptTokenCount"],i);let s=l(t,["thoughtsTokenCount"]);s!=null&&f(e,["thoughtsTokenCount"],s);let u=l(t,["totalTokenCount"]);u!=null&&f(e,["totalTokenCount"],u);let a=l(t,["promptTokensDetails"]);if(a!=null){let E=a;Array.isArray(E)&&(E=E.map(y=>y)),f(e,["promptTokensDetails"],E)}let c=l(t,["cacheTokensDetails"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(y=>y)),f(e,["cacheTokensDetails"],E)}let d=l(t,["candidatesTokensDetails"]);if(d!=null){let E=d;Array.isArray(E)&&(E=E.map(y=>y)),f(e,["responseTokensDetails"],E)}let p=l(t,["toolUsePromptTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(y=>y)),f(e,["toolUsePromptTokensDetails"],E)}let m=l(t,["trafficType"]);return m!=null&&f(e,["trafficType"],m),e}function dK(t){let e={},r=l(t,["type"]);return r!=null&&f(e,["voiceActivityType"],r),e}function fK(t,e){let r={},n=l(t,["data"]);if(n!=null&&f(r,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=l(t,["mimeType"]);return o!=null&&f(r,["mimeType"],o),r}function hK(t,e){let r={},n=l(t,["content"]);n!=null&&f(r,["content"],n);let o=l(t,["citationMetadata"]);o!=null&&f(r,["citationMetadata"],pK(o));let i=l(t,["tokenCount"]);i!=null&&f(r,["tokenCount"],i);let s=l(t,["finishReason"]);s!=null&&f(r,["finishReason"],s);let u=l(t,["avgLogprobs"]);u!=null&&f(r,["avgLogprobs"],u);let a=l(t,["groundingMetadata"]);a!=null&&f(r,["groundingMetadata"],a);let c=l(t,["index"]);c!=null&&f(r,["index"],c);let d=l(t,["logprobsResult"]);d!=null&&f(r,["logprobsResult"],d);let p=l(t,["safetyRatings"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(y=>y)),f(r,["safetyRatings"],E)}let m=l(t,["urlContextMetadata"]);return m!=null&&f(r,["urlContextMetadata"],m),r}function pK(t,e){let r={},n=l(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),f(r,["citations"],o)}return r}function mK(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["contents"]);if(i!=null){let s=zn(i);Array.isArray(s)&&(s=s.map(u=>u)),f(n,["contents"],s)}return n}function gK(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["tokensInfo"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),f(r,["tokensInfo"],i)}return r}function EK(t,e){let r={},n=l(t,["values"]);n!=null&&f(r,["values"],n);let o=l(t,["statistics"]);return o!=null&&f(r,["statistics"],yK(o)),r}function yK(t,e){let r={},n=l(t,["truncated"]);n!=null&&f(r,["truncated"],n);let o=l(t,["token_count"]);return o!=null&&f(r,["tokenCount"],o),r}function l0(t,e){let r={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>OY(s))),f(r,["parts"],i)}let o=l(t,["role"]);return o!=null&&f(r,["role"],o),r}function CK(t,e){let r={},n=l(t,["controlType"]);n!=null&&f(r,["controlType"],n);let o=l(t,["enableControlImageComputation"]);return o!=null&&f(r,["computeControl"],o),r}function AK(t,e){let r={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return r}function SK(t,e,r){let n={},o=l(t,["systemInstruction"]);e!==void 0&&o!=null&&f(e,["systemInstruction"],Cr(o));let i=l(t,["tools"]);if(e!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(a=>eD(a))),f(e,["tools"],u)}let s=l(t,["generationConfig"]);return e!==void 0&&s!=null&&f(e,["generationConfig"],fY(s)),n}function _K(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["contents"]);if(i!=null){let u=zn(i);Array.isArray(u)&&(u=u.map(a=>l0(a))),f(n,["contents"],u)}let s=l(e,["config"]);return s!=null&&AK(s),n}function wK(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["contents"]);if(i!=null){let u=zn(i);Array.isArray(u)&&(u=u.map(a=>a)),f(n,["contents"],u)}let s=l(e,["config"]);return s!=null&&SK(s,n),n}function TK(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["totalTokens"]);o!=null&&f(r,["totalTokens"],o);let i=l(t,["cachedContentTokenCount"]);return i!=null&&f(r,["cachedContentTokenCount"],i),r}function bK(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["totalTokens"]);return o!=null&&f(r,["totalTokens"],o),r}function vK(t,e,r){let n={},o=l(e,["model"]);return o!=null&&f(n,["_url","name"],je(t,o)),n}function OK(t,e,r){let n={},o=l(e,["model"]);return o!=null&&f(n,["_url","name"],je(t,o)),n}function RK(t,e){let r={},n=l(t,["sdkHttpResponse"]);return n!=null&&f(r,["sdkHttpResponse"],n),r}function DK(t,e){let r={},n=l(t,["sdkHttpResponse"]);return n!=null&&f(r,["sdkHttpResponse"],n),r}function IK(t,e,r){let n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);let i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);let s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);let u=l(t,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);let a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);let c=l(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);let d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&f(e,["parameters","safetySetting"],d);let p=l(t,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);let m=l(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);let E=l(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);let y=l(t,["language"]);e!==void 0&&y!=null&&f(e,["parameters","language"],y);let A=l(t,["outputMimeType"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","mimeType"],A);let S=l(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S);let b=l(t,["addWatermark"]);e!==void 0&&b!=null&&f(e,["parameters","addWatermark"],b);let P=l(t,["labels"]);e!==void 0&&P!=null&&f(e,["labels"],P);let B=l(t,["editMode"]);e!==void 0&&B!=null&&f(e,["parameters","editMode"],B);let v=l(t,["baseSteps"]);return e!==void 0&&v!=null&&f(e,["parameters","editConfig","baseSteps"],v),n}function MK(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);let s=l(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>BY(c))),f(n,["instances[0]","referenceImages"],a)}let u=l(e,["config"]);return u!=null&&IK(u,n),n}function NK(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>d0(s))),f(r,["generatedImages"],i)}return r}function BK(t,e,r){let n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&f(e,["requests[]","taskType"],o);let i=l(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);let s=l(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function PK(t,e,r){let n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&f(e,["instances[]","task_type"],o);let i=l(t,["title"]);e!==void 0&&i!=null&&f(e,["instances[]","title"],i);let s=l(t,["outputDimensionality"]);e!==void 0&&s!=null&&f(e,["parameters","outputDimensionality"],s);let u=l(t,["mimeType"]);e!==void 0&&u!=null&&f(e,["instances[]","mimeType"],u);let a=l(t,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),n}function FK(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["contents"]);if(i!=null){let a=aS(t,i);Array.isArray(a)&&(a=a.map(c=>c)),f(n,["requests[]","content"],a)}let s=l(e,["config"]);s!=null&&BK(s,n);let u=l(e,["model"]);return u!==void 0&&f(n,["requests[]","model"],je(t,u)),n}function xK(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["contents"]);if(i!=null){let u=aS(t,i);Array.isArray(u)&&(u=u.map(a=>a)),f(n,["instances[]","content"],u)}let s=l(e,["config"]);return s!=null&&PK(s,n),n}function kK(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>u)),f(r,["embeddings"],s)}let i=l(t,["metadata"]);return i!=null&&f(r,["metadata"],i),r}function LK(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["predictions[]","embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>EK(u))),f(r,["embeddings"],s)}let i=l(t,["metadata"]);return i!=null&&f(r,["metadata"],i),r}function UK(t,e){let r={},n=l(t,["endpoint"]);n!=null&&f(r,["name"],n);let o=l(t,["deployedModelId"]);return o!=null&&f(r,["deployedModelId"],o),r}function qK(t,e){let r={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=l(t,["fileUri"]);n!=null&&f(r,["fileUri"],n);let o=l(t,["mimeType"]);return o!=null&&f(r,["mimeType"],o),r}function GK(t,e){let r={},n=l(t,["id"]);n!=null&&f(r,["id"],n);let o=l(t,["args"]);o!=null&&f(r,["args"],o);let i=l(t,["name"]);if(i!=null&&f(r,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return r}function VK(t,e){let r={},n=l(t,["allowedFunctionNames"]);n!=null&&f(r,["allowedFunctionNames"],n);let o=l(t,["mode"]);if(o!=null&&f(r,["mode"],o),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return r}function $K(t,e){let r={},n=l(t,["description"]);n!=null&&f(r,["description"],n);let o=l(t,["name"]);o!=null&&f(r,["name"],o);let i=l(t,["parameters"]);i!=null&&f(r,["parameters"],i);let s=l(t,["parametersJsonSchema"]);s!=null&&f(r,["parametersJsonSchema"],s);let u=l(t,["response"]);u!=null&&f(r,["response"],u);let a=l(t,["responseJsonSchema"]);if(a!=null&&f(r,["responseJsonSchema"],a),l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return r}function HK(t,e,r,n){let o={},i=l(e,["systemInstruction"]);r!==void 0&&i!=null&&f(r,["systemInstruction"],l0(Cr(i)));let s=l(e,["temperature"]);s!=null&&f(o,["temperature"],s);let u=l(e,["topP"]);u!=null&&f(o,["topP"],u);let a=l(e,["topK"]);a!=null&&f(o,["topK"],a);let c=l(e,["candidateCount"]);c!=null&&f(o,["candidateCount"],c);let d=l(e,["maxOutputTokens"]);d!=null&&f(o,["maxOutputTokens"],d);let p=l(e,["stopSequences"]);p!=null&&f(o,["stopSequences"],p);let m=l(e,["responseLogprobs"]);m!=null&&f(o,["responseLogprobs"],m);let E=l(e,["logprobs"]);E!=null&&f(o,["logprobs"],E);let y=l(e,["presencePenalty"]);y!=null&&f(o,["presencePenalty"],y);let A=l(e,["frequencyPenalty"]);A!=null&&f(o,["frequencyPenalty"],A);let S=l(e,["seed"]);S!=null&&f(o,["seed"],S);let b=l(e,["responseMimeType"]);b!=null&&f(o,["responseMimeType"],b);let P=l(e,["responseSchema"]);P!=null&&f(o,["responseSchema"],cS(P));let B=l(e,["responseJsonSchema"]);if(B!=null&&f(o,["responseJsonSchema"],B),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let v=l(e,["safetySettings"]);if(r!==void 0&&v!=null){let ue=v;Array.isArray(ue)&&(ue=ue.map(Be=>PY(Be))),f(r,["safetySettings"],ue)}let I=l(e,["tools"]);if(r!==void 0&&I!=null){let ue=vc(I);Array.isArray(ue)&&(ue=ue.map(Be=>GY(bc(Be)))),f(r,["tools"],ue)}let O=l(e,["toolConfig"]);if(r!==void 0&&O!=null&&f(r,["toolConfig"],qY(O)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let z=l(e,["cachedContent"]);r!==void 0&&z!=null&&f(r,["cachedContent"],qi(t,z));let Z=l(e,["responseModalities"]);Z!=null&&f(o,["responseModalities"],Z);let M=l(e,["mediaResolution"]);M!=null&&f(o,["mediaResolution"],M);let V=l(e,["speechConfig"]);if(V!=null&&f(o,["speechConfig"],lS(V)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let Y=l(e,["thinkingConfig"]);Y!=null&&f(o,["thinkingConfig"],Y);let te=l(e,["imageConfig"]);te!=null&&f(o,["imageConfig"],EY(te));let le=l(e,["enableEnhancedCivicAnswers"]);if(le!=null&&f(o,["enableEnhancedCivicAnswers"],le),l(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function WK(t,e,r,n){let o={},i=l(e,["systemInstruction"]);r!==void 0&&i!=null&&f(r,["systemInstruction"],Cr(i));let s=l(e,["temperature"]);s!=null&&f(o,["temperature"],s);let u=l(e,["topP"]);u!=null&&f(o,["topP"],u);let a=l(e,["topK"]);a!=null&&f(o,["topK"],a);let c=l(e,["candidateCount"]);c!=null&&f(o,["candidateCount"],c);let d=l(e,["maxOutputTokens"]);d!=null&&f(o,["maxOutputTokens"],d);let p=l(e,["stopSequences"]);p!=null&&f(o,["stopSequences"],p);let m=l(e,["responseLogprobs"]);m!=null&&f(o,["responseLogprobs"],m);let E=l(e,["logprobs"]);E!=null&&f(o,["logprobs"],E);let y=l(e,["presencePenalty"]);y!=null&&f(o,["presencePenalty"],y);let A=l(e,["frequencyPenalty"]);A!=null&&f(o,["frequencyPenalty"],A);let S=l(e,["seed"]);S!=null&&f(o,["seed"],S);let b=l(e,["responseMimeType"]);b!=null&&f(o,["responseMimeType"],b);let P=l(e,["responseSchema"]);P!=null&&f(o,["responseSchema"],cS(P));let B=l(e,["responseJsonSchema"]);B!=null&&f(o,["responseJsonSchema"],B);let v=l(e,["routingConfig"]);v!=null&&f(o,["routingConfig"],v);let I=l(e,["modelSelectionConfig"]);I!=null&&f(o,["modelConfig"],I);let O=l(e,["safetySettings"]);if(r!==void 0&&O!=null){let _t=O;Array.isArray(_t)&&(_t=_t.map(Ut=>Ut)),f(r,["safetySettings"],_t)}let z=l(e,["tools"]);if(r!==void 0&&z!=null){let _t=vc(z);Array.isArray(_t)&&(_t=_t.map(Ut=>eD(bc(Ut)))),f(r,["tools"],_t)}let Z=l(e,["toolConfig"]);r!==void 0&&Z!=null&&f(r,["toolConfig"],Z);let M=l(e,["labels"]);r!==void 0&&M!=null&&f(r,["labels"],M);let V=l(e,["cachedContent"]);r!==void 0&&V!=null&&f(r,["cachedContent"],qi(t,V));let Y=l(e,["responseModalities"]);Y!=null&&f(o,["responseModalities"],Y);let te=l(e,["mediaResolution"]);te!=null&&f(o,["mediaResolution"],te);let le=l(e,["speechConfig"]);le!=null&&f(o,["speechConfig"],lS(le));let ue=l(e,["audioTimestamp"]);ue!=null&&f(o,["audioTimestamp"],ue);let Be=l(e,["thinkingConfig"]);Be!=null&&f(o,["thinkingConfig"],Be);let tt=l(e,["imageConfig"]);if(tt!=null&&f(o,["imageConfig"],yY(tt)),l(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let dt=l(e,["modelArmorConfig"]);return r!==void 0&&dt!=null&&f(r,["modelArmorConfig"],dt),o}function h5(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["contents"]);if(i!=null){let u=zn(i);Array.isArray(u)&&(u=u.map(a=>l0(a))),f(n,["contents"],u)}let s=l(e,["config"]);return s!=null&&f(n,["generationConfig"],HK(t,s,n)),n}function p5(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["contents"]);if(i!=null){let u=zn(i);Array.isArray(u)&&(u=u.map(a=>a)),f(n,["contents"],u)}let s=l(e,["config"]);return s!=null&&f(n,["generationConfig"],WK(t,s,n)),n}function m5(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>hK(d))),f(r,["candidates"],c)}let i=l(t,["modelVersion"]);i!=null&&f(r,["modelVersion"],i);let s=l(t,["promptFeedback"]);s!=null&&f(r,["promptFeedback"],s);let u=l(t,["responseId"]);u!=null&&f(r,["responseId"],u);let a=l(t,["usageMetadata"]);return a!=null&&f(r,["usageMetadata"],a),r}function g5(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(p=>p)),f(r,["candidates"],d)}let i=l(t,["createTime"]);i!=null&&f(r,["createTime"],i);let s=l(t,["modelVersion"]);s!=null&&f(r,["modelVersion"],s);let u=l(t,["promptFeedback"]);u!=null&&f(r,["promptFeedback"],u);let a=l(t,["responseId"]);a!=null&&f(r,["responseId"],a);let c=l(t,["usageMetadata"]);return c!=null&&f(r,["usageMetadata"],c),r}function zK(t,e,r){let n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);let i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&f(e,["parameters","aspectRatio"],i);let s=l(t,["guidanceScale"]);if(e!==void 0&&s!=null&&f(e,["parameters","guidanceScale"],s),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let u=l(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);let a=l(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);let c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&f(e,["parameters","includeSafetyAttributes"],c);let d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&f(e,["parameters","includeRaiReason"],d);let p=l(t,["language"]);e!==void 0&&p!=null&&f(e,["parameters","language"],p);let m=l(t,["outputMimeType"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","mimeType"],m);let E=l(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let y=l(t,["imageSize"]);if(e!==void 0&&y!=null&&f(e,["parameters","sampleImageSize"],y),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function jK(t,e,r){let n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);let i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);let s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);let u=l(t,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);let a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);let c=l(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);let d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&f(e,["parameters","safetySetting"],d);let p=l(t,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);let m=l(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&f(e,["parameters","includeSafetyAttributes"],m);let E=l(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);let y=l(t,["language"]);e!==void 0&&y!=null&&f(e,["parameters","language"],y);let A=l(t,["outputMimeType"]);e!==void 0&&A!=null&&f(e,["parameters","outputOptions","mimeType"],A);let S=l(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&f(e,["parameters","outputOptions","compressionQuality"],S);let b=l(t,["addWatermark"]);e!==void 0&&b!=null&&f(e,["parameters","addWatermark"],b);let P=l(t,["labels"]);e!==void 0&&P!=null&&f(e,["labels"],P);let B=l(t,["imageSize"]);e!==void 0&&B!=null&&f(e,["parameters","sampleImageSize"],B);let v=l(t,["enhancePrompt"]);return e!==void 0&&v!=null&&f(e,["parameters","enhancePrompt"],v),n}function KK(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);let s=l(e,["config"]);return s!=null&&zK(s,n),n}function YK(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);let s=l(e,["config"]);return s!=null&&jK(s,n),n}function JK(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>aY(u))),f(r,["generatedImages"],s)}let i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&f(r,["positivePromptSafetyAttributes"],Q5(i)),r}function XK(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>d0(u))),f(r,["generatedImages"],s)}let i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&f(r,["positivePromptSafetyAttributes"],Z5(i)),r}function QK(t,e,r){let n={},o=l(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let i=l(t,["durationSeconds"]);if(e!==void 0&&i!=null&&f(e,["parameters","durationSeconds"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);let u=l(t,["resolution"]);e!==void 0&&u!=null&&f(e,["parameters","resolution"],u);let a=l(t,["personGeneration"]);if(e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let c=l(t,["negativePrompt"]);e!==void 0&&c!=null&&f(e,["parameters","negativePrompt"],c);let d=l(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&f(e,["parameters","enhancePrompt"],d),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let p=l(t,["lastFrame"]);e!==void 0&&p!=null&&f(e,["instances[0]","lastFrame"],f0(p));let m=l(t,["referenceImages"]);if(e!==void 0&&m!=null){let E=m;Array.isArray(E)&&(E=E.map(y=>eJ(y))),f(e,["instances[0]","referenceImages"],E)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function ZK(t,e,r){let n={},o=l(t,["numberOfVideos"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);let i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);let s=l(t,["fps"]);e!==void 0&&s!=null&&f(e,["parameters","fps"],s);let u=l(t,["durationSeconds"]);e!==void 0&&u!=null&&f(e,["parameters","durationSeconds"],u);let a=l(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);let c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);let d=l(t,["resolution"]);e!==void 0&&d!=null&&f(e,["parameters","resolution"],d);let p=l(t,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);let m=l(t,["pubsubTopic"]);e!==void 0&&m!=null&&f(e,["parameters","pubsubTopic"],m);let E=l(t,["negativePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","negativePrompt"],E);let y=l(t,["enhancePrompt"]);e!==void 0&&y!=null&&f(e,["parameters","enhancePrompt"],y);let A=l(t,["generateAudio"]);e!==void 0&&A!=null&&f(e,["parameters","generateAudio"],A);let S=l(t,["lastFrame"]);e!==void 0&&S!=null&&f(e,["instances[0]","lastFrame"],bo(S));let b=l(t,["referenceImages"]);if(e!==void 0&&b!=null){let v=b;Array.isArray(v)&&(v=v.map(I=>tJ(I))),f(e,["instances[0]","referenceImages"],v)}let P=l(t,["mask"]);e!==void 0&&P!=null&&f(e,["instances[0]","mask"],ZY(P));let B=l(t,["compressionQuality"]);return e!==void 0&&B!=null&&f(e,["parameters","compressionQuality"],B),n}function eY(t,e){let r={},n=l(t,["name"]);n!=null&&f(r,["name"],n);let o=l(t,["metadata"]);o!=null&&f(r,["metadata"],o);let i=l(t,["done"]);i!=null&&f(r,["done"],i);let s=l(t,["error"]);s!=null&&f(r,["error"],s);let u=l(t,["response","generateVideoResponse"]);return u!=null&&f(r,["response"],oY(u)),r}function tY(t,e){let r={},n=l(t,["name"]);n!=null&&f(r,["name"],n);let o=l(t,["metadata"]);o!=null&&f(r,["metadata"],o);let i=l(t,["done"]);i!=null&&f(r,["done"],i);let s=l(t,["error"]);s!=null&&f(r,["error"],s);let u=l(t,["response"]);return u!=null&&f(r,["response"],iY(u)),r}function rY(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);let s=l(e,["image"]);s!=null&&f(n,["instances[0]","image"],f0(s));let u=l(e,["video"]);u!=null&&f(n,["instances[0]","video"],tD(u));let a=l(e,["source"]);a!=null&&sY(a,n);let c=l(e,["config"]);return c!=null&&QK(c,n),n}function nY(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);let s=l(e,["image"]);s!=null&&f(n,["instances[0]","image"],bo(s));let u=l(e,["video"]);u!=null&&f(n,["instances[0]","video"],rD(u));let a=l(e,["source"]);a!=null&&uY(a,n);let c=l(e,["config"]);return c!=null&&ZK(c,n),n}function oY(t,e){let r={},n=l(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(u=>lY(u))),f(r,["generatedVideos"],s)}let o=l(t,["raiMediaFilteredCount"]);o!=null&&f(r,["raiMediaFilteredCount"],o);let i=l(t,["raiMediaFilteredReasons"]);return i!=null&&f(r,["raiMediaFilteredReasons"],i),r}function iY(t,e){let r={},n=l(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(u=>dY(u))),f(r,["generatedVideos"],s)}let o=l(t,["raiMediaFilteredCount"]);o!=null&&f(r,["raiMediaFilteredCount"],o);let i=l(t,["raiMediaFilteredReasons"]);return i!=null&&f(r,["raiMediaFilteredReasons"],i),r}function sY(t,e,r){let n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);let i=l(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],f0(i));let s=l(t,["video"]);return e!==void 0&&s!=null&&f(e,["instances[0]","video"],tD(s)),n}function uY(t,e,r){let n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);let i=l(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],bo(i));let s=l(t,["video"]);return e!==void 0&&s!=null&&f(e,["instances[0]","video"],rD(s)),n}function aY(t,e){let r={},n=l(t,["_self"]);n!=null&&f(r,["image"],CY(n));let o=l(t,["raiFilteredReason"]);o!=null&&f(r,["raiFilteredReason"],o);let i=l(t,["_self"]);return i!=null&&f(r,["safetyAttributes"],Q5(i)),r}function d0(t,e){let r={},n=l(t,["_self"]);n!=null&&f(r,["image"],X5(n));let o=l(t,["raiFilteredReason"]);o!=null&&f(r,["raiFilteredReason"],o);let i=l(t,["_self"]);i!=null&&f(r,["safetyAttributes"],Z5(i));let s=l(t,["prompt"]);return s!=null&&f(r,["enhancedPrompt"],s),r}function cY(t,e){let r={},n=l(t,["_self"]);n!=null&&f(r,["mask"],X5(n));let o=l(t,["labels"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),f(r,["labels"],i)}return r}function lY(t,e){let r={},n=l(t,["video"]);return n!=null&&f(r,["video"],XY(n)),r}function dY(t,e){let r={},n=l(t,["_self"]);return n!=null&&f(r,["video"],QY(n)),r}function fY(t,e){let r={},n=l(t,["modelSelectionConfig"]);n!=null&&f(r,["modelConfig"],n);let o=l(t,["responseJsonSchema"]);o!=null&&f(r,["responseJsonSchema"],o);let i=l(t,["audioTimestamp"]);i!=null&&f(r,["audioTimestamp"],i);let s=l(t,["candidateCount"]);s!=null&&f(r,["candidateCount"],s);let u=l(t,["enableAffectiveDialog"]);u!=null&&f(r,["enableAffectiveDialog"],u);let a=l(t,["frequencyPenalty"]);a!=null&&f(r,["frequencyPenalty"],a);let c=l(t,["logprobs"]);c!=null&&f(r,["logprobs"],c);let d=l(t,["maxOutputTokens"]);d!=null&&f(r,["maxOutputTokens"],d);let p=l(t,["mediaResolution"]);p!=null&&f(r,["mediaResolution"],p);let m=l(t,["presencePenalty"]);m!=null&&f(r,["presencePenalty"],m);let E=l(t,["responseLogprobs"]);E!=null&&f(r,["responseLogprobs"],E);let y=l(t,["responseMimeType"]);y!=null&&f(r,["responseMimeType"],y);let A=l(t,["responseModalities"]);A!=null&&f(r,["responseModalities"],A);let S=l(t,["responseSchema"]);S!=null&&f(r,["responseSchema"],S);let b=l(t,["routingConfig"]);b!=null&&f(r,["routingConfig"],b);let P=l(t,["seed"]);P!=null&&f(r,["seed"],P);let B=l(t,["speechConfig"]);B!=null&&f(r,["speechConfig"],B);let v=l(t,["stopSequences"]);v!=null&&f(r,["stopSequences"],v);let I=l(t,["temperature"]);I!=null&&f(r,["temperature"],I);let O=l(t,["thinkingConfig"]);O!=null&&f(r,["thinkingConfig"],O);let z=l(t,["topK"]);z!=null&&f(r,["topK"],z);let Z=l(t,["topP"]);if(Z!=null&&f(r,["topP"],Z),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function hY(t,e,r){let n={},o=l(e,["model"]);return o!=null&&f(n,["_url","name"],je(t,o)),n}function pY(t,e,r){let n={},o=l(e,["model"]);return o!=null&&f(n,["_url","name"],je(t,o)),n}function mY(t,e){let r={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=l(t,["enableWidget"]);return n!=null&&f(r,["enableWidget"],n),r}function gY(t,e){let r={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=l(t,["timeRangeFilter"]);return n!=null&&f(r,["timeRangeFilter"],n),r}function EY(t,e){let r={},n=l(t,["aspectRatio"]);n!=null&&f(r,["aspectRatio"],n);let o=l(t,["imageSize"]);if(o!=null&&f(r,["imageSize"],o),l(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return r}function yY(t,e){let r={},n=l(t,["aspectRatio"]);n!=null&&f(r,["aspectRatio"],n);let o=l(t,["imageSize"]);o!=null&&f(r,["imageSize"],o);let i=l(t,["personGeneration"]);i!=null&&f(r,["personGeneration"],i);let s=l(t,["outputMimeType"]);s!=null&&f(r,["imageOutputOptions","mimeType"],s);let u=l(t,["outputCompressionQuality"]);return u!=null&&f(r,["imageOutputOptions","compressionQuality"],u),r}function CY(t,e){let r={},n=l(t,["bytesBase64Encoded"]);n!=null&&f(r,["imageBytes"],Ds(n));let o=l(t,["mimeType"]);return o!=null&&f(r,["mimeType"],o),r}function X5(t,e){let r={},n=l(t,["gcsUri"]);n!=null&&f(r,["gcsUri"],n);let o=l(t,["bytesBase64Encoded"]);o!=null&&f(r,["imageBytes"],Ds(o));let i=l(t,["mimeType"]);return i!=null&&f(r,["mimeType"],i),r}function f0(t,e){let r={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=l(t,["imageBytes"]);n!=null&&f(r,["bytesBase64Encoded"],Ds(n));let o=l(t,["mimeType"]);return o!=null&&f(r,["mimeType"],o),r}function bo(t,e){let r={},n=l(t,["gcsUri"]);n!=null&&f(r,["gcsUri"],n);let o=l(t,["imageBytes"]);o!=null&&f(r,["bytesBase64Encoded"],Ds(o));let i=l(t,["mimeType"]);return i!=null&&f(r,["mimeType"],i),r}function AY(t,e,r,n){let o={},i=l(e,["pageSize"]);r!==void 0&&i!=null&&f(r,["_query","pageSize"],i);let s=l(e,["pageToken"]);r!==void 0&&s!=null&&f(r,["_query","pageToken"],s);let u=l(e,["filter"]);r!==void 0&&u!=null&&f(r,["_query","filter"],u);let a=l(e,["queryBase"]);return r!==void 0&&a!=null&&f(r,["_url","models_url"],H5(t,a)),o}function SY(t,e,r,n){let o={},i=l(e,["pageSize"]);r!==void 0&&i!=null&&f(r,["_query","pageSize"],i);let s=l(e,["pageToken"]);r!==void 0&&s!=null&&f(r,["_query","pageToken"],s);let u=l(e,["filter"]);r!==void 0&&u!=null&&f(r,["_query","filter"],u);let a=l(e,["queryBase"]);return r!==void 0&&a!=null&&f(r,["_url","models_url"],H5(t,a)),o}function _Y(t,e,r){let n={},o=l(e,["config"]);return o!=null&&AY(t,o,n),n}function wY(t,e,r){let n={},o=l(e,["config"]);return o!=null&&SY(t,o,n),n}function TY(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["nextPageToken"]);o!=null&&f(r,["nextPageToken"],o);let i=l(t,["_self"]);if(i!=null){let s=W5(i);Array.isArray(s)&&(s=s.map(u=>MA(u))),f(r,["models"],s)}return r}function bY(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["nextPageToken"]);o!=null&&f(r,["nextPageToken"],o);let i=l(t,["_self"]);if(i!=null){let s=W5(i);Array.isArray(s)&&(s=s.map(u=>NA(u))),f(r,["models"],s)}return r}function vY(t,e){let r={},n=l(t,["maskMode"]);n!=null&&f(r,["maskMode"],n);let o=l(t,["segmentationClasses"]);o!=null&&f(r,["maskClasses"],o);let i=l(t,["maskDilation"]);return i!=null&&f(r,["dilation"],i),r}function MA(t,e){let r={},n=l(t,["name"]);n!=null&&f(r,["name"],n);let o=l(t,["displayName"]);o!=null&&f(r,["displayName"],o);let i=l(t,["description"]);i!=null&&f(r,["description"],i);let s=l(t,["version"]);s!=null&&f(r,["version"],s);let u=l(t,["_self"]);u!=null&&f(r,["tunedModelInfo"],VY(u));let a=l(t,["inputTokenLimit"]);a!=null&&f(r,["inputTokenLimit"],a);let c=l(t,["outputTokenLimit"]);c!=null&&f(r,["outputTokenLimit"],c);let d=l(t,["supportedGenerationMethods"]);d!=null&&f(r,["supportedActions"],d);let p=l(t,["temperature"]);p!=null&&f(r,["temperature"],p);let m=l(t,["maxTemperature"]);m!=null&&f(r,["maxTemperature"],m);let E=l(t,["topP"]);E!=null&&f(r,["topP"],E);let y=l(t,["topK"]);y!=null&&f(r,["topK"],y);let A=l(t,["thinking"]);return A!=null&&f(r,["thinking"],A),r}function NA(t,e){let r={},n=l(t,["name"]);n!=null&&f(r,["name"],n);let o=l(t,["displayName"]);o!=null&&f(r,["displayName"],o);let i=l(t,["description"]);i!=null&&f(r,["description"],i);let s=l(t,["versionId"]);s!=null&&f(r,["version"],s);let u=l(t,["deployedModels"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(E=>UK(E))),f(r,["endpoints"],m)}let a=l(t,["labels"]);a!=null&&f(r,["labels"],a);let c=l(t,["_self"]);c!=null&&f(r,["tunedModelInfo"],$Y(c));let d=l(t,["defaultCheckpointId"]);d!=null&&f(r,["defaultCheckpointId"],d);let p=l(t,["checkpoints"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(E=>E)),f(r,["checkpoints"],m)}return r}function OY(t,e){let r={},n=l(t,["mediaResolution"]);n!=null&&f(r,["mediaResolution"],n);let o=l(t,["codeExecutionResult"]);o!=null&&f(r,["codeExecutionResult"],o);let i=l(t,["executableCode"]);i!=null&&f(r,["executableCode"],i);let s=l(t,["fileData"]);s!=null&&f(r,["fileData"],qK(s));let u=l(t,["functionCall"]);u!=null&&f(r,["functionCall"],GK(u));let a=l(t,["functionResponse"]);a!=null&&f(r,["functionResponse"],a);let c=l(t,["inlineData"]);c!=null&&f(r,["inlineData"],fK(c));let d=l(t,["text"]);d!=null&&f(r,["text"],d);let p=l(t,["thought"]);p!=null&&f(r,["thought"],p);let m=l(t,["thoughtSignature"]);m!=null&&f(r,["thoughtSignature"],m);let E=l(t,["videoMetadata"]);return E!=null&&f(r,["videoMetadata"],E),r}function RY(t,e){let r={},n=l(t,["productImage"]);return n!=null&&f(r,["image"],bo(n)),r}function DY(t,e,r){let n={},o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);let i=l(t,["baseSteps"]);e!==void 0&&i!=null&&f(e,["parameters","baseSteps"],i);let s=l(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);let u=l(t,["seed"]);e!==void 0&&u!=null&&f(e,["parameters","seed"],u);let a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);let c=l(t,["personGeneration"]);e!==void 0&&c!=null&&f(e,["parameters","personGeneration"],c);let d=l(t,["addWatermark"]);e!==void 0&&d!=null&&f(e,["parameters","addWatermark"],d);let p=l(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);let m=l(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m);let E=l(t,["enhancePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E);let y=l(t,["labels"]);return e!==void 0&&y!=null&&f(e,["labels"],y),n}function IY(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["source"]);i!=null&&NY(i,n);let s=l(e,["config"]);return s!=null&&DY(s,n),n}function MY(t,e){let r={},n=l(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>d0(i))),f(r,["generatedImages"],o)}return r}function NY(t,e,r){let n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);let i=l(t,["personImage"]);e!==void 0&&i!=null&&f(e,["instances[0]","personImage","image"],bo(i));let s=l(t,["productImages"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(a=>RY(a))),f(e,["instances[0]","productImages"],u)}return n}function BY(t,e){let r={},n=l(t,["referenceImage"]);n!=null&&f(r,["referenceImage"],bo(n));let o=l(t,["referenceId"]);o!=null&&f(r,["referenceId"],o);let i=l(t,["referenceType"]);i!=null&&f(r,["referenceType"],i);let s=l(t,["maskImageConfig"]);s!=null&&f(r,["maskImageConfig"],vY(s));let u=l(t,["controlImageConfig"]);u!=null&&f(r,["controlImageConfig"],CK(u));let a=l(t,["styleImageConfig"]);a!=null&&f(r,["styleImageConfig"],a);let c=l(t,["subjectImageConfig"]);return c!=null&&f(r,["subjectImageConfig"],c),r}function Q5(t,e){let r={},n=l(t,["safetyAttributes","categories"]);n!=null&&f(r,["categories"],n);let o=l(t,["safetyAttributes","scores"]);o!=null&&f(r,["scores"],o);let i=l(t,["contentType"]);return i!=null&&f(r,["contentType"],i),r}function Z5(t,e){let r={},n=l(t,["safetyAttributes","categories"]);n!=null&&f(r,["categories"],n);let o=l(t,["safetyAttributes","scores"]);o!=null&&f(r,["scores"],o);let i=l(t,["contentType"]);return i!=null&&f(r,["contentType"],i),r}function PY(t,e){let r={},n=l(t,["category"]);if(n!=null&&f(r,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let o=l(t,["threshold"]);return o!=null&&f(r,["threshold"],o),r}function FY(t,e){let r={},n=l(t,["image"]);return n!=null&&f(r,["image"],bo(n)),r}function xY(t,e,r){let n={},o=l(t,["mode"]);e!==void 0&&o!=null&&f(e,["parameters","mode"],o);let i=l(t,["maxPredictions"]);e!==void 0&&i!=null&&f(e,["parameters","maxPredictions"],i);let s=l(t,["confidenceThreshold"]);e!==void 0&&s!=null&&f(e,["parameters","confidenceThreshold"],s);let u=l(t,["maskDilation"]);e!==void 0&&u!=null&&f(e,["parameters","maskDilation"],u);let a=l(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","binaryColorThreshold"],a);let c=l(t,["labels"]);return e!==void 0&&c!=null&&f(e,["labels"],c),n}function kY(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["source"]);i!=null&&UY(i,n);let s=l(e,["config"]);return s!=null&&xY(s,n),n}function LY(t,e){let r={},n=l(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>cY(i))),f(r,["generatedMasks"],o)}return r}function UY(t,e,r){let n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);let i=l(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],bo(i));let s=l(t,["scribbleImage"]);return e!==void 0&&s!=null&&f(e,["instances[0]","scribble"],FY(s)),n}function qY(t,e){let r={},n=l(t,["retrievalConfig"]);n!=null&&f(r,["retrievalConfig"],n);let o=l(t,["functionCallingConfig"]);return o!=null&&f(r,["functionCallingConfig"],VK(o)),r}function GY(t,e){let r={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=l(t,["computerUse"]);n!=null&&f(r,["computerUse"],n);let o=l(t,["fileSearch"]);o!=null&&f(r,["fileSearch"],o);let i=l(t,["codeExecution"]);if(i!=null&&f(r,["codeExecution"],i),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=l(t,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>m)),f(r,["functionDeclarations"],p)}let u=l(t,["googleMaps"]);u!=null&&f(r,["googleMaps"],mY(u));let a=l(t,["googleSearch"]);a!=null&&f(r,["googleSearch"],gY(a));let c=l(t,["googleSearchRetrieval"]);c!=null&&f(r,["googleSearchRetrieval"],c);let d=l(t,["urlContext"]);return d!=null&&f(r,["urlContext"],d),r}function eD(t,e){let r={},n=l(t,["retrieval"]);n!=null&&f(r,["retrieval"],n);let o=l(t,["computerUse"]);if(o!=null&&f(r,["computerUse"],o),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let i=l(t,["codeExecution"]);i!=null&&f(r,["codeExecution"],i);let s=l(t,["enterpriseWebSearch"]);s!=null&&f(r,["enterpriseWebSearch"],s);let u=l(t,["functionDeclarations"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(E=>$K(E))),f(r,["functionDeclarations"],m)}let a=l(t,["googleMaps"]);a!=null&&f(r,["googleMaps"],a);let c=l(t,["googleSearch"]);c!=null&&f(r,["googleSearch"],c);let d=l(t,["googleSearchRetrieval"]);d!=null&&f(r,["googleSearchRetrieval"],d);let p=l(t,["urlContext"]);return p!=null&&f(r,["urlContext"],p),r}function VY(t,e){let r={},n=l(t,["baseModel"]);n!=null&&f(r,["baseModel"],n);let o=l(t,["createTime"]);o!=null&&f(r,["createTime"],o);let i=l(t,["updateTime"]);return i!=null&&f(r,["updateTime"],i),r}function $Y(t,e){let r={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(r,["baseModel"],n);let o=l(t,["createTime"]);o!=null&&f(r,["createTime"],o);let i=l(t,["updateTime"]);return i!=null&&f(r,["updateTime"],i),r}function HY(t,e,r){let n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);let i=l(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);let s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&f(e,["defaultCheckpointId"],s),n}function WY(t,e,r){let n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);let i=l(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);let s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&f(e,["defaultCheckpointId"],s),n}function zY(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","name"],je(t,o));let i=l(e,["config"]);return i!=null&&HY(i,n),n}function jY(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["config"]);return i!=null&&WY(i,n),n}function KY(t,e,r){let n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);let i=l(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&f(e,["parameters","safetySetting"],i);let s=l(t,["personGeneration"]);e!==void 0&&s!=null&&f(e,["parameters","personGeneration"],s);let u=l(t,["includeRaiReason"]);e!==void 0&&u!=null&&f(e,["parameters","includeRaiReason"],u);let a=l(t,["outputMimeType"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","mimeType"],a);let c=l(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&f(e,["parameters","outputOptions","compressionQuality"],c);let d=l(t,["enhanceInputImage"]);e!==void 0&&d!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],d);let p=l(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],p);let m=l(t,["labels"]);e!==void 0&&m!=null&&f(e,["labels"],m);let E=l(t,["numberOfImages"]);e!==void 0&&E!=null&&f(e,["parameters","sampleCount"],E);let y=l(t,["mode"]);return e!==void 0&&y!=null&&f(e,["parameters","mode"],y),n}function YY(t,e,r){let n={},o=l(e,["model"]);o!=null&&f(n,["_url","model"],je(t,o));let i=l(e,["image"]);i!=null&&f(n,["instances[0]","image"],bo(i));let s=l(e,["upscaleFactor"]);s!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],s);let u=l(e,["config"]);return u!=null&&KY(u,n),n}function JY(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>d0(s))),f(r,["generatedImages"],i)}return r}function XY(t,e){let r={},n=l(t,["uri"]);n!=null&&f(r,["uri"],n);let o=l(t,["encodedVideo"]);o!=null&&f(r,["videoBytes"],Ds(o));let i=l(t,["encoding"]);return i!=null&&f(r,["mimeType"],i),r}function QY(t,e){let r={},n=l(t,["gcsUri"]);n!=null&&f(r,["uri"],n);let o=l(t,["bytesBase64Encoded"]);o!=null&&f(r,["videoBytes"],Ds(o));let i=l(t,["mimeType"]);return i!=null&&f(r,["mimeType"],i),r}function ZY(t,e){let r={},n=l(t,["image"]);n!=null&&f(r,["_self"],bo(n));let o=l(t,["maskMode"]);return o!=null&&f(r,["maskMode"],o),r}function eJ(t,e){let r={},n=l(t,["image"]);n!=null&&f(r,["image"],f0(n));let o=l(t,["referenceType"]);return o!=null&&f(r,["referenceType"],o),r}function tJ(t,e){let r={},n=l(t,["image"]);n!=null&&f(r,["image"],bo(n));let o=l(t,["referenceType"]);return o!=null&&f(r,["referenceType"],o),r}function tD(t,e){let r={},n=l(t,["uri"]);n!=null&&f(r,["uri"],n);let o=l(t,["videoBytes"]);o!=null&&f(r,["encodedVideo"],Ds(o));let i=l(t,["mimeType"]);return i!=null&&f(r,["encoding"],i),r}function rD(t,e){let r={},n=l(t,["uri"]);n!=null&&f(r,["gcsUri"],n);let o=l(t,["videoBytes"]);o!=null&&f(r,["bytesBase64Encoded"],Ds(o));let i=l(t,["mimeType"]);return i!=null&&f(r,["mimeType"],i),r}function rJ(t,e){let r={},n=l(t,["displayName"]);return e!==void 0&&n!=null&&f(e,["displayName"],n),r}function nJ(t){let e={},r=l(t,["config"]);return r!=null&&rJ(r,e),e}function oJ(t,e){let r={},n=l(t,["force"]);return e!==void 0&&n!=null&&f(e,["_query","force"],n),r}function iJ(t){let e={},r=l(t,["name"]);r!=null&&f(e,["_url","name"],r);let n=l(t,["config"]);return n!=null&&oJ(n,e),e}function sJ(t){let e={},r=l(t,["name"]);return r!=null&&f(e,["_url","name"],r),e}function uJ(t,e){let r={},n=l(t,["customMetadata"]);if(e!==void 0&&n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["customMetadata"],i)}let o=l(t,["chunkingConfig"]);return e!==void 0&&o!=null&&f(e,["chunkingConfig"],o),r}function aJ(t){let e={},r=l(t,["name"]);r!=null&&f(e,["name"],r);let n=l(t,["metadata"]);n!=null&&f(e,["metadata"],n);let o=l(t,["done"]);o!=null&&f(e,["done"],o);let i=l(t,["error"]);i!=null&&f(e,["error"],i);let s=l(t,["response"]);return s!=null&&f(e,["response"],lJ(s)),e}function cJ(t){let e={},r=l(t,["fileSearchStoreName"]);r!=null&&f(e,["_url","file_search_store_name"],r);let n=l(t,["fileName"]);n!=null&&f(e,["fileName"],n);let o=l(t,["config"]);return o!=null&&uJ(o,e),e}function lJ(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["parent"]);n!=null&&f(e,["parent"],n);let o=l(t,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function dJ(t,e){let r={},n=l(t,["pageSize"]);e!==void 0&&n!=null&&f(e,["_query","pageSize"],n);let o=l(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),r}function fJ(t){let e={},r=l(t,["config"]);return r!=null&&dJ(r,e),e}function hJ(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);let o=l(t,["fileSearchStores"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["fileSearchStores"],i)}return e}function nD(t,e){let r={},n=l(t,["mimeType"]);e!==void 0&&n!=null&&f(e,["mimeType"],n);let o=l(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);let i=l(t,["customMetadata"]);if(e!==void 0&&i!=null){let u=i;Array.isArray(u)&&(u=u.map(a=>a)),f(e,["customMetadata"],u)}let s=l(t,["chunkingConfig"]);return e!==void 0&&s!=null&&f(e,["chunkingConfig"],s),r}function pJ(t){let e={},r=l(t,["fileSearchStoreName"]);r!=null&&f(e,["_url","file_search_store_name"],r);let n=l(t,["config"]);return n!=null&&nD(n,e),e}function mJ(t){let e={},r=l(t,["sdkHttpResponse"]);return r!=null&&f(e,["sdkHttpResponse"],r),e}var gJ="Content-Type",EJ="X-Server-Timeout",yJ="User-Agent",BA="x-goog-api-client",CJ="1.41.0",AJ=`google-genai-sdk/${CJ}`,SJ="v1beta1",_J="v1beta",wJ=5,TJ=[408,429,500,502,503,504],PA=class{constructor(e){var r,n,o;this.clientOptions=Object.assign({},e),this.customBaseUrl=(r=e.httpOptions)===null||r===void 0?void 0:r.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let i={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let u=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!u?(i.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?i.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:SJ}else{if(!this.clientOptions.apiKey)throw new V1({message:"API key must be set when using the Gemini API.",status:403});i.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:_J,i.baseUrl="https://generativelanguage.googleapis.com/"}i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){let o=[this.getRequestUrlInternal(r)];return n&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e,r){return!(r.baseUrl&&r.baseUrlResourceScope===aA.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e,r),o=this.constructUrl(e.path,r,n);if(e.queryParams)for(let[s,u]of Object.entries(e.queryParams))o.searchParams.append(s,String(u));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,r,o.toString(),e.abortSignal),this.unaryApiCall(o,i,e.httpMethod)}patchHttpOptions(e,r){let n=JSON.parse(JSON.stringify(e));for(let[o,i]of Object.entries(r))typeof i=="object"?n[o]=Object.assign(Object.assign({},n[o]),i):i!==void 0&&(n[o]=i);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e,r),o=this.constructUrl(e.path,r,n);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,r,o.toString(),e.abortSignal),this.streamApiCall(o,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n,o){if(r&&r.timeout||o){let i=new AbortController,s=i.signal;if(r.timeout&&r?.timeout>0){let u=setTimeout(()=>i.abort(),r.timeout);u&&typeof u.unref=="function"&&u.unref()}o&&o.addEventListener("abort",()=>{i.abort()}),e.signal=s}return r&&r.extraBody!==null&&bJ(e,r.extraBody),e.headers=await this.getHeadersInternal(r,n),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async o=>(await E5(o),new qu(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async o=>(await E5(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return _o(this,arguments,function*(){var n;let o=(n=e?.body)===null||n===void 0?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="",u="data:",a=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:c,value:d}=yield we(o.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let p=i.decode(d,{stream:!0});try{let y=JSON.parse(p);if("error"in y){let A=JSON.parse(JSON.stringify(y.error)),S=A.status,b=A.code,P=`got status: ${S}. ${JSON.stringify(y)}`;if(b>=400&&b<600)throw new V1({message:P,status:b})}}catch(y){if(y.name==="ApiError")throw y}s+=p;let m=-1,E=0;for(;;){m=-1,E=0;for(let S of a){let b=s.indexOf(S);b!==-1&&(m===-1||b<m)&&(m=b,E=S.length)}if(m===-1)break;let y=s.substring(0,m);s=s.substring(m+E);let A=y.trim();if(A.startsWith(u)){let S=A.substring(u.length).trim();try{let b=new Response(S,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield we(new qu(b))}catch(b){throw new Error(`exception parsing stream chunk ${S}. ${b}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,r){var n;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,r);let o=this.clientOptions.httpOptions.retryOptions;return mE(async()=>{let s=await fetch(e,r);if(s.ok)return s;throw TJ.includes(s.status)?new Error(`Retryable HTTP Error: ${s.statusText}`):new e1(`Non-retryable exception ${s.statusText} sending request`)},{retries:((n=o.attempts)!==null&&n!==void 0?n:wJ)-1})}getDefaultHeaders(){let e={},r=AJ+" "+this.clientOptions.userAgentExtra;return e[yJ]=r,e[BA]=r,e[gJ]="application/json",e}async getHeadersInternal(e,r){let n=new Headers;if(e&&e.headers){for(let[o,i]of Object.entries(e.headers))n.append(o,i);e.timeout&&e.timeout>0&&n.append(EJ,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,r),n}getFileName(e){var r;let n="";return typeof e=="string"&&(n=e.replace(/[/\\]+$/,""),n=(r=n.split(/[/\\]/).pop())!==null&&r!==void 0?r:""),n}async uploadFile(e,r){var n;let o={};r!=null&&(o.mimeType=r.mimeType,o.name=r.name,o.displayName=r.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);let i=this.clientOptions.uploader,s=await i.stat(e);o.sizeBytes=String(s.size);let u=(n=r?.mimeType)!==null&&n!==void 0?n:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=u;let a={file:o},c=this.getFileName(e),d=ae("upload/v1beta/files",a._url),p=await this.fetchUploadUrl(d,o.sizeBytes,o.mimeType,c,a,r?.httpOptions);return i.upload(e,p,this)}async uploadFileToFileSearchStore(e,r,n){var o;let i=this.clientOptions.uploader,s=await i.stat(r),u=String(s.size),a=(o=n?.mimeType)!==null&&o!==void 0?o:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let c=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(r),p={};n!=null&&nD(n,p);let m=await this.fetchUploadUrl(c,u,a,d,p,n?.httpOptions);return i.uploadToFileSearchStore(r,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r,n,o,i,s){var u;let a={};s?a=s:a={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r}`,"X-Goog-Upload-Header-Content-Type":`${n}`},o?{"X-Goog-Upload-File-Name":o}:{})};let c=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:a});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let d=(u=c?.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}};async function E5(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let r=t.status,n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};let o=JSON.stringify(n);throw r>=400&&r<600?new V1({message:o,status:r}):new Error(o)}}function bJ(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{let i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))r=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(i,s){let u=Object.assign({},i);for(let a in s)if(Object.prototype.hasOwnProperty.call(s,a)){let c=s[a],d=u[a];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?u[a]=n(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${a}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),u[a]=c)}return u}let o=n(r,e);t.body=JSON.stringify(o)}var vJ="mcp_used/unknown",OJ=!1;function oD(t){for(let e of t)if(RJ(e)||typeof e=="object"&&"inputSchema"in e)return!0;return OJ}function iD(t){var e;let r=(e=t[BA])!==null&&e!==void 0?e:"";t[BA]=(r+` ${vJ}`).trimStart()}function RJ(t){return t!==null&&typeof t=="object"&&t instanceof FA}function DJ(t){return _o(this,arguments,function*(r,n=100){let o,i=0;for(;i<n;){let s=yield we(r.listTools({cursor:o}));for(let u of s.tools)yield yield we(u),i++;if(!s.nextCursor)break;o=s.nextCursor}})}var FA=class t{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new t(e,r)}async initialize(){var e,r,n,o;if(this.mcpTools.length>0)return;let i={},s=[];for(let d of this.mcpClients)try{for(var u=!0,a=(r=void 0,wo(DJ(d))),c;c=await a.next(),e=c.done,!e;u=!0){o=c.value,u=!1;let p=o;s.push(p);let m=p.name;if(i[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);i[m]=d}}catch(p){r={error:p}}finally{try{!u&&!e&&(n=a.return)&&await n.call(a)}finally{if(r)throw r.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),az(this.mcpTools,this.config)}async callTool(e){await this.initialize();let r=[];for(let n of e)if(n.name in this.functionNameToMcpClient){let o=this.functionNameToMcpClient[n.name],i;this.config.timeout&&(i={timeout:this.config.timeout});let s=await o.callTool({name:n.name,arguments:n.args},void 0,i);r.push({functionResponse:{name:n.name,response:s.isError?{error:s}:s}})}return r}};async function IJ(t,e,r){let n=new wA,o;r.data instanceof Blob?o=JSON.parse(await r.data.text()):o=JSON.parse(r.data),Object.assign(n,o),e(n)}var xA=class{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=NJ(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),a=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${u}`,c=()=>{},d=new Promise(B=>{c=B}),p=e.callbacks,m=function(){c({})},E=this.apiClient,y={onopen:m,onmessage:B=>{IJ(E,p.onmessage,B)},onerror:(r=p?.onerror)!==null&&r!==void 0?r:function(B){},onclose:(n=p?.onclose)!==null&&n!==void 0?n:function(B){}},A=this.webSocketFactory.create(a,MJ(s),y);A.connect(),await d;let P={setup:{model:je(this.apiClient,e.model)}};return A.send(JSON.stringify(P)),new kA(A,this.apiClient)}},kA=class{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let r=rK(e);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let r=tK(e);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){let r={playbackControl:e};this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(Ac.PLAY)}pause(){this.sendPlaybackControl(Ac.PAUSE)}stop(){this.sendPlaybackControl(Ac.STOP)}resetContext(){this.sendPlaybackControl(Ac.RESET_CONTEXT)}close(){this.conn.close()}};function MJ(t){let e={};return t.forEach((r,n)=>{e[n]=r}),e}function NJ(t){let e=new Headers;for(let[r,n]of Object.entries(t))e.append(r,n);return e}var BJ="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function PJ(t,e,r){let n=new _A,o;r.data instanceof Blob?o=await r.data.text():r.data instanceof ArrayBuffer?o=new TextDecoder().decode(r.data):o=r.data;let i=JSON.parse(o);if(t.isVertexAI()){let s=iK(i);Object.assign(n,s)}else Object.assign(n,i);e(n)}var LA=class{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new xA(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,o,i,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let a=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),d,p=this.apiClient.getHeaders();e.config&&e.config.tools&&oD(e.config.tools)&&iD(p);let m=kJ(p);if(this.apiClient.isVertexAI()){let M=this.apiClient.getProject(),V=this.apiClient.getLocation(),Y=this.apiClient.getApiKey(),te=!!M&&!!V||!!Y;this.apiClient.getCustomBaseUrl()&&!te?d=a:(d=`${a}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,d))}else{let M=this.apiClient.getApiKey(),V="BidiGenerateContent",Y="key";M?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",Y="access_token"),d=`${a}/ws/google.ai.generativelanguage.${c}.GenerativeService.${V}?${Y}=${M}`}let E=()=>{},y=new Promise(M=>{E=M}),A=e.callbacks,S=function(){var M;(M=A?.onopen)===null||M===void 0||M.call(A),E({})},b=this.apiClient,P={onopen:S,onmessage:M=>{PJ(b,A.onmessage,M)},onerror:(r=A?.onerror)!==null&&r!==void 0?r:function(M){},onclose:(n=A?.onclose)!==null&&n!==void 0?n:function(M){}},B=this.webSocketFactory.create(d,xJ(m),P);B.connect(),await y;let v=je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&v.startsWith("publishers/")){let M=this.apiClient.getProject(),V=this.apiClient.getLocation();M&&V&&(v=`projects/${M}/locations/${V}/`+v)}let I={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Bp.AUDIO]}:e.config.responseModalities=[Bp.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let O=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],z=[];for(let M of O)if(this.isCallableTool(M)){let V=M;z.push(await V.tool())}else z.push(M);z.length>0&&(e.config.tools=z);let Z={model:v,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=eK(this.apiClient,Z):I=Zj(this.apiClient,Z),delete I.config,B.send(JSON.stringify(I)),new UA(B,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},FJ={turnComplete:!0},UA=class{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=zn(r.turns),e.isVertexAI()||(n=n.map(o=>l0(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(let i of n){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(BJ)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},FJ),e);let r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:oK(e)}:r={realtimeInput:nK(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}};function xJ(t){let e={};return t.forEach((r,n)=>{e[n]=r}),e}function kJ(t){let e=new Headers;for(let[r,n]of Object.entries(t))e.append(r,n);return e}var y5=10;function C5(t){var e,r,n;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(let s of(r=t?.tools)!==null&&r!==void 0?r:[])if(_c(s)){o=!0;break}if(!o)return!0;let i=(n=t?.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function _c(t){return"callTool"in t&&typeof t.callTool=="function"}function LJ(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(o=>_c(o)))!==null&&n!==void 0?n:!1}function A5(t){var e;let r=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((n,o)=>{if(_c(n))return;let i=n;i.functionDeclarations&&i.functionDeclarations.length>0&&r.push(o)}),r}function S5(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var qA=class extends To{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var n,o,i,s,u;let a=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!LJ(r)||C5(r.config))return await this.generateContentInternal(a);let c=A5(r);if(c.length>0){let A=c.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let d,p,m=zn(a.contents),E=(i=(o=(n=a.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:y5,y=0;for(;y<E&&(d=await this.generateContentInternal(a),!(!d.functionCalls||d.functionCalls.length===0));){let A=d.candidates[0].content,S=[];for(let b of(u=(s=r.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(_c(b)){let B=await b.callTool(d.functionCalls);S.push(...B)}y++,p={role:"user",parts:S},a.contents=zn(a.contents),a.contents.push(A),a.contents.push(p),S5(a.config)&&(m.push(A),m.push(p))}return S5(a.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async r=>{var n,o,i,s,u;if(this.maybeMoveToResponseJsonSchem(r),C5(r.config)){let p=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(p)}let a=A5(r);if(a.length>0){let p=a.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let c=(i=(o=(n=r?.config)===null||n===void 0?void 0:n.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,d=(u=(s=r?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var o;let i,s=[];if(n?.generatedImages)for(let a of n.generatedImages)a&&a?.safetyAttributes&&((o=a?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?i=a?.safetyAttributes:s.push(a);let u;return i?u={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:n.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:n.sdkHttpResponse},u}),this.list=async r=>{var n;let s={config:Object.assign(Object.assign({},{queryBase:!0}),r?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((n=s.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Ui(Li.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async r=>{let n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));let o={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(o)},this.generateVideos=async r=>{var n,o,i,s,u,a;if((r.prompt||r.image||r.video)&&r.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=r.video)===null||n===void 0)&&n.uri&&(!((o=r.video)===null||o===void 0)&&o.videoBytes)?r.video={uri:r.video.uri,mimeType:r.video.mimeType}:!((s=(i=r.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((a=(u=r.source)===null||u===void 0?void 0:u.video)===null||a===void 0)&&a.videoBytes)&&(r.source.video={uri:r.source.video.uri,mimeType:r.source.video.mimeType})),await this.generateVideosInternal(r)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,o;let i=(r=e.config)===null||r===void 0?void 0:r.tools;if(!i)return e;let s=await Promise.all(i.map(async a=>_c(a)?await a.tool():a)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&oD(e.config.tools)){let a=(o=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&o!==void 0?o:{},c=Object.assign({},a);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),iD(c),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return u}async initAfcToolsMap(e){var r,n,o;let i=new Map;for(let s of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(_c(s)){let u=s,a=await u.tool();for(let c of(o=a.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,u)}}return i}async processAfcStream(e){var r,n,o;let i=(o=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&o!==void 0?o:y5,s=!1,u=0,a=await this.initAfcToolsMap(e);return(function(c,d,p){return _o(this,arguments,function*(){for(var m,E,y,A,S,b;u<i;){s&&(u++,s=!1);let I=yield we(c.processParamsMaybeAddMcpUsage(p)),O=yield we(c.generateContentStreamInternal(I)),z=[],Z=[];try{for(var P=!0,B=(E=void 0,wo(O)),v;v=yield we(B.next()),m=v.done,!m;P=!0){A=v.value,P=!1;let M=A;if(yield yield we(M),M.candidates&&(!((S=M.candidates[0])===null||S===void 0)&&S.content)){Z.push(M.candidates[0].content);for(let V of(b=M.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(u<i&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(V.functionCall.name)){let Y=yield we(d.get(V.functionCall.name).callTool([V.functionCall]));z.push(...Y)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(M){E={error:M}}finally{try{!P&&!m&&(y=B.return)&&(yield we(y.call(B)))}finally{if(E)throw E.error}}if(z.length>0){s=!0;let M=new Lu;M.candidates=[{content:{role:"user",parts:z}}],yield yield we(M);let V=[];V.push(...Z),V.push({role:"user",parts:z});let Y=zn(p.contents).concat(V);p.contents=Y}else break}})})(this,a,e)}async generateContentInternal(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=p5(this.apiClient,e);return u=ae("{model}:generateContent",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=g5(d),m=new Lu;return Object.assign(m,p),m})}else{let c=h5(this.apiClient,e);return u=ae("{model}:generateContent",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=m5(d),m=new Lu;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=p5(this.apiClient,e);return u=ae("{model}:streamGenerateContent?alt=sse",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),s.then(function(p){return _o(this,arguments,function*(){var m,E,y,A;try{for(var S=!0,b=wo(p),P;P=yield we(b.next()),m=P.done,!m;S=!0){A=P.value,S=!1;let B=A,v=g5(yield we(B.json()),e);v.sdkHttpResponse={headers:B.headers};let I=new Lu;Object.assign(I,v),yield yield we(I)}}catch(B){E={error:B}}finally{try{!S&&!m&&(y=b.return)&&(yield we(y.call(b)))}finally{if(E)throw E.error}}})})}else{let c=h5(this.apiClient,e);return u=ae("{model}:streamGenerateContent?alt=sse",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return _o(this,arguments,function*(){var m,E,y,A;try{for(var S=!0,b=wo(p),P;P=yield we(b.next()),m=P.done,!m;S=!0){A=P.value,S=!1;let B=A,v=m5(yield we(B.json()),e);v.sdkHttpResponse={headers:B.headers};let I=new Lu;Object.assign(I,v),yield yield we(I)}}catch(B){E={error:B}}finally{try{!S&&!m&&(y=b.return)&&(yield we(y.call(b)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=xK(this.apiClient,e);return u=ae("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=LK(d),m=new Pp;return Object.assign(m,p),m})}else{let c=FK(this.apiClient,e);return u=ae("{model}:batchEmbedContents",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=kK(d),m=new Pp;return Object.assign(m,p),m})}}async generateImagesInternal(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=YK(this.apiClient,e);return u=ae("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=XK(d),m=new Fp;return Object.assign(m,p),m})}else{let c=KK(this.apiClient,e);return u=ae("{model}:predict",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=JK(d),m=new Fp;return Object.assign(m,p),m})}}async editImageInternal(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI()){let u=MK(this.apiClient,e);return i=ae("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:a.headers},d})),o.then(a=>{let c=NK(a),d=new cA;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI()){let u=YY(this.apiClient,e);return i=ae("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:a.headers},d})),o.then(a=>{let c=JY(a),d=new lA;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI()){let u=IY(this.apiClient,e);return i=ae("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>{let c=MY(a),d=new dA;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI()){let u=kY(this.apiClient,e);return i=ae("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>{let c=LY(a),d=new fA;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=pY(this.apiClient,e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s.then(d=>NA(d))}else{let c=hY(this.apiClient,e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>MA(d))}}async listInternal(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=wY(this.apiClient,e);return u=ae("{models_url}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=bY(d),m=new xp;return Object.assign(m,p),m})}else{let c=_Y(this.apiClient,e);return u=ae("{models_url}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=TY(d),m=new xp;return Object.assign(m,p),m})}}async update(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=jY(this.apiClient,e);return u=ae("{model}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s.then(d=>NA(d))}else{let c=zY(this.apiClient,e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>MA(d))}}async delete(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=OK(this.apiClient,e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=DK(d),m=new kp;return Object.assign(m,p),m})}else{let c=vK(this.apiClient,e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=RK(d),m=new kp;return Object.assign(m,p),m})}}async countTokens(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=wK(this.apiClient,e);return u=ae("{model}:countTokens",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=bK(d),m=new Lp;return Object.assign(m,p),m})}else{let c=_K(this.apiClient,e);return u=ae("{model}:countTokens",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=TK(d),m=new Lp;return Object.assign(m,p),m})}}async computeTokens(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI()){let u=mK(this.apiClient,e);return i=ae("{model}:computeTokens",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:a.headers},d})),o.then(a=>{let c=gK(a),d=new hA;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=nY(this.apiClient,e);return u=ae("{model}:predictLongRunning",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s.then(d=>{let p=tY(d),m=new Up;return Object.assign(m,p),m})}else{let c=rY(this.apiClient,e);return u=ae("{model}:predictLongRunning",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{let p=eY(d),m=new Up;return Object.assign(m,p),m})}}};var GA=class extends To{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=r.name.split("/operations/")[0],i;n&&"httpOptions"in n&&(i=n.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:o,config:{httpOptions:i}});return r._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){let r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=r.name.split("/operations/")[0],i;n&&"httpOptions"in n&&(i=n.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:o,config:{httpOptions:i}});return r._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=XW(e);return u=ae("{operationName}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s}else{let c=JW(e);return u=ae("{operationName}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s}}async fetchPredictVideosOperationInternal(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI()){let u=$W(e);return i=ae("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}};function UJ(t){let e={},r=l(t,["data"]);if(r!=null&&f(e,["data"],r),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=l(t,["mimeType"]);return n!=null&&f(e,["mimeType"],n),e}function qJ(t){let e={},r=l(t,["parts"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>YJ(i))),f(e,["parts"],o)}let n=l(t,["role"]);return n!=null&&f(e,["role"],n),e}function GJ(t,e,r){let n={},o=l(e,["expireTime"]);r!==void 0&&o!=null&&f(r,["expireTime"],o);let i=l(e,["newSessionExpireTime"]);r!==void 0&&i!=null&&f(r,["newSessionExpireTime"],i);let s=l(e,["uses"]);r!==void 0&&s!=null&&f(r,["uses"],s);let u=l(e,["liveConnectConstraints"]);r!==void 0&&u!=null&&f(r,["bidiGenerateContentSetup"],KJ(t,u));let a=l(e,["lockAdditionalFields"]);return r!==void 0&&a!=null&&f(r,["fieldMask"],a),n}function VJ(t,e){let r={},n=l(e,["config"]);return n!=null&&f(r,["config"],GJ(t,n,r)),r}function $J(t){let e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=l(t,["fileUri"]);r!=null&&f(e,["fileUri"],r);let n=l(t,["mimeType"]);return n!=null&&f(e,["mimeType"],n),e}function HJ(t){let e={},r=l(t,["id"]);r!=null&&f(e,["id"],r);let n=l(t,["args"]);n!=null&&f(e,["args"],n);let o=l(t,["name"]);if(o!=null&&f(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WJ(t){let e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=l(t,["enableWidget"]);return r!=null&&f(e,["enableWidget"],r),e}function zJ(t){let e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=l(t,["timeRangeFilter"]);return r!=null&&f(e,["timeRangeFilter"],r),e}function jJ(t,e){let r={},n=l(t,["generationConfig"]);e!==void 0&&n!=null&&f(e,["setup","generationConfig"],n);let o=l(t,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);let i=l(t,["temperature"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","temperature"],i);let s=l(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);let u=l(t,["topK"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topK"],u);let a=l(t,["maxOutputTokens"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","maxOutputTokens"],a);let c=l(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);let d=l(t,["seed"]);e!==void 0&&d!=null&&f(e,["setup","generationConfig","seed"],d);let p=l(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],dS(p));let m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);let E=l(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],E);let y=l(t,["systemInstruction"]);e!==void 0&&y!=null&&f(e,["setup","systemInstruction"],qJ(Cr(y)));let A=l(t,["tools"]);if(e!==void 0&&A!=null){let O=vc(A);Array.isArray(O)&&(O=O.map(z=>XJ(bc(z)))),f(e,["setup","tools"],O)}let S=l(t,["sessionResumption"]);e!==void 0&&S!=null&&f(e,["setup","sessionResumption"],JJ(S));let b=l(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&f(e,["setup","inputAudioTranscription"],b);let P=l(t,["outputAudioTranscription"]);e!==void 0&&P!=null&&f(e,["setup","outputAudioTranscription"],P);let B=l(t,["realtimeInputConfig"]);e!==void 0&&B!=null&&f(e,["setup","realtimeInputConfig"],B);let v=l(t,["contextWindowCompression"]);e!==void 0&&v!=null&&f(e,["setup","contextWindowCompression"],v);let I=l(t,["proactivity"]);if(e!==void 0&&I!=null&&f(e,["setup","proactivity"],I),l(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return r}function KJ(t,e){let r={},n=l(e,["model"]);n!=null&&f(r,["setup","model"],je(t,n));let o=l(e,["config"]);return o!=null&&f(r,["config"],jJ(o,r)),r}function YJ(t){let e={},r=l(t,["mediaResolution"]);r!=null&&f(e,["mediaResolution"],r);let n=l(t,["codeExecutionResult"]);n!=null&&f(e,["codeExecutionResult"],n);let o=l(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);let i=l(t,["fileData"]);i!=null&&f(e,["fileData"],$J(i));let s=l(t,["functionCall"]);s!=null&&f(e,["functionCall"],HJ(s));let u=l(t,["functionResponse"]);u!=null&&f(e,["functionResponse"],u);let a=l(t,["inlineData"]);a!=null&&f(e,["inlineData"],UJ(a));let c=l(t,["text"]);c!=null&&f(e,["text"],c);let d=l(t,["thought"]);d!=null&&f(e,["thought"],d);let p=l(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);let m=l(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function JJ(t){let e={},r=l(t,["handle"]);if(r!=null&&f(e,["handle"],r),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function XJ(t){let e={};if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=l(t,["computerUse"]);r!=null&&f(e,["computerUse"],r);let n=l(t,["fileSearch"]);n!=null&&f(e,["fileSearch"],n);let o=l(t,["codeExecution"]);if(o!=null&&f(e,["codeExecution"],o),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let i=l(t,["functionDeclarations"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(p=>p)),f(e,["functionDeclarations"],d)}let s=l(t,["googleMaps"]);s!=null&&f(e,["googleMaps"],WJ(s));let u=l(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],zJ(u));let a=l(t,["googleSearchRetrieval"]);a!=null&&f(e,["googleSearchRetrieval"],a);let c=l(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function QJ(t){let e=[];for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)){let n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){let o=Object.keys(n).map(i=>`${r}.${i}`);e.push(...o)}else e.push(r)}return e.join(",")}function ZJ(t,e){let r=null,n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){let i=n.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,r=i):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;let o=t.fieldMask;if(r){let i=QJ(r);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)i?t.fieldMask=i:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],u=[];o.length>0&&(u=o.map(c=>s.includes(c)?`generationConfig.${c}`:c));let a=[];i&&a.push(i),u.length>0&&a.push(...u),a.length>0?t.fieldMask=a.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}var VA=class extends To{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let u=VJ(this.apiClient,e);i=ae("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;let a=ZJ(u,e.config);return o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),o.then(c=>c)}}};function eX(t,e){let r={},n=l(t,["force"]);return e!==void 0&&n!=null&&f(e,["_query","force"],n),r}function tX(t){let e={},r=l(t,["name"]);r!=null&&f(e,["_url","name"],r);let n=l(t,["config"]);return n!=null&&eX(n,e),e}function rX(t){let e={},r=l(t,["name"]);return r!=null&&f(e,["_url","name"],r),e}function nX(t,e){let r={},n=l(t,["pageSize"]);e!==void 0&&n!=null&&f(e,["_query","pageSize"],n);let o=l(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),r}function oX(t){let e={},r=l(t,["parent"]);r!=null&&f(e,["_url","parent"],r);let n=l(t,["config"]);return n!=null&&nX(n,e),e}function iX(t){let e={},r=l(t,["sdkHttpResponse"]);r!=null&&f(e,["sdkHttpResponse"],r);let n=l(t,["nextPageToken"]);n!=null&&f(e,["nextPageToken"],n);let o=l(t,["documents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),f(e,["documents"],i)}return e}var $A=class extends To{constructor(e){super(),this.apiClient=e,this.list=async r=>new Ui(Li.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:r.parent,config:n.config}),await this.listInternal(r),r)}async get(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=rX(e);return i=ae("{name}",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>a)}}async delete(e){var r,n;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=tX(e);o=ae("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=oX(e);return i=ae("{parent}/documents",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>{let c=iX(a),d=new pA;return Object.assign(d,c),d})}}};var HA=class extends To{constructor(e,r=new $A(e)){super(),this.apiClient=e,this.documents=r,this.list=async(n={})=>new Ui(Li.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(n),n)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=nJ(e);return i=ae("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>a)}}async get(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=sJ(e);return i=ae("{name}",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>a)}}async delete(e){var r,n;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=iJ(e);o=ae("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=fJ(e);return i=ae("fileSearchStores",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>{let c=hJ(a),d=new mA;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=pJ(e);return i=ae("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>{let c=mJ(a),d=new gA;return Object.assign(d,c),d})}}async importFile(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=cJ(e);return i=ae("{file_search_store_name}:importFile",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json()),o.then(a=>{let c=aJ(a),d=new EA;return Object.assign(d,c),d})}}};var sD=function(){let{crypto:t}=globalThis;if(t?.randomUUID)return sD=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))},sX=()=>sD();function WA(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var zA=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};var Kr=class extends Error{},Yr=class t extends Kr{constructor(e,r,n,o){super(`${t.makeMessage(e,r,n)}`),this.status=e,this.headers=o,this.error=r}static makeMessage(e,r,n){let o=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,r,n,o){if(!e||!o)return new wc({message:n,cause:zA(r)});let i=r;return e===400?new Yp(e,i,n,o):e===401?new Jp(e,i,n,o):e===403?new Xp(e,i,n,o):e===404?new Qp(e,i,n,o):e===409?new Zp(e,i,n,o):e===422?new e0(e,i,n,o):e===429?new t0(e,i,n,o):e>=500?new r0(e,i,n,o):new t(e,i,n,o)}},$1=class extends Yr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},wc=class extends Yr{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}},Kp=class extends wc{constructor({message:e}={}){super({message:e??"Request timed out."})}},Yp=class extends Yr{},Jp=class extends Yr{},Xp=class extends Yr{},Qp=class extends Yr{},Zp=class extends Yr{},e0=class extends Yr{},t0=class extends Yr{},r0=class extends Yr{};var uX=/^[a-z][a-z0-9+.-]*:/i,aX=t=>uX.test(t),jA=t=>(jA=Array.isArray,jA(t)),cX=jA,lX=cX,_5=lX;function dX(t){if(!t)return!0;for(let e in t)return!1;return!0}function fX(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var hX=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Kr(`${t} must be an integer`);if(e<0)throw new Kr(`${t} must be a positive integer`);return e},pX=t=>{try{return JSON.parse(t)}catch{return}};var mX=t=>new Promise(e=>setTimeout(e,t));var Cc="0.0.1";function gX(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var EX=()=>{var t,e,r,n,o;let i=gX();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":T5(Deno.build.os),"X-Stainless-Arch":w5(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":T5((r=globalThis.process.platform)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Arch":w5((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};let s=yX();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Cc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function yX(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of t){let n=r.exec(navigator.userAgent);if(n){let o=n[1]||0,i=n[2]||0,s=n[3]||0;return{browser:e,version:`${o}.${i}.${s}`}}}return null}var w5=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",T5=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),vp,CX=()=>vp??(vp=EX());function AX(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function uD(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function SX(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return uD({start(){},async pull(r){let{done:n,value:o}=await e.next();n?r.close():r.enqueue(o)},async cancel(){var r;await((r=e.return)===null||r===void 0?void 0:r.call(e))}})}function aD(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _X(t){var e,r;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((r=(e=t[Symbol.asyncIterator]()).return)===null||r===void 0?void 0:r.call(e));return}let n=t.getReader(),o=n.cancel();n.releaseLock(),await o}var wX=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var cD=()=>{var t;if(typeof File>"u"){let{process:e}=globalThis,r=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(r?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function nA(t,e,r){return cD(),new File(t,e??"unknown_file",r)}function TX(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var bX=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";var lD=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",vX=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&lD(t),OX=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function RX(t,e,r){if(cD(),t=await t,vX(t))return t instanceof File?t:nA([await t.arrayBuffer()],t.name);if(OX(t)){let o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),nA(await KA(o),e,r)}let n=await KA(t);if(e||(e=TX(t)),!r?.type){let o=n.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof o=="string"&&(r=Object.assign(Object.assign({},r),{type:o}))}return nA(n,e,r)}async function KA(t){var e,r,n,o,i;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(lD(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(bX(t))try{for(var u=!0,a=wo(t),c;c=await a.next(),e=c.done,!e;u=!0){o=c.value,u=!1;let d=o;s.push(...await KA(d))}}catch(d){r={error:d}}finally{try{!u&&!e&&(n=a.return)&&await n.call(a)}finally{if(r)throw r.error}}else{let d=(i=t?.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${DX(t)}`)}return s}function DX(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}var n0=class{constructor(e){this._client=e}};n0._key=[];function dD(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var b5=Object.freeze(Object.create(null)),IX=(t=dD)=>(function(r,...n){if(r.length===1)return r[0];let o=!1,i=[],s=r.reduce((d,p,m)=>{var E,y,A;/[?#]/.test(p)&&(o=!0);let S=n[m],b=(o?encodeURIComponent:t)(""+S);return m!==n.length&&(S==null||typeof S=="object"&&S.toString===((A=Object.getPrototypeOf((y=Object.getPrototypeOf((E=S.hasOwnProperty)!==null&&E!==void 0?E:b5))!==null&&y!==void 0?y:b5))===null||A===void 0?void 0:A.toString))&&(b=S+"",i.push({start:d.length+p.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(S).slice(8,-1)} is not a valid path parameter`})),d+p+(m===n.length?"":b)},""),u=s.split(/[?#]/,1)[0],a=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,c;for(;(c=a.exec(u))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((d,p)=>d.start-p.start),i.length>0){let d=0,p=i.reduce((m,E)=>{let y=" ".repeat(E.start-d),A="^".repeat(E.length);return d=E.start+E.length,m+y+A},"");throw new Kr(`Path parameters result in path with invalid segments:
${i.map(m=>m.error).join(`
`)}
${s}
${p}`)}return s}),Op=IX(dD);var o0=class extends n0{create(e,r){var n;let{api_version:o=this._client.apiVersion}=e,i=jp(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new Kr("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new Kr("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Op`/${o}/interactions`,Object.assign(Object.assign({body:i},r),{stream:(n=e.stream)!==null&&n!==void 0?n:!1}))}delete(e,r={},n){let{api_version:o=this._client.apiVersion}=r??{};return this._client.delete(Op`/${o}/interactions/${e}`,n)}cancel(e,r={},n){let{api_version:o=this._client.apiVersion}=r??{};return this._client.post(Op`/${o}/interactions/${e}/cancel`,n)}get(e,r={},n){var o;let i=r??{},{api_version:s=this._client.apiVersion}=i,u=jp(i,["api_version"]);return this._client.get(Op`/${s}/interactions/${e}`,Object.assign(Object.assign({query:u},n),{stream:(o=r?.stream)!==null&&o!==void 0?o:!1}))}};o0._key=Object.freeze(["interactions"]);var i0=class extends o0{};function MX(t){let e=0;for(let o of t)e+=o.length;let r=new Uint8Array(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}var Rp;function hS(t){let e;return(Rp??(e=new globalThis.TextEncoder,Rp=e.encode.bind(e)))(t)}var Dp;function v5(t){let e;return(Dp??(e=new globalThis.TextDecoder,Dp=e.decode.bind(e)))(t)}var Tc=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?hS(e):e;this.buffer=MX([this.buffer,r]);let n=[],o;for(;(o=NX(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){n.push(v5(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let i=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,s=v5(this.buffer.subarray(0,i));n.push(s),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}};Tc.NEWLINE_CHARS=new Set([`
`,"\r"]);Tc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function NX(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function BX(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}var s0={off:0,error:200,warn:300,info:400,debug:500},O5=(t,e,r)=>{if(t){if(fX(s0,t))return t;Nr(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(s0))}`)}};function G1(){}function Ip(t,e,r){return!e||s0[t]>s0[r]?G1:e[t].bind(e)}var PX={error:G1,warn:G1,info:G1,debug:G1},R5=new WeakMap;function Nr(t){var e;let r=t.logger,n=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!r)return PX;let o=R5.get(r);if(o&&o[0]===n)return o[1];let i={error:Ip("error",r,n),warn:Ip("warn",r,n),info:Ip("info",r,n),debug:Ip("debug",r,n)};return R5.set(r,[n,i]),i}var ku=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var YA=class t{constructor(e,r,n){this.iterator=e,this.controller=r,this.client=n}static fromSSEResponse(e,r,n){let o=!1,i=n?Nr(n):console;function s(){return _o(this,arguments,function*(){var a,c,d,p;if(o)throw new Kr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var E=!0,y=wo(FX(e,r)),A;A=yield we(y.next()),a=A.done,!a;E=!0){p=A.value,E=!1;let S=p;if(!m)if(S.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield we(JSON.parse(S.data))}catch(b){throw i.error("Could not parse message into JSON:",S.data),i.error("From chunk:",S.raw),b}}}catch(S){c={error:S}}finally{try{!E&&!a&&(d=y.return)&&(yield we(d.call(y)))}finally{if(c)throw c.error}}m=!0}catch(S){if(WA(S))return yield we(void 0);throw S}finally{m||r.abort()}})}return new t(s,r,n)}static fromReadableStream(e,r,n){let o=!1;function i(){return _o(this,arguments,function*(){var a,c,d,p;let m=new Tc,E=aD(e);try{for(var y=!0,A=wo(E),S;S=yield we(A.next()),a=S.done,!a;y=!0){p=S.value,y=!1;let b=p;for(let P of m.decode(b))yield yield we(P)}}catch(b){c={error:b}}finally{try{!y&&!a&&(d=A.return)&&(yield we(d.call(A)))}finally{if(c)throw c.error}}for(let b of m.flush())yield yield we(b)})}function s(){return _o(this,arguments,function*(){var a,c,d,p;if(o)throw new Kr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let m=!1;try{try{for(var E=!0,y=wo(i()),A;A=yield we(y.next()),a=A.done,!a;E=!0){p=A.value,E=!1;let S=p;m||S&&(yield yield we(JSON.parse(S)))}}catch(S){c={error:S}}finally{try{!E&&!a&&(d=y.return)&&(yield we(d.call(y)))}finally{if(c)throw c.error}}m=!0}catch(S){if(WA(S))return yield we(void 0);throw S}finally{m||r.abort()}})}return new t(s,r,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),o=i=>({next:()=>{if(i.length===0){let s=n.next();e.push(s),r.push(s)}return i.shift()}});return[new t(()=>o(e),this.controller,this.client),new t(()=>o(r),this.controller,this.client)]}toReadableStream(){let e=this,r;return uD({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{let{value:o,done:i}=await r.next();if(i)return n.close();let s=hS(JSON.stringify(o)+`
`);n.enqueue(s)}catch(o){n.error(o)}},async cancel(){var n;await((n=r.return)===null||n===void 0?void 0:n.call(r))}})}};function FX(t,e){return _o(this,arguments,function*(){var n,o,i,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Kr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Kr("Attempted to iterate over a response with no body");let u=new JA,a=new Tc,c=aD(t.body);try{for(var d=!0,p=wo(xX(c)),m;m=yield we(p.next()),n=m.done,!n;d=!0){s=m.value,d=!1;let E=s;for(let y of a.decode(E)){let A=u.decode(y);A&&(yield yield we(A))}}}catch(E){o={error:E}}finally{try{!d&&!n&&(i=p.return)&&(yield we(i.call(p)))}finally{if(o)throw o.error}}for(let E of a.flush()){let y=u.decode(E);y&&(yield yield we(y))}})}function xX(t){return _o(this,arguments,function*(){var r,n,o,i;let s=new Uint8Array;try{for(var u=!0,a=wo(t),c;c=yield we(a.next()),r=c.done,!r;u=!0){i=c.value,u=!1;let d=i;if(d==null)continue;let p=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?hS(d):d,m=new Uint8Array(s.length+p.length);m.set(s),m.set(p,s.length),s=m;let E;for(;(E=BX(s))!==-1;)yield yield we(s.slice(0,E)),s=s.slice(E)}}catch(d){n={error:d}}finally{try{!u&&!r&&(o=a.return)&&(yield we(o.call(a)))}finally{if(n)throw n.error}}s.length>0&&(yield yield we(s))})}var JA=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,o]=kX(e,":");return o.startsWith(" ")&&(o=o.substring(1)),r==="event"?this.event=o:r==="data"&&this.data.push(o),null}};function kX(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}async function LX(t,e){let{response:r,requestLogID:n,retryOfRequestLogID:o,startTime:i}=e,s=await(async()=>{var u;if(e.options.stream)return Nr(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):YA.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;let a=r.headers.get("content-type"),c=(u=a?.split(";")[0])===null||u===void 0?void 0:u.trim();return c?.includes("application/json")||c?.endsWith("+json")?r.headers.get("content-length")==="0"?void 0:await r.json():await r.text()})();return Nr(t).debug(`[${n}] response parsed`,ku({retryOfRequestLogID:o,url:r.url,status:r.status,body:s,durationMs:Date.now()-i})),s}var XA=class t extends Promise{constructor(e,r,n=LX){super(o=>{o(null)}),this.responsePromise=r,this.parseResponse=n,this.client=e}_thenUnwrap(e){return new t(this.client,this.responsePromise,async(r,n)=>e(await this.parseResponse(r,n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var fD=Symbol("brand.privateNullableHeaders");function*UX(t){if(!t)return;if(fD in t){let{values:n,nulls:o}=t;yield*n.entries();for(let i of o)yield[i,null];return}let e=!1,r;t instanceof Headers?r=t.entries():_5(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){let o=n[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let i=_5(n[1])?n[1]:[n[1]],s=!1;for(let u of i)u!==void 0&&(e&&!s&&(s=!0,yield[o,null]),yield[o,u])}}var U1=t=>{let e=new Headers,r=new Set;for(let n of t){let o=new Set;for(let[i,s]of UX(n)){let u=i.toLowerCase();o.has(u)||(e.delete(i),o.add(u)),s===null?(e.delete(i),r.add(u)):(e.append(i,s),r.delete(u))}}return{[fD]:!0,values:e,nulls:r}};var oA=t=>{var e,r,n,o,i,s;if(typeof globalThis.process<"u")return(n=(r=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||r===void 0?void 0:r.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||i===void 0?void 0:i.call(o,t))===null||s===void 0?void 0:s.trim()};var hD,u0=class t{constructor(e){var r,n,o,i,s,u,a,{baseURL:c=oA("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(r=oA("GEMINI_API_KEY"))!==null&&r!==void 0?r:null,apiVersion:p="v1beta"}=e,m=jp(e,["baseURL","apiKey","apiVersion"]);let E=Object.assign(Object.assign({apiKey:d,apiVersion:p},m),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(n=E.timeout)!==null&&n!==void 0?n:t.DEFAULT_TIMEOUT,this.logger=(o=E.logger)!==null&&o!==void 0?o:console;let y="warn";this.logLevel=y,this.logLevel=(s=(i=O5(E.logLevel,"ClientOptions.logLevel",this))!==null&&i!==void 0?i:O5(oA("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:y,this.fetchOptions=E.fetchOptions,this.maxRetries=(u=E.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(a=E.fetch)!==null&&a!==void 0?a:AX(),this.encoder=wX,this._options=E,this.apiKey=d,this.apiVersion=p,this.clientAdapter=E.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!r.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){let r=U1([e.headers]);if(!(r.values.has("authorization")||r.values.has("x-goog-api-key"))){if(this.apiKey)return U1([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return U1([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new Kr(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Cc}`}defaultIdempotencyKey(){return`stainless-node-retry-${sX()}`}makeStatusError(e,r,n,o){return Yr.generate(e,r,n,o)}buildURL(e,r,n){let o=!this.baseURLOverridden()&&n||this.baseURL,i=aX(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return dX(s)||(r=Object.assign(Object.assign({},s),r)),typeof r=="object"&&r&&!Array.isArray(r)&&(i.search=this.stringifyQuery(r)),i.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){let r=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${r}`}}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(o=>Object.assign({method:e,path:r},o)))}request(e,r=null){return new XA(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){var o,i,s;let u=await e,a=(o=u.maxRetries)!==null&&o!==void 0?o:this.maxRetries;r==null&&(r=a),await this.prepareOptions(u);let{req:c,url:d,timeout:p}=await this.buildRequest(u,{retryCount:a-r});await this.prepareRequest(c,{url:d,options:u});let m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=n===void 0?"":`, retryOf: ${n}`,y=Date.now();if(Nr(this).debug(`[${m}] sending request`,ku({retryOfRequestLogID:n,method:u.method,url:d,options:u,headers:c.headers})),!((i=u.signal)===null||i===void 0)&&i.aborted)throw new $1;let A=new AbortController,S=await this.fetchWithTimeout(d,c,p,A).catch(zA),b=Date.now();if(S instanceof globalThis.Error){let B=`retrying, ${r} attempts remaining`;if(!((s=u.signal)===null||s===void 0)&&s.aborted)throw new $1;let v=WA(S)||/timed? ?out/i.test(String(S)+("cause"in S?String(S.cause):""));if(r)return Nr(this).info(`[${m}] connection ${v?"timed out":"failed"} - ${B}`),Nr(this).debug(`[${m}] connection ${v?"timed out":"failed"} (${B})`,ku({retryOfRequestLogID:n,url:d,durationMs:b-y,message:S.message})),this.retryRequest(u,r,n??m);throw Nr(this).info(`[${m}] connection ${v?"timed out":"failed"} - error; no more retries left`),Nr(this).debug(`[${m}] connection ${v?"timed out":"failed"} (error; no more retries left)`,ku({retryOfRequestLogID:n,url:d,durationMs:b-y,message:S.message})),v?new Kp:new wc({cause:S})}let P=`[${m}${E}] ${c.method} ${d} ${S.ok?"succeeded":"failed"} with status ${S.status} in ${b-y}ms`;if(!S.ok){let B=await this.shouldRetry(S);if(r&&B){let M=`retrying, ${r} attempts remaining`;return await _X(S.body),Nr(this).info(`${P} - ${M}`),Nr(this).debug(`[${m}] response error (${M})`,ku({retryOfRequestLogID:n,url:S.url,status:S.status,headers:S.headers,durationMs:b-y})),this.retryRequest(u,r,n??m,S.headers)}let v=B?"error; no more retries left":"error; not retryable";Nr(this).info(`${P} - ${v}`);let I=await S.text().catch(M=>zA(M).message),O=pX(I),z=O?void 0:I;throw Nr(this).debug(`[${m}] response error (${v})`,ku({retryOfRequestLogID:n,url:S.url,status:S.status,headers:S.headers,message:z,durationMs:Date.now()-y})),this.makeStatusError(S.status,O,z,S.headers)}return Nr(this).info(P),Nr(this).debug(`[${m}] response start`,ku({retryOfRequestLogID:n,url:S.url,status:S.status,headers:S.headers,durationMs:b-y})),{response:S,options:u,controller:A,requestLogID:m,retryOfRequestLogID:n,startTime:y}}async fetchWithTimeout(e,r,n,o){let i=r||{},{signal:s,method:u}=i,a=jp(i,["signal","method"]),c=this._makeAbort(o);s&&s.addEventListener("abort",c,{once:!0});let d=setTimeout(c,n),p=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,m=Object.assign(Object.assign(Object.assign({signal:o.signal},p?{duplex:"half"}:{}),{method:"GET"}),a);u&&(m.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,m)}finally{clearTimeout(d)}}async shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,o){var i;let s,u=o?.get("retry-after-ms");if(u){let c=parseFloat(u);Number.isNaN(c)||(s=c)}let a=o?.get("retry-after");if(a&&!s){let c=parseFloat(a);Number.isNaN(c)?s=Date.parse(a)-Date.now():s=c*1e3}if(!(s&&0<=s&&s<60*1e3)){let c=(i=e.maxRetries)!==null&&i!==void 0?i:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(r,c)}return await mX(s),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){let i=r-e,s=Math.min(.5*Math.pow(2,i),8),u=1-Math.random()*.25;return s*u*1e3}async buildRequest(e,{retryCount:r=0}={}){var n,o,i;let s=Object.assign({},e),{method:u,path:a,query:c,defaultBaseURL:d}=s,p=this.buildURL(a,c,d);"timeout"in s&&hX("timeout",s.timeout),s.timeout=(n=s.timeout)!==null&&n!==void 0?n:this.timeout;let{bodyHeaders:m,body:E}=this.buildBody({options:s}),y=await this.buildHeaders({options:e,method:u,bodyHeaders:m,retryCount:r});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:y},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(i=s.fetchOptions)!==null&&i!==void 0?i:{}),url:p,timeout:s.timeout}}async buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:o}){let i={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);let s=await this.authHeaders(e),u=U1([i,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),CX()),this._options.defaultHeaders,n,e.headers,s]);return this.validateHeaders(u),u.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};let n=U1([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:SX(e)}:this.encoder({body:e,headers:n})}};u0.DEFAULT_TIMEOUT=6e4;var xt=class extends u0{constructor(){super(...arguments),this.interactions=new i0(this)}};hD=xt;xt.GeminiNextGenAPIClient=hD;xt.GeminiNextGenAPIClientError=Kr;xt.APIError=Yr;xt.APIConnectionError=wc;xt.APIConnectionTimeoutError=Kp;xt.APIUserAbortError=$1;xt.NotFoundError=Qp;xt.ConflictError=Zp;xt.RateLimitError=t0;xt.BadRequestError=Yp;xt.AuthenticationError=Jp;xt.InternalServerError=r0;xt.PermissionDeniedError=Xp;xt.UnprocessableEntityError=e0;xt.toFile=RX;xt.Interactions=i0;var D5="x-goog-api-key",q1="https://www.googleapis.com/auth/cloud-platform",QA=class{constructor(e){if(e.apiKey!==void 0){this.apiKey=e.apiKey;return}let r=qX(e.googleAuthOptions);this.googleAuth=new I5.GoogleAuth(r)}async addAuthHeaders(e,r){if(this.apiKey!==void 0){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");this.addKeyHeader(e);return}return this.addGoogleAuthHeaders(e,r)}addKeyHeader(e){if(e.get(D5)===null){if(this.apiKey===void 0)throw new Error("Trying to set API key header but apiKey is not set");e.append(D5,this.apiKey)}}async addGoogleAuthHeaders(e,r){if(this.googleAuth===void 0)throw new Error("Trying to set google-auth headers but googleAuth is unset");let n=await this.googleAuth.getRequestHeaders(r);for(let[o,i]of n)e.get(o)===null&&e.append(o,i)}};function qX(t){let e;if(t){if(e=t,e.scopes){if(typeof e.scopes=="string"&&e.scopes!==q1||Array.isArray(e.scopes)&&e.scopes.indexOf(q1)<0)throw new Error(`Invalid auth scopes. Scopes must include: ${q1}`)}else return e.scopes=[q1],e;return e}else return e={scopes:[q1]},e}var ZA=class{async download(e,r){if(e.downloadPath){let n=await GX(e,r);if(n instanceof qu){let o=(0,M5.createWriteStream)(e.downloadPath);B5.Readable.fromWeb(n.responseInternal.body).pipe(o),await(0,P5.finished)(o)}else try{await(0,N5.writeFile)(e.downloadPath,n,{encoding:"base64"})}catch(o){throw new Error(`Failed to write file to ${e.downloadPath}: ${o}`)}}}};async function GX(t,e){var r,n,o;let i=fS(t.file);if(i!==void 0)return await e.request({path:`files/${i}:download`,httpMethod:"GET",queryParams:{alt:"media"},httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=t.config)===null||n===void 0?void 0:n.abortSignal});if(V5(t.file)){let s=(o=t.file.video)===null||o===void 0?void 0:o.videoBytes;if(typeof s=="string")return s;throw new Error("Failed to download generated video, Uri or videoBytes not found.")}else if($5(t.file)){let s=t.file.videoBytes;if(typeof s=="string")return s;throw new Error("Failed to download video, Uri or videoBytes not found.")}else throw new Error("Unsupported file type")}var eS=class{create(e,r,n){return new tS(e,r,n)}},tS=class{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new rA.default(this.url,{headers:this.headers}),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};function VX(t,e){let r={},n=l(t,["name"]);return n!=null&&f(r,["_url","name"],n),r}function $X(t,e){let r={},n=l(t,["name"]);return n!=null&&f(r,["_url","name"],n),r}function HX(t,e){let r={},n=l(t,["sdkHttpResponse"]);return n!=null&&f(r,["sdkHttpResponse"],n),r}function WX(t,e){let r={},n=l(t,["sdkHttpResponse"]);return n!=null&&f(r,["sdkHttpResponse"],n),r}function zX(t,e,r){let n={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let o=l(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&f(e,["displayName"],o),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let i=l(t,["epochCount"]);e!==void 0&&i!=null&&f(e,["tuningTask","hyperparameters","epochCount"],i);let s=l(t,["learningRateMultiplier"]);if(s!=null&&f(n,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(l(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(l(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");let u=l(t,["batchSize"]);e!==void 0&&u!=null&&f(e,["tuningTask","hyperparameters","batchSize"],u);let a=l(t,["learningRate"]);if(e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","learningRate"],a),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(l(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(l(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(l(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(l(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(l(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return n}function jX(t,e,r){let n={},o=l(r,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let O=l(t,["validationDataset"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec"],iA(O))}else if(o==="PREFERENCE_TUNING"){let O=l(t,["validationDataset"]);e!==void 0&&O!=null&&f(e,["preferenceOptimizationSpec"],iA(O))}else if(o==="DISTILLATION"){let O=l(t,["validationDataset"]);e!==void 0&&O!=null&&f(e,["distillationSpec"],iA(O))}let i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&f(e,["tunedModelDisplayName"],i);let s=l(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);let u=l(r,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){let O=l(t,["epochCount"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],O)}else if(u==="PREFERENCE_TUNING"){let O=l(t,["epochCount"]);e!==void 0&&O!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],O)}else if(u==="DISTILLATION"){let O=l(t,["epochCount"]);e!==void 0&&O!=null&&f(e,["distillationSpec","hyperParameters","epochCount"],O)}let a=l(r,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let O=l(t,["learningRateMultiplier"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],O)}else if(a==="PREFERENCE_TUNING"){let O=l(t,["learningRateMultiplier"]);e!==void 0&&O!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],O)}else if(a==="DISTILLATION"){let O=l(t,["learningRateMultiplier"]);e!==void 0&&O!=null&&f(e,["distillationSpec","hyperParameters","learningRateMultiplier"],O)}let c=l(r,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let O=l(t,["exportLastCheckpointOnly"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],O)}else if(c==="PREFERENCE_TUNING"){let O=l(t,["exportLastCheckpointOnly"]);e!==void 0&&O!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],O)}else if(c==="DISTILLATION"){let O=l(t,["exportLastCheckpointOnly"]);e!==void 0&&O!=null&&f(e,["distillationSpec","exportLastCheckpointOnly"],O)}let d=l(r,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){let O=l(t,["adapterSize"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],O)}else if(d==="PREFERENCE_TUNING"){let O=l(t,["adapterSize"]);e!==void 0&&O!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],O)}else if(d==="DISTILLATION"){let O=l(t,["adapterSize"]);e!==void 0&&O!=null&&f(e,["distillationSpec","hyperParameters","adapterSize"],O)}let p=l(r,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){let O=l(t,["tuningMode"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","tuningMode"],O)}let m=l(t,["customBaseModel"]);e!==void 0&&m!=null&&f(e,["customBaseModel"],m);let E=l(r,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){let O=l(t,["batchSize"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","hyperParameters","batchSize"],O)}let y=l(r,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){let O=l(t,["learningRate"]);e!==void 0&&O!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRate"],O)}let A=l(t,["labels"]);e!==void 0&&A!=null&&f(e,["labels"],A);let S=l(t,["beta"]);e!==void 0&&S!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],S);let b=l(t,["baseTeacherModel"]);e!==void 0&&b!=null&&f(e,["distillationSpec","baseTeacherModel"],b);let P=l(t,["tunedTeacherModelSource"]);e!==void 0&&P!=null&&f(e,["distillationSpec","tunedTeacherModelSource"],P);let B=l(t,["sftLossWeightMultiplier"]);e!==void 0&&B!=null&&f(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],B);let v=l(t,["outputUri"]);e!==void 0&&v!=null&&f(e,["outputUri"],v);let I=l(t,["encryptionSpec"]);return e!==void 0&&I!=null&&f(e,["encryptionSpec"],I),n}function KX(t,e){let r={},n=l(t,["baseModel"]);n!=null&&f(r,["baseModel"],n);let o=l(t,["preTunedModel"]);o!=null&&f(r,["preTunedModel"],o);let i=l(t,["trainingDataset"]);i!=null&&iQ(i);let s=l(t,["config"]);return s!=null&&zX(s,r),r}function YX(t,e){let r={},n=l(t,["baseModel"]);n!=null&&f(r,["baseModel"],n);let o=l(t,["preTunedModel"]);o!=null&&f(r,["preTunedModel"],o);let i=l(t,["trainingDataset"]);i!=null&&sQ(i,r,e);let s=l(t,["config"]);return s!=null&&jX(s,r,e),r}function JX(t,e){let r={},n=l(t,["name"]);return n!=null&&f(r,["_url","name"],n),r}function XX(t,e){let r={},n=l(t,["name"]);return n!=null&&f(r,["_url","name"],n),r}function QX(t,e,r){let n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);let i=l(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);let s=l(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function ZX(t,e,r){let n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);let i=l(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);let s=l(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function eQ(t,e){let r={},n=l(t,["config"]);return n!=null&&QX(n,r),r}function tQ(t,e){let r={},n=l(t,["config"]);return n!=null&&ZX(n,r),r}function rQ(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["nextPageToken"]);o!=null&&f(r,["nextPageToken"],o);let i=l(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>pD(u))),f(r,["tuningJobs"],s)}return r}function nQ(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["nextPageToken"]);o!=null&&f(r,["nextPageToken"],o);let i=l(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>rS(u))),f(r,["tuningJobs"],s)}return r}function oQ(t,e){let r={},n=l(t,["name"]);n!=null&&f(r,["model"],n);let o=l(t,["name"]);return o!=null&&f(r,["endpoint"],o),r}function iQ(t,e){let r={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let n=l(t,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),f(r,["examples","examples"],o)}return r}function sQ(t,e,r){let n={},o=l(r,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let s=l(t,["gcsUri"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){let s=l(t,["gcsUri"]);e!==void 0&&s!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(o==="DISTILLATION"){let s=l(t,["gcsUri"]);e!==void 0&&s!=null&&f(e,["distillationSpec","promptDatasetUri"],s)}let i=l(r,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){let s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(i==="DISTILLATION"){let s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["distillationSpec","promptDatasetUri"],s)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function pD(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["name"]);o!=null&&f(r,["name"],o);let i=l(t,["state"]);i!=null&&f(r,["state"],G5(i));let s=l(t,["createTime"]);s!=null&&f(r,["createTime"],s);let u=l(t,["tuningTask","startTime"]);u!=null&&f(r,["startTime"],u);let a=l(t,["tuningTask","completeTime"]);a!=null&&f(r,["endTime"],a);let c=l(t,["updateTime"]);c!=null&&f(r,["updateTime"],c);let d=l(t,["description"]);d!=null&&f(r,["description"],d);let p=l(t,["baseModel"]);p!=null&&f(r,["baseModel"],p);let m=l(t,["_self"]);return m!=null&&f(r,["tunedModel"],oQ(m)),r}function rS(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["name"]);o!=null&&f(r,["name"],o);let i=l(t,["state"]);i!=null&&f(r,["state"],G5(i));let s=l(t,["createTime"]);s!=null&&f(r,["createTime"],s);let u=l(t,["startTime"]);u!=null&&f(r,["startTime"],u);let a=l(t,["endTime"]);a!=null&&f(r,["endTime"],a);let c=l(t,["updateTime"]);c!=null&&f(r,["updateTime"],c);let d=l(t,["error"]);d!=null&&f(r,["error"],d);let p=l(t,["description"]);p!=null&&f(r,["description"],p);let m=l(t,["baseModel"]);m!=null&&f(r,["baseModel"],m);let E=l(t,["tunedModel"]);E!=null&&f(r,["tunedModel"],E);let y=l(t,["preTunedModel"]);y!=null&&f(r,["preTunedModel"],y);let A=l(t,["supervisedTuningSpec"]);A!=null&&f(r,["supervisedTuningSpec"],A);let S=l(t,["preferenceOptimizationSpec"]);S!=null&&f(r,["preferenceOptimizationSpec"],S);let b=l(t,["distillationSpec"]);b!=null&&f(r,["distillationSpec"],b);let P=l(t,["tuningDataStats"]);P!=null&&f(r,["tuningDataStats"],P);let B=l(t,["encryptionSpec"]);B!=null&&f(r,["encryptionSpec"],B);let v=l(t,["partnerModelTuningSpec"]);v!=null&&f(r,["partnerModelTuningSpec"],v);let I=l(t,["customBaseModel"]);I!=null&&f(r,["customBaseModel"],I);let O=l(t,["experiment"]);O!=null&&f(r,["experiment"],O);let z=l(t,["labels"]);z!=null&&f(r,["labels"],z);let Z=l(t,["outputUri"]);Z!=null&&f(r,["outputUri"],Z);let M=l(t,["pipelineJob"]);M!=null&&f(r,["pipelineJob"],M);let V=l(t,["serviceAccount"]);V!=null&&f(r,["serviceAccount"],V);let Y=l(t,["tunedModelDisplayName"]);Y!=null&&f(r,["tunedModelDisplayName"],Y);let te=l(t,["veoTuningSpec"]);return te!=null&&f(r,["veoTuningSpec"],te),r}function uQ(t,e){let r={},n=l(t,["sdkHttpResponse"]);n!=null&&f(r,["sdkHttpResponse"],n);let o=l(t,["name"]);o!=null&&f(r,["name"],o);let i=l(t,["metadata"]);i!=null&&f(r,["metadata"],i);let s=l(t,["done"]);s!=null&&f(r,["done"],s);let u=l(t,["error"]);return u!=null&&f(r,["error"],u),r}function iA(t,e){let r={},n=l(t,["gcsUri"]);n!=null&&f(r,["validationDatasetUri"],n);let o=l(t,["vertexDatasetResource"]);return o!=null&&f(r,["validationDatasetUri"],o),r}var nS=class extends To{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Ui(Li.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.get=async r=>await this.getInternal(r),this.tune=async r=>{var n;if(this.apiClient.isVertexAI())if(r.baseModel.startsWith("projects/")){let o={tunedModelName:r.baseModel};!((n=r.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(o.checkpointId=r.config.preTunedModelCheckpointId);let i=Object.assign(Object.assign({},r),{preTunedModel:o});return i.baseModel=void 0,await this.tuneInternal(i)}else{let o=Object.assign({},r);return await this.tuneInternal(o)}else{let o=Object.assign({},r),i=await this.tuneMldevInternal(o),s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:uA.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=XX(e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>rS(d))}else{let c=JX(e);return u=ae("{name}",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>pD(d))}}async listInternal(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=tQ(e);return u=ae("tuningJobs",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=nQ(d),m=new qp;return Object.assign(m,p),m})}else{let c=eQ(e);return u=ae("tunedModels",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=rQ(d),m=new qp;return Object.assign(m,p),m})}}async cancel(e){var r,n,o,i;let s,u="",a={};if(this.apiClient.isVertexAI()){let c=$X(e);return u=ae("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=WX(d),m=new Gp;return Object.assign(m,p),m})}else{let c=VX(e);return u=ae("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:d.headers},m})),s.then(d=>{let p=HX(d),m=new Gp;return Object.assign(m,p),m})}}async tuneInternal(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI()){let u=YX(e,e);return i=ae("tuningJobs",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:a.headers},d})),o.then(a=>rS(a))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=KX(e);return i=ae("tunedModels",u._url),s=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(a=>a.json().then(c=>{let d=c;return d.sdkHttpResponse={headers:a.headers},d})),o.then(a=>uQ(a))}}},mD=1024*1024*8,gD=3,ED=1e3,yD=2,Rs="x-goog-upload-status";async function aQ(t,e,r){var n;let o=await CD(t,e,r),i=await o?.json();if(((n=o?.headers)===null||n===void 0?void 0:n[Rs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function cQ(t,e,r){var n;let o=await CD(t,e,r),i=await o?.json();if(((n=o?.headers)===null||n===void 0?void 0:n[Rs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=uS(i),u=new Wp;return Object.assign(u,s),u}async function CD(t,e,r){var n,o;let i=0,s=0,u=new qu(new Response),a="upload";for(i=t.size;s<i;){let c=Math.min(mD,i-s),d=t.slice(s,s+c);s+c>=i&&(a+=", finalize");let p=0,m=ED;for(;p<gD&&(u=await r.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":a,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((n=u?.headers)===null||n===void 0)&&n[Rs]));)p++,await AD(m),m=m*yD;if(s+=c,((o=u?.headers)===null||o===void 0?void 0:o[Rs])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function lQ(t){return{size:t.size,type:t.type}}function AD(t){return new Promise(e=>setTimeout(e,t))}var oS=class{async stat(e){let r={size:0,type:void 0};if(typeof e=="string"){let n=await c0.stat(e);return r.size=n.size,r.type=this.inferMimeType(e),r}else return await lQ(e)}async upload(e,r,n){return typeof e=="string"?await this.uploadFileFromPath(e,r,n):aQ(e,r,n)}async uploadToFileSearchStore(e,r,n){return typeof e=="string"?await this.uploadFileToFileSearchStoreFromPath(e,r,n):cQ(e,r,n)}inferMimeType(e){let r=e.slice(e.lastIndexOf(".")+1);return{aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz+xml",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"}[r.toLowerCase()]}async uploadFileFromPath(e,r,n){var o;let i=await this.uploadFileFromPathInternal(e,r,n),s=await i?.json();if(((o=i?.headers)===null||o===void 0?void 0:o[Rs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async uploadFileToFileSearchStoreFromPath(e,r,n){var o;let i=await this.uploadFileFromPathInternal(e,r,n),s=await i?.json();if(((o=i?.headers)===null||o===void 0?void 0:o[Rs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let u=uS(s),a=new Wp;return Object.assign(a,u),a}async uploadFileFromPathInternal(e,r,n){var o,i;let s=0,u=0,a=new qu(new Response),c="upload",d,p=F5.basename(e);try{if(d=await c0.open(e,"r"),!d)throw new Error("Failed to open file");for(s=(await d.stat()).size;u<s;){let m=Math.min(mD,s-u);u+m>=s&&(c+=", finalize");let E=new Uint8Array(m),{bytesRead:y}=await d.read(E,0,m,u);if(y!==m)throw new Error(`Failed to read ${m} bytes from file at offset ${u}. bytes actually read: ${y}`);let A=new Blob([E]),S=0,b=ED;for(;S<gD&&(a=await n.request({path:"",body:A,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:r,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(u),"Content-Length":String(y),"X-Goog-Upload-File-Name":p}}}),!(!((o=a?.headers)===null||o===void 0)&&o[Rs]));)S++,await AD(b),b=b*yD;if(u+=y,((i=a?.headers)===null||i===void 0?void 0:i[Rs])!=="active")break;if(s<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}finally{d&&await d.close()}}};var iS=class extends IA{async registerFiles(e){if(typeof process>"u"||!process.versions||!process.versions.node)throw new Error("registerFiles is only supported in Node.js environments.");let n=await e.auth.getRequestHeaders(),o=e.config||{},i=o.httpOptions||{},s=Object.assign({},i.headers||{});if(n)if(typeof n[Symbol.iterator]=="function")for(let[u,a]of n)s[u]=a;else for(let[u,a]of Object.entries(n))s[u]=a;return this._registerFiles({uris:e.uris,config:Object.assign(Object.assign({},o),{httpOptions:Object.assign(Object.assign({},i),{headers:s})})})}};var dQ="gl-node/",a0=class{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let r=this.httpOptions;r?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let n=new xt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:r?.timeout,maxRetries:(e=r?.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=n.interactions,this._interactions}constructor(e){var r,n,o,i,s,u;if((e.project||e.location)&&e.apiKey)throw new Error("Project/location and API key are mutually exclusive in the client initializer.");this.vertexai=(n=(r=e.vertexai)!==null&&r!==void 0?r:fQ("GOOGLE_GENAI_USE_VERTEXAI"))!==null&&n!==void 0?n:!1;let a=pQ(),c=Uu("GOOGLE_CLOUD_PROJECT"),d=Uu("GOOGLE_CLOUD_LOCATION");if(this.apiKey=(o=e.apiKey)!==null&&o!==void 0?o:a,this.project=(i=e.project)!==null&&i!==void 0?i:c,this.location=(s=e.location)!==null&&s!==void 0?s:d,!this.vertexai&&!this.apiKey)throw new Error("API key must be set when using the Gemini API.");e.vertexai&&(!((u=e.googleAuthOptions)===null||u===void 0)&&u.credentials&&(console.debug("The user provided Google Cloud credentials will take precedence over the API key from the environment variable."),this.apiKey=void 0),(c||d)&&e.apiKey?(console.debug("The user provided Vertex AI API key will take precedence over the project/location from the environment variables."),this.project=void 0,this.location=void 0):(e.project||e.location)&&a?(console.debug("The user provided project/location will take precedence over the API key from the environment variables."),this.apiKey=void 0):(c||d)&&a&&(console.debug("The project/location from the environment variables will take precedence over the API key from the environment variables."),this.apiKey=void 0),!this.location&&!this.apiKey&&(this.location="global"));let p=GW(e.httpOptions,e.vertexai,Uu("GOOGLE_VERTEX_BASE_URL"),Uu("GOOGLE_GEMINI_BASE_URL"));p&&(e.httpOptions?e.httpOptions.baseUrl=p:e.httpOptions={baseUrl:p}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let m=new QA({apiKey:this.apiKey,googleAuthOptions:e.googleAuthOptions});this.apiClient=new PA({auth:m,project:this.project,location:this.location,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:dQ+process.version,uploader:new oS,downloader:new ZA}),this.models=new qA(this.apiClient),this.live=new LA(this.apiClient,m,new eS),this.batches=new vA(this.apiClient),this.chats=new RA(this.models,this.apiClient),this.caches=new OA(this.apiClient),this.files=new iS(this.apiClient),this.operations=new GA(this.apiClient),this.authTokens=new VA(this.apiClient),this.tunings=new nS(this.apiClient),this.fileSearchStores=new HA(this.apiClient)}};function Uu(t){var e,r,n;return(n=(r=(e=process==null?void 0:process.env)===null||e===void 0?void 0:e[t])===null||r===void 0?void 0:r.trim())!==null&&n!==void 0?n:void 0}function fQ(t){return hQ(Uu(t))}function hQ(t){return t===void 0?!1:t.toLowerCase()==="true"}function pQ(){let t=Uu("GOOGLE_API_KEY"),e=Uu("GEMINI_API_KEY");return t&&e&&console.warn("Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY."),t||e||void 0}var mQ="[FlowFixer:LLMClient]",pS="gemini-2.0-flash",Br=class extends Error{name="FlowFixerError";constructor(e,r){super(e),r!==void 0&&(this.cause=r)}},Rc;async function mS(t){let e=await t.get("flowfixer.geminiKey");if(!e)throw new Br("API key not found. Add GEMINI_API_KEY to .env or use 'Visual Debugger: Set Gemini API Key' command.");Rc=new a0({apiKey:e}),console.log(`${mQ} initialized with Gemini model ${pS}`)}function Gu(){return Rc!==void 0}async function SD(t){if(!Rc)throw new Br("LLM client not initialized. Call initialize() first.");let e=gQ(t);try{let n=(await Rc.models.generateContent({model:pS,contents:e,config:{responseMimeType:"application/json",responseSchema:yQ}})).text;if(!n)throw new Br("Gemini returned an empty response");return JSON.parse(n)}catch(r){throw r instanceof Br?r:new Br("Failed to analyze error",r)}}async function _D(t){if(!Rc)throw new Br("LLM client not initialized. Call initialize() first.");let e=EQ(t);try{let n=(await Rc.models.generateContent({model:pS,contents:e,config:{responseMimeType:"application/json",responseSchema:CQ}})).text;if(!n)throw new Br("Gemini returned an empty response");return JSON.parse(n)}catch(r){throw r instanceof Br?r:new Br("Failed to analyze diff",r)}}function gQ(t){let e=t.errorMessage.trim()||"No error message \u2014 the code runs but produces incorrect results";return AQ.replace("{{language}}",t.language).replace("{{filename}}",t.filename).replace("{{errorMessage}}",e).replace("{{codeContext}}",t.codeContext)}function EQ(t){return SQ.replace("{{language}}",t.language).replace("{{filename}}",t.filename).replace("{{originalError}}",t.originalError).replace("{{diff}}",t.diff)}var yQ={type:pt.OBJECT,properties:{category:{type:pt.STRING,enum:["Syntax Error","Logic Error","Runtime Error"]},location:{type:pt.STRING},explanation:{type:pt.STRING},howToFix:{type:pt.STRING},howToPrevent:{type:pt.STRING},bestPractices:{type:pt.STRING},quiz:{type:pt.OBJECT,properties:{question:{type:pt.STRING},options:{type:pt.ARRAY,items:{type:pt.STRING}},correct:{type:pt.STRING,enum:["A","B","C","D"]},explanation:{type:pt.STRING}},required:["question","options","correct","explanation"]}},required:["category","location","explanation","howToFix","howToPrevent","bestPractices","quiz"]},CQ={type:pt.OBJECT,properties:{whatChanged:{type:pt.STRING},whyItFixes:{type:pt.STRING},keyTakeaway:{type:pt.STRING}},required:["whatChanged","whyItFixes","keyTakeaway"]},AQ=`You are a coding education assistant. A student just hit an error they don't understand. Your job is to explain it clearly so they can learn from it.

## Input
- Language: {{language}}
- File: {{filename}}
- Error message: {{errorMessage}}
  (If this is empty or says "No error message", this is likely a logic error where the code runs but produces wrong results.)
- Code context (lines around the error):
{{codeContext}}

## Output Format

Respond with a JSON object containing:

- "category": Classify as exactly one of "Syntax Error", "Logic Error", or "Runtime Error".
  - Syntax Error: Code cannot be parsed. Brackets, parentheses, commas, or keywords are missing/wrong.
  - Logic Error: Code runs without crashing but produces wrong results. Wrong operator, bad condition, off-by-one.
  - Runtime Error: Code parses and starts running but crashes mid-execution. Null references, type errors, missing properties.

- "location": File name and line number(s) where the bug is. Format: "line N, filename.ext"

- "explanation": Decode the error message piece by piece for a beginner. What does each part of the error message mean? If there is no error message (logic error), explain what the code does wrong and what symptoms the student would see. Under 60 words.

- "howToFix": Step-by-step instructions referencing the actual code the student wrote. Tell them exactly what to change, on which line. Under 40 words.

- "howToPrevent": A general principle the student can apply next time to avoid this class of bug. Under 30 words.

- "bestPractices": An industry best practice related to this bug type. Under 30 words.

- "quiz": A multiple-choice question (4 options, one correct) testing whether the student understands WHY the error happened \u2014 not just what to do. The wrong options should be plausible but clearly wrong if you understood the explanation. Include a brief explanation of why the correct answer is right.

## Example 1: Syntax Error

Input:
- Language: TypeScript
- File: BrokenSyntax.tsx
- Error message: SyntaxError: Unexpected token, expected ","
- Code context:
  12 |   return (
  13 |     <div>
  14 |       <h1>Welcome</h1>
  15 |       <p>{message}</p>
  16 |     </div>
  17 |   // missing closing parenthesis
  18 |  }

Output:
{
  "category": "Syntax Error",
  "location": "line 17, BrokenSyntax.tsx",
  "explanation": "The error says 'Unexpected token, expected \\",\\"'. This means the parser reached the end of your return statement and found something it didn't expect. It's looking for a closing ')' to match the '(' on line 12, but instead it finds '}'. The return() call was never closed.",
  "howToFix": "Add a closing ')' after the </div> on line 16 so the return statement is properly closed: return ( <div>...</div> )",
  "howToPrevent": "When you type an opening bracket or parenthesis, immediately type the closing one, then fill in the middle.",
  "bestPractices": "Use an editor with bracket matching enabled. Most editors highlight unmatched brackets in red.",
  "quiz": {
    "question": "What is the root cause of this SyntaxError?",
    "options": [
      "A) The <div> tag is not closed",
      "B) The return statement is missing its closing parenthesis",
      "C) The JSX expression {message} is invalid",
      "D) The function is missing a return type"
    ],
    "correct": "B",
    "explanation": "The return( on line 12 opens a parenthesis that is never closed. The parser expected ')' but found '}' instead, which caused the SyntaxError."
  }
}

## Example 2: Logic Error

Input:
- Language: TypeScript
- File: BrokenLogic.tsx
- Error message: No error message \u2014 the app renders one extra undefined item in the list
- Code context:
  8  |  const items = ["Apple", "Banana", "Cherry"];
  9  |  const listItems = [];
  10 |  for (let i = 0; i <= items.length; i++) {
  11 |    listItems.push(<li key={i}>{items[i]}</li>);
  12 |  }

Output:
{
  "category": "Logic Error",
  "location": "line 10, BrokenLogic.tsx",
  "explanation": "There is no crash, but the loop runs one time too many. The condition 'i <= items.length' should be 'i < items.length'. Arrays are zero-indexed, so an array of 3 items has indices 0, 1, 2. When i equals 3, items[3] is undefined, so the list renders an extra empty item.",
  "howToFix": "On line 10, change '<=' to '<': for (let i = 0; i < items.length; i++). This stops the loop before going past the last valid index.",
  "howToPrevent": "Remember: array indices go from 0 to length - 1. Always use '< length' (not '<= length') when looping through arrays.",
  "bestPractices": "Prefer .map() or for...of loops over manual index loops. They handle bounds automatically and eliminate off-by-one bugs.",
  "quiz": {
    "question": "Why does the loop render an extra undefined item?",
    "options": [
      "A) The array is empty",
      "B) The loop starts at index 1 instead of 0",
      "C) The condition '<=' runs one iteration past the last valid index",
      "D) The push() method adds an extra element to the array"
    ],
    "correct": "C",
    "explanation": "'<=' means the loop runs when i equals items.length (3), but the last valid index is 2. items[3] is undefined, so an extra empty <li> is rendered."
  }
}

## Example 3: Runtime Error

Input:
- Language: TypeScript
- File: BrokenRuntime.tsx
- Error message: TypeError: Cannot read properties of undefined (reading 'map')
- Code context:
  5  |  const [data, setData] = useState();
  6  |  useEffect(() => {
  7  |    fetch("/api/items").then(res => res.json()).then(setData);
  8  |  }, []);
  9  |  return (
  10 |    <ul>{data.map(item => <li>{item}</li>)}</ul>
  11 |  );

Output:
{
  "category": "Runtime Error",
  "location": "line 10, BrokenRuntime.tsx",
  "explanation": "The error says 'Cannot read properties of undefined (reading \\"map\\")'. This means you called .map() on something that is undefined. On line 5, useState() is called without a default value, so 'data' starts as undefined. On line 10, the component tries to call data.map() before the fetch on line 7 has finished, and undefined has no .map() method.",
  "howToFix": "Initialize state with an empty array: useState([]). This way data is always an array, even before the fetch completes. You can also add a guard: data?.map() or (data ?? []).map().",
  "howToPrevent": "Always give useState a default value that matches how you use the variable. If you call .map(), initialize with [].",
  "bestPractices": "Use optional chaining (data?.map()) or nullish coalescing ((data ?? []).map()) to guard against undefined values in async data flows.",
  "quiz": {
    "question": "Why does calling .map() on 'data' throw a TypeError?",
    "options": [
      "A) .map() only works on strings, not arrays",
      "B) 'data' is undefined because useState() was called without a default value",
      "C) The fetch failed and returned an error",
      "D) .map() is not a valid JavaScript method"
    ],
    "correct": "B",
    "explanation": "useState() without an argument initializes 'data' as undefined. The component renders before the fetch resolves, and undefined does not have a .map() method, causing the TypeError."
  }
}

## Rules
- Explain for beginners, not experts. Assume the student has never seen this error before.
- Reference the actual code the student wrote, not abstract concepts.
- The error explanation should decode the error message word by word \u2014 what does each part mean?
- For logic errors with no error message: describe what the code does wrong and what visible symptom the student would see (e.g., "renders an extra item", "counter shows wrong number").
- Keep explanation under 60 words.
- Keep howToFix actionable and specific \u2014 tell the student exactly which line to change and what to change it to.
- Keep howToPrevent and bestPractices each under 30 words.
- Quiz question should test understanding of WHY the error happened, not just what to do about it.
- Quiz distractors should be plausible but clearly wrong to someone who read the explanation.`,SQ=`You are a coding education assistant. A student had a bug, and an AI tool just fixed it. Your job is to explain what the AI changed and why.

## Examples

### Example 1: Syntax Fix
Input:
- Language: TypeScript
- File: BrokenSyntax.tsx
- Original error: SyntaxError: Unexpected token, expected ","
- Diff:
  - <p>Hello, {name}</p>
  + <p>Hello, {name}</p>)
    </div>
  -
  +  );

Output:
{
  "whatChanged": "Added the missing closing parenthesis \`) \` after the JSX \`<div>\` block to properly close the \`return(\` statement.",
  "whyItFixes": "JavaScript saw \`return(\` but never found the matching \`)\`. Without it, the parser couldn't tell where the return value ended, so it threw a syntax error. Adding \`)\` closes the expression.",
  "keyTakeaway": "Every opening parenthesis \`(\` needs a matching closing \`)\` \u2014 especially in JSX return statements where the parentheses span multiple lines."
}

### Example 2: Logic Fix
Input:
- Language: TypeScript
- File: BrokenLogic.tsx
- Original error: List renders an extra empty item at the end
- Diff:
  - for (let i = 0; i <= items.length; i++) {
  + for (let i = 0; i < items.length; i++) {

Output:
{
  "whatChanged": "Changed the loop condition from \`<=\` (less-than-or-equal) to \`<\` (less-than) on the for-loop iterating over \`items\`.",
  "whyItFixes": "Arrays are zero-indexed, so an array with 3 items has indices 0, 1, 2. Using \`<= items.length\` made the loop run with i=3, accessing \`items[3]\` which is undefined. \`< items.length\` stops at the last valid index.",
  "keyTakeaway": "When looping over arrays, use \`i < array.length\`, not \`i <= array.length\` \u2014 this is called an off-by-one error."
}

### Example 3: Runtime Fix
Input:
- Language: TypeScript
- File: BrokenRuntime.tsx
- Original error: TypeError: Cannot read properties of undefined (reading 'map')
- Diff:
  - const [data, setData] = useState();
  + const [data, setData] = useState<string[]>([]);
  ...
  - <ul>{data.map(item => <li>{item}</li>)}</ul>
  + <ul>{data?.map(item => <li key={item}>{item}</li>)}</ul>

Output:
{
  "whatChanged": "Initialized \`useState\` with an empty array \`[]\` instead of no value, and added optional chaining \`?.\` before \`.map()\`.",
  "whyItFixes": "Without a default value, \`data\` starts as \`undefined\`. The component renders before \`fetch\` completes, so \`data.map()\` crashes. Initializing with \`[]\` means \`.map()\` runs on an empty array (safe), and \`?.\` adds a safety net.",
  "keyTakeaway": "Always initialize React state with a value that matches how you use it \u2014 if you call \`.map()\`, start with \`[]\`, not \`undefined\`."
}

## Input
- Language: {{language}}
- File: {{filename}}
- Original error: {{originalError}}
- Diff (before -> after):
{{diff}}

## Instructions
Analyze this diff and respond in JSON with the fields: whatChanged, whyItFixes, keyTakeaway.

## Rules
- Explain for beginners, not experts
- Reference specific lines from the diff
- Connect the fix back to the original error
- Keep whatChanged under 30 words
- Keep whyItFixes under 50 words
- keyTakeaway should be a single memorable sentence the student will remember`;var _a="[FlowFixer:Storage]",Rx="flowfixer.bugHistory",GT=class{constructor(e){this.globalState=e}async save(e){let r=await this.getAll();r.push(e),await this.globalState.update(Rx,r),console.log(`${_a} [globalState] saved bug record: ${e.id}`)}async getAll(){return this.globalState.get(Rx,[])}dispose(){}},N2=class{constructor(e){this.uri=e}client=null;collection=null;connected=!1;async connect(){if(this.connected)return!0;try{let{MongoClient:e}=await Promise.resolve().then(()=>Xe(gg()));this.client=new e(this.uri,{serverSelectionTimeoutMS:4e3}),await this.client.connect();let r=this.client.db("flowfixer");return this.collection=r.collection("bugs"),await r.command({ping:1}),await this.collection.createIndex({id:1},{unique:!0}),this.connected=!0,console.log(`${_a} [MongoDB] connected`),!0}catch(e){return console.error(`${_a} [MongoDB] connection failed:`,e),!1}}async save(e){if(!await this.connect()||!this.collection)throw new Error("MongoDB not connected");await this.collection.updateOne({id:e.id},{$set:e},{upsert:!0}),console.log(`${_a} [MongoDB] saved bug record: ${e.id}`)}async getAll(){if(!await this.connect()||!this.collection)throw new Error("MongoDB not connected");return this.collection.find({}).sort({timestamp:1}).toArray()}async ping(){return this.connect()}dispose(){this.client&&(this.client.close().catch(()=>{}),this.client=null,this.collection=null,this.connected=!1)}},B2=class{mongo=null;globalStateStorage;constructor(e,r){this.globalStateStorage=new GT(e),r&&(this.mongo=new N2(r))}setMongoUri(e){this.mongo?.dispose(),this.mongo=e?new N2(e):null}async testMongoConnection(){return this.mongo?this.mongo.ping():!1}async syncLocalToMongo(){if(!this.mongo)return 0;let e=await this.globalStateStorage.getAll(),r=0;for(let n of e)try{await this.mongo.save(n),r++}catch(o){console.warn(`${_a} sync to MongoDB failed for ${n.id}:`,o)}return r}async save(e){if(await this.globalStateStorage.save(e),this.mongo)try{await this.mongo.save(e)}catch(r){console.warn(`${_a} MongoDB save failed, globalState has it:`,r)}}async getAll(){let e=await this.globalStateStorage.getAll();if(this.mongo)try{let r=await this.mongo.getAll(),n=[...r],o=new Set(r.map(i=>i.id));for(let i of e)o.has(i.id)||n.push(i);return n.sort((i,s)=>i.timestamp-s.timestamp),n}catch{console.warn(`${_a} MongoDB read failed, falling back to globalState`)}return e}dispose(){this.mongo?.dispose(),this.globalStateStorage.dispose()}};var Gl=Xe(require("vscode")),Ix=Xe(require("fs")),Dx="[FlowFixer:ErrorPanel]",mf=class{constructor(e){this.extensionUri=e}static viewType="flowfixer.errorPanel";view;onMessageEmitter=new Gl.EventEmitter;onMessage=this.onMessageEmitter.event;resolveWebviewView(e,r,n){this.view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this.extensionUri]},e.webview.html=this.getHtml(e.webview),e.webview.onDidReceiveMessage(o=>{this.onMessageEmitter.fire(o)}),console.log(`${Dx} view resolved`)}postMessage(e){this.view&&(this.view.webview.postMessage(e),this.view.show?.(!0))}getHtml(e){let r=Gl.Uri.joinPath(this.extensionUri,"src","webview","error.html"),n=e.asWebviewUri(Gl.Uri.joinPath(this.extensionUri,"src","webview","styles.css")),o=e.asWebviewUri(Gl.Uri.joinPath(this.extensionUri,"src","webview","config.js")),i=yfe(),s="";try{s=Ix.readFileSync(r.fsPath,"utf8")}catch(a){return console.error(`${Dx} Failed to read error.html`,a),`<div>Error loading resource: ${a}</div>`}s=s.replace('href="styles.css"',`href="${n}"`),s=s.replace('src="config.js"',`src="${o}"`),s=s.replace(/<script/g,`<script nonce="${i}"`);let u=`<meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${i}' 'unsafe-eval'; connect-src https://api.elevenlabs.io blob:;">`;return s=s.replace("<head>",`<head>${u}`),s}};function yfe(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var Vl=Xe(require("vscode")),Nx=Xe(require("fs")),Mx="[FlowFixer:DiffPanel]",gf=class{constructor(e){this.extensionUri=e}static viewType="flowfixer.diffPanel";view;onMessageEmitter=new Vl.EventEmitter;onMessage=this.onMessageEmitter.event;resolveWebviewView(e,r,n){this.view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this.extensionUri]},e.webview.html=this.getHtml(e.webview),e.webview.onDidReceiveMessage(o=>{this.onMessageEmitter.fire(o)}),console.log(`${Mx} view resolved`)}postMessage(e){this.view&&(this.view.webview.postMessage(e),this.view.show?.(!0))}getHtml(e){let r=Vl.Uri.joinPath(this.extensionUri,"src","webview","diff.html"),n=e.asWebviewUri(Vl.Uri.joinPath(this.extensionUri,"src","webview","styles.css")),o=e.asWebviewUri(Vl.Uri.joinPath(this.extensionUri,"src","webview","config.js")),i=Cfe(),s="";try{s=Nx.readFileSync(r.fsPath,"utf8")}catch(a){return console.error(`${Mx} Failed to read diff.html`,a),`<div>Error loading resource: ${a}</div>`}s=s.replace('href="styles.css"',`href="${n}"`),s=s.replace('src="config.js"',`src="${o}"`),s=s.replace(/<script/g,`<script nonce="${i}"`);let u=`<meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline' https://cdn.jsdelivr.net; script-src 'nonce-${i}' 'unsafe-eval' https://cdn.jsdelivr.net; connect-src https://api.elevenlabs.io blob:;">`;return s=s.replace("<head>",`<head>${u}`),s}};function Cfe(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var P2=Xe(require("vscode")),Afe="[FlowFixer:DashboardPanel]",Ef=class{constructor(e){this.extensionUri=e}static viewType="flowfixer.dashboardPanel";view;onMessageEmitter=new P2.EventEmitter;onMessage=this.onMessageEmitter.event;resolveWebviewView(e,r,n){this.view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this.extensionUri]},e.webview.html=this.getHtml(e.webview),e.webview.onDidReceiveMessage(o=>{this.onMessageEmitter.fire(o)}),console.log(`${Afe} view resolved`)}postMessage(e){this.view&&(this.view.webview.postMessage(e),this.view.show?.(!0))}getHtml(e){let r=Sfe(),n=e.asWebviewUri(P2.Uri.joinPath(this.extensionUri,"src","webview","styles.css"));return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${r}';">
  <link rel="stylesheet" href="${n}">
  <title>Bug Dashboard</title>
  <style>
    .trend-wrap {
      border: 1px solid var(--vscode-widget-border);
      border-radius: 8px;
      padding: 10px;
      background: var(--vscode-editor-background);
    }
    .trend-svg {
      width: 100%;
      height: 140px;
      display: block;
    }
    .trend-axis {
      stroke: var(--vscode-widget-border);
      stroke-width: 1;
    }
    .trend-line {
      fill: none;
      stroke: #4fc3f7;
      stroke-width: 2.5;
    }
    .trend-point {
      fill: #4fc3f7;
    }
    .trend-labels {
      display: grid;
      grid-template-columns: repeat(7, minmax(0, 1fr));
      gap: 6px;
      margin-top: 8px;
      color: var(--vscode-descriptionForeground);
      font-size: 11px;
    }
    .trend-label {
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  </style>
</head>
<body>
  <div id="root">
    <div id="empty-state" class="empty-state">
      <p>No bug history yet.</p>
      <p class="muted">Your bug patterns will appear here as Visual Debugger tracks errors.</p>
    </div>
    <div id="dashboard-content" style="display:none;">
      <h3>Bug Categories</h3>
      <div id="category-chart" class="chart-container">
        <div class="bar-chart" id="bar-chart"></div>
      </div>
      <section>
        <h3>Focus Area</h3>
        <p id="focus-area"></p>
      </section>
      <section>
        <h3>Trend Over Sessions (Last 7 Days)</h3>
        <div class="trend-wrap">
          <div id="trend-chart"></div>
          <div id="trend-labels" class="trend-labels"></div>
        </div>
      </section>
      <section>
        <h3>Recent Bugs</h3>
        <div id="recent-bugs"></div>
      </section>
    </div>
  </div>
  <script nonce="${r}">
    const vscode = acquireVsCodeApi();
    vscode.postMessage({ type: 'ready' });

    window.addEventListener('message', (event) => {
      const msg = event.data;
      if (msg.type === 'showDashboard') {
        document.getElementById('empty-state').style.display = 'none';
        document.getElementById('dashboard-content').style.display = 'block';
        const bugs = msg.data.bugs;
        renderDashboard(bugs);
      }
    });

    function renderDashboard(bugs) {
      // Count by category
      const counts = { 'Syntax Error': 0, 'Logic Error': 0, 'Runtime Error': 0 };
      bugs.forEach(b => { if (counts[b.category] !== undefined) counts[b.category]++; });

      const max = Math.max(...Object.values(counts), 1);
      const chart = document.getElementById('bar-chart');
      chart.innerHTML = Object.entries(counts).map(([cat, count]) => {
        const pct = (count / max) * 100;
        const cls = cat.toLowerCase().replace(/\\s+/g, '-');
        return '<div class="bar-row">' +
          '<span class="bar-label">' + cat + '</span>' +
          '<div class="bar-track"><div class="bar-fill bar-' + cls + '" style="width:' + pct + '%"></div></div>' +
          '<span class="bar-count">' + count + '</span>' +
          '</div>';
      }).join('');

      // Focus area = highest category
      const sorted = Object.entries(counts).sort((a, b) => b[1] - a[1]);
      const focus = sorted[0];
      document.getElementById('focus-area').textContent =
        focus[1] > 0
          ? 'You struggle most with ' + focus[0] + 's. Focus on understanding these patterns.'
          : 'Keep coding! Patterns will emerge as you encounter more bugs.';

      renderTrendChart(bugs);

      // Recent bugs
      const recent = document.getElementById('recent-bugs');
      recent.innerHTML = bugs.slice(-10).reverse().map(b => {
        const cls = b.category.toLowerCase().replace(/\\s+/g, '-');
        const time = new Date(b.timestamp).toLocaleString();
        return '<div class="bug-item">' +
          '<span class="badge badge-' + cls + ' badge-sm">' + b.category + '</span> ' +
          '<span class="muted">' + b.file.split(/[\\\\/]/).pop() + '</span> ' +
          '<span class="muted">' + time + '</span>' +
          '</div>';
      }).join('');
    }

    function renderTrendChart(bugs) {
      const end = new Date();
      end.setHours(0, 0, 0, 0);
      const dayStarts = [];
      for (let i = 6; i >= 0; i--) {
        const d = new Date(end);
        d.setDate(end.getDate() - i);
        dayStarts.push(d);
      }

      const counts = dayStarts.map(() => 0);
      for (const bug of bugs) {
        const ts = new Date(bug.timestamp);
        ts.setHours(0, 0, 0, 0);
        const index = dayStarts.findIndex(d => d.getTime() === ts.getTime());
        if (index >= 0) {
          counts[index]++;
        }
      }

      const max = Math.max(...counts, 1);
      const width = 320;
      const height = 120;
      const x0 = 16;
      const x1 = width - 16;
      const y0 = 10;
      const y1 = height - 12;

      const points = counts.map((count, i) => {
        const x = x0 + ((x1 - x0) * i) / Math.max(6, counts.length - 1);
        const y = y1 - ((y1 - y0) * count) / max;
        return { x, y, count };
      });

      const trendChart = document.getElementById('trend-chart');
      trendChart.innerHTML = '<svg class="trend-svg" viewBox="0 0 ' + width + ' ' + height + '" role="img" aria-label="Bug trend line chart">' +
        '<line class="trend-axis" x1="' + x0 + '" y1="' + y1 + '" x2="' + x1 + '" y2="' + y1 + '"></line>' +
        '<polyline class="trend-line" points="' + points.map(p => p.x + ',' + p.y).join(' ') + '"></polyline>' +
        points.map(p => '<circle class="trend-point" cx="' + p.x + '" cy="' + p.y + '" r="3"></circle>').join('') +
        '</svg>';

      const labels = document.getElementById('trend-labels');
      labels.innerHTML = dayStarts
        .map(d => d.toLocaleDateString(undefined, { month: 'short', day: 'numeric' }))
        .map(label => '<span class="trend-label">' + label + '</span>')
        .join('');
    }
  </script>
</body>
</html>`}};function Sfe(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var _fe={female:"21m00Tcm4TlvDq8ikWAM",male:"TxGEqnHWrfWFTfGW9XjX"},wfe=_fe.female,Tfe="https://api.elevenlabs.io/v1";async function Bx(t,e,r={}){let n=r.voiceId||wfe,o=`${Tfe}/text-to-speech/${n}`,i=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json","xi-api-key":e},body:JSON.stringify({text:t,model_id:r.modelId||"eleven_multilingual_v2",voice_settings:{stability:r.stability??.65,similarity_boost:r.similarityBoost??.8,style:.35,use_speaker_boost:!0}})});if(!i.ok){let u=await i.text();throw new Error(`ElevenLabs TTS failed (${i.status}): ${u}`)}let s=await i.arrayBuffer();return Buffer.from(s).toString("base64")}var bfe=[{id:1,category:"Runtime",error:"TypeError: Cannot read properties of undefined (reading 'map')",file:"App.tsx",line:15,timestamp:"2026-02-07T09:15:00Z"},{id:2,category:"Syntax",error:"SyntaxError: Unexpected token '}'",file:"Header.tsx",line:23,timestamp:"2026-02-07T10:30:00Z"},{id:3,category:"Logic",error:"Off-by-one: renders extra undefined item in list",file:"List.tsx",line:8,timestamp:"2026-02-07T14:45:00Z"},{id:4,category:"Runtime",error:"ReferenceError: data is not defined",file:"Dashboard.tsx",line:42,timestamp:"2026-02-08T08:20:00Z"},{id:5,category:"Syntax",error:"SyntaxError: Unexpected token, expected ','",file:"Form.tsx",line:31,timestamp:"2026-02-08T11:10:00Z"},{id:6,category:"Runtime",error:"TypeError: setItems is not a function",file:"App.tsx",line:20,timestamp:"2026-02-08T15:00:00Z"},{id:7,category:"Logic",error:"Counter increments by 2 instead of 1",file:"Counter.tsx",line:12,timestamp:"2026-02-09T09:30:00Z"},{id:8,category:"Runtime",error:"TypeError: Cannot destructure property 'name' of undefined",file:"Profile.tsx",line:7,timestamp:"2026-02-09T13:15:00Z"},{id:9,category:"Syntax",error:"SyntaxError: Missing semicolon",file:"utils.ts",line:45,timestamp:"2026-02-09T16:40:00Z"},{id:10,category:"Runtime",error:"TypeError: fetch is not a function",file:"api.ts",line:3,timestamp:"2026-02-10T10:00:00Z"},{id:11,category:"Logic",error:"Form submits even when validation fails",file:"Form.tsx",line:55,timestamp:"2026-02-10T11:25:00Z"},{id:12,category:"Runtime",error:"RangeError: Maximum call stack size exceeded",file:"Tree.tsx",line:18,timestamp:"2026-02-10T14:50:00Z"},{id:13,category:"Logic",error:"Search filter returns wrong results",file:"Search.tsx",line:22,timestamp:"2026-02-11T09:10:00Z"},{id:14,category:"Runtime",error:"TypeError: Cannot read properties of null (reading 'value')",file:"Input.tsx",line:9,timestamp:"2026-02-11T12:30:00Z"},{id:15,category:"Syntax",error:"SyntaxError: Unterminated string literal",file:"config.ts",line:15,timestamp:"2026-02-12T08:45:00Z"},{id:16,category:"Runtime",error:"TypeError: Cannot read properties of undefined (reading 'length')",file:"Table.tsx",line:30,timestamp:"2026-02-12T13:20:00Z"},{id:17,category:"Logic",error:"Pagination shows page 0 instead of page 1",file:"Pagination.tsx",line:14,timestamp:"2026-02-13T10:00:00Z"},{id:18,category:"Runtime",error:"TypeError: items.filter is not a function",file:"Filter.tsx",line:27,timestamp:"2026-02-13T15:30:00Z"}];var vfe={Syntax:"Syntax Error",Logic:"Logic Error",Runtime:"Runtime Error"};function Px(){return bfe.map(t=>{let e=vfe[t.category],r=`${t.file}:${t.line}`,n={category:e,location:r,explanation:t.error,howToFix:"",howToPrevent:"",bestPractices:""};return{id:`seed_${t.id}`,category:e,file:t.file,errorMessage:t.error,explanation:n,timestamp:new Date(t.timestamp).getTime()}})}var Fx=Xe(require("fs")),xx=Xe(require("path")),kx=Xe(require("vscode"));function Lx(){let t=kx.workspace.workspaceFolders;if(!t||t.length===0)return new Map;let e=xx.join(t[0].uri.fsPath,".env"),r;try{r=Fx.readFileSync(e,"utf-8")}catch{return new Map}let n=new Map;for(let o of r.split(`
`)){let i=o.trim();if(!i||i.startsWith("#"))continue;let s=i.indexOf("=");if(s===-1)continue;let u=i.slice(0,s).trim(),a=i.slice(s+1).trim();a.length>=2&&(a.startsWith('"')&&a.endsWith('"')||a.startsWith("'")&&a.endsWith("'"))&&(a=a.slice(1,-1)),u&&a&&n.set(u,a)}return n}var cs="[FlowFixer]";async function Ofe(t){console.log(`${cs} activating...`);let e=Lx(),r={"flowfixer.geminiKey":"GEMINI_API_KEY","flowfixer.elevenLabsKey":"ELEVENLABS_API_KEY","flowfixer.mongoUri":"MONGODB_URI"},n={async get(B){let v=r[B];if(v){let I=e.get(v);if(I)return I}return t.secrets.get(B)}},o=new jf,i=new Yf;try{await mS(n)}catch{console.warn(`${cs} LLM not initialized \u2014 set API key with 'Visual Debugger: Set Gemini API Key' or add GEMINI_API_KEY to .env`)}let s=await n.get("flowfixer.mongoUri"),u=new B2(t.globalState,s),a=new mf(t.extensionUri),c=new gf(t.extensionUri),d=new Ef(t.extensionUri);t.subscriptions.push(Le.window.registerWebviewViewProvider(mf.viewType,a),Le.window.registerWebviewViewProvider(gf.viewType,c),Le.window.registerWebviewViewProvider(Ef.viewType,d));async function p(){let B=await u.getAll();return B.length>0?B:Px()}let m=Le.window.createStatusBarItem(Le.StatusBarAlignment.Left,100);m.name="Visual Debugger",m.command="flowfixer.showDashboard",t.subscriptions.push(m);let E,y=()=>{E&&(clearTimeout(E),E=void 0)},A=B=>{switch(y(),B){case"ready":m.text="$(bug) Visual Debugger Ready",m.tooltip="Visual Debugger is active. Click to open Bug Dashboard.",m.command="flowfixer.showDashboard";break;case"needsKey":m.text="$(key) Visual Debugger: Set Gemini Key",m.tooltip="Gemini API key is required for analysis. Click to configure.",m.command="flowfixer.setGeminiKey";break;case"analyzingError":m.text="$(loading~spin) Visual Debugger: Analyzing error...",m.tooltip="Visual Debugger is analyzing the detected error.",m.command="flowfixer.showErrorPanel";break;case"errorExplained":m.text="$(check) Visual Debugger: Error explained",m.tooltip="Error explanation ready. Click to open the panel.",m.command="flowfixer.showErrorPanel",E=setTimeout(()=>A(Gu()?"ready":"needsKey"),5e3);break;case"analyzingDiff":m.text="$(loading~spin) Visual Debugger: Reviewing fix...",m.tooltip="Visual Debugger is analyzing the code diff.",m.command="flowfixer.showDiffPanel";break;case"diffReviewed":m.text="$(git-compare) Visual Debugger: Fix reviewed",m.tooltip="Diff review ready. Click to open the panel.",m.command="flowfixer.showDiffPanel",E=setTimeout(()=>A(Gu()?"ready":"needsKey"),5e3);break;case"analysisFailed":m.text="$(error) Visual Debugger: Analysis failed",m.tooltip="Analysis failed. Check API key and logs, then retry.",m.command="flowfixer.showDashboard",E=setTimeout(()=>A(Gu()?"ready":"needsKey"),5e3);break}m.show()};t.subscriptions.push({dispose:y}),A(Gu()?"ready":"needsKey"),setTimeout(async()=>{let B=await p();d.postMessage({type:"showDashboard",data:{bugs:B}})},500);function S(B,v){B.type==="requestTts"&&(async()=>{let I=await n.get("flowfixer.elevenLabsKey");if(!I){v.postMessage({type:"ttsError",data:{message:"No ElevenLabs API key set. Using browser speech."}});return}try{let O=await Bx(B.text,I);v.postMessage({type:"playAudio",data:{audio:O}})}catch(O){let z=O instanceof Error?O.message:String(O);console.error(`${cs} TTS failed:`,z),v.postMessage({type:"ttsError",data:{message:z}})}})()}a.onMessage(B=>S(B,a)),c.onMessage(B=>S(B,c));let b;async function P(B){console.log(`${cs} Phase 1: error detected \u2014 ${B.message}`),b=B,i.startTracking(B.file),A("analyzingError");try{if(!Gu())throw new Br("No API key set");let v=await SD({language:B.language,filename:B.file,errorMessage:B.message,codeContext:B.codeContext});a.postMessage({type:"showError",data:{...v,raw:B}});let I={id:`bug_${Date.now()}_${Math.random().toString(36).slice(2,8)}`,category:v.category,file:B.file,errorMessage:B.message,explanation:v,timestamp:Date.now()};await u.save(I);let O=await p();d.postMessage({type:"showDashboard",data:{bugs:O}}),A("errorExplained")}catch(v){console.error(`${cs} Phase 1 failed:`,v),A("analysisFailed"),v instanceof Br&&Le.window.showWarningMessage(`Visual Debugger: ${v.message}`)}}o.onErrorDetected(B=>P(B)),i.onDiffDetected(async B=>{console.log(`${cs} Phase 2: diff detected in ${B.file}`),A("analyzingDiff");try{if(!Gu())throw new Br("No API key set");let v=b?.message??"unknown error",I=await _D({language:B.language,filename:B.file,originalError:v,diff:B.unifiedDiff});c.postMessage({type:"showDiff",data:{...I,diff:B}}),A("diffReviewed")}catch(v){console.error(`${cs} Phase 2 failed:`,v),A("analysisFailed")}}),t.subscriptions.push(Le.commands.registerCommand("flowfixer.showErrorPanel",async()=>{await Le.commands.executeCommand("flowfixer.errorPanel.focus")}),Le.commands.registerCommand("flowfixer.showDiffPanel",async()=>{await Le.commands.executeCommand("flowfixer.diffPanel.focus")}),Le.commands.registerCommand("flowfixer.showDashboard",async()=>{await Le.commands.executeCommand("flowfixer.dashboardPanel.focus");let B=await p();d.postMessage({type:"showDashboard",data:{bugs:B}})}),Le.commands.registerCommand("flowfixer.setGeminiKey",async()=>{let B=await Le.window.showInputBox({prompt:"Enter your Gemini API key",password:!0,ignoreFocusOut:!0});if(B){await t.secrets.store("flowfixer.geminiKey",B);try{await mS(n),A("ready"),Le.window.showInformationMessage("Visual Debugger: Gemini API key saved and connected.")}catch{A("needsKey"),Le.window.showWarningMessage("Visual Debugger: Key saved but initialization failed. Check the key.")}}}),Le.commands.registerCommand("flowfixer.setElevenLabsKey",async()=>{let B=await Le.window.showInputBox({prompt:"Enter your ElevenLabs API key",password:!0,ignoreFocusOut:!0});B&&(await t.secrets.store("flowfixer.elevenLabsKey",B),Le.window.showInformationMessage("Visual Debugger: ElevenLabs API key saved. Read Aloud is ready."))}),Le.commands.registerCommand("flowfixer.setMongoUri",async()=>{let B=await n.get("flowfixer.mongoUri"),v=await Le.window.showInputBox({prompt:"Enter your MongoDB Atlas connection URI (leave empty to disable)",password:!0,value:B??"",ignoreFocusOut:!0});if(v===void 0)return;let I=v.trim();if(!I){await t.secrets.delete("flowfixer.mongoUri"),u.setMongoUri(void 0),Le.window.showInformationMessage("Visual Debugger: MongoDB disabled. Using local fallback storage.");return}if(await t.secrets.store("flowfixer.mongoUri",I),u.setMongoUri(I),await u.testMongoConnection()){let z=await u.syncLocalToMongo();Le.window.showInformationMessage(`Visual Debugger: MongoDB URI saved and connected. Synced ${z} local record(s).`)}else Le.window.showWarningMessage("Visual Debugger: URI saved, but connection failed. Using local fallback storage.")}),Le.commands.registerCommand("flowfixer.analyzeCurrentFile",async()=>{let B=Le.window.activeTextEditor;if(!B){Le.window.showWarningMessage("Visual Debugger: No active editor.");return}let v=B.document,O=Le.languages.getDiagnostics(v.uri).filter(z=>z.severity===Le.DiagnosticSeverity.Error);if(O.length>0){let z=O[0],Z=z.range.start.line+1,M=v.getText().split(`
`),V=Math.max(0,Z-11),Y=Math.min(M.length,Z+10),te=M.slice(V,Y).map((ue,Be)=>`${V+Be+1} | ${ue}`).join(`
`),le={message:z.message,file:v.uri.fsPath,line:Z,language:v.languageId,codeContext:te,severity:"error",source:"diagnostics",timestamp:Date.now()};await P(le)}else{let z=await Le.window.showInputBox({prompt:"No compiler errors found. Describe the bug (e.g., 'renders an extra item', 'TypeError: Cannot read properties of undefined')",placeHolder:"What went wrong?",ignoreFocusOut:!0});if(!z)return;let Z=B.selection.active.line+1,M=v.getText().split(`
`),V=Math.max(0,Z-11),Y=Math.min(M.length,Z+10),te=M.slice(V,Y).map((ue,Be)=>`${V+Be+1} | ${ue}`).join(`
`),le={message:z,file:v.uri.fsPath,line:Z,language:v.languageId,codeContext:te,severity:"error",source:"terminal",timestamp:Date.now()};await P(le)}})),t.subscriptions.push(o,i,u),console.log(`${cs} activated successfully`),Le.window.showInformationMessage("Visual Debugger is active! Errors will be explained automatically.")}function Rfe(){console.log(`${cs} deactivated`)}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

gtoken/build/cjs/src/index.cjs:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)

@google/genai/dist/node/index.mjs:
@google/genai/dist/node/index.mjs:
@google/genai/dist/node/index.mjs:
@google/genai/dist/node/index.mjs:
@google/genai/dist/node/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
//# sourceMappingURL=extension.js.map
