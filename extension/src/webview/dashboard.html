<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bug Dashboard — Visual Debugger</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- Chart.js v4 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
</head>

<body>
    <div id="dashboard-panel">
        <!-- Header -->
        <div class="card-header">
            <h1>Bug Dashboard</h1>
        </div>

        <div class="dashboard-grid">
            <!-- Summary Stats -->
            <div class="card slide-in" id="stats-card">
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-value" id="total-bugs">0</div>
                        <div class="stat-label">Total Bugs</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" style="color: var(--ff-syntax);" id="syntax-count">0</div>
                        <div class="stat-label">Syntax</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" style="color: var(--ff-logic);" id="logic-count">0</div>
                        <div class="stat-label">Logic</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" style="color: var(--ff-runtime);" id="runtime-count">0</div>
                        <div class="stat-label">Runtime</div>
                    </div>
                </div>
            </div>

            <!-- Category Breakdown (Bar Chart) -->
            <div class="card slide-in">
                <h3>Bug Categories</h3>
                <div class="chart-container">
                    <canvas id="category-chart"></canvas>
                </div>
            </div>

            <!-- Trend Over Time (Line Chart) -->
            <div class="card slide-in">
                <div class="card-header" style="margin-bottom: 4px; border-bottom: none; padding-bottom: 0;">
                     <h3 style="margin:0;">Bug Trend <span id="trend-label" class="text-muted text-sm" style="font-weight:normal">(Last 7 Days)</span></h3>
                     <div class="toggle-group">
                        <button class="btn-toggle" data-range="1h">1H</button>
                        <button class="btn-toggle" data-range="24h">1D</button>
                        <button class="btn-toggle active" data-range="7d">7D</button>
                        <button class="btn-toggle" data-range="30d">30D</button>
                     </div>
                </div>
                <div class="chart-container">
                    <canvas id="trend-chart"></canvas>
                </div>
            </div>



            <!-- Learning Progress Ring -->
            <div class="card slide-in ff-progress-ring-card" id="progress-ring-card">
                <h3>Learning Progress</h3>
                <div class="ff-progress-ring">
                    <svg width="100" height="100" viewBox="0 0 100 100">
                        <defs>
                            <linearGradient id="ff-ring-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" stop-color="#A78BFA"/>
                                <stop offset="100%" stop-color="#FB7185"/>
                            </linearGradient>
                        </defs>
                        <circle class="ff-progress-ring-bg" cx="50" cy="50" r="40"/>
                        <circle class="ff-progress-ring-fill" id="progress-ring-circle" cx="50" cy="50" r="40"
                            stroke-dasharray="251.3" stroke-dashoffset="251.3"/>
                    </svg>
                    <span class="ff-progress-ring-text" id="progress-ring-pct">0%</span>
                </div>
                <span class="ff-progress-ring-label" id="progress-ring-label">0 / 0 quizzes</span>
            </div>

            <!-- Bug Activity Heatmap (GitHub-style) -->
            <div class="card slide-in ff-heatmap-card" id="heatmap-card">
                <div class="ff-heatmap-header">
                    <h3 id="heatmap-title">Bug Activity</h3>
                </div>
                <div class="ff-heatmap-scroll">
                    <div class="ff-heatmap-months" id="heatmap-months"></div>
                    <div class="ff-heatmap-body">
                        <div class="ff-heatmap-days">
                            <span></span>
                            <span>Mon</span>
                            <span></span>
                            <span>Wed</span>
                            <span></span>
                            <span>Fri</span>
                            <span></span>
                        </div>
                        <div class="ff-heatmap-grid" id="heatmap-grid"></div>
                    </div>
                </div>
                <div class="ff-heatmap-footer">
                    <span class="ff-heatmap-summary" id="heatmap-summary"></span>
                    <div class="ff-heatmap-legend">
                        <span>Less</span>
                        <div class="ff-heatmap-legend-cell" data-level="0"></div>
                        <div class="ff-heatmap-legend-cell" data-level="1"></div>
                        <div class="ff-heatmap-legend-cell" data-level="2"></div>
                        <div class="ff-heatmap-legend-cell" data-level="3"></div>
                        <div class="ff-heatmap-legend-cell" data-level="4"></div>
                        <span>More</span>
                    </div>
                </div>
                <!-- Tooltip (positioned absolutely) -->
                <div class="ff-heatmap-tooltip" id="heatmap-tooltip" role="tooltip" aria-hidden="true"></div>
            </div>

            <!-- Achievement Badges -->
            <div class="card slide-in" id="achievements-card">
                <h3>Achievements</h3>
                <div class="ff-achievements" id="achievements-grid"></div>
            </div>

            <!-- Recent Bug History -->
            <div class="card slide-in">
                <h3>Recent Bugs</h3>
                <div id="bug-history" style="max-height: 250px; overflow-y: auto;">
                    <!-- Rendered by JS -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Use CSS variables for chart colors to match theme
        const style = getComputedStyle(document.body);
        const colSyntax = style.getPropertyValue('--ff-syntax').trim() || '#FBBF24';
        const colLogic = style.getPropertyValue('--ff-logic').trim() || '#818CF8';
        const colRuntime = style.getPropertyValue('--ff-runtime').trim() || '#FB7185';
        const colGrid = 'rgba(255, 255, 255, 0.04)';
        const colText = style.getPropertyValue('--vscode-descriptionForeground').trim() || '#888';
        const colTotal = '#A78BFA';

        // Dynamic Time Generation (Relative to Now)
        const now = new Date();
        const min = 60 * 1000;
        const hour = 60 * min;
        const day = 24 * hour;

        // Mock Data with Current Timestamps
        const SEED_BUGS = [
            { id: 1, category: "Runtime", error: "TypeError: Cannot read properties of undefined (reading 'map')", file: "App.tsx", line: 15, timestamp: new Date(now - 15 * min).toISOString() },
            { id: 2, category: "Syntax", error: "SyntaxError: Unexpected token '}'", file: "Header.tsx", line: 23, timestamp: new Date(now - 45 * min).toISOString() },
            { id: 3, category: "Logic", error: "Off-by-one: renders extra undefined item in list", file: "List.tsx", line: 8, timestamp: new Date(now - 2 * hour).toISOString() },
            { id: 4, category: "Runtime", error: "ReferenceError: data is not defined", file: "Dashboard.tsx", line: 42, timestamp: new Date(now - 5 * hour).toISOString() },
            { id: 5, category: "Syntax", error: "SyntaxError: Unexpected token, expected ','", file: "Form.tsx", line: 31, timestamp: new Date(now - 12 * hour).toISOString() },
            { id: 6, category: "Runtime", error: "TypeError: setItems is not a function", file: "App.tsx", line: 20, timestamp: new Date(now - 1.5 * day).toISOString() },
            { id: 7, category: "Logic", error: "Counter increments by 2 instead of 1", file: "Counter.tsx", line: 12, timestamp: new Date(now - 2 * day).toISOString() },
            { id: 8, category: "Runtime", error: "TypeError: Cannot destructure property 'name' of undefined", file: "Profile.tsx", line: 7, timestamp: new Date(now - 3 * day).toISOString() },
            { id: 9, category: "Syntax", error: "SyntaxError: Missing semicolon", file: "utils.ts", line: 45, timestamp: new Date(now - 4 * day).toISOString() },
            { id: 10, category: "Runtime", error: "TypeError: fetch is not a function", file: "api.ts", line: 3, timestamp: new Date(now - 5 * day).toISOString() },
            { id: 11, category: "Logic", error: "Form submits even when validation fails", file: "Form.tsx", line: 55, timestamp: new Date(now - 6 * day).toISOString() },
            { id: 12, category: "Runtime", error: "RangeError: Maximum call stack size exceeded", file: "Tree.tsx", line: 18, timestamp: new Date(now - 8 * day).toISOString() },
            { id: 13, category: "Logic", error: "Search filter returns wrong results", file: "Search.tsx", line: 22, timestamp: new Date(now - 10 * day).toISOString() },
            { id: 14, category: "Runtime", error: "TypeError: Cannot read properties of null (reading 'value')", file: "Input.tsx", line: 9, timestamp: new Date(now - 12 * day).toISOString() },
            { id: 15, category: "Syntax", error: "SyntaxError: Unterminated string literal", file: "config.ts", line: 15, timestamp: new Date(now - 15 * day).toISOString() },
            { id: 16, category: "Runtime", error: "TypeError: Cannot read properties of undefined (reading 'length')", file: "Table.tsx", line: 30, timestamp: new Date(now - 20 * day).toISOString() },
            { id: 17, category: "Logic", error: "Pagination shows page 0 instead of page 1", file: "Pagination.tsx", line: 14, timestamp: new Date(now - 25 * day).toISOString() },
            { id: 18, category: "Runtime", error: "TypeError: items.filter is not a function", file: "Filter.tsx", line: 27, timestamp: new Date(now - 29 * day).toISOString() }
        ];

        // ── Compute Stats ──
        const syntaxCount = SEED_BUGS.filter(b => b.category === "Syntax").length;
        const logicCount = SEED_BUGS.filter(b => b.category === "Logic").length;
        const runtimeCount = SEED_BUGS.filter(b => b.category === "Runtime").length;

        // ── Step 9: Animated Stat Counters ──
        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

        function animateCounter(element, target, duration) {
            if (prefersReducedMotion || target === 0) {
                element.textContent = target;
                return;
            }
            const start = performance.now();
            function tick(now) {
                const elapsed = now - start;
                const progress = Math.min(elapsed / duration, 1);
                // cubic ease-out
                const eased = 1 - Math.pow(1 - progress, 3);
                element.textContent = Math.round(eased * target);
                if (progress < 1) requestAnimationFrame(tick);
            }
            requestAnimationFrame(tick);
        }

        animateCounter(document.getElementById('total-bugs'), SEED_BUGS.length, 800);
        animateCounter(document.getElementById('syntax-count'), syntaxCount, 800);
        animateCounter(document.getElementById('logic-count'), logicCount, 800);
        animateCounter(document.getElementById('runtime-count'), runtimeCount, 800);



        // ── Step 13: Chart.js Global Defaults ──
        Chart.defaults.font.family = "'Plus Jakarta Sans', sans-serif";
        const tooltipConfig = {
            backgroundColor: 'rgba(20, 20, 30, 0.95)',
            borderColor: 'rgba(167, 139, 250, 0.2)',
            borderWidth: 1,
            cornerRadius: 8,
            padding: 12,
            titleFont: { weight: '700' },
            bodyFont: { size: 12 }
        };

        // ── Step 10: Progress Ring ──
        function updateProgressRing(completed, total) {
            const pct = total > 0 ? Math.round((completed / total) * 100) : 0;
            const circumference = 2 * Math.PI * 40; // r=40
            const offset = circumference - (pct / 100) * circumference;
            const circle = document.getElementById('progress-ring-circle');
            const pctEl = document.getElementById('progress-ring-pct');
            const labelEl = document.getElementById('progress-ring-label');

            pctEl.textContent = pct + '%';
            labelEl.textContent = completed + ' / ' + total + ' quizzes';

            // Animate after a short delay so the transition is visible
            setTimeout(() => { circle.style.strokeDashoffset = offset; }, 100);
        }
        updateProgressRing(4, 6); // Mock: 4/6 quizzes completed (67%)

        // ── Step 11: Bug Activity Heatmap (GitHub-style) ──
        function renderHeatmap() {
            const grid = document.getElementById('heatmap-grid');
            const monthsRow = document.getElementById('heatmap-months');
            const tooltip = document.getElementById('heatmap-tooltip');
            const titleEl = document.getElementById('heatmap-title');
            const summaryEl = document.getElementById('heatmap-summary');
            grid.innerHTML = '';
            monthsRow.innerHTML = '';

            const today = new Date();
            today.setHours(0, 0, 0, 0);

            // Calculate start: go back ~16 weeks (to fill the sidebar width nicely)
            const NUM_WEEKS = 16;
            const endDate = new Date(today);
            const startDate = new Date(today);
            startDate.setDate(startDate.getDate() - (NUM_WEEKS * 7 - 1) - startDate.getDay());

            // Build day-to-count map
            const dayCounts = {};
            let totalBugs = 0;
            SEED_BUGS.forEach(bug => {
                const d = new Date(bug.timestamp);
                d.setHours(0, 0, 0, 0);
                const key = d.toISOString().split('T')[0];
                dayCounts[key] = (dayCounts[key] || 0) + 1;
                totalBugs++;
            });

            titleEl.textContent = totalBugs + ' bugs tracked';
            summaryEl.textContent = 'Last ' + NUM_WEEKS + ' weeks';

            // Build weeks (columns)
            const weeks = [];
            let current = new Date(startDate);
            let currentWeek = [];

            while (current <= endDate) {
                currentWeek.push(new Date(current));
                if (current.getDay() === 6 || current.getTime() === endDate.getTime()) {
                    weeks.push(currentWeek);
                    currentWeek = [];
                }
                current.setDate(current.getDate() + 1);
            }
            if (currentWeek.length > 0) weeks.push(currentWeek);

            // Render month labels
            let lastMonth = -1;
            const monthNames = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
            monthsRow.style.gridTemplateColumns = 'repeat(' + weeks.length + ', 13px)';
            weeks.forEach((week, wi) => {
                const firstDay = week[0];
                const month = firstDay.getMonth();
                const span = document.createElement('span');
                if (month !== lastMonth && firstDay.getDate() <= 7) {
                    span.textContent = monthNames[month];
                    lastMonth = month;
                }
                span.className = 'ff-heatmap-month-label';
                monthsRow.appendChild(span);
            });

            // Render cells (column-first: each column = 1 week, 7 rows)
            // We need to render row by row (day 0=Sun through day 6=Sat)
            for (let dayOfWeek = 0; dayOfWeek < 7; dayOfWeek++) {
                weeks.forEach((week, wi) => {
                    const dayEntry = week.find(d => d.getDay() === dayOfWeek);
                    const cell = document.createElement('div');
                    cell.className = 'ff-heatmap-cell';

                    if (dayEntry && dayEntry <= today) {
                        const key = dayEntry.toISOString().split('T')[0];
                        const count = dayCounts[key] || 0;

                        let level = 0;
                        if (count === 1) level = 1;
                        else if (count === 2) level = 2;
                        else if (count === 3) level = 3;
                        else if (count >= 4) level = 4;

                        cell.setAttribute('data-level', level);
                        cell.setAttribute('data-count', count);
                        cell.setAttribute('data-date', dayEntry.toLocaleDateString('en-US', { month: 'long', day: 'numeric' }));

                        // Tooltip on hover
                        cell.addEventListener('mouseenter', function(e) {
                            const c = this.getAttribute('data-count');
                            const d = this.getAttribute('data-date');
                            const label = c + ' bug' + (c !== '1' ? 's' : '') + ' on ' + d;
                            tooltip.textContent = label;
                            tooltip.classList.add('visible');
                            tooltip.setAttribute('aria-hidden', 'false');

                            // Position tooltip above cell
                            const rect = this.getBoundingClientRect();
                            const parentRect = this.closest('.ff-heatmap-card').getBoundingClientRect();
                            tooltip.style.left = (rect.left - parentRect.left + rect.width / 2) + 'px';
                            tooltip.style.top = (rect.top - parentRect.top - 8) + 'px';
                        });
                        cell.addEventListener('mouseleave', function() {
                            tooltip.classList.remove('visible');
                            tooltip.setAttribute('aria-hidden', 'true');
                        });
                    } else {
                        cell.setAttribute('data-level', '-1');
                    }

                    grid.appendChild(cell);
                });
            }
        }
        renderHeatmap();

        // ── Step 12: Achievement Badges ──
        function renderAchievements(bugs) {
            const grid = document.getElementById('achievements-grid');
            const total = bugs.length;
            const categories = new Set(bugs.map(b => b.category));
            const hasAllTypes = categories.size >= 3;
            // "Quick Fix" = any bug resolved within 1 hour (mock: first 2 bugs are < 1h old)
            const recentBugs = bugs.filter(b => (now - new Date(b.timestamp)) < 60 * 60 * 1000);
            const hasQuickFix = recentBugs.length >= 1;

            const achievements = [
                { icon: '\u2726', name: 'First Bug', desc: 'Found your first bug', check: total >= 1 },
                { icon: '\u2605', name: '5 Bugs', desc: 'Found 5 bugs', check: total >= 5 },
                { icon: '\u2B50', name: '10 Bugs', desc: 'Found 10 bugs', check: total >= 10 },
                { icon: '\u2B21', name: 'All Types', desc: 'Syntax + Logic + Runtime', check: hasAllTypes },
                { icon: '\u26A1', name: 'Quick Fix', desc: 'Fixed within 1 hour', check: hasQuickFix },
                { icon: '\u2B2A', name: 'Power User', desc: 'Found 15+ bugs', check: total >= 15 }
            ];

            grid.innerHTML = '';
            achievements.forEach(a => {
                const el = document.createElement('div');
                el.className = 'ff-achievement ' + (a.check ? 'unlocked' : 'locked');
                el.setAttribute('aria-label', a.name + (a.check ? ' - Unlocked' : ' - Locked'));
                el.innerHTML =
                    '<span class="ff-achievement-icon" aria-hidden="true">' + a.icon + '</span>' +
                    '<span class="ff-achievement-name">' + a.name + '</span>' +
                    '<span class="ff-achievement-desc">' + a.desc + '</span>';
                grid.appendChild(el);
            });
        }
        renderAchievements(SEED_BUGS);

        // ── Category Bar Chart ──
        const categoryCtx = document.getElementById('category-chart').getContext('2d');
        new Chart(categoryCtx, {
            type: 'bar',
            data: {
                labels: ['Syntax Errors', 'Logic Errors', 'Runtime Errors'],
                datasets: [{
                    label: 'Count',
                    data: [syntaxCount, logicCount, runtimeCount],
                    backgroundColor: ['rgba(251,191,36,0.25)', 'rgba(129,140,248,0.25)', 'rgba(251,113,133,0.25)'],
                    borderColor: [colSyntax, colLogic, colRuntime],
                    borderWidth: 1.5,
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false }, tooltip: tooltipConfig },
                scales: {
                    y: { beginAtZero: true, ticks: { stepSize: 1, color: colText }, grid: { color: colGrid } },
                    x: { ticks: { color: colText }, grid: { display: false } }
                }
            }
        });

        // ── Trend Line Chart (Consolidated & Dynamic) ──
        let trendChart;

        function updateTrend(range) {
            const ctx = document.getElementById('trend-chart').getContext('2d');
            const cutoff = new Date(); // Reset to Now
            
            let buckets = [];
            let labels = [];

            if (range === '1h') {
                const startTime = now.getTime() - hour;
                // 6 buckets of 10 mins
                for (let i = 0; i < 6; i++) {
                    const tStart = startTime + i * 10 * min;
                    const tEnd = tStart + 10 * min;
                    labels.push(new Date(tEnd).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}));
                    buckets.push({ start: tStart, end: tEnd });
                }
            } else if (range === '24h') {
                const startTime = now.getTime() - 24 * hour;
                // 6 buckets of 4 hours
                for (let i = 0; i < 6; i++) {
                    const tStart = startTime + i * 4 * hour;
                    const tEnd = tStart + 4 * hour;
                    labels.push(new Date(tEnd).toLocaleTimeString([], {hour: '2-digit'}));
                    buckets.push({ start: tStart, end: tEnd });
                }
            } else if (range === '7d') {
                // 7 buckets of 1 day
                for (let i = 6; i >= 0; i--) {
                   const d = new Date(now);
                   d.setDate(d.getDate() - i);
                   labels.push(d.toLocaleDateString([], {month: 'short', day: 'numeric'}));
                   const tStart = new Date(d).setHours(0,0,0,0);
                   const tEnd = new Date(d).setHours(23,59,59,999); 
                   buckets.push({ start: tStart, end: tEnd });
                }
            } else { // 30d
                // 6 buckets of 5 days
                const startTime = now.getTime() - 30 * day;
                for (let i = 0; i < 6; i++) {
                   const tStart = startTime + i * 5 * day;
                   const tEnd = tStart + 5 * day;
                   const d = new Date(tEnd);
                   labels.push(d.toLocaleDateString([], {month: 'short', day: 'numeric'}));
                   buckets.push({ start: tStart, end: tEnd });
                }
            }

            // Count Total Bugs in each bucket
            const data = buckets.map(b => {
                return SEED_BUGS.filter(bug => {
                    const t = new Date(bug.timestamp).getTime();
                    return t >= b.start && t <= b.end;
                }).length;
            });

            if (trendChart) trendChart.destroy();

            trendChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Total Bugs',
                        data: data,
                        borderColor: colTotal,
                        backgroundColor: 'rgba(167, 139, 250, 0.08)',
                        fill: true,
                        tension: 0.4,
                        pointRadius: 4,
                        pointBackgroundColor: colTotal,
                        pointBorderColor: 'rgba(167, 139, 250, 0.3)',
                        pointBorderWidth: 2,
                        borderWidth: 2.5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false }, tooltip: tooltipConfig },
                    scales: {
                        y: { beginAtZero: true, ticks: { stepSize: 1, color: colText }, grid: { color: colGrid } },
                        x: { ticks: { color: colText }, grid: { display: false } }
                    }
                }
            });

            // Update UI
            document.querySelectorAll('.btn-toggle').forEach(b => b.classList.remove('active'));
            document.querySelector(`.btn-toggle[data-range="${range}"]`)?.classList.add('active');
            
            const labelMap = { '1h': 'Last 1 Hour', '24h': 'Last 24 Hours', '7d': 'Last 7 Days', '30d': 'Last 30 Days'};
            const labelEl = document.getElementById('trend-label');
            if (labelEl) labelEl.textContent = `(${labelMap[range]})`;
        }

        // Init
        updateTrend('7d');

        // Event Listeners
        document.querySelectorAll('.btn-toggle').forEach(btn => {
            btn.addEventListener('click', (e) => updateTrend(e.target.dataset.range));
        });

        // ── Bug History List ──
        const historyEl = document.getElementById('bug-history');
        const sortedBugs = [...SEED_BUGS].sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));

        sortedBugs.forEach(bug => {
            let colorVar = '--ff-runtime';
            let dimVar = '--ff-runtime-dim';
            if (bug.category === 'Logic') { colorVar = '--ff-logic'; dimVar = '--ff-logic-dim'; }
            if (bug.category === 'Syntax') { colorVar = '--ff-syntax'; dimVar = '--ff-syntax-dim'; }

            const dateStr = new Date(bug.timestamp).toLocaleDateString('en-US', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });

            historyEl.innerHTML += `
        <div style="display: flex; align-items: flex-start; gap: 12px; padding: 12px 8px; border-bottom: 1px solid var(--ff-border-subtle, rgba(255,255,255,0.06)); border-radius: 6px; transition: background 0.15s ease;" onmouseenter="this.style.background='var(--ff-surface, rgba(255,255,255,0.03))'" onmouseleave="this.style.background='transparent'">
          <span class="badge" style="color: var(${colorVar}); background: var(${dimVar}); border-color: transparent; margin-top: 2px; width: 75px; text-align: center; flex-shrink: 0; font-size: 0.72rem;">${bug.category}</span>
          <div style="flex: 1; min-width: 0;">
            <div style="font-size: 0.88em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-weight: 500;" title="${bug.error}">${bug.error}</div>
            <div class="text-muted text-sm" style="font-size: 0.75em; margin-top: 2px;">${bug.file}:${bug.line} &middot; ${dateStr}</div>
          </div>
        </div>`;
        });
    </script>
</body>
</html>