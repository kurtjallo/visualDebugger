# VisualDebugger Hackathon — 3 Workstreams

## Workstream 1: Reverse Prompt Generator

**Problem:** Students vibe-code, say "fix the bug," auto-accept, learn nothing. They never learn what a *good* prompt looks like.

**Solution:** Use reverse prompting — when an error is detected, VisualDebugger generates a **detailed, well-crafted prompt** that the student *should have written*. The student sees only the output: a ready-to-use prompt that teaches them how to think about the error.

**How it works:**
1. Student hits an error
2. VisualDebugger analyzes the error + surrounding code context
3. Gemini generates a structured, expert-level prompt the student can copy/use
4. Student sees what a *good* debugging prompt looks like — learning by example

**Example** — student has `TypeError: Cannot read property 'map' of undefined` in `App.tsx`:

> **Instead of:** "fix the bug"
>
> **Use this prompt:**
>
> Fix the TypeError in `App.tsx` line 12 where `data.map()` fails because `useState()` has no initial value.
>
> Context:
> - `data` is used with `.map()` to render a list of items
> - `useState()` returns `undefined` by default when no argument is passed
> - `.map()` is an array method — it throws when called on `undefined`
>
> What to fix:
> - Add `[]` as the initial value: `useState([])`
> - Add a guard check before calling `.map()` to handle loading states
>
> Explain:
> - Why `undefined` causes this specific TypeError
> - What initial values prevent this class of bug
> - How to verify the fix works after applying it

**Why this wins:** Students learn prompt engineering *and* debugging simultaneously. They see the gap between "fix the bug" and a real prompt. Over time, they write better prompts themselves.

**Where it lives:** In the Error Panel, as a copyable "Suggested Prompt" card. Generated by Gemini alongside the existing `analyzeError()` call (add a `suggestedPrompt` field to the schema).

**Files:**

| File | Change |
|------|--------|
| `extension/src/llmClient.ts` | Add `suggestedPrompt` to Gemini schema — generate a structured reverse prompt |
| `extension/src/types.ts` | Add `suggestedPrompt?: string` to `ErrorExplanation` interface |
| `extension/src/webview/error.html` | Render copyable prompt card with "Copy prompt" button |
| `extension/src/panels/ErrorPanel.ts` | Pass prompt data through to webview |

**Dependencies:** None — fully independent from Workstream 2. Shares `error.html` with Workstream 3.

---

## Workstream 2: Inline "Explain" CodeLens

**Problem:** Everything is in sidebars. Student sees red squiggly but has to context-switch to understand it. ADHD-hostile.

**Solution:** Render a clickable "Explain this error" button directly above the error line in the editor using VS Code's CodeLens API.

**Example:**

```
  Explain this error | Fix it for me
  ─────────────────────────────────────
  const data = useState();
  //    ^^^^ TypeError: Cannot read property 'map' of undefined
```

**Where it lives:** New `CodeLensProvider` registered for JS/TS files. Listens to diagnostics, renders lens at error lines. Click triggers the existing `analyzeError` flow.

**Files:**

| File | Change |
|------|--------|
| `extension/src/codeLensProvider.ts` | **NEW** — CodeLensProvider class |
| `extension/src/extension.ts` | Register the provider on activation |
| `extension/package.json` | Add `codeLens` contribution point + activation events |

**Dependencies:** None — fully independent. Reuses existing `analyzeError` flow.

---

## Workstream 3: Error Panel Polish (Existing Feature)

**Problem:** The Error Panel is the first thing users see when an error fires, but it hasn't gotten the ADHD-friendly treatment. It's still a wall of text — long paragraphs, no progressive disclosure, no visual hierarchy matching the diff panel. The quiz exists but feels disconnected.

**Solution:** Apply the same redesign principles we shipped on the Diff Panel:

- Chunked sections with descriptive headings
- Progressive disclosure (`<details>/<summary>`) for longer content
- Plain language labels (6th-8th grade reading level)
- Consistent icon + heading pattern per section
- Better quiz interaction and visual feedback
- Skip link, ARIA landmarks, keyboard navigation
- `prefers-reduced-motion` support
- 36px+ touch targets

**Files:**

| File | Change |
|------|--------|
| `extension/src/webview/error.html` | Restructure HTML with progressive disclosure, ARIA, skip links |
| `extension/src/webview/styles.css` | Add/update styles (reuse `vd-disclosure`, `vd-section` patterns) |
| `extension/src/panels/ErrorPanel.ts` | Update message passing if section structure changes |

**Dependencies:** Shares `error.html` with Workstream 1. Coordinate on the prompts section placement.

---

## Coordination Notes

- **Workstream 2 is fully independent** — can be done by anyone without blocking.
- **Workstreams 1 & 3 both touch `error.html`** — either assign to the same person, or have Workstream 3 go first (structure), then Workstream 1 adds the reverse prompt card into the new structure.
- **Recommended order if sequential:** 3 → 1 → 2 (or 2 in parallel with 3 → 1).

## Summary

| # | Workstream | Type | Key Deliverable | Owner |
|---|-----------|------|-----------------|-------|
| 1 | Reverse Prompt Generator | New feature | Expert-level prompt generated from error context, copyable | TBD |
| 2 | Inline CodeLens | New feature | "Explain" button at error line in editor | TBD |
| 3 | Error Panel Polish | Existing feature | ADHD-friendly redesign matching Diff Panel | TBD |
